function ax(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function e_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ah={exports:{}},fl={},Rh={exports:{}},Ue={};var Kg;function lx(){if(Kg)return Ue;Kg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function k(S){return S===null||typeof S!="object"?null:(S=T&&S[T]||S["@@iterator"],typeof S=="function"?S:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,H={};function M(S,W,de){this.props=S,this.context=W,this.refs=H,this.updater=de||L}M.prototype.isReactComponent={},M.prototype.setState=function(S,W){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,W,"setState")},M.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function le(){}le.prototype=M.prototype;function ee(S,W,de){this.props=S,this.context=W,this.refs=H,this.updater=de||L}var ie=ee.prototype=new le;ie.constructor=ee,Q(ie,M.prototype),ie.isPureReactComponent=!0;var Te=Array.isArray,Pe=Object.prototype.hasOwnProperty,ge={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function I(S,W,de){var we,Ee={},Be=null,Le=null;if(W!=null)for(we in W.ref!==void 0&&(Le=W.ref),W.key!==void 0&&(Be=""+W.key),W)Pe.call(W,we)&&!P.hasOwnProperty(we)&&(Ee[we]=W[we]);var Ge=arguments.length-2;if(Ge===1)Ee.children=de;else if(1<Ge){for(var je=Array(Ge),mt=0;mt<Ge;mt++)je[mt]=arguments[mt+2];Ee.children=je}if(S&&S.defaultProps)for(we in Ge=S.defaultProps,Ge)Ee[we]===void 0&&(Ee[we]=Ge[we]);return{$$typeof:n,type:S,key:Be,ref:Le,props:Ee,_owner:ge.current}}function A(S,W){return{$$typeof:n,type:S.type,key:W,ref:S.ref,props:S.props,_owner:S._owner}}function O(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function D(S){var W={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(de){return W[de]})}var j=/\/+/g;function C(S,W){return typeof S=="object"&&S!==null&&S.key!=null?D(""+S.key):W.toString(36)}function et(S,W,de,we,Ee){var Be=typeof S;(Be==="undefined"||Be==="boolean")&&(S=null);var Le=!1;if(S===null)Le=!0;else switch(Be){case"string":case"number":Le=!0;break;case"object":switch(S.$$typeof){case n:case e:Le=!0}}if(Le)return Le=S,Ee=Ee(Le),S=we===""?"."+C(Le,0):we,Te(Ee)?(de="",S!=null&&(de=S.replace(j,"$&/")+"/"),et(Ee,W,de,"",function(mt){return mt})):Ee!=null&&(O(Ee)&&(Ee=A(Ee,de+(!Ee.key||Le&&Le.key===Ee.key?"":(""+Ee.key).replace(j,"$&/")+"/")+S)),W.push(Ee)),1;if(Le=0,we=we===""?".":we+":",Te(S))for(var Ge=0;Ge<S.length;Ge++){Be=S[Ge];var je=we+C(Be,Ge);Le+=et(Be,W,de,je,Ee)}else if(je=k(S),typeof je=="function")for(S=je.call(S),Ge=0;!(Be=S.next()).done;)Be=Be.value,je=we+C(Be,Ge++),Le+=et(Be,W,de,je,Ee);else if(Be==="object")throw W=String(S),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Le}function ft(S,W,de){if(S==null)return S;var we=[],Ee=0;return et(S,we,"","",function(Be){return W.call(de,Be,Ee++)}),we}function Ct(S){if(S._status===-1){var W=S._result;W=W(),W.then(function(de){(S._status===0||S._status===-1)&&(S._status=1,S._result=de)},function(de){(S._status===0||S._status===-1)&&(S._status=2,S._result=de)}),S._status===-1&&(S._status=0,S._result=W)}if(S._status===1)return S._result.default;throw S._result}var nt={current:null},oe={transition:null},K={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ge};return Ue.Children={map:ft,forEach:function(S,W,de){ft(S,function(){W.apply(this,arguments)},de)},count:function(S){var W=0;return ft(S,function(){W++}),W},toArray:function(S){return ft(S,function(W){return W})||[]},only:function(S){if(!O(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Ue.Component=M,Ue.Fragment=t,Ue.Profiler=o,Ue.PureComponent=ee,Ue.StrictMode=s,Ue.Suspense=f,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K,Ue.cloneElement=function(S,W,de){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var we=Q({},S.props),Ee=S.key,Be=S.ref,Le=S._owner;if(W!=null){if(W.ref!==void 0&&(Be=W.ref,Le=ge.current),W.key!==void 0&&(Ee=""+W.key),S.type&&S.type.defaultProps)var Ge=S.type.defaultProps;for(je in W)Pe.call(W,je)&&!P.hasOwnProperty(je)&&(we[je]=W[je]===void 0&&Ge!==void 0?Ge[je]:W[je])}var je=arguments.length-2;if(je===1)we.children=de;else if(1<je){Ge=Array(je);for(var mt=0;mt<je;mt++)Ge[mt]=arguments[mt+2];we.children=Ge}return{$$typeof:n,type:S.type,key:Ee,ref:Be,props:we,_owner:Le}},Ue.createContext=function(S){return S={$$typeof:c,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:l,_context:S},S.Consumer=S},Ue.createElement=I,Ue.createFactory=function(S){var W=I.bind(null,S);return W.type=S,W},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(S){return{$$typeof:p,render:S}},Ue.isValidElement=O,Ue.lazy=function(S){return{$$typeof:E,_payload:{_status:-1,_result:S},_init:Ct}},Ue.memo=function(S,W){return{$$typeof:v,type:S,compare:W===void 0?null:W}},Ue.startTransition=function(S){var W=oe.transition;oe.transition={};try{S()}finally{oe.transition=W}},Ue.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ue.useCallback=function(S,W){return nt.current.useCallback(S,W)},Ue.useContext=function(S){return nt.current.useContext(S)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(S){return nt.current.useDeferredValue(S)},Ue.useEffect=function(S,W){return nt.current.useEffect(S,W)},Ue.useId=function(){return nt.current.useId()},Ue.useImperativeHandle=function(S,W,de){return nt.current.useImperativeHandle(S,W,de)},Ue.useInsertionEffect=function(S,W){return nt.current.useInsertionEffect(S,W)},Ue.useLayoutEffect=function(S,W){return nt.current.useLayoutEffect(S,W)},Ue.useMemo=function(S,W){return nt.current.useMemo(S,W)},Ue.useReducer=function(S,W,de){return nt.current.useReducer(S,W,de)},Ue.useRef=function(S){return nt.current.useRef(S)},Ue.useState=function(S){return nt.current.useState(S)},Ue.useSyncExternalStore=function(S,W,de){return nt.current.useSyncExternalStore(S,W,de)},Ue.useTransition=function(){return nt.current.useTransition()},Ue.version="18.2.0",Ue}var Qg;function Df(){return Qg||(Qg=1,Rh.exports=lx()),Rh.exports}var Yg;function ux(){if(Yg)return fl;Yg=1;var n=Df(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(p,f,v){var E,T={},k=null,L=null;v!==void 0&&(k=""+v),f.key!==void 0&&(k=""+f.key),f.ref!==void 0&&(L=f.ref);for(E in f)s.call(f,E)&&!l.hasOwnProperty(E)&&(T[E]=f[E]);if(p&&p.defaultProps)for(E in f=p.defaultProps,f)T[E]===void 0&&(T[E]=f[E]);return{$$typeof:e,type:p,key:k,ref:L,props:T,_owner:o.current}}return fl.Fragment=t,fl.jsx=c,fl.jsxs=c,fl}var Xg;function cx(){return Xg||(Xg=1,Ah.exports=ux()),Ah.exports}var y=cx(),F=Df();const Xr=e_(F),dx=ax({__proto__:null,default:Xr},[F]);var Qu={},Ph={exports:{}},Pn={},Nh={exports:{}},Dh={};var Jg;function hx(){return Jg||(Jg=1,(function(n){function e(oe,K){var S=oe.length;oe.push(K);e:for(;0<S;){var W=S-1>>>1,de=oe[W];if(0<o(de,K))oe[W]=K,oe[S]=de,S=W;else break e}}function t(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var K=oe[0],S=oe.pop();if(S!==K){oe[0]=S;e:for(var W=0,de=oe.length,we=de>>>1;W<we;){var Ee=2*(W+1)-1,Be=oe[Ee],Le=Ee+1,Ge=oe[Le];if(0>o(Be,S))Le<de&&0>o(Ge,Be)?(oe[W]=Ge,oe[Le]=S,W=Le):(oe[W]=Be,oe[Ee]=S,W=Ee);else if(Le<de&&0>o(Ge,S))oe[W]=Ge,oe[Le]=S,W=Le;else break e}}return K}function o(oe,K){var S=oe.sortIndex-K.sortIndex;return S!==0?S:oe.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,p=c.now();n.unstable_now=function(){return c.now()-p}}var f=[],v=[],E=1,T=null,k=3,L=!1,Q=!1,H=!1,M=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(oe){for(var K=t(v);K!==null;){if(K.callback===null)s(v);else if(K.startTime<=oe)s(v),K.sortIndex=K.expirationTime,e(f,K);else break;K=t(v)}}function Te(oe){if(H=!1,ie(oe),!Q)if(t(f)!==null)Q=!0,Ct(Pe);else{var K=t(v);K!==null&&nt(Te,K.startTime-oe)}}function Pe(oe,K){Q=!1,H&&(H=!1,le(I),I=-1),L=!0;var S=k;try{for(ie(K),T=t(f);T!==null&&(!(T.expirationTime>K)||oe&&!D());){var W=T.callback;if(typeof W=="function"){T.callback=null,k=T.priorityLevel;var de=W(T.expirationTime<=K);K=n.unstable_now(),typeof de=="function"?T.callback=de:T===t(f)&&s(f),ie(K)}else s(f);T=t(f)}if(T!==null)var we=!0;else{var Ee=t(v);Ee!==null&&nt(Te,Ee.startTime-K),we=!1}return we}finally{T=null,k=S,L=!1}}var ge=!1,P=null,I=-1,A=5,O=-1;function D(){return!(n.unstable_now()-O<A)}function j(){if(P!==null){var oe=n.unstable_now();O=oe;var K=!0;try{K=P(!0,oe)}finally{K?C():(ge=!1,P=null)}}else ge=!1}var C;if(typeof ee=="function")C=function(){ee(j)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,ft=et.port2;et.port1.onmessage=j,C=function(){ft.postMessage(null)}}else C=function(){M(j,0)};function Ct(oe){P=oe,ge||(ge=!0,C())}function nt(oe,K){I=M(function(){oe(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){Q||L||(Q=!0,Ct(Pe))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return k},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(oe){switch(k){case 1:case 2:case 3:var K=3;break;default:K=k}var S=k;k=K;try{return oe()}finally{k=S}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,K){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var S=k;k=oe;try{return K()}finally{k=S}},n.unstable_scheduleCallback=function(oe,K,S){var W=n.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?W+S:W):S=W,oe){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=S+de,oe={id:E++,callback:K,priorityLevel:oe,startTime:S,expirationTime:de,sortIndex:-1},S>W?(oe.sortIndex=S,e(v,oe),t(f)===null&&oe===t(v)&&(H?(le(I),I=-1):H=!0,nt(Te,S-W))):(oe.sortIndex=de,e(f,oe),Q||L||(Q=!0,Ct(Pe))),oe},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(oe){var K=k;return function(){var S=k;k=K;try{return oe.apply(this,arguments)}finally{k=S}}}})(Dh)),Dh}var Zg;function fx(){return Zg||(Zg=1,Nh.exports=hx()),Nh.exports}var ey;function px(){if(ey)return Pn;ey=1;var n=Df(),e=fx();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function k(r){return f.call(T,r)?!0:f.call(E,r)?!1:v.test(r)?T[r]=!0:(E[r]=!0,!1)}function L(r,i,a,d){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Q(r,i,a,d){if(i===null||typeof i>"u"||L(r,i,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function H(r,i,a,d,h,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){M[r]=new H(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];M[i]=new H(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){M[r]=new H(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){M[r]=new H(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){M[r]=new H(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){M[r]=new H(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){M[r]=new H(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){M[r]=new H(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){M[r]=new H(r,5,!1,r.toLowerCase(),null,!1,!1)});var le=/[\-:]([a-z])/g;function ee(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(le,ee);M[i]=new H(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(le,ee);M[i]=new H(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(le,ee);M[i]=new H(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){M[r]=new H(r,1,!1,r.toLowerCase(),null,!1,!1)}),M.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){M[r]=new H(r,1,!1,r.toLowerCase(),null,!0,!0)});function ie(r,i,a,d){var h=M.hasOwnProperty(i)?M[i]:null;(h!==null?h.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Q(i,a,h,d)&&(a=null),d||h===null?k(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):h.mustUseProperty?r[h.propertyName]=a===null?h.type===3?!1:"":a:(i=h.attributeName,d=h.attributeNamespace,a===null?r.removeAttribute(i):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,d?r.setAttributeNS(d,i,a):r.setAttribute(i,a))))}var Te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pe=Symbol.for("react.element"),ge=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),D=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),ft=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),nt=Symbol.for("react.offscreen"),oe=Symbol.iterator;function K(r){return r===null||typeof r!="object"?null:(r=oe&&r[oe]||r["@@iterator"],typeof r=="function"?r:null)}var S=Object.assign,W;function de(r){if(W===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);W=i&&i[1]||""}return`
`+W+r}var we=!1;function Ee(r,i){if(!r||we)return"";we=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var d=$}Reflect.construct(r,[],i)}else{try{i.call()}catch($){d=$}r.call(i.prototype)}else{try{throw Error()}catch($){d=$}r()}}catch($){if($&&d&&typeof $.stack=="string"){for(var h=$.stack.split(`
`),m=d.stack.split(`
`),w=h.length-1,b=m.length-1;1<=w&&0<=b&&h[w]!==m[b];)b--;for(;1<=w&&0<=b;w--,b--)if(h[w]!==m[b]){if(w!==1||b!==1)do if(w--,b--,0>b||h[w]!==m[b]){var N=`
`+h[w].replace(" at new "," at ");return r.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",r.displayName)),N}while(1<=w&&0<=b);break}}}finally{we=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?de(r):""}function Be(r){switch(r.tag){case 5:return de(r.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return r=Ee(r.type,!1),r;case 11:return r=Ee(r.type.render,!1),r;case 1:return r=Ee(r.type,!0),r;default:return""}}function Le(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case ge:return"Portal";case A:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case et:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case D:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case j:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ft:return i=r.displayName||null,i!==null?i:Le(r.type)||"Memo";case Ct:i=r._payload,r=r._init;try{return Le(r(i))}catch{}}return null}function Ge(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function je(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function mt(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zi(r){var i=mt(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),d=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,m=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(w){d=""+w,m.call(this,w)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Hs(r){r._valueTracker||(r._valueTracker=zi(r))}function Ws(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),d="";return r&&(d=mt(r)?r.checked?"true":"false":r.value),r=d,r!==a?(i.setValue(r),!0):!1}function xt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Dn(r,i){var a=i.checked;return S({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Rr(r,i){var a=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;a=je(i.value!=null?i.value:a),r._wrapperState={initialChecked:d,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function fn(r,i){i=i.checked,i!=null&&ie(r,"checked",i,!1)}function tn(r,i){fn(r,i);var a=je(i.value),d=i.type;if(a!=null)d==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?gt(r,i.type,a):i.hasOwnProperty("defaultValue")&&gt(r,i.type,je(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function as(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function gt(r,i,a){(i!=="number"||xt(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var lt=Array.isArray;function He(r,i,a,d){if(r=r.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<r.length;a++)h=i.hasOwnProperty("$"+r[a].value),r[a].selected!==h&&(r[a].selected=h),h&&d&&(r[a].defaultSelected=!0)}else{for(a=""+je(a),i=null,h=0;h<r.length;h++){if(r[h].value===a){r[h].selected=!0,d&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function ls(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return S({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Pr(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(lt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:je(a)}}function $i(r,i){var a=je(i.value),d=je(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),d!=null&&(r.defaultValue=""+d)}function Ye(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Gs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function On(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Gs(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Yn,Vn=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,d,h){MSApp.execUnsafeLocalFunction(function(){return r(i,a,d,h)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Yn=Yn||document.createElement("div"),Yn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Yn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Dt(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var mr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ot=["Webkit","ms","Moz","O"];Object.keys(mr).forEach(function(r){Ot.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),mr[i]=mr[r]})});function pn(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||mr.hasOwnProperty(r)&&mr[r]?(""+i).trim():i+"px"}function gr(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var d=a.indexOf("--")===0,h=pn(a,i[a],d);a==="float"&&(a="cssFloat"),d?r.setProperty(a,h):r[a]=h}}var us=S({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mn(r,i){if(i){if(us[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function cs(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ln=null;function jn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Mn=null,xn=null,it=null;function Ks(r){if(r=Ja(r)){if(typeof Mn!="function")throw Error(t(280));var i=r.stateNode;i&&(i=cu(i),Mn(r.stateNode,r.type,i))}}function Xn(r){xn?it?it.push(r):it=[r]:xn=r}function Fn(){if(xn){var r=xn,i=it;if(it=xn=null,Ks(r),i)for(r=0;r<i.length;r++)Ks(i[r])}}function ds(r,i){return r(i)}function Vo(){}var Tn=!1;function Qs(r,i,a){if(Tn)return r(i,a);Tn=!0;try{return ds(r,i,a)}finally{Tn=!1,(xn!==null||it!==null)&&(Vo(),Fn())}}function Nr(r,i){var a=r.stateNode;if(a===null)return null;var d=cu(a);if(d===null)return null;a=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Dr=!1;if(p)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Dr=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Dr=!1}function qi(r,i,a,d,h,m,w,b,N){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(Z){this.onError(Z)}}var Un=!1,Bn=null,Vt=!1,In=null,Hi={onError:function(r){Un=!0,Bn=r}};function Wi(r,i,a,d,h,m,w,b,N){Un=!1,Bn=null,qi.apply(Hi,arguments)}function bn(r,i,a,d,h,m,w,b,N){if(Wi.apply(this,arguments),Un){if(Un){var $=Bn;Un=!1,Bn=null}else throw Error(t(198));Vt||(Vt=!0,In=$)}}function Ht(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function Vr(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Gi(r){if(Ht(r)!==r)throw Error(t(188))}function Ys(r){var i=r.alternate;if(!i){if(i=Ht(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,d=i;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(d=h.return,d!==null){a=d;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return Gi(h),r;if(m===d)return Gi(h),i;m=m.sibling}throw Error(t(188))}if(a.return!==d.return)a=h,d=m;else{for(var w=!1,b=h.child;b;){if(b===a){w=!0,a=h,d=m;break}if(b===d){w=!0,d=h,a=m;break}b=b.sibling}if(!w){for(b=m.child;b;){if(b===a){w=!0,a=m,d=h;break}if(b===d){w=!0,d=m,a=h;break}b=b.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function Ki(r){return r=Ys(r),r!==null?Lr(r):null}function Lr(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Lr(r);if(i!==null)return i;r=r.sibling}return null}var Xs=e.unstable_scheduleCallback,jr=e.unstable_cancelCallback,hs=e.unstable_shouldYield,Jn=e.unstable_requestPaint,rt=e.unstable_now,fs=e.unstable_getCurrentPriorityLevel,Zn=e.unstable_ImmediatePriority,Qi=e.unstable_UserBlockingPriority,ps=e.unstable_NormalPriority,Yi=e.unstable_LowPriority,Js=e.unstable_IdlePriority,ms=null,gn=null;function Lo(r){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(ms,r,void 0,(r.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:gs,Wt=Math.log,vn=Math.LN2;function gs(r){return r>>>=0,r===0?32:31-(Wt(r)/vn|0)|0}var er=64,Mr=4194304;function Ke(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function tr(r,i){var a=r.pendingLanes;if(a===0)return 0;var d=0,h=r.suspendedLanes,m=r.pingedLanes,w=a&268435455;if(w!==0){var b=w&~h;b!==0?d=Ke(b):(m&=w,m!==0&&(d=Ke(m)))}else w=a&~h,w!==0?d=Ke(w):m!==0&&(d=Ke(m));if(d===0)return 0;if(i!==0&&i!==d&&(i&h)===0&&(h=d&-d,m=i&-i,h>=m||h===16&&(m&4194240)!==0))return i;if((d&4)!==0&&(d|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=d;0<i;)a=31-yn(i),h=1<<a,d|=r[a],i&=~h;return d}function Fr(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(r,i){for(var a=r.suspendedLanes,d=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes;0<m;){var w=31-yn(m),b=1<<w,N=h[w];N===-1?((b&a)===0||(b&d)!==0)&&(h[w]=Fr(b,i)):N<=i&&(r.expiredLanes|=b),m&=~b}}function Xi(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function yr(){var r=er;return er<<=1,(er&4194240)===0&&(er=64),r}function vs(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function _s(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-yn(i),r[i]=a}function Ji(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<a;){var h=31-yn(a),m=1<<h;i[h]=0,d[h]=-1,r[h]=-1,a&=~m}}function ws(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var d=31-yn(a),h=1<<d;h&i|r[d]&i&&(r[d]|=i),a&=~h}}var Fe=0;function nr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Es,Ur,Zs,nn,xs,rr=!1,ei=[],sr=null,R=null,G=null,X=new Map,ue=new Map,ae=[],xe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ve(r,i){switch(r){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":R=null;break;case"mouseover":case"mouseout":G=null;break;case"pointerover":case"pointerout":X.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ue.delete(i.pointerId)}}function Se(r,i,a,d,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:d,nativeEvent:m,targetContainers:[h]},i!==null&&(i=Ja(i),i!==null&&Ur(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function Je(r,i,a,d,h){switch(i){case"focusin":return sr=Se(sr,r,i,a,d,h),!0;case"dragenter":return R=Se(R,r,i,a,d,h),!0;case"mouseover":return G=Se(G,r,i,a,d,h),!0;case"pointerover":var m=h.pointerId;return X.set(m,Se(X.get(m)||null,r,i,a,d,h)),!0;case"gotpointercapture":return m=h.pointerId,ue.set(m,Se(ue.get(m)||null,r,i,a,d,h)),!0}return!1}function ut(r){var i=no(r.target);if(i!==null){var a=Ht(i);if(a!==null){if(i=a.tag,i===13){if(i=Vr(a),i!==null){r.blockedOn=i,xs(r.priority,function(){Zs(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function De(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=jo(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var d=new a.constructor(a.type,a);Ln=d,a.target.dispatchEvent(d),Ln=null}else return i=Ja(a),i!==null&&Ur(i),r.blockedOn=a,!1;i.shift()}return!0}function vr(r,i,a){De(r)&&a.delete(i)}function ti(){rr=!1,sr!==null&&De(sr)&&(sr=null),R!==null&&De(R)&&(R=null),G!==null&&De(G)&&(G=null),X.forEach(vr),ue.forEach(vr)}function Ze(r,i){r.blockedOn===i&&(r.blockedOn=null,rr||(rr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ti)))}function ot(r){function i(h){return Ze(h,r)}if(0<ei.length){Ze(ei[0],r);for(var a=1;a<ei.length;a++){var d=ei[a];d.blockedOn===r&&(d.blockedOn=null)}}for(sr!==null&&Ze(sr,r),R!==null&&Ze(R,r),G!==null&&Ze(G,r),X.forEach(i),ue.forEach(i),a=0;a<ae.length;a++)d=ae[a],d.blockedOn===r&&(d.blockedOn=null);for(;0<ae.length&&(a=ae[0],a.blockedOn===null);)ut(a),a.blockedOn===null&&ae.shift()}var Gt=Te.ReactCurrentBatchConfig,Ts=!0;function Br(r,i,a,d){var h=Fe,m=Gt.transition;Gt.transition=null;try{Fe=1,Fa(r,i,a,d)}finally{Fe=h,Gt.transition=m}}function Xl(r,i,a,d){var h=Fe,m=Gt.transition;Gt.transition=null;try{Fe=4,Fa(r,i,a,d)}finally{Fe=h,Gt.transition=m}}function Fa(r,i,a,d){if(Ts){var h=jo(r,i,a,d);if(h===null)_d(r,i,d,zr,a),ve(r,d);else if(Je(h,r,i,a,d))d.stopPropagation();else if(ve(r,d),i&4&&-1<xe.indexOf(r)){for(;h!==null;){var m=Ja(h);if(m!==null&&Es(m),m=jo(r,i,a,d),m===null&&_d(r,i,d,zr,a),m===h)break;h=m}h!==null&&d.stopPropagation()}else _d(r,i,d,null,a)}}var zr=null;function jo(r,i,a,d){if(zr=null,r=jn(d),r=no(r),r!==null)if(i=Ht(r),i===null)r=null;else if(a=i.tag,a===13){if(r=Vr(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return zr=r,null}function Mo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fs()){case Zn:return 1;case Qi:return 4;case ps:case Yi:return 16;case Js:return 536870912;default:return 16}default:return 16}}var zn=null,Fo=null,Is=null;function Jl(){if(Is)return Is;var r,i=Fo,a=i.length,d,h="value"in zn?zn.value:zn.textContent,m=h.length;for(r=0;r<a&&i[r]===h[r];r++);var w=a-r;for(d=1;d<=w&&i[a-d]===h[m-d];d++);return Is=h.slice(r,1<d?1-d:void 0)}function Zi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function $r(){return!0}function Ua(){return!1}function rn(r){function i(a,d,h,m,w){this._reactName=a,this._targetInst=h,this.type=d,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(a=r[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?$r:Ua,this.isPropagationStopped=Ua,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),i}var qr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=rn(qr),ni=S({},qr,{view:0,detail:0}),Uo=rn(ni),Bo,zo,$n,to=S({},ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oe,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==$n&&($n&&r.type==="mousemove"?(Bo=r.screenX-$n.screenX,zo=r.screenY-$n.screenY):zo=Bo=0,$n=r),Bo)},movementY:function(r){return"movementY"in r?r.movementY:zo}}),Ba=rn(to),Zl=S({},to,{dataTransfer:0}),eu=rn(Zl),$o=S({},ni,{relatedTarget:0}),Kt=rn($o),tu=S({},qr,{animationName:0,elapsedTime:0,pseudoElement:0}),nu=rn(tu),ri=S({},qr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=rn(ri),g=S({},qr,{data:0}),_=rn(g),x={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=q[r])?!!i[r]:!1}function Oe(){return se}var Tt=S({},ni,{key:function(r){if(r.key){var i=x[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Zi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oe,charCode:function(r){return r.type==="keypress"?Zi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Zi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),st=rn(Tt),At=S({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qn=rn(At),bs=S({},ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oe}),Hr=rn(bs),Wr=S({},qr,{propertyName:0,elapsedTime:0,pseudoElement:0}),qo=rn(Wr),za=S({},to,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),tE=rn(za),nE=[9,13,27,32],ud=p&&"CompositionEvent"in window,$a=null;p&&"documentMode"in document&&($a=document.documentMode);var rE=p&&"TextEvent"in window&&!$a,Fp=p&&(!ud||$a&&8<$a&&11>=$a),Up=" ",Bp=!1;function zp(r,i){switch(r){case"keyup":return nE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ho=!1;function sE(r,i){switch(r){case"compositionend":return $p(i);case"keypress":return i.which!==32?null:(Bp=!0,Up);case"textInput":return r=i.data,r===Up&&Bp?null:r;default:return null}}function iE(r,i){if(Ho)return r==="compositionend"||!ud&&zp(r,i)?(r=Jl(),Is=Fo=zn=null,Ho=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fp&&i.locale!=="ko"?null:i.data;default:return null}}var oE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!oE[r.type]:i==="textarea"}function Hp(r,i,a,d){Xn(d),i=au(i,"onChange"),0<i.length&&(a=new eo("onChange","change",null,a,d),r.push({event:a,listeners:i}))}var qa=null,Ha=null;function aE(r){um(r,0)}function ru(r){var i=Yo(r);if(Ws(i))return r}function lE(r,i){if(r==="change")return i}var Wp=!1;if(p){var cd;if(p){var dd="oninput"in document;if(!dd){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),dd=typeof Gp.oninput=="function"}cd=dd}else cd=!1;Wp=cd&&(!document.documentMode||9<document.documentMode)}function Kp(){qa&&(qa.detachEvent("onpropertychange",Qp),Ha=qa=null)}function Qp(r){if(r.propertyName==="value"&&ru(Ha)){var i=[];Hp(i,Ha,r,jn(r)),Qs(aE,i)}}function uE(r,i,a){r==="focusin"?(Kp(),qa=i,Ha=a,qa.attachEvent("onpropertychange",Qp)):r==="focusout"&&Kp()}function cE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ru(Ha)}function dE(r,i){if(r==="click")return ru(i)}function hE(r,i){if(r==="input"||r==="change")return ru(i)}function fE(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var _r=typeof Object.is=="function"?Object.is:fE;function Wa(r,i){if(_r(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),d=Object.keys(i);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var h=a[d];if(!f.call(i,h)||!_r(r[h],i[h]))return!1}return!0}function Yp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xp(r,i){var a=Yp(r);r=0;for(var d;a;){if(a.nodeType===3){if(d=r+a.textContent.length,r<=i&&d>=i)return{node:a,offset:i-r};r=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yp(a)}}function Jp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Jp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Zp(){for(var r=window,i=xt();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=xt(r.document)}return i}function hd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function pE(r){var i=Zp(),a=r.focusedElem,d=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&Jp(a.ownerDocument.documentElement,a)){if(d!==null&&hd(a)){if(i=d.start,r=d.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var h=a.textContent.length,m=Math.min(d.start,h);d=d.end===void 0?m:Math.min(d.end,h),!r.extend&&m>d&&(h=d,d=m,m=h),h=Xp(a,m);var w=Xp(a,d);h&&w&&(r.rangeCount!==1||r.anchorNode!==h.node||r.anchorOffset!==h.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),r.removeAllRanges(),m>d?(r.addRange(i),r.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var mE=p&&"documentMode"in document&&11>=document.documentMode,Wo=null,fd=null,Ga=null,pd=!1;function em(r,i,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;pd||Wo==null||Wo!==xt(d)||(d=Wo,"selectionStart"in d&&hd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ga&&Wa(Ga,d)||(Ga=d,d=au(fd,"onSelect"),0<d.length&&(i=new eo("onSelect","select",null,i,a),r.push({event:i,listeners:d}),i.target=Wo)))}function su(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var Go={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},md={},tm={};p&&(tm=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function iu(r){if(md[r])return md[r];if(!Go[r])return r;var i=Go[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in tm)return md[r]=i[a];return r}var nm=iu("animationend"),rm=iu("animationiteration"),sm=iu("animationstart"),im=iu("transitionend"),om=new Map,am="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(r,i){om.set(r,i),l(i,[r])}for(var gd=0;gd<am.length;gd++){var yd=am[gd],gE=yd.toLowerCase(),yE=yd[0].toUpperCase()+yd.slice(1);si(gE,"on"+yE)}si(nm,"onAnimationEnd"),si(rm,"onAnimationIteration"),si(sm,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si(im,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ka));function lm(r,i,a){var d=r.type||"unknown-event";r.currentTarget=a,bn(d,i,void 0,r),r.currentTarget=null}function um(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var d=r[a],h=d.event;d=d.listeners;e:{var m=void 0;if(i)for(var w=d.length-1;0<=w;w--){var b=d[w],N=b.instance,$=b.currentTarget;if(b=b.listener,N!==m&&h.isPropagationStopped())break e;lm(h,b,$),m=N}else for(w=0;w<d.length;w++){if(b=d[w],N=b.instance,$=b.currentTarget,b=b.listener,N!==m&&h.isPropagationStopped())break e;lm(h,b,$),m=N}}}if(Vt)throw r=In,Vt=!1,In=null,r}function ct(r,i){var a=i[bd];a===void 0&&(a=i[bd]=new Set);var d=r+"__bubble";a.has(d)||(cm(i,r,2,!1),a.add(d))}function vd(r,i,a){var d=0;i&&(d|=4),cm(a,r,d,i)}var ou="_reactListening"+Math.random().toString(36).slice(2);function Qa(r){if(!r[ou]){r[ou]=!0,s.forEach(function(a){a!=="selectionchange"&&(vE.has(a)||vd(a,!1,r),vd(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[ou]||(i[ou]=!0,vd("selectionchange",!1,i))}}function cm(r,i,a,d){switch(Mo(i)){case 1:var h=Br;break;case 4:h=Xl;break;default:h=Fa}a=h.bind(null,i,a,r),h=void 0,!Dr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),d?h!==void 0?r.addEventListener(i,a,{capture:!0,passive:h}):r.addEventListener(i,a,!0):h!==void 0?r.addEventListener(i,a,{passive:h}):r.addEventListener(i,a,!1)}function _d(r,i,a,d,h){var m=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var b=d.stateNode.containerInfo;if(b===h||b.nodeType===8&&b.parentNode===h)break;if(w===4)for(w=d.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===h||N.nodeType===8&&N.parentNode===h))return;w=w.return}for(;b!==null;){if(w=no(b),w===null)return;if(N=w.tag,N===5||N===6){d=m=w;continue e}b=b.parentNode}}d=d.return}Qs(function(){var $=m,Z=jn(a),ne=[];e:{var J=om.get(r);if(J!==void 0){var ce=eo,pe=r;switch(r){case"keypress":if(Zi(a)===0)break e;case"keydown":case"keyup":ce=st;break;case"focusin":pe="focus",ce=Kt;break;case"focusout":pe="blur",ce=Kt;break;case"beforeblur":case"afterblur":ce=Kt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Hr;break;case nm:case rm:case sm:ce=nu;break;case im:ce=qo;break;case"scroll":ce=Uo;break;case"wheel":ce=tE;break;case"copy":case"cut":case"paste":ce=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=qn}var me=(i&4)!==0,It=!me&&r==="scroll",U=me?J!==null?J+"Capture":null:J;me=[];for(var V=$,z;V!==null;){z=V;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,U!==null&&(re=Nr(V,U),re!=null&&me.push(Ya(V,re,z)))),It)break;V=V.return}0<me.length&&(J=new ce(J,pe,null,a,Z),ne.push({event:J,listeners:me}))}}if((i&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ce=r==="mouseout"||r==="pointerout",J&&a!==Ln&&(pe=a.relatedTarget||a.fromElement)&&(no(pe)||pe[ks]))break e;if((ce||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,ce?(pe=a.relatedTarget||a.toElement,ce=$,pe=pe?no(pe):null,pe!==null&&(It=Ht(pe),pe!==It||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ce=null,pe=$),ce!==pe)){if(me=Ba,re="onMouseLeave",U="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(me=qn,re="onPointerLeave",U="onPointerEnter",V="pointer"),It=ce==null?J:Yo(ce),z=pe==null?J:Yo(pe),J=new me(re,V+"leave",ce,a,Z),J.target=It,J.relatedTarget=z,re=null,no(Z)===$&&(me=new me(U,V+"enter",pe,a,Z),me.target=z,me.relatedTarget=It,re=me),It=re,ce&&pe)t:{for(me=ce,U=pe,V=0,z=me;z;z=Ko(z))V++;for(z=0,re=U;re;re=Ko(re))z++;for(;0<V-z;)me=Ko(me),V--;for(;0<z-V;)U=Ko(U),z--;for(;V--;){if(me===U||U!==null&&me===U.alternate)break t;me=Ko(me),U=Ko(U)}me=null}else me=null;ce!==null&&dm(ne,J,ce,me,!1),pe!==null&&It!==null&&dm(ne,It,pe,me,!0)}}e:{if(J=$?Yo($):window,ce=J.nodeName&&J.nodeName.toLowerCase(),ce==="select"||ce==="input"&&J.type==="file")var ye=lE;else if(qp(J))if(Wp)ye=hE;else{ye=cE;var Ie=uE}else(ce=J.nodeName)&&ce.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(ye=dE);if(ye&&(ye=ye(r,$))){Hp(ne,ye,a,Z);break e}Ie&&Ie(r,J,$),r==="focusout"&&(Ie=J._wrapperState)&&Ie.controlled&&J.type==="number"&&gt(J,"number",J.value)}switch(Ie=$?Yo($):window,r){case"focusin":(qp(Ie)||Ie.contentEditable==="true")&&(Wo=Ie,fd=$,Ga=null);break;case"focusout":Ga=fd=Wo=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,em(ne,a,Z);break;case"selectionchange":if(mE)break;case"keydown":case"keyup":em(ne,a,Z)}var be;if(ud)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ho?zp(r,a)&&(Re="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(Fp&&a.locale!=="ko"&&(Ho||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ho&&(be=Jl()):(zn=Z,Fo="value"in zn?zn.value:zn.textContent,Ho=!0)),Ie=au($,Re),0<Ie.length&&(Re=new _(Re,r,null,a,Z),ne.push({event:Re,listeners:Ie}),be?Re.data=be:(be=$p(a),be!==null&&(Re.data=be)))),(be=rE?sE(r,a):iE(r,a))&&($=au($,"onBeforeInput"),0<$.length&&(Z=new _("onBeforeInput","beforeinput",null,a,Z),ne.push({event:Z,listeners:$}),Z.data=be))}um(ne,i)})}function Ya(r,i,a){return{instance:r,listener:i,currentTarget:a}}function au(r,i){for(var a=i+"Capture",d=[];r!==null;){var h=r,m=h.stateNode;h.tag===5&&m!==null&&(h=m,m=Nr(r,a),m!=null&&d.unshift(Ya(r,m,h)),m=Nr(r,i),m!=null&&d.push(Ya(r,m,h))),r=r.return}return d}function Ko(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function dm(r,i,a,d,h){for(var m=i._reactName,w=[];a!==null&&a!==d;){var b=a,N=b.alternate,$=b.stateNode;if(N!==null&&N===d)break;b.tag===5&&$!==null&&(b=$,h?(N=Nr(a,m),N!=null&&w.unshift(Ya(a,N,b))):h||(N=Nr(a,m),N!=null&&w.push(Ya(a,N,b)))),a=a.return}w.length!==0&&r.push({event:i,listeners:w})}var _E=/\r\n?/g,wE=/\u0000|\uFFFD/g;function hm(r){return(typeof r=="string"?r:""+r).replace(_E,`
`).replace(wE,"")}function lu(r,i,a){if(i=hm(i),hm(r)!==i&&a)throw Error(t(425))}function uu(){}var wd=null,Ed=null;function xd(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Td=typeof setTimeout=="function"?setTimeout:void 0,EE=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,xE=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(r){return fm.resolve(null).then(r).catch(TE)}:Td;function TE(r){setTimeout(function(){throw r})}function Id(r,i){var a=i,d=0;do{var h=a.nextSibling;if(r.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(d===0){r.removeChild(h),ot(i);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=h}while(a);ot(i)}function ii(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function pm(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var Qo=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Qo,Xa="__reactProps$"+Qo,ks="__reactContainer$"+Qo,bd="__reactEvents$"+Qo,IE="__reactListeners$"+Qo,bE="__reactHandles$"+Qo;function no(r){var i=r[Gr];if(i)return i;for(var a=r.parentNode;a;){if(i=a[ks]||a[Gr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=pm(r);r!==null;){if(a=r[Gr])return a;r=pm(r)}return i}r=a,a=r.parentNode}return null}function Ja(r){return r=r[Gr]||r[ks],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Yo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function cu(r){return r[Xa]||null}var kd=[],Xo=-1;function oi(r){return{current:r}}function dt(r){0>Xo||(r.current=kd[Xo],kd[Xo]=null,Xo--)}function at(r,i){Xo++,kd[Xo]=r.current,r.current=i}var ai={},sn=oi(ai),kn=oi(!1),ro=ai;function Jo(r,i){var a=r.type.contextTypes;if(!a)return ai;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var h={},m;for(m in a)h[m]=i[m];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=h),h}function Sn(r){return r=r.childContextTypes,r!=null}function du(){dt(kn),dt(sn)}function mm(r,i,a){if(sn.current!==ai)throw Error(t(168));at(sn,i),at(kn,a)}function gm(r,i,a){var d=r.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var h in d)if(!(h in i))throw Error(t(108,Ge(r)||"Unknown",h));return S({},a,d)}function hu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ai,ro=sn.current,at(sn,r),at(kn,kn.current),!0}function ym(r,i,a){var d=r.stateNode;if(!d)throw Error(t(169));a?(r=gm(r,i,ro),d.__reactInternalMemoizedMergedChildContext=r,dt(kn),dt(sn),at(sn,r)):dt(kn),at(kn,a)}var Ss=null,fu=!1,Sd=!1;function vm(r){Ss===null?Ss=[r]:Ss.push(r)}function kE(r){fu=!0,vm(r)}function li(){if(!Sd&&Ss!==null){Sd=!0;var r=0,i=Fe;try{var a=Ss;for(Fe=1;r<a.length;r++){var d=a[r];do d=d(!0);while(d!==null)}Ss=null,fu=!1}catch(h){throw Ss!==null&&(Ss=Ss.slice(r+1)),Xs(Zn,li),h}finally{Fe=i,Sd=!1}}return null}var Zo=[],ea=0,pu=null,mu=0,ir=[],or=0,so=null,Cs=1,As="";function io(r,i){Zo[ea++]=mu,Zo[ea++]=pu,pu=r,mu=i}function _m(r,i,a){ir[or++]=Cs,ir[or++]=As,ir[or++]=so,so=r;var d=Cs;r=As;var h=32-yn(d)-1;d&=~(1<<h),a+=1;var m=32-yn(i)+h;if(30<m){var w=h-h%5;m=(d&(1<<w)-1).toString(32),d>>=w,h-=w,Cs=1<<32-yn(i)+h|a<<h|d,As=m+r}else Cs=1<<m|a<<h|d,As=r}function Cd(r){r.return!==null&&(io(r,1),_m(r,1,0))}function Ad(r){for(;r===pu;)pu=Zo[--ea],Zo[ea]=null,mu=Zo[--ea],Zo[ea]=null;for(;r===so;)so=ir[--or],ir[or]=null,As=ir[--or],ir[or]=null,Cs=ir[--or],ir[or]=null}var Hn=null,Wn=null,pt=!1,wr=null;function wm(r,i){var a=cr(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function Em(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Hn=r,Wn=ii(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Hn=r,Wn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=so!==null?{id:Cs,overflow:As}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=cr(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,Hn=r,Wn=null,!0):!1;default:return!1}}function Rd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Pd(r){if(pt){var i=Wn;if(i){var a=i;if(!Em(r,i)){if(Rd(r))throw Error(t(418));i=ii(a.nextSibling);var d=Hn;i&&Em(r,i)?wm(d,a):(r.flags=r.flags&-4097|2,pt=!1,Hn=r)}}else{if(Rd(r))throw Error(t(418));r.flags=r.flags&-4097|2,pt=!1,Hn=r}}}function xm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Hn=r}function gu(r){if(r!==Hn)return!1;if(!pt)return xm(r),pt=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!xd(r.type,r.memoizedProps)),i&&(i=Wn)){if(Rd(r))throw Tm(),Error(t(418));for(;i;)wm(r,i),i=ii(i.nextSibling)}if(xm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){Wn=ii(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}Wn=null}}else Wn=Hn?ii(r.stateNode.nextSibling):null;return!0}function Tm(){for(var r=Wn;r;)r=ii(r.nextSibling)}function ta(){Wn=Hn=null,pt=!1}function Nd(r){wr===null?wr=[r]:wr.push(r)}var SE=Te.ReactCurrentBatchConfig;function Er(r,i){if(r&&r.defaultProps){i=S({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}var yu=oi(null),vu=null,na=null,Dd=null;function Od(){Dd=na=vu=null}function Vd(r){var i=yu.current;dt(yu),r._currentValue=i}function Ld(r,i,a){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===a)break;r=r.return}}function ra(r,i){vu=r,Dd=na=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(Cn=!0),r.firstContext=null)}function ar(r){var i=r._currentValue;if(Dd!==r)if(r={context:r,memoizedValue:i,next:null},na===null){if(vu===null)throw Error(t(308));na=r,vu.dependencies={lanes:0,firstContext:r}}else na=na.next=r;return i}var oo=null;function jd(r){oo===null?oo=[r]:oo.push(r)}function Im(r,i,a,d){var h=i.interleaved;return h===null?(a.next=a,jd(i)):(a.next=h.next,h.next=a),i.interleaved=a,Rs(r,d)}function Rs(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var ui=!1;function Md(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ps(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function ci(r,i,a){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Qe&2)!==0){var h=d.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),d.pending=i,Rs(r,a)}return h=d.interleaved,h===null?(i.next=i,jd(d)):(i.next=h.next,h.next=i),d.interleaved=i,Rs(r,a)}function _u(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var d=i.lanes;d&=r.pendingLanes,a|=d,i.lanes=a,ws(r,a)}}function km(r,i){var a=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?h=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?h=m=i:m=m.next=i}else h=m=i;a={baseState:d.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:d.shared,effects:d.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function wu(r,i,a,d){var h=r.updateQueue;ui=!1;var m=h.firstBaseUpdate,w=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,$=N.next;N.next=null,w===null?m=$:w.next=$,w=N;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==w&&(b===null?Z.firstBaseUpdate=$:b.next=$,Z.lastBaseUpdate=N))}if(m!==null){var ne=h.baseState;w=0,Z=$=N=null,b=m;do{var J=b.lane,ce=b.eventTime;if((d&J)===J){Z!==null&&(Z=Z.next={eventTime:ce,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var pe=r,me=b;switch(J=i,ce=a,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){ne=pe.call(ce,ne,J);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,J=typeof pe=="function"?pe.call(ce,ne,J):pe,J==null)break e;ne=S({},ne,J);break e;case 2:ui=!0}}b.callback!==null&&b.lane!==0&&(r.flags|=64,J=h.effects,J===null?h.effects=[b]:J.push(b))}else ce={eventTime:ce,lane:J,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?($=Z=ce,N=ne):Z=Z.next=ce,w|=J;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;J=b,b=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);if(Z===null&&(N=ne),h.baseState=N,h.firstBaseUpdate=$,h.lastBaseUpdate=Z,i=h.shared.interleaved,i!==null){h=i;do w|=h.lane,h=h.next;while(h!==i)}else m===null&&(h.shared.lanes=0);uo|=w,r.lanes=w,r.memoizedState=ne}}function Sm(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var d=r[i],h=d.callback;if(h!==null){if(d.callback=null,d=a,typeof h!="function")throw Error(t(191,h));h.call(d)}}}var Cm=new n.Component().refs;function Fd(r,i,a,d){i=r.memoizedState,a=a(d,i),a=a==null?i:S({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Eu={isMounted:function(r){return(r=r._reactInternals)?Ht(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var d=wn(),h=pi(r),m=Ps(d,h);m.payload=i,a!=null&&(m.callback=a),i=ci(r,m,h),i!==null&&(Ir(i,r,h,d),_u(i,r,h))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var d=wn(),h=pi(r),m=Ps(d,h);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=ci(r,m,h),i!==null&&(Ir(i,r,h,d),_u(i,r,h))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=wn(),d=pi(r),h=Ps(a,d);h.tag=2,i!=null&&(h.callback=i),i=ci(r,h,d),i!==null&&(Ir(i,r,d,a),_u(i,r,d))}};function Am(r,i,a,d,h,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,m,w):i.prototype&&i.prototype.isPureReactComponent?!Wa(a,d)||!Wa(h,m):!0}function Rm(r,i,a){var d=!1,h=ai,m=i.contextType;return typeof m=="object"&&m!==null?m=ar(m):(h=Sn(i)?ro:sn.current,d=i.contextTypes,m=(d=d!=null)?Jo(r,h):ai),i=new i(a,m),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Eu,r.stateNode=i,i._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=h,r.__reactInternalMemoizedMaskedChildContext=m),i}function Pm(r,i,a,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,d),i.state!==r&&Eu.enqueueReplaceState(i,i.state,null)}function Ud(r,i,a,d){var h=r.stateNode;h.props=a,h.state=r.memoizedState,h.refs=Cm,Md(r);var m=i.contextType;typeof m=="object"&&m!==null?h.context=ar(m):(m=Sn(i)?ro:sn.current,h.context=Jo(r,m)),h.state=r.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Fd(r,i,m,a),h.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(i=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),i!==h.state&&Eu.enqueueReplaceState(h,h.state,null),wu(r,a,h,d),h.state=r.memoizedState),typeof h.componentDidMount=="function"&&(r.flags|=4194308)}function Za(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,r));var h=d,m=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var b=h.refs;b===Cm&&(b=h.refs={}),w===null?delete b[m]:b[m]=w},i._stringRef=m,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function xu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Nm(r){var i=r._init;return i(r._payload)}function Dm(r){function i(U,V){if(r){var z=U.deletions;z===null?(U.deletions=[V],U.flags|=16):z.push(V)}}function a(U,V){if(!r)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function d(U,V){for(U=new Map;V!==null;)V.key!==null?U.set(V.key,V):U.set(V.index,V),V=V.sibling;return U}function h(U,V){return U=gi(U,V),U.index=0,U.sibling=null,U}function m(U,V,z){return U.index=z,r?(z=U.alternate,z!==null?(z=z.index,z<V?(U.flags|=2,V):z):(U.flags|=2,V)):(U.flags|=1048576,V)}function w(U){return r&&U.alternate===null&&(U.flags|=2),U}function b(U,V,z,re){return V===null||V.tag!==6?(V=Th(z,U.mode,re),V.return=U,V):(V=h(V,z),V.return=U,V)}function N(U,V,z,re){var ye=z.type;return ye===P?Z(U,V,z.props.children,re,z.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Ct&&Nm(ye)===V.type)?(re=h(V,z.props),re.ref=Za(U,V,z),re.return=U,re):(re=Bu(z.type,z.key,z.props,null,U.mode,re),re.ref=Za(U,V,z),re.return=U,re)}function $(U,V,z,re){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Ih(z,U.mode,re),V.return=U,V):(V=h(V,z.children||[]),V.return=U,V)}function Z(U,V,z,re,ye){return V===null||V.tag!==7?(V=po(z,U.mode,re,ye),V.return=U,V):(V=h(V,z),V.return=U,V)}function ne(U,V,z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Th(""+V,U.mode,z),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Pe:return z=Bu(V.type,V.key,V.props,null,U.mode,z),z.ref=Za(U,null,V),z.return=U,z;case ge:return V=Ih(V,U.mode,z),V.return=U,V;case Ct:var re=V._init;return ne(U,re(V._payload),z)}if(lt(V)||K(V))return V=po(V,U.mode,z,null),V.return=U,V;xu(U,V)}return null}function J(U,V,z,re){var ye=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ye!==null?null:b(U,V,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Pe:return z.key===ye?N(U,V,z,re):null;case ge:return z.key===ye?$(U,V,z,re):null;case Ct:return ye=z._init,J(U,V,ye(z._payload),re)}if(lt(z)||K(z))return ye!==null?null:Z(U,V,z,re,null);xu(U,z)}return null}function ce(U,V,z,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number")return U=U.get(z)||null,b(V,U,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Pe:return U=U.get(re.key===null?z:re.key)||null,N(V,U,re,ye);case ge:return U=U.get(re.key===null?z:re.key)||null,$(V,U,re,ye);case Ct:var Ie=re._init;return ce(U,V,z,Ie(re._payload),ye)}if(lt(re)||K(re))return U=U.get(z)||null,Z(V,U,re,ye,null);xu(V,re)}return null}function pe(U,V,z,re){for(var ye=null,Ie=null,be=V,Re=V=0,zt=null;be!==null&&Re<z.length;Re++){be.index>Re?(zt=be,be=null):zt=be.sibling;var Xe=J(U,be,z[Re],re);if(Xe===null){be===null&&(be=zt);break}r&&be&&Xe.alternate===null&&i(U,be),V=m(Xe,V,Re),Ie===null?ye=Xe:Ie.sibling=Xe,Ie=Xe,be=zt}if(Re===z.length)return a(U,be),pt&&io(U,Re),ye;if(be===null){for(;Re<z.length;Re++)be=ne(U,z[Re],re),be!==null&&(V=m(be,V,Re),Ie===null?ye=be:Ie.sibling=be,Ie=be);return pt&&io(U,Re),ye}for(be=d(U,be);Re<z.length;Re++)zt=ce(be,U,Re,z[Re],re),zt!==null&&(r&&zt.alternate!==null&&be.delete(zt.key===null?Re:zt.key),V=m(zt,V,Re),Ie===null?ye=zt:Ie.sibling=zt,Ie=zt);return r&&be.forEach(function(yi){return i(U,yi)}),pt&&io(U,Re),ye}function me(U,V,z,re){var ye=K(z);if(typeof ye!="function")throw Error(t(150));if(z=ye.call(z),z==null)throw Error(t(151));for(var Ie=ye=null,be=V,Re=V=0,zt=null,Xe=z.next();be!==null&&!Xe.done;Re++,Xe=z.next()){be.index>Re?(zt=be,be=null):zt=be.sibling;var yi=J(U,be,Xe.value,re);if(yi===null){be===null&&(be=zt);break}r&&be&&yi.alternate===null&&i(U,be),V=m(yi,V,Re),Ie===null?ye=yi:Ie.sibling=yi,Ie=yi,be=zt}if(Xe.done)return a(U,be),pt&&io(U,Re),ye;if(be===null){for(;!Xe.done;Re++,Xe=z.next())Xe=ne(U,Xe.value,re),Xe!==null&&(V=m(Xe,V,Re),Ie===null?ye=Xe:Ie.sibling=Xe,Ie=Xe);return pt&&io(U,Re),ye}for(be=d(U,be);!Xe.done;Re++,Xe=z.next())Xe=ce(be,U,Re,Xe.value,re),Xe!==null&&(r&&Xe.alternate!==null&&be.delete(Xe.key===null?Re:Xe.key),V=m(Xe,V,Re),Ie===null?ye=Xe:Ie.sibling=Xe,Ie=Xe);return r&&be.forEach(function(ox){return i(U,ox)}),pt&&io(U,Re),ye}function It(U,V,z,re){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Pe:e:{for(var ye=z.key,Ie=V;Ie!==null;){if(Ie.key===ye){if(ye=z.type,ye===P){if(Ie.tag===7){a(U,Ie.sibling),V=h(Ie,z.props.children),V.return=U,U=V;break e}}else if(Ie.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Ct&&Nm(ye)===Ie.type){a(U,Ie.sibling),V=h(Ie,z.props),V.ref=Za(U,Ie,z),V.return=U,U=V;break e}a(U,Ie);break}else i(U,Ie);Ie=Ie.sibling}z.type===P?(V=po(z.props.children,U.mode,re,z.key),V.return=U,U=V):(re=Bu(z.type,z.key,z.props,null,U.mode,re),re.ref=Za(U,V,z),re.return=U,U=re)}return w(U);case ge:e:{for(Ie=z.key;V!==null;){if(V.key===Ie)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(U,V.sibling),V=h(V,z.children||[]),V.return=U,U=V;break e}else{a(U,V);break}else i(U,V);V=V.sibling}V=Ih(z,U.mode,re),V.return=U,U=V}return w(U);case Ct:return Ie=z._init,It(U,V,Ie(z._payload),re)}if(lt(z))return pe(U,V,z,re);if(K(z))return me(U,V,z,re);xu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,V!==null&&V.tag===6?(a(U,V.sibling),V=h(V,z),V.return=U,U=V):(a(U,V),V=Th(z,U.mode,re),V.return=U,U=V),w(U)):a(U,V)}return It}var sa=Dm(!0),Om=Dm(!1),el={},Kr=oi(el),tl=oi(el),nl=oi(el);function ao(r){if(r===el)throw Error(t(174));return r}function Bd(r,i){switch(at(nl,i),at(tl,r),at(Kr,el),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:On(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=On(i,r)}dt(Kr),at(Kr,i)}function ia(){dt(Kr),dt(tl),dt(nl)}function Vm(r){ao(nl.current);var i=ao(Kr.current),a=On(i,r.type);i!==a&&(at(tl,r),at(Kr,a))}function zd(r){tl.current===r&&(dt(Kr),dt(tl))}var yt=oi(0);function Tu(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var $d=[];function qd(){for(var r=0;r<$d.length;r++)$d[r]._workInProgressVersionPrimary=null;$d.length=0}var Iu=Te.ReactCurrentDispatcher,Hd=Te.ReactCurrentBatchConfig,lo=0,vt=null,Lt=null,Ut=null,bu=!1,rl=!1,sl=0,CE=0;function on(){throw Error(t(321))}function Wd(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!_r(r[a],i[a]))return!1;return!0}function Gd(r,i,a,d,h,m){if(lo=m,vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Iu.current=r===null||r.memoizedState===null?NE:DE,r=a(d,h),rl){m=0;do{if(rl=!1,sl=0,25<=m)throw Error(t(301));m+=1,Ut=Lt=null,i.updateQueue=null,Iu.current=OE,r=a(d,h)}while(rl)}if(Iu.current=Cu,i=Lt!==null&&Lt.next!==null,lo=0,Ut=Lt=vt=null,bu=!1,i)throw Error(t(300));return r}function Kd(){var r=sl!==0;return sl=0,r}function Qr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?vt.memoizedState=Ut=r:Ut=Ut.next=r,Ut}function lr(){if(Lt===null){var r=vt.alternate;r=r!==null?r.memoizedState:null}else r=Lt.next;var i=Ut===null?vt.memoizedState:Ut.next;if(i!==null)Ut=i,Lt=r;else{if(r===null)throw Error(t(310));Lt=r,r={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Ut===null?vt.memoizedState=Ut=r:Ut=Ut.next=r}return Ut}function il(r,i){return typeof i=="function"?i(r):i}function Qd(r){var i=lr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=Lt,h=d.baseQueue,m=a.pending;if(m!==null){if(h!==null){var w=h.next;h.next=m.next,m.next=w}d.baseQueue=h=m,a.pending=null}if(h!==null){m=h.next,d=d.baseState;var b=w=null,N=null,$=m;do{var Z=$.lane;if((lo&Z)===Z)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),d=$.hasEagerState?$.eagerState:r(d,$.action);else{var ne={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(b=N=ne,w=d):N=N.next=ne,vt.lanes|=Z,uo|=Z}$=$.next}while($!==null&&$!==m);N===null?w=d:N.next=b,_r(d,i.memoizedState)||(Cn=!0),i.memoizedState=d,i.baseState=w,i.baseQueue=N,a.lastRenderedState=d}if(r=a.interleaved,r!==null){h=r;do m=h.lane,vt.lanes|=m,uo|=m,h=h.next;while(h!==r)}else h===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Yd(r){var i=lr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=a.dispatch,h=a.pending,m=i.memoizedState;if(h!==null){a.pending=null;var w=h=h.next;do m=r(m,w.action),w=w.next;while(w!==h);_r(m,i.memoizedState)||(Cn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,d]}function Lm(){}function jm(r,i){var a=vt,d=lr(),h=i(),m=!_r(d.memoizedState,h);if(m&&(d.memoizedState=h,Cn=!0),d=d.queue,Xd(Um.bind(null,a,d,r),[r]),d.getSnapshot!==i||m||Ut!==null&&Ut.memoizedState.tag&1){if(a.flags|=2048,ol(9,Fm.bind(null,a,d,h,i),void 0,null),Bt===null)throw Error(t(349));(lo&30)!==0||Mm(a,i,h)}return h}function Mm(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=vt.updateQueue,i===null?(i={lastEffect:null,stores:null},vt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function Fm(r,i,a,d){i.value=a,i.getSnapshot=d,Bm(i)&&zm(r)}function Um(r,i,a){return a(function(){Bm(i)&&zm(r)})}function Bm(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!_r(r,a)}catch{return!0}}function zm(r){var i=Rs(r,1);i!==null&&Ir(i,r,1,-1)}function $m(r){var i=Qr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:r},i.queue=r,r=r.dispatch=PE.bind(null,vt,r),[i.memoizedState,r]}function ol(r,i,a,d){return r={tag:r,create:i,destroy:a,deps:d,next:null},i=vt.updateQueue,i===null?(i={lastEffect:null,stores:null},vt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(d=a.next,a.next=r,r.next=d,i.lastEffect=r)),r}function qm(){return lr().memoizedState}function ku(r,i,a,d){var h=Qr();vt.flags|=r,h.memoizedState=ol(1|i,a,void 0,d===void 0?null:d)}function Su(r,i,a,d){var h=lr();d=d===void 0?null:d;var m=void 0;if(Lt!==null){var w=Lt.memoizedState;if(m=w.destroy,d!==null&&Wd(d,w.deps)){h.memoizedState=ol(i,a,m,d);return}}vt.flags|=r,h.memoizedState=ol(1|i,a,m,d)}function Hm(r,i){return ku(8390656,8,r,i)}function Xd(r,i){return Su(2048,8,r,i)}function Wm(r,i){return Su(4,2,r,i)}function Gm(r,i){return Su(4,4,r,i)}function Km(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Qm(r,i,a){return a=a!=null?a.concat([r]):null,Su(4,4,Km.bind(null,i,r),a)}function Jd(){}function Ym(r,i){var a=lr();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&Wd(i,d[1])?d[0]:(a.memoizedState=[r,i],r)}function Xm(r,i){var a=lr();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&Wd(i,d[1])?d[0]:(r=r(),a.memoizedState=[r,i],r)}function Jm(r,i,a){return(lo&21)===0?(r.baseState&&(r.baseState=!1,Cn=!0),r.memoizedState=a):(_r(a,i)||(a=yr(),vt.lanes|=a,uo|=a,r.baseState=!0),i)}function AE(r,i){var a=Fe;Fe=a!==0&&4>a?a:4,r(!0);var d=Hd.transition;Hd.transition={};try{r(!1),i()}finally{Fe=a,Hd.transition=d}}function Zm(){return lr().memoizedState}function RE(r,i,a){var d=pi(r);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},eg(r))tg(i,a);else if(a=Im(r,i,a,d),a!==null){var h=wn();Ir(a,r,d,h),ng(a,i,d)}}function PE(r,i,a){var d=pi(r),h={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(eg(r))tg(i,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,b=m(w,a);if(h.hasEagerState=!0,h.eagerState=b,_r(b,w)){var N=i.interleaved;N===null?(h.next=h,jd(i)):(h.next=N.next,N.next=h),i.interleaved=h;return}}catch{}a=Im(r,i,h,d),a!==null&&(h=wn(),Ir(a,r,d,h),ng(a,i,d))}}function eg(r){var i=r.alternate;return r===vt||i!==null&&i===vt}function tg(r,i){rl=bu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function ng(r,i,a){if((a&4194240)!==0){var d=i.lanes;d&=r.pendingLanes,a|=d,i.lanes=a,ws(r,a)}}var Cu={readContext:ar,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},NE={readContext:ar,useCallback:function(r,i){return Qr().memoizedState=[r,i===void 0?null:i],r},useContext:ar,useEffect:Hm,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,ku(4194308,4,Km.bind(null,i,r),a)},useLayoutEffect:function(r,i){return ku(4194308,4,r,i)},useInsertionEffect:function(r,i){return ku(4,2,r,i)},useMemo:function(r,i){var a=Qr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var d=Qr();return i=a!==void 0?a(i):i,d.memoizedState=d.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},d.queue=r,r=r.dispatch=RE.bind(null,vt,r),[d.memoizedState,r]},useRef:function(r){var i=Qr();return r={current:r},i.memoizedState=r},useState:$m,useDebugValue:Jd,useDeferredValue:function(r){return Qr().memoizedState=r},useTransition:function(){var r=$m(!1),i=r[0];return r=AE.bind(null,r[1]),Qr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var d=vt,h=Qr();if(pt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Bt===null)throw Error(t(349));(lo&30)!==0||Mm(d,i,a)}h.memoizedState=a;var m={value:a,getSnapshot:i};return h.queue=m,Hm(Um.bind(null,d,m,r),[r]),d.flags|=2048,ol(9,Fm.bind(null,d,m,a,i),void 0,null),a},useId:function(){var r=Qr(),i=Bt.identifierPrefix;if(pt){var a=As,d=Cs;a=(d&~(1<<32-yn(d)-1)).toString(32)+a,i=":"+i+"R"+a,a=sl++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=CE++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},DE={readContext:ar,useCallback:Ym,useContext:ar,useEffect:Xd,useImperativeHandle:Qm,useInsertionEffect:Wm,useLayoutEffect:Gm,useMemo:Xm,useReducer:Qd,useRef:qm,useState:function(){return Qd(il)},useDebugValue:Jd,useDeferredValue:function(r){var i=lr();return Jm(i,Lt.memoizedState,r)},useTransition:function(){var r=Qd(il)[0],i=lr().memoizedState;return[r,i]},useMutableSource:Lm,useSyncExternalStore:jm,useId:Zm,unstable_isNewReconciler:!1},OE={readContext:ar,useCallback:Ym,useContext:ar,useEffect:Xd,useImperativeHandle:Qm,useInsertionEffect:Wm,useLayoutEffect:Gm,useMemo:Xm,useReducer:Yd,useRef:qm,useState:function(){return Yd(il)},useDebugValue:Jd,useDeferredValue:function(r){var i=lr();return Lt===null?i.memoizedState=r:Jm(i,Lt.memoizedState,r)},useTransition:function(){var r=Yd(il)[0],i=lr().memoizedState;return[r,i]},useMutableSource:Lm,useSyncExternalStore:jm,useId:Zm,unstable_isNewReconciler:!1};function oa(r,i){try{var a="",d=i;do a+=Be(d),d=d.return;while(d);var h=a}catch(m){h=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:i,stack:h,digest:null}}function Zd(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function eh(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var VE=typeof WeakMap=="function"?WeakMap:Map;function rg(r,i,a){a=Ps(-1,a),a.tag=3,a.payload={element:null};var d=i.value;return a.callback=function(){Vu||(Vu=!0,mh=d),eh(r,i)},a}function sg(r,i,a){a=Ps(-1,a),a.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var h=i.value;a.payload=function(){return d(h)},a.callback=function(){eh(r,i)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){eh(r,i),typeof d!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function ig(r,i,a){var d=r.pingCache;if(d===null){d=r.pingCache=new VE;var h=new Set;d.set(i,h)}else h=d.get(i),h===void 0&&(h=new Set,d.set(i,h));h.has(a)||(h.add(a),r=QE.bind(null,r,i,a),i.then(r,r))}function og(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function ag(r,i,a,d,h){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Ps(-1,1),i.tag=2,ci(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=h,r)}var LE=Te.ReactCurrentOwner,Cn=!1;function _n(r,i,a,d){i.child=r===null?Om(i,null,a,d):sa(i,r.child,a,d)}function lg(r,i,a,d,h){a=a.render;var m=i.ref;return ra(i,h),d=Gd(r,i,a,d,m,h),a=Kd(),r!==null&&!Cn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~h,Ns(r,i,h)):(pt&&a&&Cd(i),i.flags|=1,_n(r,i,d,h),i.child)}function ug(r,i,a,d,h){if(r===null){var m=a.type;return typeof m=="function"&&!xh(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,cg(r,i,m,d,h)):(r=Bu(a.type,null,d,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,(r.lanes&h)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Wa,a(w,d)&&r.ref===i.ref)return Ns(r,i,h)}return i.flags|=1,r=gi(m,d),r.ref=i.ref,r.return=i,i.child=r}function cg(r,i,a,d,h){if(r!==null){var m=r.memoizedProps;if(Wa(m,d)&&r.ref===i.ref)if(Cn=!1,i.pendingProps=d=m,(r.lanes&h)!==0)(r.flags&131072)!==0&&(Cn=!0);else return i.lanes=r.lanes,Ns(r,i,h)}return th(r,i,a,d,h)}function dg(r,i,a){var d=i.pendingProps,h=d.children,m=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(la,Gn),Gn|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,at(la,Gn),Gn|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=m!==null?m.baseLanes:a,at(la,Gn),Gn|=d}else m!==null?(d=m.baseLanes|a,i.memoizedState=null):d=a,at(la,Gn),Gn|=d;return _n(r,i,h,a),i.child}function hg(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function th(r,i,a,d,h){var m=Sn(a)?ro:sn.current;return m=Jo(i,m),ra(i,h),a=Gd(r,i,a,d,m,h),d=Kd(),r!==null&&!Cn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~h,Ns(r,i,h)):(pt&&d&&Cd(i),i.flags|=1,_n(r,i,a,h),i.child)}function fg(r,i,a,d,h){if(Sn(a)){var m=!0;hu(i)}else m=!1;if(ra(i,h),i.stateNode===null)Ru(r,i),Rm(i,a,d),Ud(i,a,d,h),d=!0;else if(r===null){var w=i.stateNode,b=i.memoizedProps;w.props=b;var N=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=ar($):($=Sn(a)?ro:sn.current,$=Jo(i,$));var Z=a.getDerivedStateFromProps,ne=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(b!==d||N!==$)&&Pm(i,w,d,$),ui=!1;var J=i.memoizedState;w.state=J,wu(i,d,w,h),N=i.memoizedState,b!==d||J!==N||kn.current||ui?(typeof Z=="function"&&(Fd(i,a,Z,d),N=i.memoizedState),(b=ui||Am(i,a,b,d,J,N,$))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=N),w.props=d,w.state=N,w.context=$,d=b):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{w=i.stateNode,bm(r,i),b=i.memoizedProps,$=i.type===i.elementType?b:Er(i.type,b),w.props=$,ne=i.pendingProps,J=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=ar(N):(N=Sn(a)?ro:sn.current,N=Jo(i,N));var ce=a.getDerivedStateFromProps;(Z=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(b!==ne||J!==N)&&Pm(i,w,d,N),ui=!1,J=i.memoizedState,w.state=J,wu(i,d,w,h);var pe=i.memoizedState;b!==ne||J!==pe||kn.current||ui?(typeof ce=="function"&&(Fd(i,a,ce,d),pe=i.memoizedState),($=ui||Am(i,a,$,d,J,pe,N)||!1)?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,pe,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,pe,N)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||b===r.memoizedProps&&J===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&J===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=pe),w.props=d,w.state=pe,w.context=N,d=$):(typeof w.componentDidUpdate!="function"||b===r.memoizedProps&&J===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||b===r.memoizedProps&&J===r.memoizedState||(i.flags|=1024),d=!1)}return nh(r,i,a,d,m,h)}function nh(r,i,a,d,h,m){hg(r,i);var w=(i.flags&128)!==0;if(!d&&!w)return h&&ym(i,a,!1),Ns(r,i,m);d=i.stateNode,LE.current=i;var b=w&&typeof a.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,r!==null&&w?(i.child=sa(i,r.child,null,m),i.child=sa(i,null,b,m)):_n(r,i,b,m),i.memoizedState=d.state,h&&ym(i,a,!0),i.child}function pg(r){var i=r.stateNode;i.pendingContext?mm(r,i.pendingContext,i.pendingContext!==i.context):i.context&&mm(r,i.context,!1),Bd(r,i.containerInfo)}function mg(r,i,a,d,h){return ta(),Nd(h),i.flags|=256,_n(r,i,a,d),i.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function sh(r){return{baseLanes:r,cachePool:null,transitions:null}}function gg(r,i,a){var d=i.pendingProps,h=yt.current,m=!1,w=(i.flags&128)!==0,b;if((b=w)||(b=r!==null&&r.memoizedState===null?!1:(h&2)!==0),b?(m=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(h|=1),at(yt,h&1),r===null)return Pd(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=d.children,r=d.fallback,m?(d=i.mode,m=i.child,w={mode:"hidden",children:w},(d&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=zu(w,d,0,null),r=po(r,d,a,null),m.return=i,r.return=i,m.sibling=r,i.child=m,i.child.memoizedState=sh(a),i.memoizedState=rh,r):ih(i,w));if(h=r.memoizedState,h!==null&&(b=h.dehydrated,b!==null))return jE(r,i,w,d,b,h,a);if(m){m=d.fallback,w=i.mode,h=r.child,b=h.sibling;var N={mode:"hidden",children:d.children};return(w&1)===0&&i.child!==h?(d=i.child,d.childLanes=0,d.pendingProps=N,i.deletions=null):(d=gi(h,N),d.subtreeFlags=h.subtreeFlags&14680064),b!==null?m=gi(b,m):(m=po(m,w,a,null),m.flags|=2),m.return=i,d.return=i,d.sibling=m,i.child=d,d=m,m=i.child,w=r.child.memoizedState,w=w===null?sh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=r.childLanes&~a,i.memoizedState=rh,d}return m=r.child,r=m.sibling,d=gi(m,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=a),d.return=i,d.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=d,i.memoizedState=null,d}function ih(r,i){return i=zu({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Au(r,i,a,d){return d!==null&&Nd(d),sa(i,r.child,null,a),r=ih(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function jE(r,i,a,d,h,m,w){if(a)return i.flags&256?(i.flags&=-257,d=Zd(Error(t(422))),Au(r,i,w,d)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(m=d.fallback,h=i.mode,d=zu({mode:"visible",children:d.children},h,0,null),m=po(m,h,w,null),m.flags|=2,d.return=i,m.return=i,d.sibling=m,i.child=d,(i.mode&1)!==0&&sa(i,r.child,null,w),i.child.memoizedState=sh(w),i.memoizedState=rh,m);if((i.mode&1)===0)return Au(r,i,w,null);if(h.data==="$!"){if(d=h.nextSibling&&h.nextSibling.dataset,d)var b=d.dgst;return d=b,m=Error(t(419)),d=Zd(m,d,void 0),Au(r,i,w,d)}if(b=(w&r.childLanes)!==0,Cn||b){if(d=Bt,d!==null){switch(w&-w){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(d.suspendedLanes|w))!==0?0:h,h!==0&&h!==m.retryLane&&(m.retryLane=h,Rs(r,h),Ir(d,r,h,-1))}return Eh(),d=Zd(Error(t(421))),Au(r,i,w,d)}return h.data==="$?"?(i.flags|=128,i.child=r.child,i=YE.bind(null,r),h._reactRetry=i,null):(r=m.treeContext,Wn=ii(h.nextSibling),Hn=i,pt=!0,wr=null,r!==null&&(ir[or++]=Cs,ir[or++]=As,ir[or++]=so,Cs=r.id,As=r.overflow,so=i),i=ih(i,d.children),i.flags|=4096,i)}function yg(r,i,a){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),Ld(r.return,i,a)}function oh(r,i,a,d,h){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:h}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=d,m.tail=a,m.tailMode=h)}function vg(r,i,a){var d=i.pendingProps,h=d.revealOrder,m=d.tail;if(_n(r,i,d.children,a),d=yt.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&yg(r,a,i);else if(r.tag===19)yg(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(at(yt,d),(i.mode&1)===0)i.memoizedState=null;else switch(h){case"forwards":for(a=i.child,h=null;a!==null;)r=a.alternate,r!==null&&Tu(r)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),oh(i,!1,h,a,m);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&Tu(r)===null){i.child=h;break}r=h.sibling,h.sibling=a,a=h,h=r}oh(i,!0,a,null,m);break;case"together":oh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ru(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Ns(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),uo|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=gi(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=gi(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function ME(r,i,a){switch(i.tag){case 3:pg(i),ta();break;case 5:Vm(i);break;case 1:Sn(i.type)&&hu(i);break;case 4:Bd(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,h=i.memoizedProps.value;at(yu,d._currentValue),d._currentValue=h;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(at(yt,yt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?gg(r,i,a):(at(yt,yt.current&1),r=Ns(r,i,a),r!==null?r.sibling:null);at(yt,yt.current&1);break;case 19:if(d=(a&i.childLanes)!==0,(r.flags&128)!==0){if(d)return vg(r,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),at(yt,yt.current),d)break;return null;case 22:case 23:return i.lanes=0,dg(r,i,a)}return Ns(r,i,a)}var _g,ah,wg,Eg;_g=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},ah=function(){},wg=function(r,i,a,d){var h=r.memoizedProps;if(h!==d){r=i.stateNode,ao(Kr.current);var m=null;switch(a){case"input":h=Dn(r,h),d=Dn(r,d),m=[];break;case"select":h=S({},h,{value:void 0}),d=S({},d,{value:void 0}),m=[];break;case"textarea":h=ls(r,h),d=ls(r,d),m=[];break;default:typeof h.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=uu)}mn(a,d);var w;a=null;for($ in h)if(!d.hasOwnProperty($)&&h.hasOwnProperty($)&&h[$]!=null)if($==="style"){var b=h[$];for(w in b)b.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?m||(m=[]):(m=m||[]).push($,null));for($ in d){var N=d[$];if(b=h?.[$],d.hasOwnProperty($)&&N!==b&&(N!=null||b!=null))if($==="style")if(b){for(w in b)!b.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&b[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(m||(m=[]),m.push($,a)),a=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,b=b?b.__html:void 0,N!=null&&b!==N&&(m=m||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(m=m||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(N!=null&&$==="onScroll"&&ct("scroll",r),m||b===N||(m=[])):(m=m||[]).push($,N))}a&&(m=m||[]).push("style",a);var $=m;(i.updateQueue=$)&&(i.flags|=4)}},Eg=function(r,i,a,d){a!==d&&(i.flags|=4)};function al(r,i){if(!pt)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function an(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,d=0;if(i)for(var h=r.child;h!==null;)a|=h.lanes|h.childLanes,d|=h.subtreeFlags&14680064,d|=h.flags&14680064,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)a|=h.lanes|h.childLanes,d|=h.subtreeFlags,d|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=d,r.childLanes=a,i}function FE(r,i,a){var d=i.pendingProps;switch(Ad(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(i),null;case 1:return Sn(i.type)&&du(),an(i),null;case 3:return d=i.stateNode,ia(),dt(kn),dt(sn),qd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(gu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,wr!==null&&(vh(wr),wr=null))),ah(r,i),an(i),null;case 5:zd(i);var h=ao(nl.current);if(a=i.type,r!==null&&i.stateNode!=null)wg(r,i,a,d,h),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return an(i),null}if(r=ao(Kr.current),gu(i)){d=i.stateNode,a=i.type;var m=i.memoizedProps;switch(d[Gr]=i,d[Xa]=m,r=(i.mode&1)!==0,a){case"dialog":ct("cancel",d),ct("close",d);break;case"iframe":case"object":case"embed":ct("load",d);break;case"video":case"audio":for(h=0;h<Ka.length;h++)ct(Ka[h],d);break;case"source":ct("error",d);break;case"img":case"image":case"link":ct("error",d),ct("load",d);break;case"details":ct("toggle",d);break;case"input":Rr(d,m),ct("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!m.multiple},ct("invalid",d);break;case"textarea":Pr(d,m),ct("invalid",d)}mn(a,m),h=null;for(var w in m)if(m.hasOwnProperty(w)){var b=m[w];w==="children"?typeof b=="string"?d.textContent!==b&&(m.suppressHydrationWarning!==!0&&lu(d.textContent,b,r),h=["children",b]):typeof b=="number"&&d.textContent!==""+b&&(m.suppressHydrationWarning!==!0&&lu(d.textContent,b,r),h=["children",""+b]):o.hasOwnProperty(w)&&b!=null&&w==="onScroll"&&ct("scroll",d)}switch(a){case"input":Hs(d),as(d,m,!0);break;case"textarea":Hs(d),Ye(d);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(d.onclick=uu)}d=h,i.updateQueue=d,d!==null&&(i.flags|=4)}else{w=h.nodeType===9?h:h.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Gs(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=w.createElement(a,{is:d.is}):(r=w.createElement(a),a==="select"&&(w=r,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):r=w.createElementNS(r,a),r[Gr]=i,r[Xa]=d,_g(r,i,!1,!1),i.stateNode=r;e:{switch(w=cs(a,d),a){case"dialog":ct("cancel",r),ct("close",r),h=d;break;case"iframe":case"object":case"embed":ct("load",r),h=d;break;case"video":case"audio":for(h=0;h<Ka.length;h++)ct(Ka[h],r);h=d;break;case"source":ct("error",r),h=d;break;case"img":case"image":case"link":ct("error",r),ct("load",r),h=d;break;case"details":ct("toggle",r),h=d;break;case"input":Rr(r,d),h=Dn(r,d),ct("invalid",r);break;case"option":h=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},h=S({},d,{value:void 0}),ct("invalid",r);break;case"textarea":Pr(r,d),h=ls(r,d),ct("invalid",r);break;default:h=d}mn(a,h),b=h;for(m in b)if(b.hasOwnProperty(m)){var N=b[m];m==="style"?gr(r,N):m==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Vn(r,N)):m==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Dt(r,N):typeof N=="number"&&Dt(r,""+N):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?N!=null&&m==="onScroll"&&ct("scroll",r):N!=null&&ie(r,m,N,w))}switch(a){case"input":Hs(r),as(r,d,!1);break;case"textarea":Hs(r),Ye(r);break;case"option":d.value!=null&&r.setAttribute("value",""+je(d.value));break;case"select":r.multiple=!!d.multiple,m=d.value,m!=null?He(r,!!d.multiple,m,!1):d.defaultValue!=null&&He(r,!!d.multiple,d.defaultValue,!0);break;default:typeof h.onClick=="function"&&(r.onclick=uu)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return an(i),null;case 6:if(r&&i.stateNode!=null)Eg(r,i,r.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(a=ao(nl.current),ao(Kr.current),gu(i)){if(d=i.stateNode,a=i.memoizedProps,d[Gr]=i,(m=d.nodeValue!==a)&&(r=Hn,r!==null))switch(r.tag){case 3:lu(d.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&lu(d.nodeValue,a,(r.mode&1)!==0)}m&&(i.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Gr]=i,i.stateNode=d}return an(i),null;case 13:if(dt(yt),d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(pt&&Wn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Tm(),ta(),i.flags|=98560,m=!1;else if(m=gu(i),d!==null&&d.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Gr]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;an(i),m=!1}else wr!==null&&(vh(wr),wr=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(yt.current&1)!==0?jt===0&&(jt=3):Eh())),i.updateQueue!==null&&(i.flags|=4),an(i),null);case 4:return ia(),ah(r,i),r===null&&Qa(i.stateNode.containerInfo),an(i),null;case 10:return Vd(i.type._context),an(i),null;case 17:return Sn(i.type)&&du(),an(i),null;case 19:if(dt(yt),m=i.memoizedState,m===null)return an(i),null;if(d=(i.flags&128)!==0,w=m.rendering,w===null)if(d)al(m,!1);else{if(jt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=Tu(r),w!==null){for(i.flags|=128,al(m,!1),d=w.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=a,a=i.child;a!==null;)m=a,r=d,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,r=w.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return at(yt,yt.current&1|2),i.child}r=r.sibling}m.tail!==null&&rt()>ua&&(i.flags|=128,d=!0,al(m,!1),i.lanes=4194304)}else{if(!d)if(r=Tu(w),r!==null){if(i.flags|=128,d=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),al(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!pt)return an(i),null}else 2*rt()-m.renderingStartTime>ua&&a!==1073741824&&(i.flags|=128,d=!0,al(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(a=m.last,a!==null?a.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=rt(),i.sibling=null,a=yt.current,at(yt,d?a&1|2:a&1),i):(an(i),null);case 22:case 23:return wh(),d=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(Gn&1073741824)!==0&&(an(i),i.subtreeFlags&6&&(i.flags|=8192)):an(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function UE(r,i){switch(Ad(i),i.tag){case 1:return Sn(i.type)&&du(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return ia(),dt(kn),dt(sn),qd(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return zd(i),null;case 13:if(dt(yt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));ta()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return dt(yt),null;case 4:return ia(),null;case 10:return Vd(i.type._context),null;case 22:case 23:return wh(),null;case 24:return null;default:return null}}var Pu=!1,ln=!1,BE=typeof WeakSet=="function"?WeakSet:Set,fe=null;function aa(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){Et(r,i,d)}else a.current=null}function lh(r,i,a){try{a()}catch(d){Et(r,i,d)}}var xg=!1;function zE(r,i){if(wd=Ts,r=Zp(),hd(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var h=d.anchorOffset,m=d.focusNode;d=d.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,b=-1,N=-1,$=0,Z=0,ne=r,J=null;t:for(;;){for(var ce;ne!==a||h!==0&&ne.nodeType!==3||(b=w+h),ne!==m||d!==0&&ne.nodeType!==3||(N=w+d),ne.nodeType===3&&(w+=ne.nodeValue.length),(ce=ne.firstChild)!==null;)J=ne,ne=ce;for(;;){if(ne===r)break t;if(J===a&&++$===h&&(b=w),J===m&&++Z===d&&(N=w),(ce=ne.nextSibling)!==null)break;ne=J,J=ne.parentNode}ne=ce}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ed={focusedElem:r,selectionRange:a},Ts=!1,fe=i;fe!==null;)if(i=fe,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,fe=r;else for(;fe!==null;){i=fe;try{var pe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,It=pe.memoizedState,U=i.stateNode,V=U.getSnapshotBeforeUpdate(i.elementType===i.type?me:Er(i.type,me),It);U.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){Et(i,i.return,re)}if(r=i.sibling,r!==null){r.return=i.return,fe=r;break}fe=i.return}return pe=xg,xg=!1,pe}function ll(r,i,a){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&r)===r){var m=h.destroy;h.destroy=void 0,m!==void 0&&lh(i,a,m)}h=h.next}while(h!==d)}}function Nu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var d=a.create;a.destroy=d()}a=a.next}while(a!==i)}}function uh(r){var i=r.ref;if(i!==null){var a=r.stateNode;r.tag,r=a,typeof i=="function"?i(r):i.current=r}}function Tg(r){var i=r.alternate;i!==null&&(r.alternate=null,Tg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Gr],delete i[Xa],delete i[bd],delete i[IE],delete i[bE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Ig(r){return r.tag===5||r.tag===3||r.tag===4}function bg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ig(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ch(r,i,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=uu));else if(d!==4&&(r=r.child,r!==null))for(ch(r,i,a),r=r.sibling;r!==null;)ch(r,i,a),r=r.sibling}function dh(r,i,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(dh(r,i,a),r=r.sibling;r!==null;)dh(r,i,a),r=r.sibling}var Qt=null,xr=!1;function di(r,i,a){for(a=a.child;a!==null;)kg(r,i,a),a=a.sibling}function kg(r,i,a){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(ms,a)}catch{}switch(a.tag){case 5:ln||aa(a,i);case 6:var d=Qt,h=xr;Qt=null,di(r,i,a),Qt=d,xr=h,Qt!==null&&(xr?(r=Qt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Qt.removeChild(a.stateNode));break;case 18:Qt!==null&&(xr?(r=Qt,a=a.stateNode,r.nodeType===8?Id(r.parentNode,a):r.nodeType===1&&Id(r,a),ot(r)):Id(Qt,a.stateNode));break;case 4:d=Qt,h=xr,Qt=a.stateNode.containerInfo,xr=!0,di(r,i,a),Qt=d,xr=h;break;case 0:case 11:case 14:case 15:if(!ln&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){h=d=d.next;do{var m=h,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&lh(a,i,w),h=h.next}while(h!==d)}di(r,i,a);break;case 1:if(!ln&&(aa(a,i),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(b){Et(a,i,b)}di(r,i,a);break;case 21:di(r,i,a);break;case 22:a.mode&1?(ln=(d=ln)||a.memoizedState!==null,di(r,i,a),ln=d):di(r,i,a);break;default:di(r,i,a)}}function Sg(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new BE),i.forEach(function(d){var h=XE.bind(null,r,d);a.has(d)||(a.add(d),d.then(h,h))})}}function Tr(r,i){var a=i.deletions;if(a!==null)for(var d=0;d<a.length;d++){var h=a[d];try{var m=r,w=i,b=w;e:for(;b!==null;){switch(b.tag){case 5:Qt=b.stateNode,xr=!1;break e;case 3:Qt=b.stateNode.containerInfo,xr=!0;break e;case 4:Qt=b.stateNode.containerInfo,xr=!0;break e}b=b.return}if(Qt===null)throw Error(t(160));kg(m,w,h),Qt=null,xr=!1;var N=h.alternate;N!==null&&(N.return=null),h.return=null}catch($){Et(h,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Cg(i,r),i=i.sibling}function Cg(r,i){var a=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Tr(i,r),Yr(r),d&4){try{ll(3,r,r.return),Nu(3,r)}catch(me){Et(r,r.return,me)}try{ll(5,r,r.return)}catch(me){Et(r,r.return,me)}}break;case 1:Tr(i,r),Yr(r),d&512&&a!==null&&aa(a,a.return);break;case 5:if(Tr(i,r),Yr(r),d&512&&a!==null&&aa(a,a.return),r.flags&32){var h=r.stateNode;try{Dt(h,"")}catch(me){Et(r,r.return,me)}}if(d&4&&(h=r.stateNode,h!=null)){var m=r.memoizedProps,w=a!==null?a.memoizedProps:m,b=r.type,N=r.updateQueue;if(r.updateQueue=null,N!==null)try{b==="input"&&m.type==="radio"&&m.name!=null&&fn(h,m),cs(b,w);var $=cs(b,m);for(w=0;w<N.length;w+=2){var Z=N[w],ne=N[w+1];Z==="style"?gr(h,ne):Z==="dangerouslySetInnerHTML"?Vn(h,ne):Z==="children"?Dt(h,ne):ie(h,Z,ne,$)}switch(b){case"input":tn(h,m);break;case"textarea":$i(h,m);break;case"select":var J=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!m.multiple;var ce=m.value;ce!=null?He(h,!!m.multiple,ce,!1):J!==!!m.multiple&&(m.defaultValue!=null?He(h,!!m.multiple,m.defaultValue,!0):He(h,!!m.multiple,m.multiple?[]:"",!1))}h[Xa]=m}catch(me){Et(r,r.return,me)}}break;case 6:if(Tr(i,r),Yr(r),d&4){if(r.stateNode===null)throw Error(t(162));h=r.stateNode,m=r.memoizedProps;try{h.nodeValue=m}catch(me){Et(r,r.return,me)}}break;case 3:if(Tr(i,r),Yr(r),d&4&&a!==null&&a.memoizedState.isDehydrated)try{ot(i.containerInfo)}catch(me){Et(r,r.return,me)}break;case 4:Tr(i,r),Yr(r);break;case 13:Tr(i,r),Yr(r),h=r.child,h.flags&8192&&(m=h.memoizedState!==null,h.stateNode.isHidden=m,!m||h.alternate!==null&&h.alternate.memoizedState!==null||(ph=rt())),d&4&&Sg(r);break;case 22:if(Z=a!==null&&a.memoizedState!==null,r.mode&1?(ln=($=ln)||Z,Tr(i,r),ln=$):Tr(i,r),Yr(r),d&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!Z&&(r.mode&1)!==0)for(fe=r,Z=r.child;Z!==null;){for(ne=fe=Z;fe!==null;){switch(J=fe,ce=J.child,J.tag){case 0:case 11:case 14:case 15:ll(4,J,J.return);break;case 1:aa(J,J.return);var pe=J.stateNode;if(typeof pe.componentWillUnmount=="function"){d=J,a=J.return;try{i=d,pe.props=i.memoizedProps,pe.state=i.memoizedState,pe.componentWillUnmount()}catch(me){Et(d,a,me)}}break;case 5:aa(J,J.return);break;case 22:if(J.memoizedState!==null){Pg(ne);continue}}ce!==null?(ce.return=J,fe=ce):Pg(ne)}Z=Z.sibling}e:for(Z=null,ne=r;;){if(ne.tag===5){if(Z===null){Z=ne;try{h=ne.stateNode,$?(m=h.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(b=ne.stateNode,N=ne.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,b.style.display=pn("display",w))}catch(me){Et(r,r.return,me)}}}else if(ne.tag===6){if(Z===null)try{ne.stateNode.nodeValue=$?"":ne.memoizedProps}catch(me){Et(r,r.return,me)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===r)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===r)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===r)break e;Z===ne&&(Z=null),ne=ne.return}Z===ne&&(Z=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:Tr(i,r),Yr(r),d&4&&Sg(r);break;case 21:break;default:Tr(i,r),Yr(r)}}function Yr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(Ig(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var h=d.stateNode;d.flags&32&&(Dt(h,""),d.flags&=-33);var m=bg(r);dh(r,m,h);break;case 3:case 4:var w=d.stateNode.containerInfo,b=bg(r);ch(r,b,w);break;default:throw Error(t(161))}}catch(N){Et(r,r.return,N)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function $E(r,i,a){fe=r,Ag(r)}function Ag(r,i,a){for(var d=(r.mode&1)!==0;fe!==null;){var h=fe,m=h.child;if(h.tag===22&&d){var w=h.memoizedState!==null||Pu;if(!w){var b=h.alternate,N=b!==null&&b.memoizedState!==null||ln;b=Pu;var $=ln;if(Pu=w,(ln=N)&&!$)for(fe=h;fe!==null;)w=fe,N=w.child,w.tag===22&&w.memoizedState!==null?Ng(h):N!==null?(N.return=w,fe=N):Ng(h);for(;m!==null;)fe=m,Ag(m),m=m.sibling;fe=h,Pu=b,ln=$}Rg(r)}else(h.subtreeFlags&8772)!==0&&m!==null?(m.return=h,fe=m):Rg(r)}}function Rg(r){for(;fe!==null;){var i=fe;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ln||Nu(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!ln)if(a===null)d.componentDidMount();else{var h=i.elementType===i.type?a.memoizedProps:Er(i.type,a.memoizedProps);d.componentDidUpdate(h,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&Sm(i,m,d);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Sm(i,w,a)}break;case 5:var b=i.stateNode;if(a===null&&i.flags&4){a=b;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var ne=Z.dehydrated;ne!==null&&ot(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ln||i.flags&512&&uh(i)}catch(J){Et(i,i.return,J)}}if(i===r){fe=null;break}if(a=i.sibling,a!==null){a.return=i.return,fe=a;break}fe=i.return}}function Pg(r){for(;fe!==null;){var i=fe;if(i===r){fe=null;break}var a=i.sibling;if(a!==null){a.return=i.return,fe=a;break}fe=i.return}}function Ng(r){for(;fe!==null;){var i=fe;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Nu(4,i)}catch(N){Et(i,a,N)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var h=i.return;try{d.componentDidMount()}catch(N){Et(i,h,N)}}var m=i.return;try{uh(i)}catch(N){Et(i,m,N)}break;case 5:var w=i.return;try{uh(i)}catch(N){Et(i,w,N)}}}catch(N){Et(i,i.return,N)}if(i===r){fe=null;break}var b=i.sibling;if(b!==null){b.return=i.return,fe=b;break}fe=i.return}}var qE=Math.ceil,Du=Te.ReactCurrentDispatcher,hh=Te.ReactCurrentOwner,ur=Te.ReactCurrentBatchConfig,Qe=0,Bt=null,Rt=null,Yt=0,Gn=0,la=oi(0),jt=0,ul=null,uo=0,Ou=0,fh=0,cl=null,An=null,ph=0,ua=1/0,Ds=null,Vu=!1,mh=null,hi=null,Lu=!1,fi=null,ju=0,dl=0,gh=null,Mu=-1,Fu=0;function wn(){return(Qe&6)!==0?rt():Mu!==-1?Mu:Mu=rt()}function pi(r){return(r.mode&1)===0?1:(Qe&2)!==0&&Yt!==0?Yt&-Yt:SE.transition!==null?(Fu===0&&(Fu=yr()),Fu):(r=Fe,r!==0||(r=window.event,r=r===void 0?16:Mo(r.type)),r)}function Ir(r,i,a,d){if(50<dl)throw dl=0,gh=null,Error(t(185));_s(r,a,d),((Qe&2)===0||r!==Bt)&&(r===Bt&&((Qe&2)===0&&(Ou|=a),jt===4&&mi(r,Yt)),Rn(r,d),a===1&&Qe===0&&(i.mode&1)===0&&(ua=rt()+500,fu&&li()))}function Rn(r,i){var a=r.callbackNode;ys(r,i);var d=tr(r,r===Bt?Yt:0);if(d===0)a!==null&&jr(a),r.callbackNode=null,r.callbackPriority=0;else if(i=d&-d,r.callbackPriority!==i){if(a!=null&&jr(a),i===1)r.tag===0?kE(Og.bind(null,r)):vm(Og.bind(null,r)),xE(function(){(Qe&6)===0&&li()}),a=null;else{switch(nr(d)){case 1:a=Zn;break;case 4:a=Qi;break;case 16:a=ps;break;case 536870912:a=Js;break;default:a=ps}a=zg(a,Dg.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function Dg(r,i){if(Mu=-1,Fu=0,(Qe&6)!==0)throw Error(t(327));var a=r.callbackNode;if(ca()&&r.callbackNode!==a)return null;var d=tr(r,r===Bt?Yt:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||i)i=Uu(r,d);else{i=d;var h=Qe;Qe|=2;var m=Lg();(Bt!==r||Yt!==i)&&(Ds=null,ua=rt()+500,ho(r,i));do try{GE();break}catch(b){Vg(r,b)}while(!0);Od(),Du.current=m,Qe=h,Rt!==null?i=0:(Bt=null,Yt=0,i=jt)}if(i!==0){if(i===2&&(h=Xi(r),h!==0&&(d=h,i=yh(r,h))),i===1)throw a=ul,ho(r,0),mi(r,d),Rn(r,rt()),a;if(i===6)mi(r,d);else{if(h=r.current.alternate,(d&30)===0&&!HE(h)&&(i=Uu(r,d),i===2&&(m=Xi(r),m!==0&&(d=m,i=yh(r,m))),i===1))throw a=ul,ho(r,0),mi(r,d),Rn(r,rt()),a;switch(r.finishedWork=h,r.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:fo(r,An,Ds);break;case 3:if(mi(r,d),(d&130023424)===d&&(i=ph+500-rt(),10<i)){if(tr(r,0)!==0)break;if(h=r.suspendedLanes,(h&d)!==d){wn(),r.pingedLanes|=r.suspendedLanes&h;break}r.timeoutHandle=Td(fo.bind(null,r,An,Ds),i);break}fo(r,An,Ds);break;case 4:if(mi(r,d),(d&4194240)===d)break;for(i=r.eventTimes,h=-1;0<d;){var w=31-yn(d);m=1<<w,w=i[w],w>h&&(h=w),d&=~m}if(d=h,d=rt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*qE(d/1960))-d,10<d){r.timeoutHandle=Td(fo.bind(null,r,An,Ds),d);break}fo(r,An,Ds);break;case 5:fo(r,An,Ds);break;default:throw Error(t(329))}}}return Rn(r,rt()),r.callbackNode===a?Dg.bind(null,r):null}function yh(r,i){var a=cl;return r.current.memoizedState.isDehydrated&&(ho(r,i).flags|=256),r=Uu(r,i),r!==2&&(i=An,An=a,i!==null&&vh(i)),r}function vh(r){An===null?An=r:An.push.apply(An,r)}function HE(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var h=a[d],m=h.getSnapshot;h=h.value;try{if(!_r(m(),h))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function mi(r,i){for(i&=~fh,i&=~Ou,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-yn(i),d=1<<a;r[a]=-1,i&=~d}}function Og(r){if((Qe&6)!==0)throw Error(t(327));ca();var i=tr(r,0);if((i&1)===0)return Rn(r,rt()),null;var a=Uu(r,i);if(r.tag!==0&&a===2){var d=Xi(r);d!==0&&(i=d,a=yh(r,d))}if(a===1)throw a=ul,ho(r,0),mi(r,i),Rn(r,rt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,fo(r,An,Ds),Rn(r,rt()),null}function _h(r,i){var a=Qe;Qe|=1;try{return r(i)}finally{Qe=a,Qe===0&&(ua=rt()+500,fu&&li())}}function co(r){fi!==null&&fi.tag===0&&(Qe&6)===0&&ca();var i=Qe;Qe|=1;var a=ur.transition,d=Fe;try{if(ur.transition=null,Fe=1,r)return r()}finally{Fe=d,ur.transition=a,Qe=i,(Qe&6)===0&&li()}}function wh(){Gn=la.current,dt(la)}function ho(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,EE(a)),Rt!==null)for(a=Rt.return;a!==null;){var d=a;switch(Ad(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&du();break;case 3:ia(),dt(kn),dt(sn),qd();break;case 5:zd(d);break;case 4:ia();break;case 13:dt(yt);break;case 19:dt(yt);break;case 10:Vd(d.type._context);break;case 22:case 23:wh()}a=a.return}if(Bt=r,Rt=r=gi(r.current,null),Yt=Gn=i,jt=0,ul=null,fh=Ou=uo=0,An=cl=null,oo!==null){for(i=0;i<oo.length;i++)if(a=oo[i],d=a.interleaved,d!==null){a.interleaved=null;var h=d.next,m=a.pending;if(m!==null){var w=m.next;m.next=h,d.next=w}a.pending=d}oo=null}return r}function Vg(r,i){do{var a=Rt;try{if(Od(),Iu.current=Cu,bu){for(var d=vt.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}bu=!1}if(lo=0,Ut=Lt=vt=null,rl=!1,sl=0,hh.current=null,a===null||a.return===null){jt=1,ul=i,Rt=null;break}e:{var m=r,w=a.return,b=a,N=i;if(i=Yt,b.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,Z=b,ne=Z.tag;if((Z.mode&1)===0&&(ne===0||ne===11||ne===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ce=og(w);if(ce!==null){ce.flags&=-257,ag(ce,w,b,m,i),ce.mode&1&&ig(m,$,i),i=ce,N=$;var pe=i.updateQueue;if(pe===null){var me=new Set;me.add(N),i.updateQueue=me}else pe.add(N);break e}else{if((i&1)===0){ig(m,$,i),Eh();break e}N=Error(t(426))}}else if(pt&&b.mode&1){var It=og(w);if(It!==null){(It.flags&65536)===0&&(It.flags|=256),ag(It,w,b,m,i),Nd(oa(N,b));break e}}m=N=oa(N,b),jt!==4&&(jt=2),cl===null?cl=[m]:cl.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var U=rg(m,N,i);km(m,U);break e;case 1:b=N;var V=m.type,z=m.stateNode;if((m.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(hi===null||!hi.has(z)))){m.flags|=65536,i&=-i,m.lanes|=i;var re=sg(m,b,i);km(m,re);break e}}m=m.return}while(m!==null)}Mg(a)}catch(ye){i=ye,Rt===a&&a!==null&&(Rt=a=a.return);continue}break}while(!0)}function Lg(){var r=Du.current;return Du.current=Cu,r===null?Cu:r}function Eh(){(jt===0||jt===3||jt===2)&&(jt=4),Bt===null||(uo&268435455)===0&&(Ou&268435455)===0||mi(Bt,Yt)}function Uu(r,i){var a=Qe;Qe|=2;var d=Lg();(Bt!==r||Yt!==i)&&(Ds=null,ho(r,i));do try{WE();break}catch(h){Vg(r,h)}while(!0);if(Od(),Qe=a,Du.current=d,Rt!==null)throw Error(t(261));return Bt=null,Yt=0,jt}function WE(){for(;Rt!==null;)jg(Rt)}function GE(){for(;Rt!==null&&!hs();)jg(Rt)}function jg(r){var i=Bg(r.alternate,r,Gn);r.memoizedProps=r.pendingProps,i===null?Mg(r):Rt=i,hh.current=null}function Mg(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=FE(a,i,Gn),a!==null){Rt=a;return}}else{if(a=UE(a,i),a!==null){a.flags&=32767,Rt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{jt=6,Rt=null;return}}if(i=i.sibling,i!==null){Rt=i;return}Rt=i=r}while(i!==null);jt===0&&(jt=5)}function fo(r,i,a){var d=Fe,h=ur.transition;try{ur.transition=null,Fe=1,KE(r,i,a,d)}finally{ur.transition=h,Fe=d}return null}function KE(r,i,a,d){do ca();while(fi!==null);if((Qe&6)!==0)throw Error(t(327));a=r.finishedWork;var h=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(Ji(r,m),r===Bt&&(Rt=Bt=null,Yt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Lu||(Lu=!0,zg(ps,function(){return ca(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=ur.transition,ur.transition=null;var w=Fe;Fe=1;var b=Qe;Qe|=4,hh.current=null,zE(r,a),Cg(a,r),pE(Ed),Ts=!!wd,Ed=wd=null,r.current=a,$E(a),Jn(),Qe=b,Fe=w,ur.transition=m}else r.current=a;if(Lu&&(Lu=!1,fi=r,ju=h),m=r.pendingLanes,m===0&&(hi=null),Lo(a.stateNode),Rn(r,rt()),i!==null)for(d=r.onRecoverableError,a=0;a<i.length;a++)h=i[a],d(h.value,{componentStack:h.stack,digest:h.digest});if(Vu)throw Vu=!1,r=mh,mh=null,r;return(ju&1)!==0&&r.tag!==0&&ca(),m=r.pendingLanes,(m&1)!==0?r===gh?dl++:(dl=0,gh=r):dl=0,li(),null}function ca(){if(fi!==null){var r=nr(ju),i=ur.transition,a=Fe;try{if(ur.transition=null,Fe=16>r?16:r,fi===null)var d=!1;else{if(r=fi,fi=null,ju=0,(Qe&6)!==0)throw Error(t(331));var h=Qe;for(Qe|=4,fe=r.current;fe!==null;){var m=fe,w=m.child;if((fe.flags&16)!==0){var b=m.deletions;if(b!==null){for(var N=0;N<b.length;N++){var $=b[N];for(fe=$;fe!==null;){var Z=fe;switch(Z.tag){case 0:case 11:case 15:ll(8,Z,m)}var ne=Z.child;if(ne!==null)ne.return=Z,fe=ne;else for(;fe!==null;){Z=fe;var J=Z.sibling,ce=Z.return;if(Tg(Z),Z===$){fe=null;break}if(J!==null){J.return=ce,fe=J;break}fe=ce}}}var pe=m.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var It=me.sibling;me.sibling=null,me=It}while(me!==null)}}fe=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,fe=w;else e:for(;fe!==null;){if(m=fe,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:ll(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,fe=U;break e}fe=m.return}}var V=r.current;for(fe=V;fe!==null;){w=fe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,fe=z;else e:for(w=V;fe!==null;){if(b=fe,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Nu(9,b)}}catch(ye){Et(b,b.return,ye)}if(b===w){fe=null;break e}var re=b.sibling;if(re!==null){re.return=b.return,fe=re;break e}fe=b.return}}if(Qe=h,li(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(ms,r)}catch{}d=!0}return d}finally{Fe=a,ur.transition=i}}return!1}function Fg(r,i,a){i=oa(a,i),i=rg(r,i,1),r=ci(r,i,1),i=wn(),r!==null&&(_s(r,1,i),Rn(r,i))}function Et(r,i,a){if(r.tag===3)Fg(r,r,a);else for(;i!==null;){if(i.tag===3){Fg(i,r,a);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(hi===null||!hi.has(d))){r=oa(a,r),r=sg(i,r,1),i=ci(i,r,1),r=wn(),i!==null&&(_s(i,1,r),Rn(i,r));break}}i=i.return}}function QE(r,i,a){var d=r.pingCache;d!==null&&d.delete(i),i=wn(),r.pingedLanes|=r.suspendedLanes&a,Bt===r&&(Yt&a)===a&&(jt===4||jt===3&&(Yt&130023424)===Yt&&500>rt()-ph?ho(r,0):fh|=a),Rn(r,i)}function Ug(r,i){i===0&&((r.mode&1)===0?i=1:(i=Mr,Mr<<=1,(Mr&130023424)===0&&(Mr=4194304)));var a=wn();r=Rs(r,i),r!==null&&(_s(r,i,a),Rn(r,a))}function YE(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),Ug(r,a)}function XE(r,i){var a=0;switch(r.tag){case 13:var d=r.stateNode,h=r.memoizedState;h!==null&&(a=h.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),Ug(r,a)}var Bg;Bg=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||kn.current)Cn=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return Cn=!1,ME(r,i,a);Cn=(r.flags&131072)!==0}else Cn=!1,pt&&(i.flags&1048576)!==0&&_m(i,mu,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Ru(r,i),r=i.pendingProps;var h=Jo(i,sn.current);ra(i,a),h=Gd(null,i,d,r,h,a);var m=Kd();return i.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Sn(d)?(m=!0,hu(i)):m=!1,i.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Md(i),h.updater=Eu,i.stateNode=h,h._reactInternals=i,Ud(i,d,r,a),i=nh(null,i,d,!0,m,a)):(i.tag=0,pt&&m&&Cd(i),_n(null,i,h,a),i=i.child),i;case 16:d=i.elementType;e:{switch(Ru(r,i),r=i.pendingProps,h=d._init,d=h(d._payload),i.type=d,h=i.tag=ZE(d),r=Er(d,r),h){case 0:i=th(null,i,d,r,a);break e;case 1:i=fg(null,i,d,r,a);break e;case 11:i=lg(null,i,d,r,a);break e;case 14:i=ug(null,i,d,Er(d.type,r),a);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,h=i.pendingProps,h=i.elementType===d?h:Er(d,h),th(r,i,d,h,a);case 1:return d=i.type,h=i.pendingProps,h=i.elementType===d?h:Er(d,h),fg(r,i,d,h,a);case 3:e:{if(pg(i),r===null)throw Error(t(387));d=i.pendingProps,m=i.memoizedState,h=m.element,bm(r,i),wu(i,d,null,a);var w=i.memoizedState;if(d=w.element,m.isDehydrated)if(m={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){h=oa(Error(t(423)),i),i=mg(r,i,d,a,h);break e}else if(d!==h){h=oa(Error(t(424)),i),i=mg(r,i,d,a,h);break e}else for(Wn=ii(i.stateNode.containerInfo.firstChild),Hn=i,pt=!0,wr=null,a=Om(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ta(),d===h){i=Ns(r,i,a);break e}_n(r,i,d,a)}i=i.child}return i;case 5:return Vm(i),r===null&&Pd(i),d=i.type,h=i.pendingProps,m=r!==null?r.memoizedProps:null,w=h.children,xd(d,h)?w=null:m!==null&&xd(d,m)&&(i.flags|=32),hg(r,i),_n(r,i,w,a),i.child;case 6:return r===null&&Pd(i),null;case 13:return gg(r,i,a);case 4:return Bd(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=sa(i,null,d,a):_n(r,i,d,a),i.child;case 11:return d=i.type,h=i.pendingProps,h=i.elementType===d?h:Er(d,h),lg(r,i,d,h,a);case 7:return _n(r,i,i.pendingProps,a),i.child;case 8:return _n(r,i,i.pendingProps.children,a),i.child;case 12:return _n(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(d=i.type._context,h=i.pendingProps,m=i.memoizedProps,w=h.value,at(yu,d._currentValue),d._currentValue=w,m!==null)if(_r(m.value,w)){if(m.children===h.children&&!kn.current){i=Ns(r,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var b=m.dependencies;if(b!==null){w=m.child;for(var N=b.firstContext;N!==null;){if(N.context===d){if(m.tag===1){N=Ps(-1,a&-a),N.tag=2;var $=m.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?N.next=N:(N.next=Z.next,Z.next=N),$.pending=N}}m.lanes|=a,N=m.alternate,N!==null&&(N.lanes|=a),Ld(m.return,a,i),b.lanes|=a;break}N=N.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,b=w.alternate,b!==null&&(b.lanes|=a),Ld(w,a,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}_n(r,i,h.children,a),i=i.child}return i;case 9:return h=i.type,d=i.pendingProps.children,ra(i,a),h=ar(h),d=d(h),i.flags|=1,_n(r,i,d,a),i.child;case 14:return d=i.type,h=Er(d,i.pendingProps),h=Er(d.type,h),ug(r,i,d,h,a);case 15:return cg(r,i,i.type,i.pendingProps,a);case 17:return d=i.type,h=i.pendingProps,h=i.elementType===d?h:Er(d,h),Ru(r,i),i.tag=1,Sn(d)?(r=!0,hu(i)):r=!1,ra(i,a),Rm(i,d,h),Ud(i,d,h,a),nh(null,i,d,!0,r,a);case 19:return vg(r,i,a);case 22:return dg(r,i,a)}throw Error(t(156,i.tag))};function zg(r,i){return Xs(r,i)}function JE(r,i,a,d){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cr(r,i,a,d){return new JE(r,i,a,d)}function xh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ZE(r){if(typeof r=="function")return xh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===j)return 11;if(r===ft)return 14}return 2}function gi(r,i){var a=r.alternate;return a===null?(a=cr(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Bu(r,i,a,d,h,m){var w=2;if(d=r,typeof r=="function")xh(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case P:return po(a.children,h,m,i);case I:w=8,h|=8;break;case A:return r=cr(12,a,i,h|2),r.elementType=A,r.lanes=m,r;case C:return r=cr(13,a,i,h),r.elementType=C,r.lanes=m,r;case et:return r=cr(19,a,i,h),r.elementType=et,r.lanes=m,r;case nt:return zu(a,h,m,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:w=10;break e;case D:w=9;break e;case j:w=11;break e;case ft:w=14;break e;case Ct:w=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=cr(w,a,i,h),i.elementType=r,i.type=d,i.lanes=m,i}function po(r,i,a,d){return r=cr(7,r,d,i),r.lanes=a,r}function zu(r,i,a,d){return r=cr(22,r,d,i),r.elementType=nt,r.lanes=a,r.stateNode={isHidden:!1},r}function Th(r,i,a){return r=cr(6,r,null,i),r.lanes=a,r}function Ih(r,i,a){return i=cr(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function ex(r,i,a,d,h){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vs(0),this.expirationTimes=vs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.identifierPrefix=d,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function bh(r,i,a,d,h,m,w,b,N){return r=new ex(r,i,a,b,N),i===1?(i=1,m===!0&&(i|=8)):i=0,m=cr(3,null,null,i),r.current=m,m.stateNode=r,m.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(m),r}function tx(r,i,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ge,key:d==null?null:""+d,children:r,containerInfo:i,implementation:a}}function $g(r){if(!r)return ai;r=r._reactInternals;e:{if(Ht(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Sn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Sn(a))return gm(r,a,i)}return i}function qg(r,i,a,d,h,m,w,b,N){return r=bh(a,d,!0,r,h,m,w,b,N),r.context=$g(null),a=r.current,d=wn(),h=pi(a),m=Ps(d,h),m.callback=i??null,ci(a,m,h),r.current.lanes=h,_s(r,h,d),Rn(r,d),r}function $u(r,i,a,d){var h=i.current,m=wn(),w=pi(h);return a=$g(a),i.context===null?i.context=a:i.pendingContext=a,i=Ps(m,w),i.payload={element:r},d=d===void 0?null:d,d!==null&&(i.callback=d),r=ci(h,i,w),r!==null&&(Ir(r,h,w,m),_u(r,h,w)),w}function qu(r){return r=r.current,r.child?(r.child.tag===5,r.child.stateNode):null}function Hg(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function kh(r,i){Hg(r,i),(r=r.alternate)&&Hg(r,i)}function nx(){return null}var Wg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Sh(r){this._internalRoot=r}Hu.prototype.render=Sh.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));$u(r,i,null,null)},Hu.prototype.unmount=Sh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;co(function(){$u(null,r,null,null)}),i[ks]=null}};function Hu(r){this._internalRoot=r}Hu.prototype.unstable_scheduleHydration=function(r){if(r){var i=nn();r={blockedOn:null,target:r,priority:i};for(var a=0;a<ae.length&&i!==0&&i<ae[a].priority;a++);ae.splice(a,0,r),a===0&&ut(r)}};function Ch(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Wu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Gg(){}function rx(r,i,a,d,h){if(h){if(typeof d=="function"){var m=d;d=function(){var $=qu(w);m.call($)}}var w=qg(i,d,r,0,null,!1,!1,"",Gg);return r._reactRootContainer=w,r[ks]=w.current,Qa(r.nodeType===8?r.parentNode:r),co(),w}for(;h=r.lastChild;)r.removeChild(h);if(typeof d=="function"){var b=d;d=function(){var $=qu(N);b.call($)}}var N=bh(r,0,!1,null,null,!1,!1,"",Gg);return r._reactRootContainer=N,r[ks]=N.current,Qa(r.nodeType===8?r.parentNode:r),co(function(){$u(i,N,a,d)}),N}function Gu(r,i,a,d,h){var m=a._reactRootContainer;if(m){var w=m;if(typeof h=="function"){var b=h;h=function(){var N=qu(w);b.call(N)}}$u(i,w,r,h)}else w=rx(a,i,r,h,d);return qu(w)}Es=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ke(i.pendingLanes);a!==0&&(ws(i,a|1),Rn(i,rt()),(Qe&6)===0&&(ua=rt()+500,li()))}break;case 13:co(function(){var d=Rs(r,1);if(d!==null){var h=wn();Ir(d,r,1,h)}}),kh(r,1)}},Ur=function(r){if(r.tag===13){var i=Rs(r,134217728);if(i!==null){var a=wn();Ir(i,r,134217728,a)}kh(r,134217728)}},Zs=function(r){if(r.tag===13){var i=pi(r),a=Rs(r,i);if(a!==null){var d=wn();Ir(a,r,i,d)}kh(r,i)}},nn=function(){return Fe},xs=function(r,i){var a=Fe;try{return Fe=r,i()}finally{Fe=a}},Mn=function(r,i,a){switch(i){case"input":if(tn(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var d=a[i];if(d!==r&&d.form===r.form){var h=cu(d);if(!h)throw Error(t(90));Ws(d),tn(d,h)}}}break;case"textarea":$i(r,a);break;case"select":i=a.value,i!=null&&He(r,!!a.multiple,i,!1)}},ds=_h,Vo=co;var sx={usingClientEntryPoint:!1,Events:[Ja,Yo,cu,Xn,Fn,_h]},hl={findFiberByHostInstance:no,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ix={bundleType:hl.bundleType,version:hl.version,rendererPackageName:hl.rendererPackageName,rendererConfig:hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Te.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ki(r),r===null?null:r.stateNode},findFiberByHostInstance:hl.findFiberByHostInstance||nx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{ms=Ku.inject(ix),gn=Ku}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sx,Pn.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ch(i))throw Error(t(200));return tx(r,i,null,a)},Pn.createRoot=function(r,i){if(!Ch(r))throw Error(t(299));var a=!1,d="",h=Wg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(h=i.onRecoverableError)),i=bh(r,1,!1,null,null,a,!1,d,h),r[ks]=i.current,Qa(r.nodeType===8?r.parentNode:r),new Sh(i)},Pn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Ki(i),r=r===null?null:r.stateNode,r},Pn.flushSync=function(r){return co(r)},Pn.hydrate=function(r,i,a){if(!Wu(i))throw Error(t(200));return Gu(null,r,i,!0,a)},Pn.hydrateRoot=function(r,i,a){if(!Ch(r))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,h=!1,m="",w=Wg;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=qg(i,null,r,1,a??null,h,!1,m,w),r[ks]=i.current,Qa(r),d)for(r=0;r<d.length;r++)a=d[r],h=a._getVersion,h=h(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,h]:i.mutableSourceEagerHydrationData.push(a,h);return new Hu(i)},Pn.render=function(r,i,a){if(!Wu(i))throw Error(t(200));return Gu(null,r,i,!1,a)},Pn.unmountComponentAtNode=function(r){if(!Wu(r))throw Error(t(40));return r._reactRootContainer?(co(function(){Gu(null,null,r,!1,function(){r._reactRootContainer=null,r[ks]=null})}),!0):!1},Pn.unstable_batchedUpdates=_h,Pn.unstable_renderSubtreeIntoContainer=function(r,i,a,d){if(!Wu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Gu(r,i,a,!1,d)},Pn.version="18.2.0-next-9e3b772b8-20220608",Pn}var ty;function t_(){if(ty)return Ph.exports;ty=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ph.exports=px(),Ph.exports}var ny;function mx(){if(ny)return Qu;ny=1;var n=t_();return Qu.createRoot=n.createRoot,Qu.hydrateRoot=n.hydrateRoot,Qu}var gx=mx();const yx=e_(gx);t_();function Cl(){return Cl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Cl.apply(this,arguments)}var xi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(xi||(xi={}));const ry="popstate";function vx(n){n===void 0&&(n={});function e(o,l){let{pathname:c="/",search:p="",hash:f=""}=Co(o.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Jh("",{pathname:c,search:p,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let c=o.document.querySelector("base"),p="";if(c&&c.getAttribute("href")){let f=o.location.href,v=f.indexOf("#");p=v===-1?f:f.slice(0,v)}return p+"#"+(typeof l=="string"?l:gc(l))}function s(o,l){Of(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return wx(e,t,s,n)}function St(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Of(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _x(){return Math.random().toString(36).substr(2,8)}function sy(n,e){return{usr:n.state,key:n.key,idx:e}}function Jh(n,e,t,s){return t===void 0&&(t=null),Cl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Co(e):e,{state:t,key:e&&e.key||s||_x()})}function gc(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Co(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function wx(n,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,p=xi.Pop,f=null,v=E();v==null&&(v=0,c.replaceState(Cl({},c.state,{idx:v}),""));function E(){return(c.state||{idx:null}).idx}function T(){p=xi.Pop;let M=E(),le=M==null?null:M-v;v=M,f&&f({action:p,location:H.location,delta:le})}function k(M,le){p=xi.Push;let ee=Jh(H.location,M,le);t&&t(ee,M),v=E()+1;let ie=sy(ee,v),Te=H.createHref(ee);try{c.pushState(ie,"",Te)}catch(Pe){if(Pe instanceof DOMException&&Pe.name==="DataCloneError")throw Pe;o.location.assign(Te)}l&&f&&f({action:p,location:H.location,delta:1})}function L(M,le){p=xi.Replace;let ee=Jh(H.location,M,le);t&&t(ee,M),v=E();let ie=sy(ee,v),Te=H.createHref(ee);c.replaceState(ie,"",Te),l&&f&&f({action:p,location:H.location,delta:0})}function Q(M){let le=o.location.origin!=="null"?o.location.origin:o.location.href,ee=typeof M=="string"?M:gc(M);return ee=ee.replace(/ $/,"%20"),St(le,"No window.location.(origin|href) available to create URL for href: "+ee),new URL(ee,le)}let H={get action(){return p},get location(){return n(o,c)},listen(M){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(ry,T),f=M,()=>{o.removeEventListener(ry,T),f=null}},createHref(M){return e(o,M)},createURL:Q,encodeLocation(M){let le=Q(M);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:k,replace:L,go(M){return c.go(M)}};return H}var iy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(iy||(iy={}));function Ex(n,e,t){t===void 0&&(t="/");let s=typeof e=="string"?Co(e):e,o=Vf(s.pathname||"/",t);if(o==null)return null;let l=n_(n);xx(l);let c=null;for(let p=0;c==null&&p<l.length;++p){let f=Ox(o);c=Px(l[p],f)}return c}function n_(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,c,p)=>{let f={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};f.relativePath.startsWith("/")&&(St(f.relativePath.startsWith(s),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(s.length));let v=bi([s,f.relativePath]),E=t.concat(f);l.children&&l.children.length>0&&(St(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+v+'".')),n_(l.children,e,E,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:Ax(v,l.index),routesMeta:E})};return n.forEach((l,c)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))o(l,c);else for(let f of r_(l.path))o(l,c,f)}),e}function r_(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=r_(s.join("/")),p=[];return p.push(...c.map(f=>f===""?l:[l,f].join("/"))),o&&p.push(...c),p.map(f=>n.startsWith("/")&&f===""?"/":f)}function xx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Rx(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const Tx=/^:[\w-]+$/,Ix=3,bx=2,kx=1,Sx=10,Cx=-2,oy=n=>n==="*";function Ax(n,e){let t=n.split("/"),s=t.length;return t.some(oy)&&(s+=Cx),e&&(s+=bx),t.filter(o=>!oy(o)).reduce((o,l)=>o+(Tx.test(l)?Ix:l===""?kx:Sx),s)}function Rx(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function Px(n,e){let{routesMeta:t}=n,s={},o="/",l=[];for(let c=0;c<t.length;++c){let p=t[c],f=c===t.length-1,v=o==="/"?e:e.slice(o.length)||"/",E=Nx({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},v);if(!E)return null;Object.assign(s,E.params);let T=p.route;l.push({params:s,pathname:bi([o,E.pathname]),pathnameBase:Mx(bi([o,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(o=bi([o,E.pathnameBase]))}return l}function Nx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=Dx(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((v,E,T)=>{let{paramName:k,isOptional:L}=E;if(k==="*"){let H=p[T]||"";c=l.slice(0,l.length-H.length).replace(/(.)\/+$/,"$1")}const Q=p[T];return L&&!Q?v[k]=void 0:v[k]=(Q||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:c,pattern:n}}function Dx(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Of(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,p,f)=>(s.push({paramName:p,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Ox(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Of(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Vf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function Vx(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?Co(n):n;return{pathname:t?t.startsWith("/")?t:Lx(t,e):e,search:Fx(s),hash:Ux(o)}}function Lx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Oh(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Lf(n,e){let t=jx(n);return e?t.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function jf(n,e,t,s){s===void 0&&(s=!1);let o;typeof n=="string"?o=Co(n):(o=Cl({},n),St(!o.pathname||!o.pathname.includes("?"),Oh("?","pathname","search",o)),St(!o.pathname||!o.pathname.includes("#"),Oh("#","pathname","hash",o)),St(!o.search||!o.search.includes("#"),Oh("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,p;if(c==null)p=t;else{let T=e.length-1;if(!s&&c.startsWith("..")){let k=c.split("/");for(;k[0]==="..";)k.shift(),T-=1;o.pathname=k.join("/")}p=T>=0?e[T]:"/"}let f=Vx(o,p),v=c&&c!=="/"&&c.endsWith("/"),E=(l||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(v||E)&&(f.pathname+="/"),f}const bi=n=>n.join("/").replace(/\/\/+/g,"/"),Mx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Fx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Ux=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Bx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const s_=["post","put","patch","delete"];new Set(s_);const zx=["get",...s_];new Set(zx);function Al(){return Al=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Al.apply(this,arguments)}const Mf=F.createContext(null),$x=F.createContext(null),ji=F.createContext(null),Bc=F.createContext(null),qs=F.createContext({outlet:null,matches:[],isDataRoute:!1}),i_=F.createContext(null);function qx(n,e){let{relative:t}=e===void 0?{}:e;Ra()||St(!1);let{basename:s,navigator:o}=F.useContext(ji),{hash:l,pathname:c,search:p}=a_(n,{relative:t}),f=c;return s!=="/"&&(f=c==="/"?s:bi([s,c])),o.createHref({pathname:f,search:p,hash:l})}function Ra(){return F.useContext(Bc)!=null}function Pa(){return Ra()||St(!1),F.useContext(Bc).location}function o_(n){F.useContext(ji).static||F.useLayoutEffect(n)}function Mi(){let{isDataRoute:n}=F.useContext(qs);return n?sT():Hx()}function Hx(){Ra()||St(!1);let n=F.useContext(Mf),{basename:e,future:t,navigator:s}=F.useContext(ji),{matches:o}=F.useContext(qs),{pathname:l}=Pa(),c=JSON.stringify(Lf(o,t.v7_relativeSplatPath)),p=F.useRef(!1);return o_(()=>{p.current=!0}),F.useCallback(function(v,E){if(E===void 0&&(E={}),!p.current)return;if(typeof v=="number"){s.go(v);return}let T=jf(v,JSON.parse(c),l,E.relative==="path");n==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:bi([e,T.pathname])),(E.replace?s.replace:s.push)(T,E.state,E)},[e,s,c,l,n])}function Wx(){let{matches:n}=F.useContext(qs),e=n[n.length-1];return e?e.params:{}}function a_(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=F.useContext(ji),{matches:o}=F.useContext(qs),{pathname:l}=Pa(),c=JSON.stringify(Lf(o,s.v7_relativeSplatPath));return F.useMemo(()=>jf(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function Gx(n,e){return Kx(n,e)}function Kx(n,e,t,s){Ra()||St(!1);let{navigator:o}=F.useContext(ji),{matches:l}=F.useContext(qs),c=l[l.length-1],p=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let v=Pa(),E;if(e){var T;let M=typeof e=="string"?Co(e):e;f==="/"||(T=M.pathname)!=null&&T.startsWith(f)||St(!1),E=M}else E=v;let k=E.pathname||"/",L=k;if(f!=="/"){let M=f.replace(/^\//,"").split("/");L="/"+k.replace(/^\//,"").split("/").slice(M.length).join("/")}let Q=Ex(n,{pathname:L}),H=Zx(Q&&Q.map(M=>Object.assign({},M,{params:Object.assign({},p,M.params),pathname:bi([f,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?f:bi([f,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,t,s);return e&&H?F.createElement(Bc.Provider,{value:{location:Al({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:xi.Pop}},H):H}function Qx(){let n=rT(),e=Bx(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:o},t):null,null)}const Yx=F.createElement(Qx,null);class Xx extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(qs.Provider,{value:this.props.routeContext},F.createElement(i_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jx(n){let{routeContext:e,match:t,children:s}=n,o=F.useContext(Mf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(qs.Provider,{value:e},s)}function Zx(n,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if((l=t)!=null&&l.errors)n=t.matches;else return null}let c=n,p=(o=t)==null?void 0:o.errors;if(p!=null){let E=c.findIndex(T=>T.route.id&&p?.[T.route.id]);E>=0||St(!1),c=c.slice(0,Math.min(c.length,E+1))}let f=!1,v=-1;if(t&&s&&s.v7_partialHydration)for(let E=0;E<c.length;E++){let T=c[E];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(v=E),T.route.id){let{loaderData:k,errors:L}=t,Q=T.route.loader&&k[T.route.id]===void 0&&(!L||L[T.route.id]===void 0);if(T.route.lazy||Q){f=!0,v>=0?c=c.slice(0,v+1):c=[c[0]];break}}}return c.reduceRight((E,T,k)=>{let L,Q=!1,H=null,M=null;t&&(L=p&&T.route.id?p[T.route.id]:void 0,H=T.route.errorElement||Yx,f&&(v<0&&k===0?(iT("route-fallback"),Q=!0,M=null):v===k&&(Q=!0,M=T.route.hydrateFallbackElement||null)));let le=e.concat(c.slice(0,k+1)),ee=()=>{let ie;return L?ie=H:Q?ie=M:T.route.Component?ie=F.createElement(T.route.Component,null):T.route.element?ie=T.route.element:ie=E,F.createElement(Jx,{match:T,routeContext:{outlet:E,matches:le,isDataRoute:t!=null},children:ie})};return t&&(T.route.ErrorBoundary||T.route.errorElement||k===0)?F.createElement(Xx,{location:t.location,revalidation:t.revalidation,component:H,error:L,children:ee(),routeContext:{outlet:null,matches:le,isDataRoute:!0}}):ee()},null)}var l_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(l_||{}),u_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(u_||{});function eT(n){let e=F.useContext(Mf);return e||St(!1),e}function tT(n){let e=F.useContext($x);return e||St(!1),e}function nT(n){let e=F.useContext(qs);return e||St(!1),e}function c_(n){let e=nT(),t=e.matches[e.matches.length-1];return t.route.id||St(!1),t.route.id}function rT(){var n;let e=F.useContext(i_),t=tT(),s=c_();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function sT(){let{router:n}=eT(l_.UseNavigateStable),e=c_(u_.UseNavigateStable),t=F.useRef(!1);return o_(()=>{t.current=!0}),F.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,Al({fromRouteId:e},l)))},[n,e])}const ay={};function iT(n,e,t){ay[n]||(ay[n]=!0)}function Zh(n){let{to:e,replace:t,state:s,relative:o}=n;Ra()||St(!1);let{future:l,static:c}=F.useContext(ji),{matches:p}=F.useContext(qs),{pathname:f}=Pa(),v=Mi(),E=jf(e,Lf(p,l.v7_relativeSplatPath),f,o==="path"),T=JSON.stringify(E);return F.useEffect(()=>v(JSON.parse(T),{replace:t,state:s,relative:o}),[v,T,o,t,s]),null}function Os(n){St(!1)}function oT(n){let{basename:e="/",children:t=null,location:s,navigationType:o=xi.Pop,navigator:l,static:c=!1,future:p}=n;Ra()&&St(!1);let f=e.replace(/^\/*/,"/"),v=F.useMemo(()=>({basename:f,navigator:l,static:c,future:Al({v7_relativeSplatPath:!1},p)}),[f,p,l,c]);typeof s=="string"&&(s=Co(s));let{pathname:E="/",search:T="",hash:k="",state:L=null,key:Q="default"}=s,H=F.useMemo(()=>{let M=Vf(E,f);return M==null?null:{location:{pathname:M,search:T,hash:k,state:L,key:Q},navigationType:o}},[f,E,T,k,L,Q,o]);return H==null?null:F.createElement(ji.Provider,{value:v},F.createElement(Bc.Provider,{children:t,value:H}))}function aT(n){let{children:e,location:t}=n;return Gx(ef(e),t)}new Promise(()=>{});function ef(n,e){e===void 0&&(e=[]);let t=[];return F.Children.forEach(n,(s,o)=>{if(!F.isValidElement(s))return;let l=[...e,o];if(s.type===F.Fragment){t.push.apply(t,ef(s.props.children,l));return}s.type!==Os&&St(!1),!s.props.index||!s.props.children||St(!1);let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=ef(s.props.children,l)),t.push(c)}),t}function tf(){return tf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},tf.apply(this,arguments)}function lT(n,e){if(n==null)return{};var t={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function uT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cT(n,e){return n.button===0&&(!e||e==="_self")&&!uT(n)}function nf(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function dT(n,e){let t=nf(n);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}const hT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],fT="6";try{window.__reactRouterVersion=fT}catch{}const pT="startTransition",ly=dx[pT];function mT(n){let{basename:e,children:t,future:s,window:o}=n,l=F.useRef();l.current==null&&(l.current=vx({window:o,v5Compat:!0}));let c=l.current,[p,f]=F.useState({action:c.action,location:c.location}),{v7_startTransition:v}=s||{},E=F.useCallback(T=>{v&&ly?ly(()=>f(T)):f(T)},[f,v]);return F.useLayoutEffect(()=>c.listen(E),[c,E]),F.createElement(oT,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:c,future:s})}const gT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ta=F.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:c,state:p,target:f,to:v,preventScrollReset:E,unstable_viewTransition:T}=e,k=lT(e,hT),{basename:L}=F.useContext(ji),Q,H=!1;if(typeof v=="string"&&yT.test(v)&&(Q=v,gT))try{let ie=new URL(window.location.href),Te=v.startsWith("//")?new URL(ie.protocol+v):new URL(v),Pe=Vf(Te.pathname,L);Te.origin===ie.origin&&Pe!=null?v=Pe+Te.search+Te.hash:H=!0}catch{}let M=qx(v,{relative:o}),le=vT(v,{replace:c,state:p,target:f,preventScrollReset:E,relative:o,unstable_viewTransition:T});function ee(ie){s&&s(ie),ie.defaultPrevented||le(ie)}return F.createElement("a",tf({},k,{href:Q||M,onClick:H||l?s:ee,ref:t,target:f}))});var uy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(uy||(uy={}));var cy;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(cy||(cy={}));function vT(n,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:c,unstable_viewTransition:p}=e===void 0?{}:e,f=Mi(),v=Pa(),E=a_(n,{relative:c});return F.useCallback(T=>{if(cT(T,t)){T.preventDefault();let k=s!==void 0?s:gc(v)===gc(E);f(n,{replace:k,state:o,preventScrollReset:l,relative:c,unstable_viewTransition:p})}},[v,f,E,s,o,t,n,l,c,p])}function Ff(n){let e=F.useRef(nf(n)),t=F.useRef(!1),s=Pa(),o=F.useMemo(()=>dT(s.search,t.current?null:e.current),[s.search]),l=Mi(),c=F.useCallback((p,f)=>{const v=nf(typeof p=="function"?p(o):p);t.current=!0,l("?"+v,f)},[l,o]);return[o,c]}const _T="modulepreload",wT=function(n,e){return new URL(n,e).href},dy={},rf=function(e,t,s){let o=Promise.resolve();if(t&&t.length>0){let v=function(E){return Promise.all(E.map(T=>Promise.resolve(T).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};const c=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),f=p?.nonce||p?.getAttribute("nonce");o=v(t.map(E=>{if(E=wT(E,s),E in dy)return;dy[E]=!0;const T=E.endsWith(".css"),k=T?'[rel="stylesheet"]':"";if(s)for(let Q=c.length-1;Q>=0;Q--){const H=c[Q];if(H.href===E&&(!T||H.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${E}"]${k}`))return;const L=document.createElement("link");if(L.rel=T?"stylesheet":_T,T||(L.as="script"),L.crossOrigin="",L.href=E,f&&L.setAttribute("nonce",f),document.head.appendChild(L),T)return new Promise((Q,H)=>{L.addEventListener("load",Q),L.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${E}`)))})}))}function l(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return o.then(c=>{for(const p of c||[])p.status==="rejected"&&l(p.reason);return e().catch(l)})};let ml=null,sf=null;const Yu=new Map,pl=new Map,hy=6e4,ET=n=>{if(typeof atob=="function")try{return decodeURIComponent(escape(atob(n)))}catch{return atob(n)}return Buffer.from(n,"base64").toString("utf-8")},xT=n=>{if(typeof btoa=="function")try{return btoa(unescape(encodeURIComponent(n)))}catch{return btoa(n)}return Buffer.from(n,"utf-8").toString("base64")},bt=async n=>{if(n){const{Octokit:t}=await rf(async()=>{const{Octokit:s}=await import("./index-DHc0WjQD.js");return{Octokit:s}},[],import.meta.url);return new t({auth:n})}if(ml)return ml;if(!sf)throw new Error("GitHub service not initialized. Please configure your token.");const{Octokit:e}=await rf(async()=>{const{Octokit:t}=await import("./index-DHc0WjQD.js");return{Octokit:t}},[],import.meta.url);return ml=new e({auth:sf}),ml},fy=n=>{const e=n.map(t=>(t.name||"").toLowerCase());return e.some(t=>t==="critical"||t.includes("p0")||t.includes("sev: critical")||t.includes("severity: critical"))?"critical":e.some(t=>t==="high"||t.includes("p1")||t.includes("priority: high")||t.includes("severity: high"))?"high":e.some(t=>t==="medium"||t.includes("p2")||t.includes("priority: medium")||t.includes("severity: medium"))?"medium":e.some(t=>t==="low"||t.includes("p3")||t.includes("priority: low")||t.includes("severity: low")||t.includes("minor"))?"low":"medium"},Vh=async(n,e,t,s)=>{const o=await bt(),l=`${n}/${e}/${t}`;if(s){const f=Yu.get(l);if(f&&f.timestamp===s)return f.data}const p=(await o.paginate(o.issues.listComments,{owner:n,repo:e,issue_number:t,per_page:100})).map(f=>({id:String(f.id),text:f.body||"",buildNumber:void 0}));return s&&(Yu.size>500&&Yu.clear(),Yu.set(l,{timestamp:s,data:p})),p},Me={initialize:n=>{sf=n,ml=null,pl.clear()},getOwnerType:async n=>{const e=await bt();try{const{data:t}=await e.users.getByUsername({username:n});return t.type==="Organization"?"Organization":"User"}catch(t){return console.error("Failed to fetch owner type",t),null}},getIssueComments:Vh,getIssues:async(n,e,t="open",s=!1)=>{const o=await bt();try{const c=(await o.paginate(o.issues.listForRepo,{owner:n,repo:e,state:t,sort:"updated",direction:"desc",per_page:100})).filter(p=>!p.pull_request).map(p=>({id:p.id,number:p.number,title:p.title,description:p.body||"",state:p.state,priority:fy(p.labels),labels:p.labels.map(f=>f.name),type:p.labels.find(f=>f.name==="bug"||f.name==="feature"||f.name==="ui")?.name||"bug",createdAt:p.created_at,updatedAt:p.updated_at,commentsCount:p.comments,reporter:{name:p.user.login,avatar:p.user.avatar_url},comments:[]}));return s&&await Promise.all(c.map(async p=>{p.commentsCount>0&&(p.comments=await Vh(n,e,p.number,p.updatedAt))})),c}catch(l){return console.error("Failed to fetch issues",l),[]}},getPullRequests:async(n,e,t)=>{const s=await bt(t);try{return(await s.paginate(s.pulls.list,{owner:n,repo:e,state:"open",sort:"updated",direction:"desc",per_page:100})).map(l=>({id:l.id,number:l.number,title:l.title,branch:l.head.ref,targetBranch:l.base.ref,author:{name:l.user.login,avatar:l.user.avatar_url},hasConflicts:!1,isDraft:l.draft,status:l.draft?"draft":"open",filesChanged:0}))}catch(o){return console.error("Failed to fetch PRs",o),[]}},getIssue:async(n,e,t)=>{const s=await bt(),{data:o}=await s.issues.get({owner:n,repo:e,issue_number:t}),l={id:o.id,number:o.number,title:o.title,description:o.body||"",state:o.state,priority:fy(o.labels),labels:(o.labels||[]).map(c=>c.name),type:(o.labels||[]).find(c=>c.name==="bug"||c.name==="feature"||c.name==="ui")?.name||"bug",createdAt:o.created_at,updatedAt:o.updated_at,commentsCount:o.comments,reporter:{name:o.user?.login||"",avatar:o.user?.avatar_url||""},comments:[]};return o.comments>0&&(l.comments=await Vh(n,e,l.number,o.updated_at)),l},getPullRequest:async(n,e,t)=>{const s=await bt(),{data:o}=await s.pulls.get({owner:n,repo:e,pull_number:t});return o},getPullRequestFiles:async(n,e,t)=>{const s=await bt();return(await s.paginate(s.pulls.listFiles,{owner:n,repo:e,pull_number:t,per_page:100})).map(l=>({filename:l.filename,status:l.status,additions:l.additions,deletions:l.deletions,changes:l.changes,patch:l.patch}))},getFileContent:async(n,e,t,s)=>{const o=await bt(),{data:l}=await o.repos.getContent({owner:n,repo:e,path:t,ref:s});if(Array.isArray(l)||l.type!=="file")throw new Error("Unsupported content type for file resolution.");const c=l;return{content:ET(c.content||""),sha:c.sha,path:c.path,encoding:c.encoding}},updateFileContent:async(n,e,t,s,o,l,c)=>(await(await bt()).repos.createOrUpdateFileContents({owner:n,repo:e,path:t,branch:s,sha:l,message:c,content:xT(o)}),!0),createIssue:async(n,e,t,s)=>(await(await bt()).issues.create({owner:t,repo:s,title:e.title||"",body:e.description,labels:e.labels})).data,addComment:async(n,e,t,s)=>(await(await bt()).issues.createComment({owner:n,repo:e,issue_number:t,body:s}),!0),updateIssueStatus:async(n,e,t,s)=>(await(await bt()).issues.update({owner:n,repo:e,issue_number:t,state:s}),!0),mergePR:async(n,e,t)=>(await(await bt()).pulls.merge({owner:n,repo:e,pull_number:t}),!0),denyPR:async(n,e,t)=>(await(await bt()).pulls.update({owner:n,repo:e,pull_number:t,state:"closed"}),!0),updatePR:async(n,e,t,s)=>{const o=await bt(),{isDraft:l,...c}=s;if(l!==void 0){const{data:p}=await o.pulls.get({owner:n,repo:e,pull_number:t}),f=l?"mutation($id: ID!) { convertPullRequestToDraft(input: {pullRequestId: $id}) { clientMutationId } }":"mutation($id: ID!) { markPullRequestReadyForReview(input: {pullRequestId: $id}) { clientMutationId } }";await o.request("POST /graphql",{query:f,variables:{id:p.node_id}})}return Object.keys(c).length>0&&await o.pulls.update({owner:n,repo:e,pull_number:t,...c}),!0},markReadyForReview:async(n,e,t)=>{const s=await bt(),{data:o}=await s.pulls.get({owner:n,repo:e,pull_number:t});return o.draft&&await s.request("POST /graphql",{query:"mutation($id: ID!) { markPullRequestReadyForReview(input: {pullRequestId: $id}) { clientMutationId } }",variables:{id:o.node_id}}),!0},addReviewer:async(n,e,t,s)=>(await(await bt()).pulls.requestReviewers({owner:n,repo:e,pull_number:t,reviewers:[s]}),!0),approvePR:async(n,e,t)=>(await(await bt()).pulls.createReview({owner:n,repo:e,pull_number:t,event:"APPROVE"}),!0),updateBranch:async(n,e,t)=>{const s=await bt();try{return await s.pulls.updateBranch({owner:n,repo:e,pull_number:t}),!0}catch(o){return console.error("Auto-resolve (update branch) failed",o),!1}},getOpenIssueCount:async(n,e,t)=>{const s=`issue-${n}-${e}`,o=pl.get(s);if(o&&Date.now()-o.timestamp<hy)return o.count;const c=await(await bt(t)).search.issuesAndPullRequests({q:`repo:${n}/${e} is:issue is:open`});return pl.set(s,{timestamp:Date.now(),count:c.data.total_count}),c.data.total_count},getOpenPullRequestCount:async(n,e,t)=>{const s=`pr-${n}-${e}`,o=pl.get(s);if(o&&Date.now()-o.timestamp<hy)return o.count;const c=await(await bt(t)).search.issuesAndPullRequests({q:`repo:${n}/${e} is:pr is:open`});return pl.set(s,{timestamp:Date.now(),count:c.data.total_count}),c.data.total_count}},TT=()=>{};var py={};const d_=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},IT=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],p=n[t++],f=((o&7)<<18|(l&63)<<12|(c&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},h_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,p=c?n[o+1]:0,f=o+2<n.length,v=f?n[o+2]:0,E=l>>2,T=(l&3)<<4|p>>4;let k=(p&15)<<2|v>>6,L=v&63;f||(L=64,c||(k=64)),s.push(t[E],t[T],t[k],t[L])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(d_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):IT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],p=o<n.length?t[n.charAt(o)]:0;++o;const v=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||p==null||v==null||T==null)throw new bT;const k=l<<2|p>>4;if(s.push(k),v!==64){const L=p<<4&240|v>>2;if(s.push(L),T!==64){const Q=v<<6&192|T;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kT=function(n){const e=d_(n);return h_.encodeByteArray(e,!0)},yc=function(n){return kT(n).replace(/\./g,"")},f_=function(n){try{return h_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ST(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const CT=()=>ST().__FIREBASE_DEFAULTS__,AT=()=>{if(typeof process>"u"||typeof py>"u")return;const n=py.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&f_(n[1]);return e&&JSON.parse(e)},zc=()=>{try{return TT()||CT()||AT()||RT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},p_=n=>zc()?.emulatorHosts?.[n],PT=n=>{const e=p_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},m_=()=>zc()?.config,g_=n=>zc()?.[`_${n}`];class NT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Na(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function y_(n){return(await fetch(n,{credentials:"include"})).ok}function DT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yc(JSON.stringify(t)),yc(JSON.stringify(c)),""].join(".")}const xl={};function OT(){const n={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?n.emulator.push(e):n.prod.push(e);return n}function VT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let my=!1;function v_(n,e){if(typeof window>"u"||typeof document>"u"||!Na(window.location.host)||xl[n]===e||xl[n]||my)return;xl[n]=e;function t(k){return`__firebase__banner__${k}`}const s="__firebase__banner",l=OT().prod.length>0;function c(){const k=document.getElementById(s);k&&k.remove()}function p(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function f(k,L){k.setAttribute("width","24"),k.setAttribute("id",L),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function v(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{my=!0,c()},k}function E(k,L){k.setAttribute("id",L),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function T(){const k=VT(s),L=t("text"),Q=document.getElementById(L)||document.createElement("span"),H=t("learnmore"),M=document.getElementById(H)||document.createElement("a"),le=t("preprendIcon"),ee=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const ie=k.element;p(ie),E(M,H);const Te=v();f(ee,le),ie.append(ee,Q,M,Te),document.body.appendChild(ie)}l?(Q.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function jT(){const n=zc()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Uf(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function FT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UT(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function BT(){return!jT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bf(){try{return typeof indexedDB=="object"}catch{return!1}}function zf(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}function __(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const zT="FirebaseError";class Ar extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=zT,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?$T(l,s):"Error",p=`${this.serviceName}: ${c} (${o}).`;return new Ar(o,p,s)}}function $T(n,e){return n.replace(qT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const qT=/\{\$([^}]+)}/g;function HT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ri(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(gy(l)&&gy(c)){if(!Ri(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function gy(n){return n!==null&&typeof n=="object"}function Bl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function gl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function yl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function WT(n,e){const t=new GT(n,e);return t.subscribe.bind(t)}class GT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");KT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Lh),o.error===void 0&&(o.error=Lh),o.complete===void 0&&(o.complete=Lh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lh(){}const QT=1e3,YT=2,XT=14400*1e3,JT=.5;function yy(n,e=QT,t=YT){const s=e*Math.pow(t,n),o=Math.round(JT*s*(Math.random()-.5)*2);return Math.min(XT,s+o)}function Zt(n){return n&&n._delegate?n._delegate:n}class Cr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mo="[DEFAULT]";class ZT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new NT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tI(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:eI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eI(n){return n===mo?void 0:n}function tI(n){return n.instantiationMode==="EAGER"}class nI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const rI={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},sI=ze.INFO,iI={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},oI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=iI[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $c{constructor(e){this.name=e,this._logLevel=sI,this._logHandler=oI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const aI=(n,e)=>e.some(t=>n instanceof t);let vy,_y;function lI(){return vy||(vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uI(){return _y||(_y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w_=new WeakMap,of=new WeakMap,E_=new WeakMap,jh=new WeakMap,$f=new WeakMap;function cI(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ki(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&w_.set(t,n)}).catch(()=>{}),$f.set(e,n),e}function dI(n){if(of.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});of.set(n,e)}let af={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return of.get(n);if(e==="objectStoreNames")return n.objectStoreNames||E_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ki(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hI(n){af=n(af)}function fI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Mh(this),e,...t);return E_.set(s,e.sort?e.sort():[e]),ki(s)}:uI().includes(n)?function(...e){return n.apply(Mh(this),e),ki(w_.get(this))}:function(...e){return ki(n.apply(Mh(this),e))}}function pI(n){return typeof n=="function"?fI(n):(n instanceof IDBTransaction&&dI(n),aI(n,lI())?new Proxy(n,af):n)}function ki(n){if(n instanceof IDBRequest)return cI(n);if(jh.has(n))return jh.get(n);const e=pI(n);return e!==n&&(jh.set(n,e),$f.set(e,n)),e}const Mh=n=>$f.get(n);function x_(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),p=ki(c);return s&&c.addEventListener("upgradeneeded",f=>{s(ki(c.result),f.oldVersion,f.newVersion,ki(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),p.then(f=>{l&&f.addEventListener("close",()=>l()),o&&f.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const mI=["get","getKey","getAll","getAllKeys","count"],gI=["put","add","delete","clear"],Fh=new Map;function wy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Fh.get(e))return Fh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=gI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||mI.includes(t)))return;const l=async function(c,...p){const f=this.transaction(c,o?"readwrite":"readonly");let v=f.store;return s&&(v=v.index(p.shift())),(await Promise.all([v[t](...p),o&&f.done]))[0]};return Fh.set(e,l),l}hI(n=>({...n,get:(e,t,s)=>wy(e,t)||n.get(e,t,s),has:(e,t)=>!!wy(e,t)||n.has(e,t)}));class yI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function vI(n){return n.getComponent()?.type==="VERSION"}const lf="@firebase/app",Ey="0.14.6";const Us=new $c("@firebase/app"),_I="@firebase/app-compat",wI="@firebase/analytics-compat",EI="@firebase/analytics",xI="@firebase/app-check-compat",TI="@firebase/app-check",II="@firebase/auth",bI="@firebase/auth-compat",kI="@firebase/database",SI="@firebase/data-connect",CI="@firebase/database-compat",AI="@firebase/functions",RI="@firebase/functions-compat",PI="@firebase/installations",NI="@firebase/installations-compat",DI="@firebase/messaging",OI="@firebase/messaging-compat",VI="@firebase/performance",LI="@firebase/performance-compat",jI="@firebase/remote-config",MI="@firebase/remote-config-compat",FI="@firebase/storage",UI="@firebase/storage-compat",BI="@firebase/firestore",zI="@firebase/ai",$I="@firebase/firestore-compat",qI="firebase",HI="12.6.0";const uf="[DEFAULT]",WI={[lf]:"fire-core",[_I]:"fire-core-compat",[EI]:"fire-analytics",[wI]:"fire-analytics-compat",[TI]:"fire-app-check",[xI]:"fire-app-check-compat",[II]:"fire-auth",[bI]:"fire-auth-compat",[kI]:"fire-rtdb",[SI]:"fire-data-connect",[CI]:"fire-rtdb-compat",[AI]:"fire-fn",[RI]:"fire-fn-compat",[PI]:"fire-iid",[NI]:"fire-iid-compat",[DI]:"fire-fcm",[OI]:"fire-fcm-compat",[VI]:"fire-perf",[LI]:"fire-perf-compat",[jI]:"fire-rc",[MI]:"fire-rc-compat",[FI]:"fire-gcs",[UI]:"fire-gcs-compat",[BI]:"fire-fst",[$I]:"fire-fst-compat",[zI]:"fire-vertex","fire-js":"fire-js",[qI]:"fire-js-all"};const vc=new Map,GI=new Map,cf=new Map;function xy(n,e){try{n.container.addComponent(e)}catch(t){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ss(n){const e=n.name;if(cf.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,n);for(const t of vc.values())xy(t,n);for(const t of GI.values())xy(t,n);return!0}function Ro(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kn(n){return n==null?!1:n.settings!==void 0}const KI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new Ao("app","Firebase",KI);class QI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}const Da=HI;function T_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:uf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Si.create("bad-app-name",{appName:String(o)});if(t||(t=m_()),!t)throw Si.create("no-options");const l=vc.get(o);if(l){if(Ri(t,l.options)&&Ri(s,l.config))return l;throw Si.create("duplicate-app",{appName:o})}const c=new nI(o);for(const f of cf.values())c.addComponent(f);const p=new QI(t,s,c);return vc.set(o,p),p}function qf(n=uf){const e=vc.get(n);if(!e&&n===uf&&m_())return T_();if(!e)throw Si.create("no-app",{appName:n});return e}function fr(n,e,t){let s=WI[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(c.join(" "));return}ss(new Cr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const YI="firebase-heartbeat-database",XI=1,Rl="firebase-heartbeat-store";let Uh=null;function I_(){return Uh||(Uh=x_(YI,XI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Si.create("idb-open",{originalErrorMessage:n.message})})),Uh}async function JI(n){try{const t=(await I_()).transaction(Rl),s=await t.objectStore(Rl).get(b_(n));return await t.done,s}catch(e){if(e instanceof Ar)Us.warn(e.message);else{const t=Si.create("idb-get",{originalErrorMessage:e?.message});Us.warn(t.message)}}}async function Ty(n,e){try{const s=(await I_()).transaction(Rl,"readwrite");await s.objectStore(Rl).put(e,b_(n)),await s.done}catch(t){if(t instanceof Ar)Us.warn(t.message);else{const s=Si.create("idb-set",{originalErrorMessage:t?.message});Us.warn(s.message)}}}function b_(n){return`${n.name}!${n.options.appId}`}const ZI=1024,eb=30;class tb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rb(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Iy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>eb){const o=sb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Us.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Iy(),{heartbeatsToSend:t,unsentEntries:s}=nb(this._heartbeatsCache.heartbeats),o=yc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Us.warn(e),""}}}function Iy(){return new Date().toISOString().substring(0,10)}function nb(n,e=ZI){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),by(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),by(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class rb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bf()?zf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ty(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ty(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function by(n){return yc(JSON.stringify({version:2,heartbeats:n})).length}function sb(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}function ib(n){ss(new Cr("platform-logger",e=>new yI(e),"PRIVATE")),ss(new Cr("heartbeat",e=>new tb(e),"PRIVATE")),fr(lf,Ey,n),fr(lf,Ey,"esm2020"),fr("fire-js","")}ib("");var ob="firebase",ab="12.7.0";fr(ob,ab,"app");function k_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lb=k_,S_=new Ao("auth","Firebase",k_());const _c=new $c("@firebase/auth");function ub(n,...e){_c.logLevel<=ze.WARN&&_c.warn(`Auth (${Da}): ${n}`,...e)}function oc(n,...e){_c.logLevel<=ze.ERROR&&_c.error(`Auth (${Da}): ${n}`,...e)}function pr(n,...e){throw Wf(n,...e)}function Sr(n,...e){return Wf(n,...e)}function Hf(n,e,t){const s={...lb(),[e]:t};return new Ao("auth","Firebase",s).create(e,{appName:n.name})}function Ms(n){return Hf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cb(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&pr(n,"argument-error"),Hf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wf(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return S_.create(n,...e)}function Ce(n,e,...t){if(!n)throw Wf(e,...t)}function Ls(n){const e="INTERNAL ASSERTION FAILED: "+n;throw oc(e),new Error(e)}function Bs(n,e){n||Ls(e)}function df(){return typeof self<"u"&&self.location?.href||""}function db(){return ky()==="http:"||ky()==="https:"}function ky(){return typeof self<"u"&&self.location?.protocol||null}function hb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(db()||Uf()||"connection"in navigator)?navigator.onLine:!0}function fb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class zl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bs(t>e,"Short delay should be less than long delay!"),this.isMobile=LT()||FT()}get(){return hb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gf(n,e){Bs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class C_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const mb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gb=new zl(3e4,6e4);function Fi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ui(n,e,t,s,o={}){return A_(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const p=Bl({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const v={method:e,headers:f,...l};return MT()||(v.referrerPolicy="no-referrer"),n.emulatorConfig&&Na(n.emulatorConfig.host)&&(v.credentials="include"),C_.fetch()(await R_(n,n.config.apiHost,t,p),v)})}async function A_(n,e,t){n._canInitEmulator=!1;const s={...pb,...e};try{const o=new vb(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Xu(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const p=l.ok?c.errorMessage:c.error.message,[f,v]=p.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xu(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Xu(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Xu(n,"user-disabled",c);const E=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Hf(n,E,v);pr(n,E)}}catch(o){if(o instanceof Ar)throw o;pr(n,"network-request-failed",{message:String(o)})}}async function $l(n,e,t,s,o={}){const l=await Ui(n,e,t,s,o);return"mfaPendingCredential"in l&&pr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function R_(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Gf(n.config,o):`${n.config.apiScheme}://${o}`;return mb.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function yb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Sr(this.auth,"network-request-failed")),gb.get())})}}function Xu(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Sr(n,e,s);return o.customData._tokenResponse=t,o}function Sy(n){return n!==void 0&&n.enterprise!==void 0}class _b{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wb(n,e){return Ui(n,"GET","/v2/recaptchaConfig",Fi(n,e))}async function Eb(n,e){return Ui(n,"POST","/v1/accounts:delete",e)}async function wc(n,e){return Ui(n,"POST","/v1/accounts:lookup",e)}function Tl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xb(n,e=!1){const t=Zt(n),s=await t.getIdToken(e),o=Kf(s);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:s,authTime:Tl(Bh(o.auth_time)),issuedAtTime:Tl(Bh(o.iat)),expirationTime:Tl(Bh(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Bh(n){return Number(n)*1e3}function Kf(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return oc("JWT malformed, contained fewer than 3 sections"),null;try{const o=f_(t);return o?JSON.parse(o):(oc("Failed to decode base64 JWT payload"),null)}catch(o){return oc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Cy(n){const e=Kf(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Pl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ar&&Tb(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Tb({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Ib{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class hf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tl(this.lastLoginAt),this.creationTime=Tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ec(n){const e=n.auth,t=await n.getIdToken(),s=await Pl(n,wc(e,{idToken:t}));Ce(s?.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=o.providerUserInfo?.length?P_(o.providerUserInfo):[],c=kb(n.providerData,l),p=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!c?.length,v=p?f:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new hf(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function bb(n){const e=Zt(n);await Ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kb(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function P_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Sb(n,e){const t=await A_(n,{},async()=>{const s=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await R_(n,o,"/v1/token",`key=${l}`),p=await n._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:p,body:s};return n.emulatorConfig&&Na(n.emulatorConfig.host)&&(f.credentials="include"),C_.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Cb(n,e){return Ui(n,"POST","/v2/accounts:revokeToken",Fi(n,e))}class ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=Cy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await Sb(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new ga;return s&&(Ce(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ce(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ce(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ga,this.toJSON())}_performRefresh(){return Ls("not implemented")}}function vi(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class br{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Ib(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Pl(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xb(this,e)}reload(){return bb(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ec(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Ms(this.auth));const e=await this.getIdToken();return await Pl(this,Eb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,p=t.tenantId??void 0,f=t._redirectEventId??void 0,v=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:T,emailVerified:k,isAnonymous:L,providerData:Q,stsTokenManager:H}=t;Ce(T&&H,e,"internal-error");const M=ga.fromJSON(this.name,H);Ce(typeof T=="string",e,"internal-error"),vi(s,e.name),vi(o,e.name),Ce(typeof k=="boolean",e,"internal-error"),Ce(typeof L=="boolean",e,"internal-error"),vi(l,e.name),vi(c,e.name),vi(p,e.name),vi(f,e.name),vi(v,e.name),vi(E,e.name);const le=new br({uid:T,auth:e,email:o,emailVerified:k,displayName:s,isAnonymous:L,photoURL:c,phoneNumber:l,tenantId:p,stsTokenManager:M,createdAt:v,lastLoginAt:E});return Q&&Array.isArray(Q)&&(le.providerData=Q.map(ee=>({...ee}))),f&&(le._redirectEventId=f),le}static async _fromIdTokenResponse(e,t,s=!1){const o=new ga;o.updateFromServerResponse(t);const l=new br({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ec(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?P_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,p=new ga;p.updateFromIdToken(s);const f=new br({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:c}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new hf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(f,v),f}}const Ay=new Map;function js(n){Bs(n instanceof Function,"Expected a class definition");let e=Ay.get(n);return e?(Bs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ay.set(n,e),e)}class N_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}N_.type="NONE";const Ry=N_;function ac(n,e,t){return`firebase:${n}:${e}:${t}`}class ya{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=ac(this.userKey,o.apiKey,l),this.fullPersistenceKey=ac("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wc(this.auth,{idToken:e}).catch(()=>{});return t?br._fromGetAccountInfoResponse(this.auth,t,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ya(js(Ry),e,s);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||js(Ry);const c=ac(s,e.config.apiKey,e.name);let p=null;for(const v of t)try{const E=await v._get(c);if(E){let T;if(typeof E=="string"){const k=await wc(e,{idToken:E}).catch(()=>{});if(!k)break;T=await br._fromGetAccountInfoResponse(e,k,E)}else T=br._fromJSON(e,E);v!==l&&(p=T),l=v;break}}catch{}const f=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new ya(l,e,s):(l=f[0],p&&await l._set(c,p.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(c)}catch{}})),new ya(l,e,s))}}function Py(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M_(e))return"Blackberry";if(F_(e))return"Webos";if(O_(e))return"Safari";if((e.includes("chrome/")||V_(e))&&!e.includes("edge/"))return"Chrome";if(j_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function D_(n=hn()){return/firefox\//i.test(n)}function O_(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V_(n=hn()){return/crios\//i.test(n)}function L_(n=hn()){return/iemobile/i.test(n)}function j_(n=hn()){return/android/i.test(n)}function M_(n=hn()){return/blackberry/i.test(n)}function F_(n=hn()){return/webos/i.test(n)}function Qf(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ab(n=hn()){return Qf(n)&&!!window.navigator?.standalone}function Rb(){return UT()&&document.documentMode===10}function U_(n=hn()){return Qf(n)||j_(n)||F_(n)||M_(n)||/windows phone/i.test(n)||L_(n)}function B_(n,e=[]){let t;switch(n){case"Browser":t=Py(hn());break;case"Worker":t=`${Py(hn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Da}/${s}`}class Pb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,p)=>{try{const f=e(l);c(f)}catch(f){p(f)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Nb(n,e={}){return Ui(n,"GET","/v2/passwordPolicy",Fi(n,e))}const Db=6;class Ob{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Db,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Vb{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ny(this),this.idTokenSubscription=new Ny(this),this.beforeStateQueue=new Pb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=js(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ya.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wc(this,{idToken:e}),s=await br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!l||l===c)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ec(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Ms(this));const t=e?Zt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Nb(this),t=new Ob(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Cb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&js(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await ya.create(this,[js(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(p,this,"internal-error"),p.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,o);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=B_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ub(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bi(n){return Zt(n)}class Ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=WT(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let qc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lb(n){qc=n}function z_(n){return qc.loadJS(n)}function jb(){return qc.recaptchaEnterpriseScript}function Mb(){return qc.gapiScript}function Fb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Ub{constructor(){this.enterprise=new Bb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Bb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zb="recaptcha-enterprise",$_="NO_RECAPTCHA";class $b{constructor(e){this.type=zb,this.auth=Bi(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,p)=>{wb(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new _b(f);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,c(v.siteKey)}}).catch(f=>{p(f)})})}function o(l,c,p){const f=window.grecaptcha;Sy(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(v=>{c(v)}).catch(()=>{c($_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ub().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(p=>{if(!t&&Sy(window.grecaptcha))o(p,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=jb();f.length!==0&&(f+=p),z_(f).then(()=>{o(p,l,c)}).catch(v=>{c(v)})}}).catch(p=>{c(p)})})}}async function Dy(n,e,t,s=!1,o=!1){const l=new $b(n);let c;if(o)c=$_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const f=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:v,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const f=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:c}):Object.assign(p,{captchaResponse:c}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function ff(n,e,t,s,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Dy(n,e,t,t==="getOobCode");return s(n,l)}else return s(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Dy(n,e,t,t==="getOobCode");return s(n,c)}else return Promise.reject(l)})}function qb(n,e){const t=Ro(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ri(l,e??{}))return o;pr(o,"already-initialized")}return t.initialize({options:e})}function Hb(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(js);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function Wb(n,e,t){const s=Bi(n);Ce(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=q_(e),{host:c,port:p}=Gb(e),f=p===null?"":`:${p}`,v={url:`${l}//${c}${f}/`},E=Object.freeze({host:c,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ce(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ce(Ri(v,s.config.emulator)&&Ri(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Na(c)?(y_(`${l}//${c}${f}`),v_("Auth",!0)):Kb()}function q_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Gb(n){const e=q_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Oy(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Oy(c)}}}function Oy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Kb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Yf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ls("not implemented")}_getIdTokenResponse(e){return Ls("not implemented")}_linkToIdToken(e,t){return Ls("not implemented")}_getReauthenticationResolver(e){return Ls("not implemented")}}async function Qb(n,e){return Ui(n,"POST","/v1/accounts:signUp",e)}async function Yb(n,e){return $l(n,"POST","/v1/accounts:signInWithPassword",Fi(n,e))}async function Xb(n,e){return $l(n,"POST","/v1/accounts:signInWithEmailLink",Fi(n,e))}async function Jb(n,e){return $l(n,"POST","/v1/accounts:signInWithEmailLink",Fi(n,e))}class Nl extends Yf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Nl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Nl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,t,"signInWithPassword",Yb);case"emailLink":return Xb(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ff(e,s,"signUpPassword",Qb);case"emailLink":return Jb(e,{idToken:t,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function va(n,e){return $l(n,"POST","/v1/accounts:signInWithIdp",Fi(n,e))}const Zb="http://localhost";class xo extends Yf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new xo(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return va(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,va(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,va(e,t)}buildRequest(){const e={requestUri:Zb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bl(t)}return e}}function ek(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tk(n){const e=gl(yl(n)).link,t=e?gl(yl(e)).deep_link_id:null,s=gl(yl(n)).deep_link_id;return(s?gl(yl(s)).link:null)||s||t||e||n}class Xf{constructor(e){const t=gl(yl(e)),s=t.apiKey??null,o=t.oobCode??null,l=ek(t.mode??null);Ce(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=tk(e);try{return new Xf(t)}catch{return null}}}class Oa{constructor(){this.providerId=Oa.PROVIDER_ID}static credential(e,t){return Nl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Xf.parseLink(t);return Ce(s,"argument-error"),Nl._fromEmailAndCode(e,s.code,s.tenantId)}}Oa.PROVIDER_ID="password";Oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Jf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ql extends Jf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _i extends ql{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";class Vs extends ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Vs.credential(t,s)}catch{return null}}}Vs.GOOGLE_SIGN_IN_METHOD="google.com";Vs.PROVIDER_ID="google.com";class wi extends ql{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";class Ei extends ql{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ei.credential(t,s)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";async function nk(n,e){return $l(n,"POST","/v1/accounts:signUp",Fi(n,e))}class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await br._fromIdTokenResponse(e,s,o),c=Vy(s);return new To({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Vy(s);return new To({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Vy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class xc extends Ar{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,xc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new xc(e,t,s,o)}}function H_(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?xc._fromErrorAndOperation(n,l,e,s):l})}async function rk(n,e,t=!1){const s=await Pl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return To._forOperation(n,"link",s)}async function sk(n,e,t=!1){const{auth:s}=n;if(Kn(s.app))return Promise.reject(Ms(s));const o="reauthenticate";try{const l=await Pl(n,H_(s,o,e,n),t);Ce(l.idToken,s,"internal-error");const c=Kf(l.idToken);Ce(c,s,"internal-error");const{sub:p}=c;return Ce(n.uid===p,s,"user-mismatch"),To._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&pr(s,"user-mismatch"),l}}async function W_(n,e,t=!1){if(Kn(n.app))return Promise.reject(Ms(n));const s="signIn",o=await H_(n,s,e),l=await To._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function ik(n,e){return W_(Bi(n),e)}async function G_(n){const e=Bi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ok(n,e,t){if(Kn(n.app))return Promise.reject(Ms(n));const s=Bi(n),c=await ff(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nk).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&G_(n),f}),p=await To._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(p.user),p}function ak(n,e,t){return Kn(n.app)?Promise.reject(Ms(n)):ik(Zt(n),Oa.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&G_(n),s})}function lk(n,e,t,s){return Zt(n).onIdTokenChanged(e,t,s)}function uk(n,e,t){return Zt(n).beforeAuthStateChanged(e,t)}function ck(n,e,t,s){return Zt(n).onAuthStateChanged(e,t,s)}function dk(n){return Zt(n).signOut()}const Tc="__sak";class K_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tc,"1"),this.storage.removeItem(Tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hk=1e3,fk=10;class Q_ extends K_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=U_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,p,f)=>{this.notifyListeners(c,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);Rb()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fk):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Q_.type="LOCAL";const pk=Q_;class Y_ extends K_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Y_.type="SESSION";const X_=Y_;function mk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Hc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Hc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(c).map(async v=>v(t.origin,l)),f=await mk(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hc.receivers=[];function Zf(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}class gk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((p,f)=>{const v=Zf("",20);o.port1.start();const E=setTimeout(()=>{f(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(T){const k=T;if(k.data.eventId===v)switch(k.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(k.data.response);break;default:clearTimeout(E),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Zr(){return window}function yk(n){Zr().location.href=n}function J_(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function vk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _k(){return navigator?.serviceWorker?.controller||null}function wk(){return J_()?self:null}const Z_="firebaseLocalStorageDb",Ek=1,Ic="firebaseLocalStorage",ew="fbase_key";class Hl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wc(n,e){return n.transaction([Ic],e?"readwrite":"readonly").objectStore(Ic)}function xk(){const n=indexedDB.deleteDatabase(Z_);return new Hl(n).toPromise()}function pf(){const n=indexedDB.open(Z_,Ek);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Ic,{keyPath:ew})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Ic)?e(s):(s.close(),await xk(),e(await pf()))})})}async function Ly(n,e,t){const s=Wc(n,!0).put({[ew]:e,value:t});return new Hl(s).toPromise()}async function Tk(n,e){const t=Wc(n,!1).get(e),s=await new Hl(t).toPromise();return s===void 0?null:s.value}function jy(n,e){const t=Wc(n,!0).delete(e);return new Hl(t).toPromise()}const Ik=800,bk=3;class tw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>bk)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return J_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hc._getInstance(wk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vk(),!this.activeServiceWorker)return;this.sender=new gk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_k()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pf();return await Ly(e,Tc,"1"),await jy(e,Tc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ly(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>Tk(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>jy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Wc(o,!1).getAll();return new Hl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ik)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tw.type="LOCAL";const kk=tw;new zl(3e4,6e4);function nw(n,e){return e?js(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class ep extends Yf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Sk(n){return W_(n.auth,new ep(n),n.bypassAuthState)}function Ck(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),sk(t,new ep(n),n.bypassAuthState)}async function Ak(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),rk(t,new ep(n),n.bypassAuthState)}class rw{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:p}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(f))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sk;case"linkViaPopup":case"linkViaRedirect":return Ak;case"reauthViaPopup":case"reauthViaRedirect":return Ck;default:pr(this.auth,"internal-error")}}resolve(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rk=new zl(2e3,1e4);async function Pk(n,e,t){if(Kn(n.app))return Promise.reject(Sr(n,"operation-not-supported-in-this-environment"));const s=Bi(n);cb(n,e,Jf);const o=nw(s,t);return new yo(s,"signInViaPopup",e,o).executeNotNull()}class yo extends rw{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,yo.currentPopupAction&&yo.currentPopupAction.cancel(),yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Bs(this.filter.length===1,"Popup operations only handle one event");const e=Zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Rk.get())};e()}}yo.currentPopupAction=null;const Nk="pendingRedirect",lc=new Map;class Dk extends rw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=lc.get(this.auth._key());if(!e){try{const s=await Ok(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}lc.set(this.auth._key(),e)}return this.bypassAuthState||lc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ok(n,e){const t=jk(e),s=Lk(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function Vk(n,e){lc.set(n._key(),e)}function Lk(n){return js(n._redirectPersistence)}function jk(n){return ac(Nk,n.config.apiKey,n.name)}async function Mk(n,e,t=!1){if(Kn(n.app))return Promise.reject(Ms(n));const s=Bi(n),o=nw(s,e),c=await new Dk(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const Fk=600*1e3;class Uk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!sw(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Sr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fk&&this.cachedEventUids.clear(),this.cachedEventUids.has(My(e))}saveEventToCache(e){this.cachedEventUids.add(My(e)),this.lastProcessedEventTime=Date.now()}}function My(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Bk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sw(n);default:return!1}}async function zk(n,e={}){return Ui(n,"GET","/v1/projects",e)}const $k=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qk=/^https?/;async function Hk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await zk(n);for(const t of e)try{if(Wk(t))return}catch{}pr(n,"unauthorized-domain")}function Wk(n){const e=df(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!qk.test(t))return!1;if($k.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const Gk=new zl(3e4,6e4);function Fy(){const n=Zr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Kk(n){return new Promise((e,t)=>{function s(){Fy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fy(),t(Sr(n,"network-request-failed"))},timeout:Gk.get()})}if(Zr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zr().gapi?.load)s();else{const o=Fb("iframefcb");return Zr()[o]=()=>{gapi.load?s():t(Sr(n,"network-request-failed"))},z_(`${Mb()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw uc=null,e})}let uc=null;function Qk(n){return uc=uc||Kk(n),uc}const Yk=new zl(5e3,15e3),Xk="__/auth/iframe",Jk="emulator/auth/iframe",Zk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t1(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gf(e,Jk):`https://${n.config.authDomain}/${Xk}`,s={apiKey:e.apiKey,appName:n.name,v:Da},o=e1.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Bl(s).slice(1)}`}async function n1(n){const e=await Qk(n),t=Zr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:t1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zk,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=Sr(n,"network-request-failed"),p=Zr().setTimeout(()=>{l(c)},Yk.get());function f(){Zr().clearTimeout(p),o(s)}s.ping(f).then(f,()=>{l(c)})}))}const r1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s1=500,i1=600,o1="_blank",a1="http://localhost";class Uy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l1(n,e,t,s=s1,o=i1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const f={...r1,width:s.toString(),height:o.toString(),top:l,left:c},v=hn().toLowerCase();t&&(p=V_(v)?o1:t),D_(v)&&(e=e||a1,f.scrollbars="yes");const E=Object.entries(f).reduce((k,[L,Q])=>`${k}${L}=${Q},`,"");if(Ab(v)&&p!=="_self")return u1(e||"",p),new Uy(null);const T=window.open(e||"",p,E);Ce(T,n,"popup-blocked");try{T.focus()}catch{}return new Uy(T)}function u1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const c1="__/auth/handler",d1="emulator/auth/handler",h1=encodeURIComponent("fac");async function By(n,e,t,s,o,l){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Da,eventId:o};if(e instanceof Jf){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",HT(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(e instanceof ql){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}n.tenantId&&(c.tid=n.tenantId);const p=c;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const f=await n._getAppCheckToken(),v=f?`#${h1}=${encodeURIComponent(f)}`:"";return`${f1(n)}?${Bl(p).slice(1)}${v}`}function f1({config:n}){return n.emulator?Gf(n,d1):`https://${n.authDomain}/${c1}`}const zh="webStorageSupport";class p1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=X_,this._completeRedirectFn=Mk,this._overrideRedirectResult=Vk}async _openPopup(e,t,s,o){Bs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await By(e,t,s,df(),o);return l1(e,l,Zf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await By(e,t,s,df(),o);return yk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Bs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await n1(e),s=new Uk(e);return t.register("authEvent",o=>(Ce(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zh,{type:zh},o=>{const l=o?.[0]?.[zh];l!==void 0&&t(!!l),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Hk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return U_()||O_()||Qf()}}const m1=p1;var zy="@firebase/auth",$y="1.12.0";class g1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function y1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v1(n){ss(new Cr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:p}=s.options;Ce(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:c,authDomain:p,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B_(n)},v=new Vb(s,o,l,f);return Hb(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ss(new Cr("auth-internal",e=>{const t=Bi(e.getProvider("auth").getImmediate());return(s=>new g1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(zy,$y,y1(n)),fr(zy,$y,"esm2020")}const _1=300,w1=g_("authIdTokenMaxAge")||_1;let qy=null;const E1=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>w1)return;const o=t?.token;qy!==o&&(qy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function x1(n=qf()){const e=Ro(n,"auth");if(e.isInitialized())return e.getImmediate();const t=qb(n,{popupRedirectResolver:m1,persistence:[kk,pk,X_]}),s=g_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=E1(l.toString());uk(t,c,()=>c(t.currentUser)),lk(t,p=>c(p))}}const o=p_("auth");return o&&Wb(t,`http://${o}`),t}function T1(){return document.getElementsByTagName("head")?.[0]??document}Lb({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=Sr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",T1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v1("Browser");var Hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ci,iw;(function(){var n;function e(P,I){function A(){}A.prototype=I.prototype,P.F=I.prototype,P.prototype=new A,P.prototype.constructor=P,P.D=function(O,D,j){for(var C=Array(arguments.length-2),et=2;et<arguments.length;et++)C[et-2]=arguments[et];return I.prototype[D].apply(O,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,A){A||(A=0);const O=Array(16);if(typeof I=="string")for(var D=0;D<16;++D)O[D]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(D=0;D<16;++D)O[D]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=P.g[0],A=P.g[1],D=P.g[2];let j=P.g[3],C;C=I+(j^A&(D^j))+O[0]+3614090360&4294967295,I=A+(C<<7&4294967295|C>>>25),C=j+(D^I&(A^D))+O[1]+3905402710&4294967295,j=I+(C<<12&4294967295|C>>>20),C=D+(A^j&(I^A))+O[2]+606105819&4294967295,D=j+(C<<17&4294967295|C>>>15),C=A+(I^D&(j^I))+O[3]+3250441966&4294967295,A=D+(C<<22&4294967295|C>>>10),C=I+(j^A&(D^j))+O[4]+4118548399&4294967295,I=A+(C<<7&4294967295|C>>>25),C=j+(D^I&(A^D))+O[5]+1200080426&4294967295,j=I+(C<<12&4294967295|C>>>20),C=D+(A^j&(I^A))+O[6]+2821735955&4294967295,D=j+(C<<17&4294967295|C>>>15),C=A+(I^D&(j^I))+O[7]+4249261313&4294967295,A=D+(C<<22&4294967295|C>>>10),C=I+(j^A&(D^j))+O[8]+1770035416&4294967295,I=A+(C<<7&4294967295|C>>>25),C=j+(D^I&(A^D))+O[9]+2336552879&4294967295,j=I+(C<<12&4294967295|C>>>20),C=D+(A^j&(I^A))+O[10]+4294925233&4294967295,D=j+(C<<17&4294967295|C>>>15),C=A+(I^D&(j^I))+O[11]+2304563134&4294967295,A=D+(C<<22&4294967295|C>>>10),C=I+(j^A&(D^j))+O[12]+1804603682&4294967295,I=A+(C<<7&4294967295|C>>>25),C=j+(D^I&(A^D))+O[13]+4254626195&4294967295,j=I+(C<<12&4294967295|C>>>20),C=D+(A^j&(I^A))+O[14]+2792965006&4294967295,D=j+(C<<17&4294967295|C>>>15),C=A+(I^D&(j^I))+O[15]+1236535329&4294967295,A=D+(C<<22&4294967295|C>>>10),C=I+(D^j&(A^D))+O[1]+4129170786&4294967295,I=A+(C<<5&4294967295|C>>>27),C=j+(A^D&(I^A))+O[6]+3225465664&4294967295,j=I+(C<<9&4294967295|C>>>23),C=D+(I^A&(j^I))+O[11]+643717713&4294967295,D=j+(C<<14&4294967295|C>>>18),C=A+(j^I&(D^j))+O[0]+3921069994&4294967295,A=D+(C<<20&4294967295|C>>>12),C=I+(D^j&(A^D))+O[5]+3593408605&4294967295,I=A+(C<<5&4294967295|C>>>27),C=j+(A^D&(I^A))+O[10]+38016083&4294967295,j=I+(C<<9&4294967295|C>>>23),C=D+(I^A&(j^I))+O[15]+3634488961&4294967295,D=j+(C<<14&4294967295|C>>>18),C=A+(j^I&(D^j))+O[4]+3889429448&4294967295,A=D+(C<<20&4294967295|C>>>12),C=I+(D^j&(A^D))+O[9]+568446438&4294967295,I=A+(C<<5&4294967295|C>>>27),C=j+(A^D&(I^A))+O[14]+3275163606&4294967295,j=I+(C<<9&4294967295|C>>>23),C=D+(I^A&(j^I))+O[3]+4107603335&4294967295,D=j+(C<<14&4294967295|C>>>18),C=A+(j^I&(D^j))+O[8]+1163531501&4294967295,A=D+(C<<20&4294967295|C>>>12),C=I+(D^j&(A^D))+O[13]+2850285829&4294967295,I=A+(C<<5&4294967295|C>>>27),C=j+(A^D&(I^A))+O[2]+4243563512&4294967295,j=I+(C<<9&4294967295|C>>>23),C=D+(I^A&(j^I))+O[7]+1735328473&4294967295,D=j+(C<<14&4294967295|C>>>18),C=A+(j^I&(D^j))+O[12]+2368359562&4294967295,A=D+(C<<20&4294967295|C>>>12),C=I+(A^D^j)+O[5]+4294588738&4294967295,I=A+(C<<4&4294967295|C>>>28),C=j+(I^A^D)+O[8]+2272392833&4294967295,j=I+(C<<11&4294967295|C>>>21),C=D+(j^I^A)+O[11]+1839030562&4294967295,D=j+(C<<16&4294967295|C>>>16),C=A+(D^j^I)+O[14]+4259657740&4294967295,A=D+(C<<23&4294967295|C>>>9),C=I+(A^D^j)+O[1]+2763975236&4294967295,I=A+(C<<4&4294967295|C>>>28),C=j+(I^A^D)+O[4]+1272893353&4294967295,j=I+(C<<11&4294967295|C>>>21),C=D+(j^I^A)+O[7]+4139469664&4294967295,D=j+(C<<16&4294967295|C>>>16),C=A+(D^j^I)+O[10]+3200236656&4294967295,A=D+(C<<23&4294967295|C>>>9),C=I+(A^D^j)+O[13]+681279174&4294967295,I=A+(C<<4&4294967295|C>>>28),C=j+(I^A^D)+O[0]+3936430074&4294967295,j=I+(C<<11&4294967295|C>>>21),C=D+(j^I^A)+O[3]+3572445317&4294967295,D=j+(C<<16&4294967295|C>>>16),C=A+(D^j^I)+O[6]+76029189&4294967295,A=D+(C<<23&4294967295|C>>>9),C=I+(A^D^j)+O[9]+3654602809&4294967295,I=A+(C<<4&4294967295|C>>>28),C=j+(I^A^D)+O[12]+3873151461&4294967295,j=I+(C<<11&4294967295|C>>>21),C=D+(j^I^A)+O[15]+530742520&4294967295,D=j+(C<<16&4294967295|C>>>16),C=A+(D^j^I)+O[2]+3299628645&4294967295,A=D+(C<<23&4294967295|C>>>9),C=I+(D^(A|~j))+O[0]+4096336452&4294967295,I=A+(C<<6&4294967295|C>>>26),C=j+(A^(I|~D))+O[7]+1126891415&4294967295,j=I+(C<<10&4294967295|C>>>22),C=D+(I^(j|~A))+O[14]+2878612391&4294967295,D=j+(C<<15&4294967295|C>>>17),C=A+(j^(D|~I))+O[5]+4237533241&4294967295,A=D+(C<<21&4294967295|C>>>11),C=I+(D^(A|~j))+O[12]+1700485571&4294967295,I=A+(C<<6&4294967295|C>>>26),C=j+(A^(I|~D))+O[3]+2399980690&4294967295,j=I+(C<<10&4294967295|C>>>22),C=D+(I^(j|~A))+O[10]+4293915773&4294967295,D=j+(C<<15&4294967295|C>>>17),C=A+(j^(D|~I))+O[1]+2240044497&4294967295,A=D+(C<<21&4294967295|C>>>11),C=I+(D^(A|~j))+O[8]+1873313359&4294967295,I=A+(C<<6&4294967295|C>>>26),C=j+(A^(I|~D))+O[15]+4264355552&4294967295,j=I+(C<<10&4294967295|C>>>22),C=D+(I^(j|~A))+O[6]+2734768916&4294967295,D=j+(C<<15&4294967295|C>>>17),C=A+(j^(D|~I))+O[13]+1309151649&4294967295,A=D+(C<<21&4294967295|C>>>11),C=I+(D^(A|~j))+O[4]+4149444226&4294967295,I=A+(C<<6&4294967295|C>>>26),C=j+(A^(I|~D))+O[11]+3174756917&4294967295,j=I+(C<<10&4294967295|C>>>22),C=D+(I^(j|~A))+O[2]+718787259&4294967295,D=j+(C<<15&4294967295|C>>>17),C=A+(j^(D|~I))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+j&4294967295}s.prototype.v=function(P,I){I===void 0&&(I=P.length);const A=I-this.blockSize,O=this.C;let D=this.h,j=0;for(;j<I;){if(D==0)for(;j<=A;)o(this,P,j),j+=this.blockSize;if(typeof P=="string"){for(;j<I;)if(O[D++]=P.charCodeAt(j++),D==this.blockSize){o(this,O),D=0;break}}else for(;j<I;)if(O[D++]=P[j++],D==this.blockSize){o(this,O),D=0;break}}this.h=D,this.o+=I},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;I=this.o*8;for(var A=P.length-8;A<P.length;++A)P[A]=I&255,I/=256;for(this.v(P),P=Array(16),I=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)P[I++]=this.g[A]>>>O&255;return P};function l(P,I){var A=p;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=I(P)}function c(P,I){this.h=I;const A=[];let O=!0;for(let D=P.length-1;D>=0;D--){const j=P[D]|0;O&&j==I||(A[D]=j,O=!1)}this.g=A}var p={};function f(P){return-128<=P&&P<128?l(P,function(I){return new c([I|0],I<0?-1:0)}):new c([P|0],P<0?-1:0)}function v(P){if(isNaN(P)||!isFinite(P))return T;if(P<0)return M(v(-P));const I=[];let A=1;for(let O=0;P>=A;O++)I[O]=P/A|0,A*=4294967296;return new c(I,0)}function E(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return M(E(P.substring(1),I));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=v(Math.pow(I,8));let O=T;for(let j=0;j<P.length;j+=8){var D=Math.min(8,P.length-j);const C=parseInt(P.substring(j,j+D),I);D<8?(D=v(Math.pow(I,D)),O=O.j(D).add(v(C))):(O=O.j(A),O=O.add(v(C)))}return O}var T=f(0),k=f(1),L=f(16777216);n=c.prototype,n.m=function(){if(H(this))return-M(this).m();let P=0,I=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);P+=(O>=0?O:4294967296+O)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(Q(this))return"0";if(H(this))return"-"+M(this).toString(P);const I=v(Math.pow(P,6));var A=this;let O="";for(;;){const D=Te(A,I).g;A=le(A,D.j(I));let j=((A.g.length>0?A.g[0]:A.h)>>>0).toString(P);if(A=D,Q(A))return j+O;for(;j.length<6;)j="0"+j;O=j+O}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function Q(P){if(P.h!=0)return!1;for(let I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function H(P){return P.h==-1}n.l=function(P){return P=le(this,P),H(P)?-1:Q(P)?0:1};function M(P){const I=P.g.length,A=[];for(let O=0;O<I;O++)A[O]=~P.g[O];return new c(A,~P.h).add(k)}n.abs=function(){return H(this)?M(this):this},n.add=function(P){const I=Math.max(this.g.length,P.g.length),A=[];let O=0;for(let D=0;D<=I;D++){let j=O+(this.i(D)&65535)+(P.i(D)&65535),C=(j>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);O=C>>>16,j&=65535,C&=65535,A[D]=C<<16|j}return new c(A,A[A.length-1]&-2147483648?-1:0)};function le(P,I){return P.add(M(I))}n.j=function(P){if(Q(this)||Q(P))return T;if(H(this))return H(P)?M(this).j(M(P)):M(M(this).j(P));if(H(P))return M(this.j(M(P)));if(this.l(L)<0&&P.l(L)<0)return v(this.m()*P.m());const I=this.g.length+P.g.length,A=[];for(var O=0;O<2*I;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let D=0;D<P.g.length;D++){const j=this.i(O)>>>16,C=this.i(O)&65535,et=P.i(D)>>>16,ft=P.i(D)&65535;A[2*O+2*D]+=C*ft,ee(A,2*O+2*D),A[2*O+2*D+1]+=j*ft,ee(A,2*O+2*D+1),A[2*O+2*D+1]+=C*et,ee(A,2*O+2*D+1),A[2*O+2*D+2]+=j*et,ee(A,2*O+2*D+2)}for(P=0;P<I;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=I;P<2*I;P++)A[P]=0;return new c(A,0)};function ee(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function ie(P,I){this.g=P,this.h=I}function Te(P,I){if(Q(I))throw Error("division by zero");if(Q(P))return new ie(T,T);if(H(P))return I=Te(M(P),I),new ie(M(I.g),M(I.h));if(H(I))return I=Te(P,M(I)),new ie(M(I.g),I.h);if(P.g.length>30){if(H(P)||H(I))throw Error("slowDivide_ only works with positive integers.");for(var A=k,O=I;O.l(P)<=0;)A=Pe(A),O=Pe(O);var D=ge(A,1),j=ge(O,1);for(O=ge(O,2),A=ge(A,2);!Q(O);){var C=j.add(O);C.l(P)<=0&&(D=D.add(A),j=C),O=ge(O,1),A=ge(A,1)}return I=le(P,D.j(I)),new ie(D,I)}for(D=T;P.l(I)>=0;){for(A=Math.max(1,Math.floor(P.m()/I.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),j=v(A),C=j.j(I);H(C)||C.l(P)>0;)A-=O,j=v(A),C=j.j(I);Q(j)&&(j=k),D=D.add(j),P=le(P,C)}return new ie(D,P)}n.B=function(P){return Te(this,P).h},n.and=function(P){const I=Math.max(this.g.length,P.g.length),A=[];for(let O=0;O<I;O++)A[O]=this.i(O)&P.i(O);return new c(A,this.h&P.h)},n.or=function(P){const I=Math.max(this.g.length,P.g.length),A=[];for(let O=0;O<I;O++)A[O]=this.i(O)|P.i(O);return new c(A,this.h|P.h)},n.xor=function(P){const I=Math.max(this.g.length,P.g.length),A=[];for(let O=0;O<I;O++)A[O]=this.i(O)^P.i(O);return new c(A,this.h^P.h)};function Pe(P){const I=P.g.length+1,A=[];for(let O=0;O<I;O++)A[O]=P.i(O)<<1|P.i(O-1)>>>31;return new c(A,P.h)}function ge(P,I){const A=I>>5;I%=32;const O=P.g.length-A,D=[];for(let j=0;j<O;j++)D[j]=I>0?P.i(j+A)>>>I|P.i(j+A+1)<<32-I:P.i(j+A);return new c(D,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,iw=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=v,c.fromString=E,Ci=c}).apply(typeof Hy<"u"?Hy:typeof self<"u"?self:typeof window<"u"?window:{});var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ow,vl,aw,cc,mf,lw,uw,cw;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ju=="object"&&Ju];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,g){if(g)e:{var _=s;u=u.split(".");for(var x=0;x<u.length-1;x++){var B=u[x];if(!(B in _))break e;_=_[B]}u=u[u.length-1],x=_[u],g=g(x),g!=x&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var _=[],x;for(x in g)Object.prototype.hasOwnProperty.call(g,x)&&_.push([x,g[x]]);return _}});var l=l||{},c=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function f(u,g,_){return u.call.apply(u.bind,arguments)}function v(u,g,_){return v=f,v.apply(null,arguments)}function E(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function T(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(x,B,q){for(var se=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)se[Oe-2]=arguments[Oe];return g.prototype[B].apply(x,se)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const g=u.length;if(g>0){const _=Array(g);for(let x=0;x<g;x++)_[x]=u[x];return _}return[]}function Q(u,g){for(let x=1;x<arguments.length;x++){const B=arguments[x];var _=typeof B;if(_=_!="object"?_:B?Array.isArray(B)?"array":_:"null",_=="array"||_=="object"&&typeof B.length=="number"){_=u.length||0;const q=B.length||0;u.length=_+q;for(let se=0;se<q;se++)u[_+se]=B[se]}else u.push(B)}}class H{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(u){c.setTimeout(()=>{throw u},0)}function le(){var u=P;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ee{constructor(){this.h=this.g=null}add(g,_){const x=ie.get();x.set(g,_),this.h?this.h.next=x:this.g=x,this.h=x}}var ie=new H(()=>new Te,u=>u.reset());class Te{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,ge=!1,P=new ee,I=()=>{const u=Promise.resolve(void 0);Pe=()=>{u.then(A)}};function A(){for(var u;u=le();){try{u.h.call(u.g)}catch(_){M(_)}var g=ie;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ge=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};c.addEventListener("test",_,g),c.removeEventListener("test",_,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function et(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(et,D),et.prototype.init=function(u,g){const _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&et.Z.h.call(this)},et.prototype.h=function(){et.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),Ct=0;function nt(u,g,_,x,B){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!x,this.ha=B,this.key=++Ct,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function K(u,g,_){for(const x in u)g.call(_,u[x],x,u)}function S(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function W(u){const g={};for(const _ in u)g[_]=u[_];return g}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(u,g){let _,x;for(let B=1;B<arguments.length;B++){x=arguments[B];for(_ in x)u[_]=x[_];for(let q=0;q<de.length;q++)_=de[q],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,g,_,x,B){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const se=Le(u,g,x,B);return se>-1?(g=u[se],_||(g.fa=!1)):(g=new nt(g,this.src,q,!!x,B),g.fa=_,u.push(g)),g};function Be(u,g){const _=g.type;if(_ in u.g){var x=u.g[_],B=Array.prototype.indexOf.call(x,g,void 0),q;(q=B>=0)&&Array.prototype.splice.call(x,B,1),q&&(oe(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Le(u,g,_,x){for(let B=0;B<u.length;++B){const q=u[B];if(!q.da&&q.listener==g&&q.capture==!!_&&q.ha==x)return B}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),je={};function mt(u,g,_,x,B){if(Array.isArray(g)){for(let q=0;q<g.length;q++)mt(u,g[q],_,x,B);return null}return _=as(_),u&&u[ft]?u.J(g,_,p(x)?!!x.capture:!1,B):zi(u,g,_,!1,x,B)}function zi(u,g,_,x,B,q){if(!g)throw Error("Invalid event type");const se=p(B)?!!B.capture:!!B;let Oe=fn(u);if(Oe||(u[Ge]=Oe=new Ee(u)),_=Oe.add(g,_,x,se,q),_.proxy)return _;if(x=Hs(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)j||(B=se),B===void 0&&(B=!1),u.addEventListener(g.toString(),x,B);else if(u.attachEvent)u.attachEvent(Dn(g.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Hs(){function u(_){return g.call(u.src,u.listener,_)}const g=Rr;return u}function Ws(u,g,_,x,B){if(Array.isArray(g))for(var q=0;q<g.length;q++)Ws(u,g[q],_,x,B);else x=p(x)?!!x.capture:!!x,_=as(_),u&&u[ft]?(u=u.i,q=String(g).toString(),q in u.g&&(g=u.g[q],_=Le(g,_,x,B),_>-1&&(oe(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[q],u.h--)))):u&&(u=fn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Le(g,_,x,B)),(_=u>-1?g[u]:null)&&xt(_))}function xt(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ft])Be(g.i,u);else{var _=u.type,x=u.proxy;g.removeEventListener?g.removeEventListener(_,x,u.capture):g.detachEvent?g.detachEvent(Dn(_),x):g.addListener&&g.removeListener&&g.removeListener(x),(_=fn(g))?(Be(_,u),_.h==0&&(_.src=null,g[Ge]=null)):oe(u)}}}function Dn(u){return u in je?je[u]:je[u]="on"+u}function Rr(u,g){if(u.da)u=!0;else{g=new et(g,this);const _=u.listener,x=u.ha||u.src;u.fa&&xt(u),u=_.call(x,g)}return u}function fn(u){return u=u[Ge],u instanceof Ee?u:null}var tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function as(u){return typeof u=="function"?u:(u[tn]||(u[tn]=function(g){return u.handleEvent(g)}),u[tn])}function gt(){O.call(this),this.i=new Ee(this),this.M=this,this.G=null}T(gt,O),gt.prototype[ft]=!0,gt.prototype.removeEventListener=function(u,g,_,x){Ws(this,u,g,_,x)};function lt(u,g){var _,x=u.G;if(x)for(_=[];x;x=x.G)_.push(x);if(u=u.M,x=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var B=g;g=new D(x,u),we(g,B)}B=!0;let q,se;if(_)for(se=_.length-1;se>=0;se--)q=g.g=_[se],B=He(q,x,!0,g)&&B;if(q=g.g=u,B=He(q,x,!0,g)&&B,B=He(q,x,!1,g)&&B,_)for(se=0;se<_.length;se++)q=g.g=_[se],B=He(q,x,!1,g)&&B}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let x=0;x<_.length;x++)oe(_[x]);delete u.g[g],u.h--}}this.G=null},gt.prototype.J=function(u,g,_,x){return this.i.add(String(u),g,!1,_,x)},gt.prototype.K=function(u,g,_,x){return this.i.add(String(u),g,!0,_,x)};function He(u,g,_,x){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let q=0;q<g.length;++q){const se=g[q];if(se&&!se.da&&se.capture==_){const Oe=se.listener,Tt=se.ha||se.src;se.fa&&Be(u.i,se),B=Oe.call(Tt,x)!==!1&&B}}return B&&!x.defaultPrevented}function ls(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:c.setTimeout(u,g||0)}function Pr(u){u.g=ls(()=>{u.g=null,u.i&&(u.i=!1,Pr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class $i extends O{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Pr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(u){O.call(this),this.h=u,this.g={}}T(Ye,O);var Gs=[];function On(u){K(u.g,function(g,_){this.g.hasOwnProperty(_)&&xt(g)},u),u.g={}}Ye.prototype.N=function(){Ye.Z.N.call(this),On(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=c.JSON.stringify,Vn=c.JSON.parse,Dt=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function mr(){}function Ot(){}var pn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gr(){D.call(this,"d")}T(gr,D);function us(){D.call(this,"c")}T(us,D);var mn={},cs=null;function Ln(){return cs=cs||new gt}mn.Ia="serverreachability";function jn(u){D.call(this,mn.Ia,u)}T(jn,D);function Mn(u){const g=Ln();lt(g,new jn(g))}mn.STAT_EVENT="statevent";function xn(u,g){D.call(this,mn.STAT_EVENT,u),this.stat=g}T(xn,D);function it(u){const g=Ln();lt(g,new xn(g,u))}mn.Ja="timingevent";function Ks(u,g){D.call(this,mn.Ja,u),this.size=g}T(Ks,D);function Xn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},g)}function Fn(){this.g=!0}Fn.prototype.ua=function(){this.g=!1};function ds(u,g,_,x,B,q){u.info(function(){if(u.g)if(q){var se="",Oe=q.split("&");for(let st=0;st<Oe.length;st++){var Tt=Oe[st].split("=");if(Tt.length>1){const At=Tt[0];Tt=Tt[1];const qn=At.split("_");se=qn.length>=2&&qn[1]=="type"?se+(At+"="+Tt+"&"):se+(At+"=redacted&")}}}else se=null;else se=q;return"XMLHTTP REQ ("+x+") [attempt "+B+"]: "+g+`
`+_+`
`+se})}function Vo(u,g,_,x,B,q,se){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+B+"]: "+g+`
`+_+`
`+q+" "+se})}function Tn(u,g,_,x){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Nr(u,_)+(x?" "+x:"")})}function Qs(u,g){u.info(function(){return"TIMEOUT: "+g})}Fn.prototype.info=function(){};function Nr(u,g){if(!u.g)return g;if(!g)return null;try{const q=JSON.parse(g);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var _=q[u];if(!(_.length<2)){var x=_[1];if(Array.isArray(x)&&!(x.length<1)){var B=x[0];if(B!="noop"&&B!="stop"&&B!="close")for(let se=1;se<x.length;se++)x[se]=""}}}}return Yn(q)}catch{return g}}var Dr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Or={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qi;function Un(){}T(Un,mr),Un.prototype.g=function(){return new XMLHttpRequest},qi=new Un;function Bn(u){return encodeURIComponent(String(u))}function Vt(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function In(u,g,_,x){this.j=u,this.i=g,this.l=_,this.S=x||1,this.V=new Ye(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hi}function Hi(){this.i=null,this.g="",this.h=!1}var Wi={},bn={};function Ht(u,g,_){u.M=1,u.A=tr(vn(g)),u.u=_,u.R=!0,Vr(u,null)}function Vr(u,g){u.F=Date.now(),Lr(u),u.B=vn(u.A);var _=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),nn(_.i,"t",x),u.C=0,_=u.j.L,u.h=new Hi,u.g=Zl(u.j,_?g:null,!u.u),u.P>0&&(u.O=new $i(v(u.Y,u,u.g),u.P)),g=u.V,_=u.g,x=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(Gs[0]=B.toString()),B=Gs);for(let q=0;q<B.length;q++){const se=mt(_,B[q],x||g.handleEvent,!1,g.h||g);if(!se)break;g.g[se.key]=se}g=u.J?W(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Mn(),ds(u.i,u.v,u.B,u.l,u.S,u.u)}In.prototype.ba=function(u){u=u.target;const g=this.O;g&&Br(u)==3?g.j():this.Y(u)},In.prototype.Y=function(u){try{if(u==this.g)e:{const Oe=Br(this.g),Tt=this.g.ya(),st=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Xl(this.g)))){this.K||Oe!=4||Tt==7||(Tt==8||st<=0?Mn(3):Mn(2)),jr(this);var g=this.g.ca();this.X=g;var _=Gi(this);if(this.o=g==200,Vo(this.i,this.v,this.B,this.l,this.S,Oe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var x,B=this.g;if((x=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(x)){var q=x;break t}}q=null}if(u=q)Tn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rt(this,u);else{this.o=!1,this.m=3,it(12),Jn(this),hs(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<_.length;)if(At=Ki(this,_),At==bn){Oe==4&&(this.m=4,it(14),u=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Wi){this.m=4,it(15),Tn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Tn(this.i,this.l,At,null),rt(this,At);if(Ys(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||_.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)Tn(this.i,this.l,_,"[Invalid Chunked Response]"),Jn(this),hs(this);else if(_.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),eo(se),se.P=!0,it(11))}}else Tn(this.i,this.l,_,null),rt(this,_);Oe==4&&Jn(this),this.o&&!this.K&&(Oe==4?Bo(this.j,this):(this.o=!1,Lr(this)))}else Fa(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),Jn(this),hs(this)}}}catch{}};function Gi(u){if(!Ys(u))return u.g.la();const g=Xl(u.g);if(g==="")return"";let _="";const x=g.length,B=Br(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Jn(u),hs(u),"";u.h.i=new c.TextDecoder}for(let q=0;q<x;q++)u.h.h=!0,_+=u.h.i.decode(g[q],{stream:!(B&&q==x-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function Ys(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ki(u,g){var _=u.C,x=g.indexOf(`
`,_);return x==-1?bn:(_=Number(g.substring(_,x)),isNaN(_)?Wi:(x+=1,x+_>g.length?bn:(g=g.slice(x,x+_),u.C=x+_,g)))}In.prototype.cancel=function(){this.K=!0,Jn(this)};function Lr(u){u.T=Date.now()+u.H,Xs(u,u.H)}function Xs(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Xn(v(u.aa,u),g)}function jr(u){u.D&&(c.clearTimeout(u.D),u.D=null)}In.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Qs(this.i,this.B),this.M!=2&&(Mn(),it(17)),Jn(this),this.m=2,hs(this)):Xs(this,this.T-u)};function hs(u){u.j.I==0||u.K||Bo(u.j,u)}function Jn(u){jr(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,On(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function rt(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||Yi(_.h,u))){if(!u.L&&Yi(_.h,u)&&_.I==3){try{var x=_.Ba.g.parse(g)}catch{x=null}if(Array.isArray(x)&&x.length==3){var B=x;if(B[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Uo(_),zn(_);else break e;qr(_),it(18)}}else _.xa=B[1],0<_.xa-_.K&&B[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Xn(v(_.Va,_),6e3));ps(_.h)<=1&&_.ta&&(_.ta=void 0)}else $n(_,11)}else if((u.L||_.g==u)&&Uo(_),!C(g))for(B=_.Ba.g.parse(g),g=0;g<B.length;g++){let st=B[g];const At=st[0];if(!(At<=_.K))if(_.K=At,st=st[1],_.I==2)if(st[0]=="c"){_.M=st[1],_.ba=st[2];const qn=st[3];qn!=null&&(_.ka=qn,_.j.info("VER="+_.ka));const bs=st[4];bs!=null&&(_.za=bs,_.j.info("SVER="+_.za));const Hr=st[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(x=1.5*Hr,_.O=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const Wr=u.g;if(Wr){const qo=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var q=x.h;q.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Js(q,q.h),q.h=null))}if(x.G){const za=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;za&&(x.wa=za,Ke(x.J,x.G,za))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),x=_;var se=u;if(x.na=Ba(x,x.L?x.ba:null,x.W),se.L){ms(x.h,se);var Oe=se,Tt=x.O;Tt&&(Oe.H=Tt),Oe.D&&(jr(Oe),Lr(Oe)),x.g=se}else rn(x);_.i.length>0&&Is(_)}else st[0]!="stop"&&st[0]!="close"||$n(_,7);else _.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?$n(_,7):Mo(_):st[0]!="noop"&&_.l&&_.l.qa(st),_.A=0)}}Mn(4)}catch{}}var fs=class{constructor(u,g){this.g=u,this.map=g}};function Zn(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qi(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ps(u){return u.h?1:u.g?u.g.size:0}function Yi(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Js(u,g){u.g?u.g.add(g):u.h=g}function ms(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Zn.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return L(u.i)}var Lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yn(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const x=u[_].indexOf("=");let B,q=null;x>=0?(B=u[_].substring(0,x),q=u[_].substring(x+1)):B=u[_],g(B,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Wt(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Wt?(this.l=u.l,gs(this,u.j),this.o=u.o,this.g=u.g,er(this,u.u),this.h=u.h,Mr(this,xs(u.i)),this.m=u.m):u&&(g=String(u).match(Lo))?(this.l=!1,gs(this,g[1]||"",!0),this.o=Fr(g[2]||""),this.g=Fr(g[3]||"",!0),er(this,g[4]),this.h=Fr(g[5]||"",!0),Mr(this,g[6]||"",!0),this.m=Fr(g[7]||"")):(this.l=!1,this.i=new Fe(null,this.l))}Wt.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(ys(g,yr,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ys(g,yr,!0),"@"),u.push(Bn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ys(_,_.charAt(0)=="/"?_s:vs,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ys(_,ws)),u.join("")},Wt.prototype.resolve=function(u){const g=vn(this);let _=!!u.j;_?gs(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var x=u.h;if(_)er(g,u.u);else if(_=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var B=g.h.lastIndexOf("/");B!=-1&&(x=g.h.slice(0,B+1)+x)}if(B=x,B==".."||B==".")x="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){x=B.lastIndexOf("/",0)==0,B=B.split("/");const q=[];for(let se=0;se<B.length;){const Oe=B[se++];Oe=="."?x&&se==B.length&&q.push(""):Oe==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),x&&se==B.length&&q.push("")):(q.push(Oe),x=!0)}x=q.join("/")}else x=B}return _?g.h=x:_=u.i.toString()!=="",_?Mr(g,xs(u.i)):_=!!u.m,_&&(g.m=u.m),g};function vn(u){return new Wt(u)}function gs(u,g,_){u.j=_?Fr(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function er(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Mr(u,g,_){g instanceof Fe?(u.i=g,ei(u.i,u.l)):(_||(g=ys(g,Ji)),u.i=new Fe(g,u.l))}function Ke(u,g,_){u.i.set(g,_)}function tr(u){return Ke(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Fr(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ys(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Xi),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xi(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var yr=/[#\/\?@]/g,vs=/[#\?:]/g,_s=/[#\?]/g,Ji=/[#\?@]/g,ws=/#/g;function Fe(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function nr(u){u.g||(u.g=new Map,u.h=0,u.i&&yn(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Fe.prototype,n.add=function(u,g){nr(this),this.i=null,u=rr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function Es(u,g){nr(u),g=rr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ur(u,g){return nr(u),g=rr(u,g),u.g.has(g)}n.forEach=function(u,g){nr(this),this.g.forEach(function(_,x){_.forEach(function(B){u.call(g,B,x,this)},this)},this)};function Zs(u,g){nr(u);let _=[];if(typeof g=="string")Ur(u,g)&&(_=_.concat(u.g.get(rr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}n.set=function(u,g){return nr(this),this.i=null,u=rr(this,u),Ur(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=Zs(this,u),u.length>0?String(u[0]):g):g};function nn(u,g,_){Es(u,g),_.length>0&&(u.i=null,u.g.set(rr(u,g),L(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let x=0;x<g.length;x++){var _=g[x];const B=Bn(_);_=Zs(this,_);for(let q=0;q<_.length;q++){let se=B;_[q]!==""&&(se+="="+Bn(_[q])),u.push(se)}}return this.i=u.join("&")};function xs(u){const g=new Fe;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function rr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ei(u,g){g&&!u.j&&(nr(u),u.i=null,u.g.forEach(function(_,x){const B=x.toLowerCase();x!=B&&(Es(this,x),nn(this,B,_))},u)),u.j=g}function sr(u,g){const _=new Fn;if(c.Image){const x=new Image;x.onload=E(G,_,"TestLoadImage: loaded",!0,g,x),x.onerror=E(G,_,"TestLoadImage: error",!1,g,x),x.onabort=E(G,_,"TestLoadImage: abort",!1,g,x),x.ontimeout=E(G,_,"TestLoadImage: timeout",!1,g,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else g(!1)}function R(u,g){const _=new Fn,x=new AbortController,B=setTimeout(()=>{x.abort(),G(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:x.signal}).then(q=>{clearTimeout(B),q.ok?G(_,"TestPingServer: ok",!0,g):G(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),G(_,"TestPingServer: error",!1,g)})}function G(u,g,_,x,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),x(_)}catch{}}function X(){this.g=new Dt}function ue(u){this.i=u.Sb||null,this.h=u.ab||!1}T(ue,mr),ue.prototype.g=function(){return new ae(this.i,this.h)};function ae(u,g){gt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ae,gt),n=ae.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Se(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||c).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ve(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Se(this)),this.g&&(this.readyState=3,Se(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xe(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function xe(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ve(this):Se(this),this.readyState==3&&xe(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,ve(this))},n.Na=function(u){this.g&&(this.response=u,ve(this))},n.ga=function(){this.g&&ve(this)};function ve(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Se(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Se(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ae.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Je(u){let g="";return K(u,function(_,x){g+=x,g+=":",g+=_,g+=`\r
`}),g}function ut(u,g,_){e:{for(x in _){var x=!1;break e}x=!0}x||(_=Je(_),typeof u=="string"?_!=null&&Bn(_):Ke(u,g,_))}function De(u){gt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(De,gt);var vr=/^https?$/i,ti=["POST","PUT"];n=De.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qi.g(),this.g.onreadystatechange=k(v(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(q){Ze(this,q);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var B in x)_.set(B,x[B]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const q of x.keys())_.set(q,x.get(q));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),B=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(ti,g,void 0)>=0)||x||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,se]of _)this.g.setRequestHeader(q,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){Ze(this,q)}};function Ze(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,ot(u),Ts(u)}function ot(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),Ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),De.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Gt(this):this.Xa())},n.Xa=function(){Gt(this)};function Gt(u){if(u.h&&typeof l<"u"){if(u.v&&Br(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),Br(u)==4){u.h=!1;try{const q=u.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var x;if(x=q===0){let se=String(u.D).match(Lo)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),x=!vr.test(se?se.toLowerCase():"")}_=x}if(_)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var B=Br(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",ot(u)}}finally{Ts(u)}}}}function Ts(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||lt(u,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Br(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Br(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Vn(g)}};function Xl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Fa(u){const g={};u=(u.g&&Br(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(C(u[x]))continue;var _=Vt(u[x]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=g[B]||[];g[B]=q,q.push(_)}S(g,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zr(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function jo(u){this.za=0,this.i=[],this.j=new Fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zr("baseRetryDelayMs",5e3,u),this.Za=zr("retryDelaySeedMs",1e4,u),this.Ta=zr("forwardChannelMaxRetries",2,u),this.va=zr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Zn(u&&u.concurrentRequestLimit),this.Ba=new X,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=jo.prototype,n.ka=8,n.I=1,n.connect=function(u,g,_,x){it(0),this.W=u,this.H=g||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.J=Ba(this,null,this.W),Is(this)};function Mo(u){if(Fo(u),u.I==3){var g=u.V++,_=vn(u.J);if(Ke(_,"SID",u.M),Ke(_,"RID",g),Ke(_,"TYPE","terminate"),$r(u,_),g=new In(u,u.j,g),g.M=2,g.A=tr(vn(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=g.A,_=!0),_||(g.g=Zl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Lr(g)}to(u)}function zn(u){u.g&&(eo(u),u.g.cancel(),u.g=null)}function Fo(u){zn(u),u.v&&(c.clearTimeout(u.v),u.v=null),Uo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Is(u){if(!Qi(u.h)&&!u.m){u.m=!0;var g=u.Ea;Pe||I(),ge||(Pe(),ge=!0),P.add(g,u),u.D=0}}function Jl(u,g){return ps(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Xn(v(u.Ea,u,g),zo(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new In(this,this.j,u);let q=this.o;if(this.U&&(q?(q=W(q),we(q,this.U)):q=this.U),this.u!==null||this.R||(B.J=q,q=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(g+=x,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Ua(this,B,g),_=vn(this.J),Ke(_,"RID",u),Ke(_,"CVER",22),this.G&&Ke(_,"X-HTTP-Session-Id",this.G),$r(this,_),q&&(this.R?g="headers="+Bn(Je(q))+"&"+g:this.u&&ut(_,this.u,q)),Js(this.h,B),this.Ra&&Ke(_,"TYPE","init"),this.S?(Ke(_,"$req",g),Ke(_,"SID","null"),B.U=!0,Ht(B,_,null)):Ht(B,_,g),this.I=2}}else this.I==3&&(u?Zi(this,u):this.i.length==0||Qi(this.h)||Zi(this))};function Zi(u,g){var _;g?_=g.l:_=u.V++;const x=vn(u.J);Ke(x,"SID",u.M),Ke(x,"RID",_),Ke(x,"AID",u.K),$r(u,x),u.u&&u.o&&ut(x,u.u,u.o),_=new In(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Ua(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Js(u.h,_),Ht(_,x,g)}function $r(u,g){u.H&&K(u.H,function(_,x){Ke(g,x,_)}),u.l&&K({},function(_,x){Ke(g,x,_)})}function Ua(u,g,_){_=Math.min(u.i.length,_);const x=u.l?v(u.l.Ka,u.l,u):null;e:{var B=u.i;let Oe=-1;for(;;){const Tt=["count="+_];Oe==-1?_>0?(Oe=B[0].g,Tt.push("ofs="+Oe)):Oe=0:Tt.push("ofs="+Oe);let st=!0;for(let At=0;At<_;At++){var q=B[At].g;const qn=B[At].map;if(q-=Oe,q<0)Oe=Math.max(0,B[At].g-100),st=!1;else try{q="req"+q+"_"||"";try{var se=qn instanceof Map?qn:Object.entries(qn);for(const[bs,Hr]of se){let Wr=Hr;p(Hr)&&(Wr=Yn(Hr)),Tt.push(q+bs+"="+encodeURIComponent(Wr))}}catch(bs){throw Tt.push(q+"type="+encodeURIComponent("_badmap")),bs}}catch{x&&x(qn)}}if(st){se=Tt.join("&");break e}}se=void 0}return u=u.i.splice(0,_),g.G=u,se}function rn(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Pe||I(),ge||(Pe(),ge=!0),P.add(g,u),u.A=0}}function qr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Xn(v(u.Da,u),zo(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,ni(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Xn(v(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),zn(this),ni(this))};function eo(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function ni(u){u.g=new In(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=vn(u.na);Ke(g,"RID","rpc"),Ke(g,"SID",u.M),Ke(g,"AID",u.K),Ke(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ke(g,"TO",u.ia),Ke(g,"TYPE","xmlhttp"),$r(u,g),u.u&&u.o&&ut(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=tr(vn(g)),_.u=null,_.R=!0,Vr(_,u)}n.Va=function(){this.C!=null&&(this.C=null,zn(this),qr(this),it(19))};function Uo(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function Bo(u,g){var _=null;if(u.g==g){Uo(u),eo(u),u.g=null;var x=2}else if(Yi(u.h,g))_=g.G,ms(u.h,g),x=1;else return;if(u.I!=0){if(g.o)if(x==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;x=Ln(),lt(x,new Ks(x,_)),Is(u)}else rn(u);else if(B=g.m,B==3||B==0&&g.X>0||!(x==1&&Jl(u,g)||x==2&&qr(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),B){case 1:$n(u,5);break;case 4:$n(u,10);break;case 3:$n(u,6);break;default:$n(u,2)}}}function zo(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function $n(u,g){if(u.j.info("Error code "+g),g==2){var _=v(u.bb,u),x=u.Ua;const B=!x;x=new Wt(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gs(x,"https"),tr(x),B?sr(x.toString(),_):R(x.toString(),_)}else it(2);u.I=0,u.l&&u.l.pa(g),to(u),Fo(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function to(u){if(u.I=0,u.ja=[],u.l){const g=gn(u.h);(g.length!=0||u.i.length!=0)&&(Q(u.ja,g),Q(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Ba(u,g,_){var x=_ instanceof Wt?vn(_):new Wt(_);if(x.g!="")g&&(x.g=g+"."+x.g),er(x,x.u);else{var B=c.location;x=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const q=new Wt(null);x&&gs(q,x),g&&(q.g=g),B&&er(q,B),_&&(q.h=_),x=q}return _=u.G,g=u.wa,_&&g&&Ke(x,_,g),Ke(x,"VER",u.ka),$r(u,x),x}function Zl(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new De(new ue({ab:_})):new De(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}n=eu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $o(){}$o.prototype.g=function(u,g){return new Kt(u,g)};function Kt(u,g){gt.call(this),this.g=new jo(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ri(this)}T(Kt,gt),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Mo(this.g)},Kt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Yn(u),u=_);g.i.push(new fs(g.Ya++,u)),g.I==3&&Is(g)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,Kt.Z.N.call(this)};function tu(u){gr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(tu,gr);function nu(){us.call(this),this.status=1}T(nu,us);function ri(u){this.g=u}T(ri,eu),ri.prototype.ra=function(){lt(this.g,"a")},ri.prototype.qa=function(u){lt(this.g,new tu(u))},ri.prototype.pa=function(u){lt(this.g,new nu)},ri.prototype.oa=function(){lt(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,cw=function(){return new $o},uw=function(){return Ln()},lw=mn,mf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,cc=Dr,Or.COMPLETE="complete",aw=Or,Ot.EventType=pn,pn.OPEN="a",pn.CLOSE="b",pn.ERROR="c",pn.MESSAGE="d",gt.prototype.listen=gt.prototype.J,vl=Ot,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,ow=De}).apply(typeof Ju<"u"?Ju:typeof self<"u"?self:typeof window<"u"?window:{});const Wy="@firebase/firestore",Gy="4.9.3";class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");let Va="12.7.0";const Io=new $c("@firebase/firestore");function ha(){return Io.logLevel}function he(n,...e){if(Io.logLevel<=ze.DEBUG){const t=e.map(tp);Io.debug(`Firestore (${Va}): ${n}`,...t)}}function zs(n,...e){if(Io.logLevel<=ze.ERROR){const t=e.map(tp);Io.error(`Firestore (${Va}): ${n}`,...t)}}function Ia(n,...e){if(Io.logLevel<=ze.WARN){const t=e.map(tp);Io.warn(`Firestore (${Va}): ${n}`,...t)}}function tp(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ae(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,dw(n,s,t)}function dw(n,e,t){let s=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw zs(s),new Error(s)}function tt(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||dw(e,o,s)}function Ve(n,e){return n}const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class hw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class b1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class k1{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let s=this.i;const o=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let l=new wo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new wo,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},p=f=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>p(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?p(f):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new wo)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(tt(typeof s.accessToken=="string",31837,{l:s}),new hw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class S1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class C1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new S1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ky{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const s=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ky(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ky(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function R1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=R1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function $e(n,e){return n<e?-1:n>e?1:0}function gf(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return $h(o)===$h(l)?$e(o,l):$h(o)?1:-1}return $e(n.length,e.length)}const P1=55296,N1=57343;function $h(n){const e=n.charCodeAt(0);return e>=P1&&e<=N1}function ba(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}const Qy="__name__";class Jr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Jr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Jr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return $e(e.length,t.length)}static compareSegments(e,t){const s=Jr.isNumericId(e),o=Jr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Jr.extractNumericId(e).compare(Jr.extractNumericId(t)):gf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class _t extends Jr{construct(e,t,s){return new _t(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new _t(t)}static emptyPath(){return new _t([])}}const D1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Jr{construct(e,t,s){return new Jt(e,t,s)}static isValidIdentifier(e){return D1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qy}static keyField(){return new Jt([Qy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new _e(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new _e(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new _e(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,o+=2}else p==="`"?(c=!c,o++):p!=="."||c?(s+=p,o++):(l(),o++)}if(l(),c)throw new _e(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(t)}static emptyPath(){return new Jt([])}}class ke{constructor(e){this.path=e}static fromPath(e){return new ke(_t.fromString(e))}static fromName(e){return new ke(_t.fromString(e).popFirst(5))}static empty(){return new ke(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new _t(e.slice()))}}function O1(n,e,t){if(!t)throw new _e(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V1(n,e,t,s){if(e===!0&&s===!0)throw new _e(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Yy(n){if(!ke.isDocumentKey(n))throw new _e(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function rp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function _a(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rp(n);throw new _e(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Nt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wl(n,e){if(!fw(n))throw new _e(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new _e(te.INVALID_ARGUMENT,t);return!0}const Xy=-62135596800,Jy=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Jy);return new ht(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xy)throw new _e(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jy}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wl(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Nt("string",ht._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ht(0,0))}static max(){return new Ne(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Dl=-1;function L1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(s===1e9?new ht(t+1,0):new ht(t,s));return new Pi(o,ke.empty(),e)}function j1(n){return new Pi(n.readTime,n.key,Dl)}class Pi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Pi(Ne.min(),ke.empty(),Dl)}static max(){return new Pi(Ne.max(),ke.empty(),Dl)}}function M1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:$e(n.largestBatchId,e.largestBatchId))}const F1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function La(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==F1)throw n;he("LocalStore","Unexpectedly lost primary lease")}class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.reject(t)}static resolve(e){return new Y(((t,s)=>{t(e)}))}static reject(e){return new Y(((t,s)=>{s(e)}))}static waitFor(e){return new Y(((t,s)=>{let o=0,l=0,c=!1;e.forEach((p=>{++o,p.next((()=>{++l,c&&l===o&&t()}),(f=>s(f)))})),c=!0,l===o&&t()}))}static or(e){let t=Y.resolve(!1);for(const s of e)t=t.next((o=>o?Y.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new Y(((s,o)=>{const l=e.length,c=new Array(l);let p=0;for(let f=0;f<l;f++){const v=f;t(e[v]).next((E=>{c[v]=E,++p,p===l&&s(c)}),(E=>o(E)))}}))}static doWhile(e,t){return new Y(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function B1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ja(n){return n.name==="IndexedDbTransactionError"}class Gc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gc.ce=-1;const sp=-1;function Kc(n){return n==null}function bc(n){return n===0&&1/n==-1/0}function z1(n){return typeof n=="number"&&Number.isInteger(n)&&!bc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const pw="";function $1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zy(e)),e=q1(n.get(t),e);return Zy(e)}function q1(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case pw:t+="";break;default:t+=l}}return t}function Zy(n){return n+pw+""}function ev(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Po(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class wt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zu(this.root,e,this.comparator,!0)}}class Zu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=l??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Xt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ft{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tv(this.data.getIterator())}getIteratorFrom(e){return new tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class kr{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new kr([])}unionWith(e){let t=new Ft(Jt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gw("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const H1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(n){if(tt(!!n,39018),typeof n=="string"){let e=0;const t=H1.exec(n);if(tt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Di(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}const yw="server_timestamp",vw="__type__",_w="__previous_value__",ww="__local_write_time__";function ip(n){return(n?.mapValue?.fields||{})[vw]?.stringValue===yw}function Qc(n){const e=n.mapValue.fields[_w];return ip(e)?Qc(e):e}function Ol(n){const e=Ni(n.mapValue.fields[ww].timestampValue);return new ht(e.seconds,e.nanos)}class W1{constructor(e,t,s,o,l,c,p,f,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.longPollingOptions=f,this.useFetchStreams=v,this.isUsingEmulator=E}}const kc="(default)";class Vl{constructor(e,t){this.projectId=e,this.database=t||kc}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database===kc}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}const Ew="__type__",G1="__max__",ec={mapValue:{}},xw="__vector__",Sc="value";function Oi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ip(n)?4:Q1(n)?9007199254740991:K1(n)?10:11:Ae(28295,{value:n})}function is(n,e){if(n===e)return!0;const t=Oi(n);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ol(n).isEqual(Ol(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ni(o.timestampValue),p=Ni(l.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Di(o.bytesValue).isEqual(Di(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return kt(o.geoPointValue.latitude)===kt(l.geoPointValue.latitude)&&kt(o.geoPointValue.longitude)===kt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return kt(o.integerValue)===kt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=kt(o.doubleValue),p=kt(l.doubleValue);return c===p?bc(c)===bc(p):isNaN(c)&&isNaN(p)}return!1})(n,e);case 9:return ba(n.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},p=l.mapValue.fields||{};if(ev(c)!==ev(p))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(p[f]===void 0||!is(c[f],p[f])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function Ll(n,e){return(n.values||[]).find((t=>is(t,e)))!==void 0}function ka(n,e){if(n===e)return 0;const t=Oi(n),s=Oi(e);if(t!==s)return $e(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const p=kt(l.integerValue||l.doubleValue),f=kt(c.integerValue||c.doubleValue);return p<f?-1:p>f?1:p===f?0:isNaN(p)?isNaN(f)?0:-1:1})(n,e);case 3:return nv(n.timestampValue,e.timestampValue);case 4:return nv(Ol(n),Ol(e));case 5:return gf(n.stringValue,e.stringValue);case 6:return(function(l,c){const p=Di(l),f=Di(c);return p.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const p=l.split("/"),f=c.split("/");for(let v=0;v<p.length&&v<f.length;v++){const E=$e(p[v],f[v]);if(E!==0)return E}return $e(p.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const p=$e(kt(l.latitude),kt(c.latitude));return p!==0?p:$e(kt(l.longitude),kt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return rv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const p=l.fields||{},f=c.fields||{},v=p[Sc]?.arrayValue,E=f[Sc]?.arrayValue,T=$e(v?.values?.length||0,E?.values?.length||0);return T!==0?T:rv(v,E)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ec.mapValue&&c===ec.mapValue)return 0;if(l===ec.mapValue)return 1;if(c===ec.mapValue)return-1;const p=l.fields||{},f=Object.keys(p),v=c.fields||{},E=Object.keys(v);f.sort(),E.sort();for(let T=0;T<f.length&&T<E.length;++T){const k=gf(f[T],E[T]);if(k!==0)return k;const L=ka(p[f[T]],v[E[T]]);if(L!==0)return L}return $e(f.length,E.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function nv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $e(n,e);const t=Ni(n),s=Ni(e),o=$e(t.seconds,s.seconds);return o!==0?o:$e(t.nanos,s.nanos)}function rv(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=ka(t[o],s[o]);if(l)return l}return $e(t.length,s.length)}function Sa(n){return yf(n)}function yf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ni(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Di(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=yf(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${yf(t.fields[c])}`;return o+"}"})(n.mapValue):Ae(61005,{value:n})}function dc(n){switch(Oi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qc(n);return e?16+dc(e):16;case 5:return 2*n.stringValue.length;case 6:return Di(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+dc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return Po(s.fields,((l,c)=>{o+=l.length+dc(c)})),o})(n.mapValue);default:throw Ae(13486,{value:n})}}function vf(n){return!!n&&"integerValue"in n}function op(n){return!!n&&"arrayValue"in n}function sv(n){return!!n&&"nullValue"in n}function iv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hc(n){return!!n&&"mapValue"in n}function K1(n){return(n?.mapValue?.fields||{})[Ew]?.stringValue===xw}function Il(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Po(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Il(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Il(n.arrayValue.values[t]);return e}return{...n}}function Q1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===G1}class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!hc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(t)}setAll(e){let t=Jt.emptyPath(),s={},o=[];e.forEach(((c,p)=>{if(!t.isImmediateParentOf(p)){const f=this.getFieldsMap(t);this.applyChanges(f,s,o),s={},o=[],t=p.popLast()}c?s[p.lastSegment()]=Il(c):o.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];hc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Po(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new dr(Il(this.value))}}function Tw(n){const e=[];return Po(n.fields,((t,s)=>{const o=new Jt([t]);if(hc(s)){const l=Tw(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new kr(e)}class dn{constructor(e,t,s,o,l,c,p){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=p}static newInvalidDocument(e){return new dn(e,0,Ne.min(),Ne.min(),Ne.min(),dr.empty(),0)}static newFoundDocument(e,t,s,o){return new dn(e,1,t,Ne.min(),s,o,0)}static newNoDocument(e,t){return new dn(e,2,t,Ne.min(),Ne.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Ne.min(),Ne.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cc{constructor(e,t){this.position=e,this.inclusive=t}}function ov(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=ke.comparator(ke.fromName(c.referenceValue),t.key):s=ka(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function av(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!is(n.position[t],e.position[t]))return!1;return!0}class Ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Iw{}class Mt extends Iw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new J1(e,t,s):t==="array-contains"?new tS(e,s):t==="in"?new nS(e,s):t==="not-in"?new rS(e,s):t==="array-contains-any"?new sS(e,s):new Mt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Z1(e,s):new eS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ka(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class os extends Iw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new os(e,t)}matches(e){return bw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bw(n){return n.op==="and"}function kw(n){return X1(n)&&bw(n)}function X1(n){for(const e of n.filters)if(e instanceof os)return!1;return!0}function _f(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(kw(n))return n.filters.map((e=>_f(e))).join(",");{const e=n.filters.map((t=>_f(t))).join(",");return`${n.op}(${e})`}}function Sw(n,e){return n instanceof Mt?(function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&is(s.value,o.value)})(n,e):n instanceof os?(function(s,o){return o instanceof os&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,p)=>l&&Sw(c,o.filters[p])),!0):!1})(n,e):void Ae(19439)}function Cw(n){return n instanceof Mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(n):n instanceof os?(function(t){return t.op.toString()+" {"+t.getFilters().map(Cw).join(" ,")+"}"})(n):"Filter"}class J1 extends Mt{constructor(e,t,s){super(e,t,s),this.key=ke.fromName(s.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class Z1 extends Mt{constructor(e,t){super(e,"in",t),this.keys=Aw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class eS extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=Aw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Aw(n,e){return(e.arrayValue?.values||[]).map((t=>ke.fromName(t.referenceValue)))}class tS extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return op(t)&&Ll(t.arrayValue,this.value)}}class nS extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ll(this.value.arrayValue,t)}}class rS extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ll(this.value.arrayValue,t)}}class sS extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ll(this.value.arrayValue,s)))}}class iS{constructor(e,t=null,s=[],o=[],l=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=p,this.Te=null}}function lv(n,e=null,t=[],s=[],o=null,l=null,c=null){return new iS(n,e,t,s,o,l,c)}function ap(n){const e=Ve(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>_f(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Sa(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Sa(s))).join(",")),e.Te=t}return e.Te}function lp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Sw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!av(n.startAt,e.startAt)&&av(n.endAt,e.endAt)}function wf(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Yc{constructor(e,t=null,s=[],o=[],l=null,c="F",p=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=p,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oS(n,e,t,s,o,l,c,p){return new Yc(n,e,t,s,o,l,c,p)}function up(n){return new Yc(n)}function uv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aS(n){return n.collectionGroup!==null}function bl(n){const e=Ve(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let p=new Ft(Jt.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ac(l,s))})),t.has(Jt.keyField().canonicalString())||e.Ie.push(new Ac(Jt.keyField(),s))}return e.Ie}function es(n){const e=Ve(n);return e.Ee||(e.Ee=lS(e,bl(n))),e.Ee}function lS(n,e){if(n.limitType==="F")return lv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ac(o.field,l)}));const t=n.endAt?new Cc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Cc(n.startAt.position,n.startAt.inclusive):null;return lv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Ef(n,e,t){return new Yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xc(n,e){return lp(es(n),es(e))&&n.limitType===e.limitType}function Rw(n){return`${ap(es(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Cw(o))).join(", ")}]`),Kc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Sa(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Sa(o))).join(",")),`Target(${s})`})(es(n))}; limitType=${n.limitType})`}function Jc(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ke.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of bl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,p,f){const v=ov(c,p,f);return c.inclusive?v<=0:v<0})(s.startAt,bl(s),o)||s.endAt&&!(function(c,p,f){const v=ov(c,p,f);return c.inclusive?v>=0:v>0})(s.endAt,bl(s),o))})(n,e)}function uS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pw(n){return(e,t)=>{let s=!1;for(const o of bl(n)){const l=cS(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function cS(n,e,t){const s=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,c,p){const f=c.data.field(l),v=p.data.field(l);return f!==null&&v!==null?ka(f,v):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:n.dir})}}class No{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return mw(this.inner)}size(){return this.innerSize}}const dS=new wt(ke.comparator);function $s(){return dS}const Nw=new wt(ke.comparator);function _l(...n){let e=Nw;for(const t of n)e=e.insert(t.key,t);return e}function Dw(n){let e=Nw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function vo(){return kl()}function Ow(){return kl()}function kl(){return new No((n=>n.toString()),((n,e)=>n.isEqual(e)))}const hS=new wt(ke.comparator),fS=new Ft(ke.comparator);function qe(...n){let e=fS;for(const t of n)e=e.add(t);return e}const pS=new Ft($e);function mS(){return pS}function cp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bc(e)?"-0":e}}function Vw(n){return{integerValue:""+n}}function gS(n,e){return z1(e)?Vw(e):cp(n,e)}class Zc{constructor(){this._=void 0}}function yS(n,e,t){return n instanceof Rc?(function(o,l){const c={fields:{[vw]:{stringValue:yw},[ww]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ip(l)&&(l=Qc(l)),l&&(c.fields[_w]=l),{mapValue:c}})(t,e):n instanceof jl?jw(n,e):n instanceof Ml?Mw(n,e):(function(o,l){const c=Lw(o,l),p=cv(c)+cv(o.Ae);return vf(c)&&vf(o.Ae)?Vw(p):cp(o.serializer,p)})(n,e)}function vS(n,e,t){return n instanceof jl?jw(n,e):n instanceof Ml?Mw(n,e):t}function Lw(n,e){return n instanceof Pc?(function(s){return vf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Rc extends Zc{}class jl extends Zc{constructor(e){super(),this.elements=e}}function jw(n,e){const t=Fw(e);for(const s of n.elements)t.some((o=>is(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ml extends Zc{constructor(e){super(),this.elements=e}}function Mw(n,e){let t=Fw(e);for(const s of n.elements)t=t.filter((o=>!is(o,s)));return{arrayValue:{values:t}}}class Pc extends Zc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cv(n){return kt(n.integerValue||n.doubleValue)}function Fw(n){return op(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _S(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof jl&&o instanceof jl||s instanceof Ml&&o instanceof Ml?ba(s.elements,o.elements,is):s instanceof Pc&&o instanceof Pc?is(s.Ae,o.Ae):s instanceof Rc&&o instanceof Rc})(n.transform,e.transform)}class wS{constructor(e,t){this.version=e,this.transformResults=t}}class Fs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fs}static exists(e){return new Fs(void 0,e)}static updateTime(e){return new Fs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ed{}function Uw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zw(n.key,Fs.none()):new Gl(n.key,n.data,Fs.none());{const t=n.data,s=dr.empty();let o=new Ft(Jt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new Do(n.key,s,new kr(o.toArray()),Fs.none())}}function ES(n,e,t){n instanceof Gl?(function(o,l,c){const p=o.value.clone(),f=hv(o.fieldTransforms,l,c.transformResults);p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):n instanceof Do?(function(o,l,c){if(!fc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const p=hv(o.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(Bw(o)),f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Sl(n,e,t,s){return n instanceof Gl?(function(l,c,p,f){if(!fc(l.precondition,c))return p;const v=l.value.clone(),E=fv(l.fieldTransforms,f,c);return v.setAll(E),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),null})(n,e,t,s):n instanceof Do?(function(l,c,p,f){if(!fc(l.precondition,c))return p;const v=fv(l.fieldTransforms,f,c),E=c.data;return E.setAll(Bw(l)),E.setAll(v),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,c,p){return fc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p})(n,e,t)}function xS(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=Lw(s.transform,o||null);l!=null&&(t===null&&(t=dr.empty()),t.set(s.field,l))}return t||null}function dv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ba(s,o,((l,c)=>_S(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Gl extends ed{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Do extends ed{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Bw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function hv(n,e,t){const s=new Map;tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,p=e.data.field(l.field);s.set(l.field,vS(c,p,t[o]))}return s}function fv(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,yS(l,c,e))}return s}class zw extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TS extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class IS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&ES(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Sl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Sl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ow();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let p=this.applyToLocalView(c,l.mutatedFields);p=t.has(o.key)?null:p;const f=Uw(c,p);f!==null&&s.set(o.key,f),c.isValidDocument()||c.convertToNoDocument(Ne.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,((t,s)=>dv(t,s)))&&ba(this.baseMutations,e.baseMutations,((t,s)=>dv(t,s)))}}class dp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){tt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return hS})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new dp(e,t,s,o)}}class bS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kS{constructor(e,t){this.count=e,this.unchangedNames=t}}var Pt,We;function SS(n){switch(n){case te.OK:return Ae(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function $w(n){if(n===void 0)return zs("GRPC error has no .code"),te.UNKNOWN;switch(n){case Pt.OK:return te.OK;case Pt.CANCELLED:return te.CANCELLED;case Pt.UNKNOWN:return te.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return te.INTERNAL;case Pt.UNAVAILABLE:return te.UNAVAILABLE;case Pt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Pt.NOT_FOUND:return te.NOT_FOUND;case Pt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Pt.ABORTED:return te.ABORTED;case Pt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Pt.DATA_LOSS:return te.DATA_LOSS;default:return Ae(39323,{code:n})}}(We=Pt||(Pt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";function CS(){return new TextEncoder}const AS=new Ci([4294967295,4294967295],0);function pv(n){const e=CS().encode(n),t=new iw;return t.update(e),new Uint8Array(t.digest())}function mv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ci([t,s],0),new Ci([o,l],0)]}class hp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new wl(`Invalid padding: ${t}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new wl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ci.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ci.fromNumber(s)));return o.compare(AS)===1&&(o=new Ci([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=pv(e),[s,o]=mv(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new hp(l,o,t);return s.forEach((p=>c.insert(p))),c}insert(e){if(this.ge===0)return;const t=pv(e),[s,o]=mv(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class td{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Kl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new td(Ne.min(),o,new wt($e),$s(),qe())}}class Kl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Kl(s,t,qe(),qe(),qe())}}class pc{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class qw{constructor(e,t){this.targetId=e,this.Ce=t}}class Hw{constructor(e,t,s=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class gv{constructor(){this.ve=0,this.Fe=yv(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),s=qe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:l})}})),new Kl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=yv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RS{constructor(e){this.Ge=e,this.ze=new Map,this.je=$s(),this.Je=tc(),this.He=tc(),this.Ye=new wt($e)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(wf(l))if(s===0){const c=new ke(l.path);this.et(t,c,dn.newNoDocument(c,Ne.min()))}else tt(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const p=this.ut(e),f=p?this.ct(p,e,c):1;if(f!==0){this.it(t);const v=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,p;try{c=Di(s).toUint8Array()}catch(f){if(f instanceof gw)return Ia("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{p=new hp(c,o,l)}catch(f){return Ia(f instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return p.ge===0?null:p}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),p=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const p=this.ot(c);if(p){if(l.current&&wf(p.target)){const f=new ke(p.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,dn.newNoDocument(f,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=qe();this.He.forEach(((l,c)=>{let p=!0;c.forEachWhile((f=>{const v=this.ot(f);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new td(e,t,this.Ye,this.je,s);return this.je=$s(),this.Je=tc(),this.He=tc(),this.Ye=new wt($e),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft($e),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft($e),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function tc(){return new wt(ke.comparator)}function yv(){return new wt(ke.comparator)}const PS={asc:"ASCENDING",desc:"DESCENDING"},NS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DS={and:"AND",or:"OR"};class OS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xf(n,e){return n.useProto3Json||Kc(e)?e:{value:e}}function Nc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ww(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VS(n,e){return Nc(n,e.toTimestamp())}function ts(n){return tt(!!n,49232),Ne.fromTimestamp((function(t){const s=Ni(t);return new ht(s.seconds,s.nanos)})(n))}function fp(n,e){return Tf(n,e).canonicalString()}function Tf(n,e){const t=(function(o){return new _t(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Gw(n){const e=_t.fromString(n);return tt(Jw(e),10190,{key:e.toString()}),e}function If(n,e){return fp(n.databaseId,e.path)}function qh(n,e){const t=Gw(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(Qw(t))}function Kw(n,e){return fp(n.databaseId,e)}function LS(n){const e=Gw(n);return e.length===4?_t.emptyPath():Qw(e)}function bf(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Qw(n){return tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function vv(n,e,t){return{name:If(n,e),fields:t.value.mapValue.fields}}function jS(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ae(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(tt(E===void 0||typeof E=="string",58123),en.fromBase64String(E||"")):(tt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),en.fromUint8Array(E||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&(function(v){const E=v.code===void 0?te.UNKNOWN:$w(v.code);return new _e(E,v.message||"")})(c);t=new Hw(s,o,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=qh(n,s.document.name),l=ts(s.document.updateTime),c=s.document.createTime?ts(s.document.createTime):Ne.min(),p=new dr({mapValue:{fields:s.document.fields}}),f=dn.newFoundDocument(o,l,c,p),v=s.targetIds||[],E=s.removedTargetIds||[];t=new pc(v,E,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=qh(n,s.document),l=s.readTime?ts(s.readTime):Ne.min(),c=dn.newNoDocument(o,l),p=s.removedTargetIds||[];t=new pc([],p,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=qh(n,s.document),l=s.removedTargetIds||[];t=new pc([],l,o,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new kS(o,l),p=s.targetId;t=new qw(p,c)}}return t}function MS(n,e){let t;if(e instanceof Gl)t={update:vv(n,e.key,e.value)};else if(e instanceof zw)t={delete:If(n,e.key)};else if(e instanceof Do)t={update:vv(n,e.key,e.data),updateMask:GS(e.fieldMask)};else{if(!(e instanceof TS))return Ae(16599,{Vt:e.type});t={verify:If(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const p=c.transform;if(p instanceof Rc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof jl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ml)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Pc)return{fieldPath:c.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:VS(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(n,e.precondition)),t}function FS(n,e){return n&&n.length>0?(tt(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?ts(o.updateTime):ts(l);return c.isEqual(Ne.min())&&(c=ts(l)),new wS(c,o.transformResults||[])})(t,e)))):[]}function US(n,e){return{documents:[Kw(n,e.path)]}}function BS(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Kw(n,o);const l=(function(v){if(v.length!==0)return Xw(os.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(v){if(v.length!==0)return v.map((E=>(function(k){return{field:pa(k.field),direction:qS(k.dir)}})(E)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=xf(n,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function zS(n){let e=LS(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){tt(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(T){const k=Yw(T);return k instanceof os&&kw(k)?k.getFilters():[k]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((k=>(function(Q){return new Ac(ma(Q.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(k)))})(t.orderBy));let p=null;t.limit&&(p=(function(T){let k;return k=typeof T=="object"?T.value:T,Kc(k)?null:k})(t.limit));let f=null;t.startAt&&(f=(function(T){const k=!!T.before,L=T.values||[];return new Cc(L,k)})(t.startAt));let v=null;return t.endAt&&(v=(function(T){const k=!T.before,L=T.values||[];return new Cc(L,k)})(t.endAt)),oS(e,o,c,l,p,"F",f,v)}function $S(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Yw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ma(t.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=ma(t.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ma(t.unaryFilter.field);return Mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ma(t.unaryFilter.field);return Mt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Mt.create(ma(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return os.create(t.compositeFilter.filters.map((s=>Yw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function qS(n){return PS[n]}function HS(n){return NS[n]}function WS(n){return DS[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ma(n){return Jt.fromServerFormat(n.fieldPath)}function Xw(n){return n instanceof Mt?(function(t){if(t.op==="=="){if(iv(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(sv(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iv(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(sv(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:HS(t.op),value:t.value}}})(n):n instanceof os?(function(t){const s=t.getFilters().map((o=>Xw(o)));return s.length===1?s[0]:{compositeFilter:{op:WS(t.op),filters:s}}})(n):Ae(54877,{filter:n})}function GS(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Jw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ti{constructor(e,t,s,o,l=Ne.min(),c=Ne.min(),p=en.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p,this.expectedCount=f}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class KS{constructor(e){this.yt=e}}function QS(n){const e=zS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ef(e,e.limit,"L"):e}class YS{constructor(){this.Cn=new XS}addToCollectionParentIndex(e,t){return this.Cn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Pi.min())}updateCollectionGroup(e,t,s){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class XS{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ft(_t.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ft(_t.comparator)).toArray()}}const _v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zw=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(Zw,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class Ca{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ca(0)}static cr(){return new Ca(-1)}}const wv="LruGarbageCollector",JS=1048576;function Ev([n,e],[t,s]){const o=$e(n,t);return o===0?$e(e,s):o}class ZS{constructor(e){this.Ir=e,this.buffer=new Ft(Ev),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Ev(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(wv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ja(t)?he(wv,"Ignoring IndexedDB error during garbage collection: ",t):await La(t)}await this.Vr(3e5)}))}}class tC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(Gc.ce);const s=new ZS(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(_v)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_v):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,p,f,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,p=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(v=Date.now(),ha()<=ze.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(p-c)+`ms
	Removed ${l} targets in `+(f-p)+`ms
	Removed ${T} documents in `+(v-f)+`ms
Total Duration: ${v-E}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function nC(n,e){return new tC(n,e)}class rC{constructor(){this.changes=new No((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Y.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Sl(s.mutation,o,kr.empty(),ht.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=qe()){const o=vo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=_l();return l.forEach(((p,f)=>{c=c.insert(p,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=vo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,qe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,p)=>{t.set(c,p)}))}))}computeViews(e,t,s,o){let l=$s();const c=kl(),p=(function(){return kl()})();return t.forEach(((f,v)=>{const E=s.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Do)?l=l.insert(v.key,v):E!==void 0?(c.set(v.key,E.mutation.getFieldMask()),Sl(E.mutation,v,E.mutation.getFieldMask(),ht.now())):c.set(v.key,kr.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((v,E)=>c.set(v,E))),t.forEach(((v,E)=>p.set(v,new sC(E,c.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,t){const s=kl();let o=new wt(((c,p)=>c-p)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const p of c)p.keys().forEach((f=>{const v=t.get(f);if(v===null)return;let E=s.get(f)||kr.empty();E=p.applyToLocalView(v,E),s.set(f,E);const T=(o.get(p.batchId)||qe()).add(f);o=o.insert(p.batchId,T)}))})).next((()=>{const c=[],p=o.getReverseIterator();for(;p.hasNext();){const f=p.getNext(),v=f.key,E=f.value,T=Ow();E.forEach((k=>{if(!l.has(k)){const L=Uw(t.get(k),s.get(k));L!==null&&T.set(k,L),l=l.add(k)}})),c.push(this.documentOverlayCache.saveOverlays(e,v,T))}return Y.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return ke.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):Y.resolve(vo());let p=Dl,f=l;return c.next((v=>Y.forEach(v,((E,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),l.get(E)?Y.resolve():this.remoteDocumentCache.getEntry(e,E).next((k=>{f=f.insert(E,k)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,f,v,qe()))).next((E=>({batchId:p,changes:Dw(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((s=>{let o=_l();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=_l();return this.indexManager.getCollectionParents(e,l).next((p=>Y.forEach(p,(f=>{const v=(function(T,k){return new Yc(k,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((E=>{E.forEach(((T,k)=>{c=c.insert(T,k)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((f,v)=>{const E=v.getKey();c.get(E)===null&&(c=c.insert(E,dn.newInvalidDocument(E)))}));let p=_l();return c.forEach(((f,v)=>{const E=l.get(f);E!==void 0&&Sl(E.mutation,v,kr.empty(),ht.now()),Jc(t,v)&&(p=p.insert(f,v))})),p}))}}class oC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Y.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ts(o.createTime)}})(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:QS(o.bundledQuery),readTime:ts(o.readTime)}})(t)),Y.resolve()}}class aC{constructor(){this.overlays=new wt(ke.comparator),this.qr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const s=vo();return Y.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),Y.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(e,t,s){const o=vo(),l=t.length+1,c=new ke(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const f=p.getNext().value,v=f.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&f.largestBatchId>s&&o.set(f.getKey(),f)}return Y.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new wt(((v,E)=>v-E));const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>s){let E=l.get(v.largestBatchId);E===null&&(E=vo(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const p=vo(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((v,E)=>p.set(v,E))),!(p.size()>=o)););return Y.resolve(p)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new bS(t,s));let l=this.qr.get(t);l===void 0&&(l=qe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class lC{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}class pp{constructor(){this.Qr=new Ft($t.$r),this.Ur=new Ft($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new $t(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ke(new _t([])),s=new $t(t,e),o=new $t(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ke(new _t([])),s=new $t(t,e),o=new $t(t,e+1);let l=qe();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new $t(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ke.comparator(e.key,t.key)||$e(e.Yr,t.Yr)}static Kr(e,t){return $e(e.Yr,t.Yr)||ke.comparator(e.key,t.key)}}class uC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft($t.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new IS(l,t,s,o);this.mutationQueue.push(c);for(const p of o)this.Zr=this.Zr.add(new $t(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Y.resolve(c)}lookupMutationBatch(e,t){return Y.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const p=this.Xr(c.Yr);l.push(p)})),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ft($e);return t.forEach((o=>{const l=new $t(o,0),c=new $t(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(p=>{s=s.add(p.Yr)}))})),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ke.isDocumentKey(l)||(l=l.child(""));const c=new $t(new ke(l),0);let p=new Ft($e);return this.Zr.forEachWhile((f=>{const v=f.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(p=p.add(f.Yr)),!0)}),c),Y.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(t.mutations,(o=>{const l=new $t(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new $t(t,0),o=this.Zr.firstAfterOrEqual(s);return Y.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cC{constructor(e){this.ri=e,this.docs=(function(){return new wt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Y.resolve(s?s.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let s=$s();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():dn.newInvalidDocument(o))})),Y.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=$s();const c=t.path,p=new ke(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(p);for(;f.hasNext();){const{key:v,value:{document:E}}=f.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||M1(j1(E),s)<=0||(o.has(E.key)||Jc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ae(9500)}ii(e,t){return Y.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new dC(this)}getSize(e){return Y.resolve(this.size)}}class dC extends rC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),Y.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class hC{constructor(e){this.persistence=e,this.si=new No((t=>ap(t)),lp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new pp,this.targetCount=0,this.ai=Ca.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Y.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ca(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.Pr(t),Y.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),Y.waitFor(l).next((()=>o))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Y.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Y.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Y.resolve(s)}containsKey(e,t){return Y.resolve(this._i.containsKey(t))}}class e0{constructor(e,t){this.ui={},this.overlays={},this.ci=new Gc(0),this.li=!1,this.li=!0,this.hi=new lC,this.referenceDelegate=e(this),this.Pi=new hC(this),this.indexManager=new YS,this.remoteDocumentCache=(function(o){return new cC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new KS(t),this.Ii=new oC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new uC(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){he("MemoryPersistence","Starting transaction:",e);const o=new fC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return Y.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class fC extends U1{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new pp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Y.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,(s=>{const o=ke.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Y.or([()=>Y.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dc{constructor(e,t){this.persistence=e,this.pi=new No((s=>$1(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=nC(this,t)}static mi(e,t){return new Dc(e,t)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Y.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?Y.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((p=>{p||(s++,l.removeEntry(c,Ne.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Y.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dc(e.data.value)),t}br(e,t,s){return Y.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Y.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class gp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=qe(),o=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new gp(e,t.fromCache,s,o)}}class pC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return BT()?8:B1(hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new pC;return this.Ss(e,t,c).next((p=>{if(l.result=p,this.Vs)return this.bs(e,t,c,p.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(ha()<=ze.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(ha()<=ze.DEBUG&&he("QueryEngine","Query:",fa(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ha()<=ze.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(t))):Y.resolve())}ys(e,t){if(uv(t))return Y.resolve(null);let s=es(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Ef(t,null,"F"),s=es(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=qe(...l);return this.ps.getDocuments(e,c).next((p=>this.indexManager.getMinOffset(e,s).next((f=>{const v=this.Ds(t,p);return this.Cs(t,v,c,f.readTime)?this.ys(e,Ef(t,null,"F")):this.vs(e,v,t,f)}))))})))))}ws(e,t,s,o){return uv(t)||o.isEqual(Ne.min())?Y.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?Y.resolve(null):(ha()<=ze.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fa(t)),this.vs(e,c,t,L1(o,Dl)).next((p=>p)))}))}Ds(e,t){let s=new Ft(Pw(e));return t.forEach(((o,l)=>{Jc(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return ha()<=ze.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",fa(t)),this.ps.getDocumentsMatchingQuery(e,t,Pi.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const yp="LocalStore",gC=3e8;class yC{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new wt($e),this.xs=new No((l=>ap(l)),lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function vC(n,e,t,s){return new yC(n,e,t,s)}async function t0(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],p=[];let f=qe();for(const v of o){c.push(v.batchId);for(const E of v.mutations)f=f.add(E.key)}for(const v of l){p.push(v.batchId);for(const E of v.mutations)f=f.add(E.key)}return t.localDocuments.getDocuments(s,f).next((v=>({Ls:v,removedBatchIds:c,addedBatchIds:p})))}))}))}function _C(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,f,v,E){const T=v.batch,k=T.keys();let L=Y.resolve();return k.forEach((Q=>{L=L.next((()=>E.getEntry(f,Q))).next((H=>{const M=v.docVersions.get(Q);tt(M!==null,48541),H.version.compareTo(M)<0&&(T.applyToRemoteDocument(H,v),H.isValidDocument()&&(H.setReadTime(v.commitVersion),E.addEntry(H)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(f,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let f=qe();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(f=f.add(p.batch.mutations[v].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function n0(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function wC(n,e){const t=Ve(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const p=[];e.targetChanges.forEach(((E,T)=>{const k=o.get(T);if(!k)return;p.push(t.Pi.removeMatchingKeys(l,E.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,E.addedDocuments,T))));let L=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?L=L.withResumeToken(en.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,s)),o=o.insert(T,L),(function(H,M,le){return H.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=gC?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(k,L,E)&&p.push(t.Pi.updateTargetData(l,L))}));let f=$s(),v=qe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),p.push(EC(l,c,e.documentUpdates).next((E=>{f=E.ks,v=E.qs}))),!s.isEqual(Ne.min())){const E=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));p.push(E)}return Y.waitFor(p).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,v))).next((()=>f))})).then((l=>(t.Ms=o,l)))}function EC(n,e,t){let s=qe(),o=qe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=$s();return t.forEach(((p,f)=>{const v=l.get(p);f.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),f.isNoDocument()&&f.version.isEqual(Ne.min())?(e.removeEntry(p,f.readTime),c=c.insert(p,f)):!v.isValidDocument()||f.version.compareTo(v.version)>0||f.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(f),c=c.insert(p,f)):he(yp,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",f.version)})),{ks:c,qs:o}}))}function xC(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=sp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function TC(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,Y.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new Ti(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function kf(n,e,t){const s=Ve(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ja(c))throw c;he(yp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function xv(n,e,t){const s=Ve(n);let o=Ne.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,v,E){const T=Ve(f),k=T.xs.get(E);return k!==void 0?Y.resolve(T.Ms.get(k)):T.Pi.getTargetData(v,E)})(s,c,es(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,p.targetId).next((f=>{l=f}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Ne.min(),t?l:qe()))).next((p=>(IC(s,uS(e),p),{documents:p,Qs:l})))))}function IC(n,e,t){let s=n.Os.get(e)||Ne.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class Tv{constructor(){this.activeTargetIds=mS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bC{constructor(){this.Mo=new Tv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kC{Oo(e){}shutdown(){}}const Iv="ConnectivityMonitor";class bv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(Iv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(Iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let nc=null;function Sf(){return nc===null?nc=(function(){return 268435456+Math.round(2147483648*Math.random())})():nc++,"0x"+nc.toString(16)}const Hh="RestConnection",SC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===kc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=Sf(),p=this.zo(e,t.toUriEncodedString());he(Hh,`Sending RPC '${e}' ${c}:`,p,s);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,l);const{host:v}=new URL(p),E=Na(v);return this.Jo(e,p,f,s,E).then((T=>(he(Hh,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Ia(Hh,`RPC '${e}' ${c} failed with error: `,T,"url: ",p,"request:",s),T}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Va})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=SC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class AC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const un="WebChannelConnection";class RC extends CC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=Sf();return new Promise(((p,f)=>{const v=new ow;v.setWithCredentials(!0),v.listenOnce(aw.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case cc.NO_ERROR:const T=v.getResponseJson();he(un,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),p(T);break;case cc.TIMEOUT:he(un,`RPC '${e}' ${c} timed out`),f(new _e(te.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const k=v.getStatus();if(he(un,`RPC '${e}' ${c} failed with status:`,k,"response text:",v.getResponseText()),k>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const Q=L?.error;if(Q&&Q.status&&Q.message){const H=(function(le){const ee=le.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ee)>=0?ee:te.UNKNOWN})(Q.status);f(new _e(H,Q.message))}else f(new _e(te.UNKNOWN,"Server responded with status "+v.getStatus()))}else f(new _e(te.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{he(un,`RPC '${e}' ${c} completed.`)}}));const E=JSON.stringify(o);he(un,`RPC '${e}' ${c} sending request:`,o),v.send(t,"POST",E,s,15)}))}T_(e,t,s){const o=Sf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=cw(),p=uw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(f.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const E=l.join("");he(un,`Creating RPC '${e}' stream ${o}: ${E}`,f);const T=c.createWebChannel(E,f);this.I_(T);let k=!1,L=!1;const Q=new AC({Yo:M=>{L?he(un,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(k||(he(un,`Opening RPC '${e}' stream ${o} transport.`),T.open(),k=!0),he(un,`RPC '${e}' stream ${o} sending:`,M),T.send(M))},Zo:()=>T.close()}),H=(M,le,ee)=>{M.listen(le,(ie=>{try{ee(ie)}catch(Te){setTimeout((()=>{throw Te}),0)}}))};return H(T,vl.EventType.OPEN,(()=>{L||(he(un,`RPC '${e}' stream ${o} transport opened.`),Q.o_())})),H(T,vl.EventType.CLOSE,(()=>{L||(L=!0,he(un,`RPC '${e}' stream ${o} transport closed`),Q.a_(),this.E_(T))})),H(T,vl.EventType.ERROR,(M=>{L||(L=!0,Ia(un,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),Q.a_(new _e(te.UNAVAILABLE,"The operation could not be completed")))})),H(T,vl.EventType.MESSAGE,(M=>{if(!L){const le=M.data[0];tt(!!le,16349);const ee=le,ie=ee?.error||ee[0]?.error;if(ie){he(un,`RPC '${e}' stream ${o} received error:`,ie);const Te=ie.status;let Pe=(function(I){const A=Pt[I];if(A!==void 0)return $w(A)})(Te),ge=ie.message;Pe===void 0&&(Pe=te.INTERNAL,ge="Unknown error status: "+Te+" with message "+ie.message),L=!0,Q.a_(new _e(Pe,ge)),T.close()}else he(un,`RPC '${e}' stream ${o} received:`,le),Q.u_(le)}})),H(p,lw.STAT_EVENT,(M=>{M.stat===mf.PROXY?he(un,`RPC '${e}' stream ${o} detected buffering proxy`):M.stat===mf.NOPROXY&&he(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Wh(){return typeof document<"u"?document:null}function nd(n){return new OS(n,!0)}class r0{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const kv="PersistentStream";class s0{constructor(e,t,s,o,l,c,p,f){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(zs(t.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new _e(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PC extends s0{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=jS(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ne.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ne.min():c.readTime?ts(c.readTime):Ne.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=bf(this.serializer),t.addTarget=(function(l,c){let p;const f=c.target;if(p=wf(f)?{documents:US(l,f)}:{query:BS(l,f).ft},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){p.resumeToken=Ww(l,c.resumeToken);const v=xf(l,c.expectedCount);v!==null&&(p.expectedCount=v)}else if(c.snapshotVersion.compareTo(Ne.min())>0){p.readTime=Nc(l,c.snapshotVersion.toTimestamp());const v=xf(l,c.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const s=$S(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=bf(this.serializer),t.removeTarget=e,this.q_(t)}}class NC extends s0{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=FS(e.writeResults,e.commitTime),s=ts(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=bf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>MS(this.serializer,s)))};this.q_(t)}}class DC{}class OC extends DC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Tf(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(te.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Ho(e,Tf(t,s),o,c,p,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(te.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zs(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const bo="RemoteStore";class LC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Oo(this)&&(he(bo,"Restarting streams for network reachability change."),await(async function(f){const v=Ve(f);v.Ea.add(4),await Ql(v),v.Ra.set("Unknown"),v.Ea.delete(4),await rd(v)})(this))}))})),this.Ra=new VC(s,o)}}async function rd(n){if(Oo(n))for(const e of n.da)await e(!0)}async function Ql(n){for(const e of n.da)await e(!1)}function i0(n,e){const t=Ve(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ep(t)?wp(t):Ma(t).O_()&&_p(t,e))}function vp(n,e){const t=Ve(n),s=Ma(t);t.Ia.delete(e),s.O_()&&o0(t,e),t.Ia.size===0&&(s.O_()?s.L_():Oo(t)&&t.Ra.set("Unknown"))}function _p(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ma(n).Y_(e)}function o0(n,e){n.Va.Ue(e),Ma(n).Z_(e)}function wp(n){n.Va=new RS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ma(n).start(),n.Ra.ua()}function Ep(n){return Oo(n)&&!Ma(n).x_()&&n.Ia.size>0}function Oo(n){return Ve(n).Ea.size===0}function a0(n){n.Va=void 0}async function jC(n){n.Ra.set("Online")}async function MC(n){n.Ia.forEach(((e,t)=>{_p(n,e)}))}async function FC(n,e){a0(n),Ep(n)?(n.Ra.ha(e),wp(n)):n.Ra.set("Unknown")}async function UC(n,e,t){if(n.Ra.set("Online"),e instanceof Hw&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const p of l.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,c),o.Ia.delete(p),o.Va.removeTarget(p))})(n,e)}catch(s){he(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Oc(n,s)}else if(e instanceof pc?n.Va.Ze(e):e instanceof qw?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const s=await n0(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const p=l.Va.Tt(c);return p.targetChanges.forEach(((f,v)=>{if(f.resumeToken.approximateByteSize()>0){const E=l.Ia.get(v);E&&l.Ia.set(v,E.withResumeToken(f.resumeToken,c))}})),p.targetMismatches.forEach(((f,v)=>{const E=l.Ia.get(f);if(!E)return;l.Ia.set(f,E.withResumeToken(en.EMPTY_BYTE_STRING,E.snapshotVersion)),o0(l,f);const T=new Ti(E.target,f,v,E.sequenceNumber);_p(l,T)})),l.remoteSyncer.applyRemoteEvent(p)})(n,t)}catch(s){he(bo,"Failed to raise snapshot:",s),await Oc(n,s)}}async function Oc(n,e,t){if(!ja(e))throw e;n.Ea.add(1),await Ql(n),n.Ra.set("Offline"),t||(t=()=>n0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(bo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await rd(n)}))}function l0(n,e){return e().catch((t=>Oc(n,t,e)))}async function sd(n){const e=Ve(n),t=Vi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sp;for(;BC(e);)try{const o=await xC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,zC(e,o)}catch(o){await Oc(e,o)}u0(e)&&c0(e)}function BC(n){return Oo(n)&&n.Ta.length<10}function zC(n,e){n.Ta.push(e);const t=Vi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function u0(n){return Oo(n)&&!Vi(n).x_()&&n.Ta.length>0}function c0(n){Vi(n).start()}async function $C(n){Vi(n).ra()}async function qC(n){const e=Vi(n);for(const t of n.Ta)e.ea(t.mutations)}async function HC(n,e,t){const s=n.Ta.shift(),o=dp.from(s,e,t);await l0(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await sd(n)}async function WC(n,e){e&&Vi(n).X_&&await(async function(s,o){if((function(c){return SS(c)&&c!==te.ABORTED})(o.code)){const l=s.Ta.shift();Vi(s).B_(),await l0(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await sd(s)}})(n,e),u0(n)&&c0(n)}async function Sv(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),he(bo,"RemoteStore received new credentials");const s=Oo(t);t.Ea.add(3),await Ql(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rd(t)}async function GC(n,e){const t=Ve(n);e?(t.Ea.delete(2),await rd(t)):e||(t.Ea.add(2),await Ql(t),t.Ra.set("Unknown"))}function Ma(n){return n.ma||(n.ma=(function(t,s,o){const l=Ve(t);return l.sa(),new PC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:jC.bind(null,n),t_:MC.bind(null,n),r_:FC.bind(null,n),H_:UC.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ep(n)?wp(n):n.Ra.set("Unknown")):(await n.ma.stop(),a0(n))}))),n.ma}function Vi(n){return n.fa||(n.fa=(function(t,s,o){const l=Ve(t);return l.sa(),new NC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:$C.bind(null,n),r_:WC.bind(null,n),ta:qC.bind(null,n),na:HC.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await sd(n)):(await n.fa.stop(),n.Ta.length>0&&(he(bo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class xp{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new wo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,p=new xp(e,t,c,o,l);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(n,e){if(zs("AsyncQueue",`${e}: ${n}`),ja(n))return new _e(te.UNAVAILABLE,`${e}: ${n}`);throw n}class wa{static emptySet(e){return new wa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ke.comparator(t.key,s.key):(t,s)=>ke.comparator(t.key,s.key),this.keyedMap=_l(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new wa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Cv{constructor(){this.ga=new wt(ke.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Aa{constructor(e,t,s,o,l,c,p,f,v){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=f,this.hasCachedResults=v}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((p=>{c.push({type:0,doc:p})})),new Aa(e,t,wa.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class KC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class QC{constructor(){this.queries=Av(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ve(t),l=o.queries;o.queries=Av(),l.forEach(((c,p)=>{for(const f of p.Sa)f.onError(s)}))})(this,new _e(te.ABORTED,"Firestore shutting down"))}}function Av(){return new No((n=>Rw(n)),Xc)}async function YC(n,e){const t=Ve(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new KC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const p=Tp(c,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ip(t)}async function XC(n,e){const t=Ve(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function JC(n,e){const t=Ve(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const p of c.Sa)p.Fa(o)&&(s=!0);c.wa=o}}s&&Ip(t)}function ZC(n,e,t){const s=Ve(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Ip(n){n.Ca.forEach((e=>{e.next()}))}var Cf,Rv;(Rv=Cf||(Cf={})).Ma="default",Rv.Cache="cache";class eA{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Aa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cf.Cache}}class d0{constructor(e){this.key=e}}class h0{constructor(e){this.key=e}}class tA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=Pw(e),this.tu=new wa(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Cv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,p=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const k=o.get(E),L=Jc(this.query,T)?T:null,Q=!!k&&this.mutatedKeys.has(k.key),H=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let M=!1;k&&L?k.data.isEqual(L.data)?Q!==H&&(s.track({type:3,doc:L}),M=!0):this.su(k,L)||(s.track({type:2,doc:L}),M=!0,(f&&this.eu(L,f)>0||v&&this.eu(L,v)<0)&&(p=!0)):!k&&L?(s.track({type:0,doc:L}),M=!0):k&&!L&&(s.track({type:1,doc:k}),M=!0,(f||v)&&(p=!0)),M&&(L?(c=c.add(L),l=H?l.add(E):l.delete(E)):(c=c.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{tu:c,iu:s,Cs:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((E,T)=>(function(L,Q){const H=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:M})}};return H(L)-H(Q)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(s),o=o??!1;const p=t&&!o?this._u():[],f=this.Xa.size===0&&this.current&&!o?1:0,v=f!==this.Za;return this.Za=f,c.length!==0||v?{snapshot:new Aa(this.query,e.tu,l,c,e.mutatedKeys,f===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new h0(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new d0(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Aa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bp="SyncEngine";class nA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class rA{constructor(e){this.key=e,this.hu=!1}}class sA{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new No((p=>Rw(p)),Xc),this.Iu=new Map,this.Eu=new Set,this.du=new wt(ke.comparator),this.Au=new Map,this.Ru=new pp,this.Vu={},this.mu=new Map,this.fu=Ca.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iA(n,e,t=!0){const s=v0(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await f0(s,e,t,!0),o}async function oA(n,e){const t=v0(n);await f0(t,e,!0,!1)}async function f0(n,e,t,s){const o=await TC(n.localStore,es(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let p;return s&&(p=await aA(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&i0(n.remoteStore,o),p}async function aA(n,e,t,s,o){n.pu=(T,k,L)=>(async function(H,M,le,ee){let ie=M.view.ru(le);ie.Cs&&(ie=await xv(H.localStore,M.query,!1).then((({documents:P})=>M.view.ru(P,ie))));const Te=ee&&ee.targetChanges.get(M.targetId),Pe=ee&&ee.targetMismatches.get(M.targetId)!=null,ge=M.view.applyChanges(ie,H.isPrimaryClient,Te,Pe);return Nv(H,M.targetId,ge.au),ge.snapshot})(n,T,k,L);const l=await xv(n.localStore,e,!0),c=new tA(e,l.Qs),p=c.ru(l.documents),f=Kl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),v=c.applyChanges(p,n.isPrimaryClient,f);Nv(n,t,v.au);const E=new nA(e,t,c);return n.Tu.set(e,E),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),v.snapshot}async function lA(n,e,t){const s=Ve(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!Xc(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await kf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&vp(s.remoteStore,o.targetId),Af(s,o.targetId)})).catch(La)):(Af(s,o.targetId),await kf(s.localStore,o.targetId,!0))}async function uA(n,e){const t=Ve(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),vp(t.remoteStore,s.targetId))}async function cA(n,e,t){const s=yA(n);try{const o=await(function(c,p){const f=Ve(c),v=ht.now(),E=p.reduce(((L,Q)=>L.add(Q.key)),qe());let T,k;return f.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let Q=$s(),H=qe();return f.Ns.getEntries(L,E).next((M=>{Q=M,Q.forEach(((le,ee)=>{ee.isValidDocument()||(H=H.add(le))}))})).next((()=>f.localDocuments.getOverlayedDocuments(L,Q))).next((M=>{T=M;const le=[];for(const ee of p){const ie=xS(ee,T.get(ee.key).overlayedDocument);ie!=null&&le.push(new Do(ee.key,ie,Tw(ie.value.mapValue),Fs.exists(!0)))}return f.mutationQueue.addMutationBatch(L,v,le,p)})).next((M=>{k=M;const le=M.applyToLocalDocumentSet(T,H);return f.documentOverlayCache.saveOverlays(L,M.batchId,le)}))})).then((()=>({batchId:k.batchId,changes:Dw(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,p,f){let v=c.Vu[c.currentUser.toKey()];v||(v=new wt($e)),v=v.insert(p,f),c.Vu[c.currentUser.toKey()]=v})(s,o.batchId,t),await Yl(s,o.changes),await sd(s.remoteStore)}catch(o){const l=Tp(o,"Failed to persist write");t.reject(l)}}async function p0(n,e){const t=Ve(n);try{const s=await wC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?tt(c.hu,14607):o.removedDocuments.size>0&&(tt(c.hu,42227),c.hu=!1))})),await Yl(t,s,e)}catch(s){await La(s)}}function Pv(n,e,t){const s=Ve(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const p=c.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(c,p){const f=Ve(c);f.onlineState=p;let v=!1;f.queries.forEach(((E,T)=>{for(const k of T.Sa)k.va(p)&&(v=!0)})),v&&Ip(f)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function dA(n,e,t){const s=Ve(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new wt(ke.comparator);c=c.insert(l,dn.newNoDocument(l,Ne.min()));const p=qe().add(l),f=new td(Ne.min(),new Map,new wt($e),c,p);await p0(s,f),s.du=s.du.remove(l),s.Au.delete(e),kp(s)}else await kf(s.localStore,e,!1).then((()=>Af(s,e,t))).catch(La)}async function hA(n,e){const t=Ve(n),s=e.batch.batchId;try{const o=await _C(t.localStore,e);g0(t,s,null),m0(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Yl(t,o)}catch(o){await La(o)}}async function fA(n,e,t){const s=Ve(n);try{const o=await(function(c,p){const f=Ve(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return f.mutationQueue.lookupMutationBatch(v,p).next((T=>(tt(T!==null,37113),E=T.keys(),f.mutationQueue.removeMutationBatch(v,T)))).next((()=>f.mutationQueue.performConsistencyCheck(v))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(v,E,p))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>f.localDocuments.getDocuments(v,E)))}))})(s.localStore,e);g0(s,e,t),m0(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Yl(s,o)}catch(o){await La(o)}}function m0(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function g0(n,e,t){const s=Ve(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Af(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||y0(n,s)}))}function y0(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(vp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),kp(n))}function Nv(n,e,t){for(const s of t)s instanceof d0?(n.Ru.addReference(s.key,e),pA(n,s)):s instanceof h0?(he(bp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||y0(n,s.key)):Ae(19791,{wu:s})}function pA(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(he(bp,"New document in limbo: "+t),n.Eu.add(s),kp(n))}function kp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(_t.fromString(e)),s=n.fu.next();n.Au.set(s,new rA(t)),n.du=n.du.insert(t,s),i0(n.remoteStore,new Ti(es(up(t.path)),s,"TargetPurposeLimboResolution",Gc.ce))}}async function Yl(n,e,t){const s=Ve(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,f)=>{c.push(s.pu(f,e,t).then((v=>{if((v||t)&&s.isPrimaryClient){const E=v?!v.fromCache:t?.targetChanges.get(f.targetId)?.current;s.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(v){o.push(v);const E=gp.As(f.targetId,v);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(f,v){const E=Ve(f);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Y.forEach(v,(k=>Y.forEach(k.Es,(L=>E.persistence.referenceDelegate.addReference(T,k.targetId,L))).next((()=>Y.forEach(k.ds,(L=>E.persistence.referenceDelegate.removeReference(T,k.targetId,L)))))))))}catch(T){if(!ja(T))throw T;he(yp,"Failed to update sequence numbers: "+T)}for(const T of v){const k=T.targetId;if(!T.fromCache){const L=E.Ms.get(k),Q=L.snapshotVersion,H=L.withLastLimboFreeSnapshotVersion(Q);E.Ms=E.Ms.insert(k,H)}}})(s.localStore,l))}async function mA(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){he(bp,"User change. New user:",e.toKey());const s=await t0(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((p=>{p.forEach((f=>{f.reject(new _e(te.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Yl(t,s.Ls)}}function gA(n,e){const t=Ve(n),s=t.Au.get(e);if(s&&s.hu)return qe().add(s.key);{let o=qe();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const p=t.Tu.get(c);o=o.unionWith(p.view.nu)}return o}}function v0(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=p0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dA.bind(null,e),e.Pu.H_=JC.bind(null,e.eventManager),e.Pu.yu=ZC.bind(null,e.eventManager),e}function yA(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fA.bind(null,e),e}class Vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return vC(this.persistence,new mC,e.initialUser,this.serializer)}Cu(e){return new e0(mp.mi,this.serializer)}Du(e){return new bC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vc.provider={build:()=>new Vc};class vA extends Vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tt(this.persistence.referenceDelegate instanceof Dc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new eC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new e0((s=>Dc.mi(s,t)),this.serializer)}}class Rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Pv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=mA.bind(null,this.syncEngine),await GC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QC})()}createDatastore(e){const t=nd(e.databaseInfo.databaseId),s=(function(l){return new RC(l)})(e.databaseInfo);return(function(l,c,p,f){return new OC(l,c,p,f)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,p){return new LC(s,o,l,c,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Pv(this.syncEngine,t,0)),(function(){return bv.v()?new bv:new kC})())}createSyncEngine(e,t){return(function(o,l,c,p,f,v,E){const T=new sA(o,l,c,p,f,v);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ve(t);he(bo,"RemoteStore shutting down."),s.Ea.add(5),await Ql(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Rf.provider={build:()=>new Rf};class _A{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Li="FirestoreClient";class wA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{he(Li,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(he(Li,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Tp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Gh(n,e){n.asyncQueue.verifyOperationInProgress(),he(Li,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await t0(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Dv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await EA(n);he(Li,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Sv(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>Sv(e.remoteStore,o))),n._onlineComponents=e}async function EA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Li,"Using user provided OfflineComponentProvider");try{await Gh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ia("Error using user provided cache. Falling back to memory cache: "+t),await Gh(n,new Vc)}}else he(Li,"Using default OfflineComponentProvider"),await Gh(n,new vA(void 0));return n._offlineComponents}async function _0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Li,"Using user provided OnlineComponentProvider"),await Dv(n,n._uninitializedComponentsProvider._online)):(he(Li,"Using default OnlineComponentProvider"),await Dv(n,new Rf))),n._onlineComponents}function xA(n){return _0(n).then((e=>e.syncEngine))}async function Ov(n){const e=await _0(n),t=e.eventManager;return t.onListen=iA.bind(null,e.syncEngine),t.onUnlisten=lA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uA.bind(null,e.syncEngine),t}function w0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Vv=new Map;const E0="firestore.googleapis.com",Lv=!0;class jv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E0,this.ssl=Lv}else this.host=e.host,this.ssl=e.ssl??Lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JS)throw new _e(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w0(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _e(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sp{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new I1;switch(s.type){case"firstParty":return new C1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Vv.get(t);s&&(he("ComponentProvider","Removing Datastore"),Vv.delete(t),s.terminate())})(this),Promise.resolve()}}function TA(n,e,t,s={}){n=_a(n,Sp);const o=Na(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},p=`${e}:${t}`;o&&(y_(`https://${p}`),v_("Firestore",!0)),l.host!==E0&&l.host!==p&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:p,ssl:o,emulatorOptions:s};if(!Ri(f,c)&&(n._setSettings(f),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=cn.MOCK_USER;else{v=DT(s.mockUserToken,n._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new _e(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new cn(T)}n._authCredentials=new b1(new hw(v,E))}}class id{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new id(this.firestore,e,this._query)}}class qt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Wl(t,qt._jsonSchema))return new qt(e,s||null,new ke(_t.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Nt("string",qt._jsonSchemaVersion),referencePath:Nt("string")};class Fl extends id{constructor(e,t,s){super(e,t,up(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new ke(e))}withConverter(e){return new Fl(this.firestore,e,this._path)}}function rc(n,e,...t){if(n=Zt(n),arguments.length===1&&(e=np.newId()),O1("doc","path",e),n instanceof Sp){const s=_t.fromString(e,...t);return Yy(s),new qt(n,null,new ke(s))}{if(!(n instanceof qt||n instanceof Fl))throw new _e(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_t.fromString(e,...t));return Yy(s),new qt(n.firestore,n instanceof Fl?n.converter:null,new ke(s))}}const Mv="AsyncQueue";class Fv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r0(this,"async_queue_retry"),this._c=()=>{const s=Wh();s&&he(Mv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Wh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new wo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ja(e))throw e;he(Mv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,zs("INTERNAL UNHANDLED ERROR: ",Uv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=xp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:Uv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Uv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Bv(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Lc extends Sp{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Fv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fv(e),this._firestoreClient=void 0,await e}}}function IA(n,e){const t=typeof n=="object"?n:qf(),s=typeof n=="string"?n:kc,o=Ro(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=PT("firestore");l&&TA(o,...l)}return o}function x0(n){if(n._terminated)throw new _e(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bA(n),n._firestoreClient}function bA(n){const e=n._freezeSettings(),t=(function(o,l,c,p){return new W1(o,l,c,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,w0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new wA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(n._componentsProvider))}class hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hr(en.fromBase64String(e))}catch(t){throw new _e(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hr(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wl(e,hr._jsonSchema))return hr.fromBase64String(e.bytes)}}hr._jsonSchemaVersion="firestore/bytes/1.0",hr._jsonSchema={type:Nt("string",hr._jsonSchemaVersion),bytes:Nt("string")};class Cp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class T0{constructor(e){this._methodName=e}}class ns{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ns._jsonSchemaVersion}}static fromJSON(e){if(Wl(e,ns._jsonSchema))return new ns(e.latitude,e.longitude)}}ns._jsonSchemaVersion="firestore/geoPoint/1.0",ns._jsonSchema={type:Nt("string",ns._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};class rs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:rs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wl(e,rs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new rs(e.vectorValues);throw new _e(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rs._jsonSchemaVersion="firestore/vectorValue/1.0",rs._jsonSchema={type:Nt("string",rs._jsonSchemaVersion),vectorValues:Nt("object")};const kA=/^__.*__$/;class SA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Do(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gl(e,this.data,t,this.fieldTransforms)}}function I0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:n})}}class Ap{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(I0(this.Ac)&&kA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||nd(e)}Cc(e,t,s,o=!1){return new Ap({Ac:e,methodName:t,Dc:s,path:Jt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AA(n){const e=n._freezeSettings(),t=nd(n._databaseId);return new CA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RA(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);C0("Data must be an object, but it was:",c,s);const p=k0(s,c);let f,v;if(l.merge)f=new kr(c.fieldMask),v=c.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const k=PA(e,T,t);if(!c.contains(k))throw new _e(te.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);DA(E,k)||E.push(k)}f=new kr(E),v=c.fieldTransforms.filter((T=>f.covers(T.field)))}else f=null,v=c.fieldTransforms;return new SA(new dr(p),f,v)}function b0(n,e){if(S0(n=Zt(n)))return C0("Unsupported field value:",e,n),k0(n,e);if(n instanceof T0)return(function(s,o){if(!I0(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const p of s){let f=b0(p,o.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=Zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return gS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ht.fromDate(s);return{timestampValue:Nc(o.serializer,l)}}if(s instanceof ht){const l=new ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Nc(o.serializer,l)}}if(s instanceof ns)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof hr)return{bytesValue:Ww(o.serializer,s._byteString)};if(s instanceof qt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:fp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof rs)return(function(c,p){return{mapValue:{fields:{[Ew]:{stringValue:xw},[Sc]:{arrayValue:{values:c.toArray().map((v=>{if(typeof v!="number")throw p.Sc("VectorValues must only contain numeric values.");return cp(p.serializer,v)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${rp(s)}`)})(n,e)}function k0(n,e){const t={};return mw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(n,((s,o)=>{const l=b0(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function S0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ht||n instanceof ns||n instanceof hr||n instanceof qt||n instanceof T0||n instanceof rs)}function C0(n,e,t){if(!S0(t)||!fw(t)){const s=rp(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function PA(n,e,t){if((e=Zt(e))instanceof Cp)return e._internalPath;if(typeof e=="string")return A0(n,e);throw jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const NA=new RegExp("[~\\*/\\[\\]]");function A0(n,e,t){if(e.search(NA)>=0)throw jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cp(...e.split("."))._internalPath}catch{throw jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jc(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${s}`),c&&(f+=` in document ${o}`),f+=")"),new _e(te.INVALID_ARGUMENT,p+n+f)}function DA(n,e){return n.some((t=>t.isEqual(e)))}class R0{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(P0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OA extends R0{data(){return super.data()}}function P0(n,e){return typeof e=="string"?A0(n,e):e instanceof Cp?e._internalPath:e._delegate._internalPath}function VA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LA{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Po(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[Sc].arrayValue?.values?.map((s=>kt(s.doubleValue)));return new rs(t)}convertGeoPoint(e){return new ns(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Qc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ol(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=_t.fromString(e);tt(Jw(s),9688,{name:e});const o=new Vl(s.get(1),s.get(3)),l=new ke(s.popFirst(5));return o.isEqual(t)||zs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function jA(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class El{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eo extends R0{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(P0("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Eo._jsonSchema={type:Nt("string",Eo._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class mc extends Eo{data(e={}){return super.data(e)}}class Ea{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new El(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new mc(this._firestore,this._userDataWriter,s.key,s,new El(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((p=>{const f=new mc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new El(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const f=new mc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new El(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return p.type!==0&&(v=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),p.type!==1&&(c=c.add(p.doc),E=c.indexOf(p.doc.key)),{type:MA(p.type),doc:f,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MA(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}Ea._jsonSchemaVersion="firestore/querySnapshot/1.0",Ea._jsonSchema={type:Nt("string",Ea._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class N0 extends LA{constructor(e){super(),this.firestore=e}convertBytes(e){return new hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function zv(n,e,t){n=_a(n,qt);const s=_a(n.firestore,Lc),o=jA(n.converter,e,t);return FA(s,[RA(AA(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Fs.none())])}function $v(n,...e){n=Zt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Bv(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Bv(e[s])){const f=e[s];e[s]=f.next?.bind(f),e[s+1]=f.error?.bind(f),e[s+2]=f.complete?.bind(f)}let l,c,p;if(n instanceof qt)c=_a(n.firestore,Lc),p=up(n._key.path),l={next:f=>{e[s]&&e[s](UA(c,n,f))},error:e[s+1],complete:e[s+2]};else{const f=_a(n,id);c=_a(f.firestore,Lc),p=f._query;const v=new N0(c);l={next:E=>{e[s]&&e[s](new Ea(c,v,f,E))},error:e[s+1],complete:e[s+2]},VA(n._query)}return(function(v,E,T,k){const L=new _A(k),Q=new eA(E,L,T);return v.asyncQueue.enqueueAndForget((async()=>YC(await Ov(v),Q))),()=>{L.Nu(),v.asyncQueue.enqueueAndForget((async()=>XC(await Ov(v),Q)))}})(x0(c),p,o,l)}function FA(n,e){return(function(s,o){const l=new wo;return s.asyncQueue.enqueueAndForget((async()=>cA(await xA(s),o,l))),l.promise})(x0(n),e)}function UA(n,e,t){const s=t.docs.get(e._key),o=new N0(n);return new Eo(n,o,e._key,s,new El(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Va=o})(Da),ss(new Cr("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),p=new Lc(new k1(s.getProvider("auth-internal")),new A1(c,s.getProvider("app-check-internal")),(function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new _e(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(v.options.projectId,E)})(c,o),c);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),fr(Wy,Gy,e),fr(Wy,Gy,"esm2020")})();const D0="@firebase/installations",Rp="0.6.19";const O0=1e4,V0=`w:${Rp}`,L0="FIS_v2",BA="https://firebaseinstallations.googleapis.com/v1",zA=3600*1e3,$A="installations",qA="Installations";const HA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ko=new Ao($A,qA,HA);function j0(n){return n instanceof Ar&&n.code.includes("request-failed")}function M0({projectId:n}){return`${BA}/projects/${n}/installations`}function F0(n){return{token:n.token,requestStatus:2,expiresIn:GA(n.expiresIn),creationTime:Date.now()}}async function U0(n,e){const s=(await e.json()).error;return ko.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function B0({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function WA(n,{refreshToken:e}){const t=B0(n);return t.append("Authorization",KA(e)),t}async function z0(n){const e=await n();return e.status>=500&&e.status<600?n():e}function GA(n){return Number(n.replace("s","000"))}function KA(n){return`${L0} ${n}`}async function QA({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=M0(n),o=B0(n),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const c={fid:t,authVersion:L0,appId:n.appId,sdkVersion:V0},p={method:"POST",headers:o,body:JSON.stringify(c)},f=await z0(()=>fetch(s,p));if(f.ok){const v=await f.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:F0(v.authToken)}}else throw await U0("Create Installation",f)}function $0(n){return new Promise(e=>{setTimeout(e,n)})}function YA(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const XA=/^[cdef][\w-]{21}$/,Pf="";function JA(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=ZA(n);return XA.test(t)?t:Pf}catch{return Pf}}function ZA(n){return YA(n).substr(0,22)}function od(n){return`${n.appName}!${n.appId}`}const q0=new Map;function H0(n,e){const t=od(n);W0(t,e),eR(t,e)}function W0(n,e){const t=q0.get(n);if(t)for(const s of t)s(e)}function eR(n,e){const t=tR();t&&t.postMessage({key:n,fid:e}),nR()}let _o=null;function tR(){return!_o&&"BroadcastChannel"in self&&(_o=new BroadcastChannel("[Firebase] FID Change"),_o.onmessage=n=>{W0(n.data.key,n.data.fid)}),_o}function nR(){q0.size===0&&_o&&(_o.close(),_o=null)}const rR="firebase-installations-database",sR=1,So="firebase-installations-store";let Kh=null;function Pp(){return Kh||(Kh=x_(rR,sR,{upgrade:(n,e)=>{e===0&&n.createObjectStore(So)}})),Kh}async function Mc(n,e){const t=od(n),o=(await Pp()).transaction(So,"readwrite"),l=o.objectStore(So),c=await l.get(t);return await l.put(e,t),await o.done,(!c||c.fid!==e.fid)&&H0(n,e.fid),e}async function G0(n){const e=od(n),s=(await Pp()).transaction(So,"readwrite");await s.objectStore(So).delete(e),await s.done}async function ad(n,e){const t=od(n),o=(await Pp()).transaction(So,"readwrite"),l=o.objectStore(So),c=await l.get(t),p=e(c);return p===void 0?await l.delete(t):await l.put(p,t),await o.done,p&&(!c||c.fid!==p.fid)&&H0(n,p.fid),p}async function Np(n){let e;const t=await ad(n.appConfig,s=>{const o=iR(s),l=oR(n,o);return e=l.registrationPromise,l.installationEntry});return t.fid===Pf?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function iR(n){const e=n||{fid:JA(),registrationStatus:0};return K0(e)}function oR(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ko.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=aR(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:lR(n)}:{installationEntry:e}}async function aR(n,e){try{const t=await QA(n,e);return Mc(n.appConfig,t)}catch(t){throw j0(t)&&t.customData.serverCode===409?await G0(n.appConfig):await Mc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function lR(n){let e=await qv(n.appConfig);for(;e.registrationStatus===1;)await $0(100),e=await qv(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Np(n);return s||t}return e}function qv(n){return ad(n,e=>{if(!e)throw ko.create("installation-not-found");return K0(e)})}function K0(n){return uR(n)?{fid:n.fid,registrationStatus:0}:n}function uR(n){return n.registrationStatus===1&&n.registrationTime+O0<Date.now()}async function cR({appConfig:n,heartbeatServiceProvider:e},t){const s=dR(n,t),o=WA(n,t),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const c={installation:{sdkVersion:V0,appId:n.appId}},p={method:"POST",headers:o,body:JSON.stringify(c)},f=await z0(()=>fetch(s,p));if(f.ok){const v=await f.json();return F0(v)}else throw await U0("Generate Auth Token",f)}function dR(n,{fid:e}){return`${M0(n)}/${e}/authTokens:generate`}async function Dp(n,e=!1){let t;const s=await ad(n.appConfig,l=>{if(!Q0(l))throw ko.create("not-registered");const c=l.authToken;if(!e&&pR(c))return l;if(c.requestStatus===1)return t=hR(n,e),l;{if(!navigator.onLine)throw ko.create("app-offline");const p=gR(l);return t=fR(n,p),p}});return t?await t:s.authToken}async function hR(n,e){let t=await Hv(n.appConfig);for(;t.authToken.requestStatus===1;)await $0(100),t=await Hv(n.appConfig);const s=t.authToken;return s.requestStatus===0?Dp(n,e):s}function Hv(n){return ad(n,e=>{if(!Q0(e))throw ko.create("not-registered");const t=e.authToken;return yR(t)?{...e,authToken:{requestStatus:0}}:e})}async function fR(n,e){try{const t=await cR(n,e),s={...e,authToken:t};return await Mc(n.appConfig,s),t}catch(t){if(j0(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await G0(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Mc(n.appConfig,s)}throw t}}function Q0(n){return n!==void 0&&n.registrationStatus===2}function pR(n){return n.requestStatus===2&&!mR(n)}function mR(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+zA}function gR(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function yR(n){return n.requestStatus===1&&n.requestTime+O0<Date.now()}async function vR(n){const e=n,{installationEntry:t,registrationPromise:s}=await Np(e);return s?s.catch(console.error):Dp(e).catch(console.error),t.fid}async function _R(n,e=!1){const t=n;return await wR(t),(await Dp(t,e)).token}async function wR(n){const{registrationPromise:e}=await Np(n);e&&await e}function ER(n){if(!n||!n.options)throw Qh("App Configuration");if(!n.name)throw Qh("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Qh(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Qh(n){return ko.create("missing-app-config-values",{valueName:n})}const Y0="installations",xR="installations-internal",TR=n=>{const e=n.getProvider("app").getImmediate(),t=ER(e),s=Ro(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},IR=n=>{const e=n.getProvider("app").getImmediate(),t=Ro(e,Y0).getImmediate();return{getId:()=>vR(t),getToken:o=>_R(t,o)}};function bR(){ss(new Cr(Y0,TR,"PUBLIC")),ss(new Cr(xR,IR,"PRIVATE"))}bR();fr(D0,Rp);fr(D0,Rp,"esm2020");const Fc="analytics",kR="firebase_id",SR="origin",CR=60*1e3,AR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Op="https://www.googletagmanager.com/gtag/js";const En=new $c("@firebase/analytics");const RR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qn=new Ao("analytics","Analytics",RR);function PR(n){if(!n.startsWith(Op)){const e=Qn.create("invalid-gtag-resource",{gtagURL:n});return En.warn(e.message),""}return n}function X0(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function NR(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function DR(n,e){const t=NR("firebase-js-sdk-policy",{createScriptURL:PR}),s=document.createElement("script"),o=`${Op}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function OR(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function VR(n,e,t,s,o,l){const c=s[o];try{if(c)await e[c];else{const f=(await X0(t)).find(v=>v.measurementId===o);f&&await e[f.appId]}}catch(p){En.error(p)}n("config",o,l)}async function LR(n,e,t,s,o){try{let l=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const p=await X0(t);for(const f of c){const v=p.find(T=>T.measurementId===f),E=v&&e[v.appId];if(E)l.push(E);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",s,o||{})}catch(l){En.error(l)}}function jR(n,e,t,s){async function o(l,...c){try{if(l==="event"){const[p,f]=c;await LR(n,e,t,p,f)}else if(l==="config"){const[p,f]=c;await VR(n,e,t,s,p,f)}else if(l==="consent"){const[p,f]=c;n("consent",p,f)}else if(l==="get"){const[p,f,v]=c;n("get",p,f,v)}else if(l==="set"){const[p]=c;n("set",p)}else n(l,...c)}catch(p){En.error(p)}}return o}function MR(n,e,t,s,o){let l=function(...c){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=jR(l,n,e,t),{gtagCore:l,wrappedGtag:window[o]}}function FR(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Op)&&t.src.includes(n))return t;return null}const UR=30,BR=1e3;class zR{constructor(e={},t=BR){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const J0=new zR;function $R(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function qR(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:$R(t)},o=AR.replace("{app-id}",e),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let c="";try{const p=await l.json();p.error?.message&&(c=p.error.message)}catch{}throw Qn.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function HR(n,e=J0,t){const{appId:s,apiKey:o,measurementId:l}=n.options;if(!s)throw Qn.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:s};throw Qn.create("no-api-key")}const c=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new KR;return setTimeout(async()=>{p.abort()},CR),Z0({appId:s,apiKey:o,measurementId:l},c,p,e)}async function Z0(n,{throttleEndTimeMillis:e,backoffCount:t},s,o=J0){const{appId:l,measurementId:c}=n;try{await WR(s,e)}catch(p){if(c)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:c};throw p}try{const p=await qR(n);return o.deleteThrottleMetadata(l),p}catch(p){const f=p;if(!GR(f)){if(o.deleteThrottleMetadata(l),c)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:c};throw p}const v=Number(f?.customData?.httpStatus)===503?yy(t,o.intervalMillis,UR):yy(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(l,E),En.debug(`Calling attemptFetch again in ${v} millis`),Z0(n,E,s,o)}}function WR(n,e){return new Promise((t,s)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(l),s(Qn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function GR(n){if(!(n instanceof Ar)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class KR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function QR(n,e,t,s,o){if(o&&o.global){n("event",t,s);return}else{const l=await e,c={...s,send_to:l};n("event",t,c)}}async function YR(n,e,t,s){if(s&&s.global){const o={};for(const l of Object.keys(t))o[`user_properties.${l}`]=t[l];return n("set",o),Promise.resolve()}else{const o=await e;n("config",o,{update:!0,user_properties:t})}}async function XR(){if(Bf())try{await zf()}catch(n){return En.warn(Qn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return En.warn(Qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function JR(n,e,t,s,o,l,c){const p=HR(n);p.then(k=>{t[k.measurementId]=k.appId,n.options.measurementId&&k.measurementId!==n.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${k.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(k=>En.error(k)),e.push(p);const f=XR().then(k=>{if(k)return s.getId()}),[v,E]=await Promise.all([p,f]);FR(l)||DR(l,v.measurementId),o("js",new Date);const T=c?.config??{};return T[SR]="firebase",T.update=!0,E!=null&&(T[kR]=E),o("config",v.measurementId,T),v.measurementId}class ZR{constructor(e){this.app=e}_delete(){return delete xa[this.app.options.appId],Promise.resolve()}}let xa={},Wv=[];const Gv={};let Yh="dataLayer",eP="gtag",Kv,Vp,Qv=!1;function tP(){const n=[];if(Uf()&&n.push("This is a browser extension environment."),__()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,o)=>`(${o+1}) ${s}`).join(" "),t=Qn.create("invalid-analytics-context",{errorInfo:e});En.warn(t.message)}}function nP(n,e,t){tP();const s=n.options.appId;if(!s)throw Qn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qn.create("no-api-key");if(xa[s]!=null)throw Qn.create("already-exists",{id:s});if(!Qv){OR(Yh);const{wrappedGtag:l,gtagCore:c}=MR(xa,Wv,Gv,Yh,eP);Vp=l,Kv=c,Qv=!0}return xa[s]=JR(n,Wv,Gv,e,Kv,Yh,t),new ZR(n)}function rP(n=qf()){n=Zt(n);const e=Ro(n,Fc);return e.isInitialized()?e.getImmediate():sP(n)}function sP(n,e={}){const t=Ro(n,Fc);if(t.isInitialized()){const o=t.getImmediate();if(Ri(e,t.getOptions()))return o;throw Qn.create("already-initialized")}return t.initialize({options:e})}async function iP(){if(Uf()||!__()||!Bf())return!1;try{return await zf()}catch{return!1}}function oP(n,e,t){n=Zt(n),YR(Vp,xa[n.app.options.appId],e,t).catch(s=>En.error(s))}function aP(n,e,t,s){n=Zt(n),QR(Vp,xa[n.app.options.appId],e,t,s).catch(o=>En.error(o))}const Yv="@firebase/analytics",Xv="0.10.19";function lP(){ss(new Cr(Fc,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return nP(s,o,t)},"PUBLIC")),ss(new Cr("analytics-internal",n,"PRIVATE")),fr(Yv,Xv),fr(Yv,Xv,"esm2020");function n(e){try{const t=e.getProvider(Fc).getImmediate();return{logEvent:(s,o,l)=>aP(t,s,o,l),setUserProperties:(s,o)=>oP(t,s,o)}}catch(t){throw Qn.create("interop-component-reg-failed",{reason:t})}}}lP();const uP={apiKey:"AIzaSyAgKnkhu_dcjcbXsl1GVWOXYoY-CmhMwZ4",authDomain:"qa-verify-and-ttack.firebaseapp.com",projectId:"qa-verify-and-ttack",storageBucket:"qa-verify-and-ttack.firebasestorage.app",messagingSenderId:"656737115796",appId:"1:656737115796:web:779252a25a44df70001e81",measurementId:"G-RBKTZGBYV9"},Lp=T_(uP),Ul=x1(Lp),sc=IA(Lp),cP=new Vs;iP().then(n=>{n&&rP(Lp)});const Ai={signInWithGoogle:async()=>{try{return(await Pk(Ul,cP)).user}catch(n){throw console.error("Error signing in with Google",n),n}},subscribeToRepos:(n,e)=>{const t=rc(sc,"user_settings",n);return $v(t,s=>{if(s.exists()){const o=s.data();e(o.repos||[])}else e([])})},subscribeToGlobalSettings:(n,e)=>{const t=rc(sc,"user_settings",n);return $v(t,s=>{if(s.exists()){const o=s.data();e(o.globalSettings||{})}else e({})})},saveUserRepos:async(n,e)=>{const t=rc(sc,"user_settings",n);await zv(t,{repos:e},{merge:!0})},saveGlobalSettings:async(n,e)=>{const t=rc(sc,"user_settings",n);await zv(t,{globalSettings:e},{merge:!0})}},dP=()=>"AIzaSyAwG-Ss1YRx9xkiKk9WTysfD3Oyn8Zv8Cs";let ic=null;const Jv=async()=>{if(ic)return ic;const n=dP(),{GoogleGenAI:e}=await rf(async()=>{const{GoogleGenAI:t}=await import("./index-C4XZfPoY.js");return{GoogleGenAI:t}},[],import.meta.url);return ic=new e({apiKey:n}),ic},Zv={analyzeIssue:async(n,e)=>{const t=await Jv();if(!t)return"AI analysis disabled (no Gemini API key configured). Add VITE_GEMINI_API_KEY to .env.local to enable.";try{return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:`You are a QA Lead. Analyze this bug report and provide 3 concise bullet points: 1) Potential root cause, 2) Key verification step, 3) Severity assessment.

Bug: ${n}
Details: ${e}`,config:{temperature:.2}})).text||"No analysis available."}catch(s){return console.error("AI Analysis failed",s),"Unable to analyze issue at this time. Please check your network or API key."}},generateTests:async(n,e)=>{const t=await Jv();if(!t)return["Verify login functionality","Check user profile update","Test checkout flow (Mock)"];try{return((await t.models.generateContent({model:"gemini-3-flash-preview",contents:`You are a QA Lead. Generate a checklist of 5-10 essential functional verification tests for a software project named "${n}" with the following description/context: "${e}". Return ONLY the list of tests, one per line, without numbering or bullets.`,config:{temperature:.4}})).text||"").split(`
`).map(l=>l.replace(/^[-*\d\.]+\s+/,"").trim()).filter(Boolean)}catch(s){return console.error("AI Test Generation failed",s),[]}}},Uc=[{id:"pulse-green",name:"Pulse Green",colors:{primary:"#12d622",primaryHover:"#0fa61c",backgroundLight:"#e8efe8",backgroundDark:"#0b1b0f",surfaceDark:"#0f1f12",surfaceDarkLighter:"#132618",inputDark:"#152b1a"}},{id:"cyber-blue",name:"Cyber Blue",colors:{primary:"#00e5ff",primaryHover:"#00b8d4",backgroundLight:"#e0f7fa",backgroundDark:"#001a1f",surfaceDark:"#00252b",surfaceDarkLighter:"#00333b",inputDark:"#00363d"}},{id:"crimson-red",name:"Crimson Red",colors:{primary:"#ff1744",primaryHover:"#d50000",backgroundLight:"#ffebee",backgroundDark:"#1a0505",surfaceDark:"#2b0b0b",surfaceDarkLighter:"#3b1212",inputDark:"#4a1515"}},{id:"royal-purple",name:"Royal Purple",colors:{primary:"#d500f9",primaryHover:"#aa00ff",backgroundLight:"#f3e5f5",backgroundDark:"#1a051a",surfaceDark:"#2b0b2b",surfaceDarkLighter:"#3b123b",inputDark:"#4a154a"}},{id:"sunset-orange",name:"Sunset Orange",colors:{primary:"#ff9100",primaryHover:"#ff6d00",backgroundLight:"#fff3e0",backgroundDark:"#1a1005",surfaceDark:"#2b1a0b",surfaceDarkLighter:"#3b2512",inputDark:"#4a3015"}},{id:"teal-ocean",name:"Teal Ocean",colors:{primary:"#1de9b6",primaryHover:"#00bfa5",backgroundLight:"#e0f2f1",backgroundDark:"#001a18",surfaceDark:"#002b26",surfaceDarkLighter:"#003b34",inputDark:"#004a42"}},{id:"golden-hour",name:"Golden Hour",colors:{primary:"#ffc400",primaryHover:"#ffab00",backgroundLight:"#fff8e1",backgroundDark:"#1a1605",surfaceDark:"#2b240b",surfaceDarkLighter:"#3b3112",inputDark:"#4a3e15"}},{id:"pink-neon",name:"Pink Neon",colors:{primary:"#ff4081",primaryHover:"#f50057",backgroundLight:"#fce4ec",backgroundDark:"#1a050e",surfaceDark:"#2b0b18",surfaceDarkLighter:"#3b1222",inputDark:"#4a152a"}},{id:"monochrome",name:"Monochrome",colors:{primary:"#ffffff",primaryHover:"#e0e0e0",backgroundLight:"#f5f5f5",backgroundDark:"#000000",surfaceDark:"#121212",surfaceDarkLighter:"#1e1e1e",inputDark:"#2c2c2c"}},{id:"nature",name:"Nature",colors:{primary:"#76ff03",primaryHover:"#64dd17",backgroundLight:"#f1f8e9",backgroundDark:"#0f1a05",surfaceDark:"#182b0b",surfaceDarkLighter:"#223b12",inputDark:"#2a4a15"}},{id:"berry",name:"Berry",colors:{primary:"#f50057",primaryHover:"#c51162",backgroundLight:"#f8bbd0",backgroundDark:"#1a000a",surfaceDark:"#2b0011",surfaceDarkLighter:"#3b0017",inputDark:"#4a001e"}},{id:"slate",name:"Slate",colors:{primary:"#64b5f6",primaryHover:"#42a5f5",backgroundLight:"#e3f2fd",backgroundDark:"#0d1b26",surfaceDark:"#152b3b",surfaceDarkLighter:"#1e3a4f",inputDark:"#264a63"}},{id:"midnight",name:"Midnight",colors:{primary:"#536dfe",primaryHover:"#304ffe",backgroundLight:"#e8eaf6",backgroundDark:"#050a1a",surfaceDark:"#0b122b",surfaceDarkLighter:"#121b3b",inputDark:"#18244a"}},{id:"coffee",name:"Coffee",colors:{primary:"#d7ccc8",primaryHover:"#bcaaa4",backgroundLight:"#efebe9",backgroundDark:"#1a1412",surfaceDark:"#2b211e",surfaceDarkLighter:"#3b2e2a",inputDark:"#4a3b36"}},{id:"lavender",name:"Lavender",colors:{primary:"#ea80fc",primaryHover:"#e040fb",backgroundLight:"#f3e5f5",backgroundDark:"#1a0d1a",surfaceDark:"#2b152b",surfaceDarkLighter:"#3b1d3b",inputDark:"#4a254a"}}],Ii={applyTheme:n=>{const e=Uc.find(s=>s.id===n)||Uc[0],t=document.documentElement;t.style.setProperty("--color-primary",e.colors.primary),t.style.setProperty("--color-primary-hover",e.colors.primaryHover),t.style.setProperty("--color-background-light",e.colors.backgroundLight),t.style.setProperty("--color-background-dark",e.colors.backgroundDark),t.style.setProperty("--color-surface-dark",e.colors.surfaceDark),t.style.setProperty("--color-surface-dark-lighter",e.colors.surfaceDarkLighter),t.style.setProperty("--color-input-dark",e.colors.inputDark),localStorage.setItem("theme-preference",n)},getSavedThemeId:()=>localStorage.getItem("theme-preference")||"pulse-green",setDarkMode:n=>{const e=document.documentElement;n?(e.classList.add("dark"),localStorage.setItem("theme-mode","dark")):(e.classList.remove("dark"),localStorage.setItem("theme-mode","light"))},getSavedMode:()=>{const n=localStorage.getItem("theme-mode");return n?n==="dark":!0}},hP=({isOpen:n,onClose:e,userId:t})=>{const[s,o]=F.useState(""),l=`notes_${t}`,c=1e4;F.useEffect(()=>{if(n)try{const f=localStorage.getItem(l);o(f||"")}catch(f){console.error("Unable to read notes from local storage",f),o("")}},[n,t,l]),F.useEffect(()=>{const f=v=>{v.key==="Escape"&&e()};return n&&window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[n,e]);const p=f=>{let v=f.target.value;v.length>c&&(v=v.substring(0,c)),o(v);try{localStorage.setItem(l,v)}catch(E){console.error("Unable to save notes to local storage",E)}};return n?y.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:y.jsxs("div",{className:"bg-surface-dark rounded-lg shadow-2xl w-full max-w-md mx-4",role:"dialog","aria-modal":"true","aria-labelledby":"notes-modal-title",children:[y.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-white/10",children:[y.jsx("h2",{id:"notes-modal-title",className:"text-lg font-bold",children:"Notes"}),y.jsx("button",{onClick:e,"aria-label":"Close Notes",children:y.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),y.jsx("textarea",{value:s,onChange:p,maxLength:c,className:"w-full h-64 bg-input-dark p-4 text-white resize-none focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Jot down your notes here...",autoFocus:!0,"aria-labelledby":"notes-modal-title","aria-describedby":"notes-char-count"}),y.jsxs("div",{id:"notes-char-count",className:"px-4 pb-4 text-right text-xs text-gray-500",children:[s.length,"/",c]})]})}):null},fP=F.memo(({issue:n,repoId:e,isBusy:t,isAnalyzing:s,analysisResult:o,onFixed:l,onOpen:c,onBlock:p,onAnalyze:f,onAutoFix:v,autoFixAvailable:E})=>y.jsxs("article",{className:"relative flex flex-col gap-1.5 rounded-lg bg-white dark:bg-surface-dark-lighter/80 p-2 shadow-sm border border-gray-100 dark:border-white/10 animate-fade-in",children:[y.jsx("div",{className:"flex items-start justify-between gap-2.5",children:y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("span",{className:`font-bold text-xs tracking-tight flex items-center gap-1 uppercase ${n.priority==="critical"?"text-red-500":n.priority==="high"?"text-orange-500":"text-blue-400"}`,children:[y.jsx("span",{className:"material-symbols-outlined text-[14px] fill-1",children:n.priority==="critical"?"error":"flag"}),n.priority]}),y.jsxs("span",{className:"text-gray-500 dark:text-gray-500 text-[11px] font-medium",children:["#",n.number]})]}),y.jsx(Ta,{to:`/issue/${e}/${n.number}`,className:"text-base font-semibold text-slate-900 dark:text-white leading-snug hover:text-primary",children:n.title})]})}),y.jsx("div",{className:"bg-gray-50 dark:bg-black/30 rounded-lg p-1.5",children:y.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-200 line-clamp-3 font-mono leading-snug",children:n.description})}),o&&y.jsxs("div",{className:"bg-primary/10 border border-primary/25 rounded-lg p-2 animate-fade-in",children:[y.jsxs("div",{className:"flex items-center gap-1 mb-1 text-primary",children:[y.jsx("span",{className:"material-symbols-outlined text-[15px]",children:"smart_toy"}),y.jsx("span",{className:"text-[11px] font-bold uppercase",children:"Gemini Analysis"})]}),y.jsx("p",{className:"text-[11px] text-slate-800 dark:text-gray-100 whitespace-pre-wrap leading-relaxed",children:o})]}),y.jsxs("div",{className:"grid grid-cols-4 gap-1.5 mt-0.5",children:[y.jsxs("button",{disabled:t,onClick:()=>l(n.id,n.number),className:"col-span-1 flex flex-col items-center justify-center gap-1 h-9 rounded-lg bg-primary text-black font-semibold text-[11px] shadow-[0_2px_8px_rgba(19,236,37,0.25)] active:scale-95 transition-transform disabled:opacity-50",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check_circle"}),"Fixed"]}),y.jsxs("button",{disabled:t,onClick:()=>c(n.id,n.number),className:"col-span-1 flex flex-col items-center justify-center gap-1 h-9 rounded-lg bg-orange-500 text-white font-semibold text-[11px] shadow-[0_2px_8px_rgba(249,115,22,0.25)] active:scale-95 transition-transform disabled:opacity-50",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"warning"}),"Open"]}),y.jsxs("button",{disabled:t,onClick:()=>p(n),className:"col-span-1 flex flex-col items-center justify-center gap-1 h-9 rounded-lg bg-red-600 text-white font-semibold text-[11px] shadow-[0_2px_8px_rgba(220,38,38,0.25)] active:scale-95 transition-transform disabled:opacity-50",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"block"}),"Blocked"]}),y.jsxs("button",{onClick:()=>f(n),disabled:s,className:"col-span-1 flex flex-col items-center justify-center gap-1 h-9 rounded-lg bg-blue-600/10 dark:bg-blue-500/10 text-blue-600 dark:text-blue-300 border border-blue-600/20 dark:border-blue-500/25 font-semibold text-[11px] active:scale-95 transition-transform disabled:opacity-50",children:[s?y.jsx("span",{className:"size-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"analytics"}),"Analyze"]})]}),E&&v&&y.jsx("div",{className:"mt-2",children:y.jsxs("button",{onClick:()=>v(n),disabled:t,className:"w-full flex items-center justify-center gap-2 h-9 rounded-lg bg-purple-600 text-white font-semibold text-xs shadow-[0_2px_8px_rgba(147,51,234,0.3)] active:scale-95 transition-transform disabled:opacity-50 hover:bg-purple-700",children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"auto_fix_high"}),"Auto Fix & Publish"]})})]})),jp=n=>{const e=(n||[]).map(s=>(s??"").toString().trim()).filter(Boolean),t=Array.from(new Set(e));return t.sort((s,o)=>{const l=parseInt(s,10),c=parseInt(o,10);return Number.isNaN(l)&&Number.isNaN(c)?s.localeCompare(o):Number.isNaN(l)?1:Number.isNaN(c)?-1:l-c}),t},pP=n=>{const e=jp(n.checkedBuilds??(n.lastCheckedBuild?[n.lastCheckedBuild]:[])),t=e.length?e[e.length-1]:void 0;return{...n,checkedBuilds:e,lastCheckedBuild:t}},go=n=>(n??[]).map(pP),Nf=n=>jp(n.checkedBuilds??(n.lastCheckedBuild?[n.lastCheckedBuild]:[])),mP=n=>{const e=Nf(n);return e.length?e[e.length-1]:void 0},gP=n=>n.map(e=>({...e,apps:(e.apps||[]).map((t,s)=>({...t,id:t.id||`${e.id||e.name||"repo"}-app-${s}`,platform:t.platform||"android",buildNumber:(t.buildNumber??"1").toString().trim()||"1"})),tests:go(e.tests)})),Xh=n=>{if(!n)return null;const e=n.match(/(\d+)/);if(!e)return null;const t=parseInt(e[1],10);return Number.isNaN(t)?null:t},ld=(n,e)=>n.useCustomToken===!1?e?.globalGithubToken||n.githubToken||"":n.githubToken||e?.globalGithubToken||"",Mp=({onNotesClick:n})=>y.jsx("nav",{className:"fixed bottom-0 left-0 w-full bg-background-light/80 dark:bg-background-dark/90 backdrop-blur-lg border-t border-gray-200 dark:border-white/10 z-50 pb-safe",children:y.jsxs("div",{className:"flex items-center justify-around h-16 max-w-md mx-auto",children:[y.jsxs(Ta,{to:"/",className:"flex flex-col items-center justify-center w-16 h-full gap-1 text-primary group",children:[y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"grid_view"}),y.jsx("span",{className:"text-[10px] font-bold",children:"Projects"})]}),y.jsxs("button",{onClick:n,className:"flex flex-col items-center justify-center w-16 h-full gap-1 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors","aria-label":"Open Notes",children:[y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"description"}),y.jsx("span",{className:"text-[10px] font-medium",children:"Notes"})]}),y.jsxs(Ta,{to:"/config",className:"flex flex-col items-center justify-center w-16 h-full gap-1 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[y.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"settings"}),y.jsx("span",{className:"text-[10px] font-medium",children:"Config"})]})]})}),yP=()=>{const[n,e]=F.useState(!0),[t,s]=F.useState(""),[o,l]=F.useState(""),[c,p]=F.useState(""),[f,v]=F.useState(!1),E=async k=>{k.preventDefault(),p(""),v(!0);try{n?await ak(Ul,t,o):await ok(Ul,t,o)}catch(L){p(L.message.replace("Firebase: ",""))}finally{v(!1)}},T=async()=>{try{await Ai.signInWithGoogle()}catch(k){p(k.message)}};return y.jsx("div",{className:"min-h-screen bg-background-dark flex items-center justify-center p-6",children:y.jsxs("div",{className:"w-full max-w-sm space-y-8 animate-fade-in",children:[y.jsxs("div",{className:"text-center space-y-2",children:[y.jsx("div",{className:"inline-flex items-center justify-center size-16 rounded-2xl bg-primary/20 text-primary mb-4 shadow-[0_0_15px_var(--color-primary)]",children:y.jsx("span",{className:"material-symbols-outlined text-4xl",children:"monitor_heart"})}),y.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"QA Verify & Track"}),y.jsx("p",{className:"text-gray-400",children:"Sync your testing workflow across all devices."})]}),y.jsxs("div",{className:"bg-surface-dark p-6 rounded-2xl border border-white/5 space-y-6",children:[c&&y.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-400 text-sm rounded-lg",children:c}),y.jsxs("form",{onSubmit:E,className:"space-y-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:"email",className:"text-xs uppercase font-bold text-gray-500",children:"Email"}),y.jsx("input",{id:"email",value:t,onChange:k=>s(k.target.value),type:"email",required:!0,className:"w-full bg-input-dark border-transparent rounded-lg p-3 text-white focus:ring-primary focus:border-primary",placeholder:"qa@acme.inc"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:"password",className:"text-xs uppercase font-bold text-gray-500",children:"Password"}),y.jsx("input",{id:"password",value:o,onChange:k=>l(k.target.value),type:"password",required:!0,className:"w-full bg-input-dark border-transparent rounded-lg p-3 text-white focus:ring-primary focus:border-primary",placeholder:""})]}),y.jsx("button",{disabled:f,className:"w-full bg-primary text-black font-bold h-12 rounded-lg hover:bg-primary-hover transition-colors disabled:opacity-50",children:f?"Processing...":n?"Sign In":"Create Account"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-white/10"})}),y.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:y.jsx("span",{className:"bg-surface-dark px-2 text-gray-500",children:"Or continue with"})})]}),y.jsxs("button",{onClick:T,className:"w-full bg-white text-black font-bold h-12 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-center gap-2",children:[y.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"Google"}),"Google"]}),y.jsx("div",{className:"text-center",children:y.jsx("button",{onClick:()=>e(!n),className:"text-primary text-sm hover:underline",children:n?"Need an account? Sign up":"Already have an account? Sign in"})})]})]})})},vP=({repos:n,user:e,globalSettings:t,onNotesClick:s})=>{const[o,l]=F.useState({});return F.useEffect(()=>{let c=!0;const p=async()=>{const f={};await Promise.all(n.map(async v=>{const E=ld(v,t);if(E)try{const[T,k]=await Promise.all([Me.getOpenIssueCount(v.owner,v.name,E),Me.getOpenPullRequestCount(v.owner,v.name,E)]);f[v.id]={issues:T,prs:k}}catch(T){console.error(`Failed to fetch stats for ${v.owner}/${v.name}`,T)}})),c&&l(f)};return n.length>0?p():l({}),()=>{c=!1}},[n,t]),y.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col overflow-hidden pb-20",children:[y.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md p-4 pb-2 border-b border-gray-200 dark:border-white/5",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("button",{className:"relative group cursor-pointer rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background-light dark:focus-visible:ring-offset-background-dark",onClick:()=>dk(Ul),"aria-label":"Sign out",title:"Sign out",children:[y.jsx("img",{src:e.photoURL||`https://ui-avatars.com/api/?name=${e.email}`,className:"size-10 rounded-full border-2 border-transparent hover:border-primary transition-colors bg-surface-dark",alt:"Profile"}),y.jsx("div",{className:"absolute bottom-0 right-0 size-3 bg-primary rounded-full border-2 border-background-light dark:border-background-dark"})]}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-bold leading-tight tracking-tight",children:"My Projects"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium truncate max-w-[150px]",children:e.email})]})]}),y.jsx(Ta,{to:"/config","aria-label":"Add new repository",className:"flex items-center justify-center size-10 rounded-full bg-white/5 hover:bg-white/10 text-primary border border-primary/20 transition-all",children:y.jsx("span",{className:"material-symbols-outlined font-bold",children:"add_link"})})]}),y.jsx("main",{className:"flex-1 flex flex-col gap-5 p-4",children:n.length===0?y.jsxs("div",{className:"text-center py-20 opacity-60",children:[y.jsx("span",{className:"material-symbols-outlined text-6xl mb-4",children:"move_to_inbox"}),y.jsx("p",{className:"text-lg font-bold",children:"No Projects Found"}),y.jsx("p",{className:"text-sm",children:"Go to Config to add your first repo."})]}):n.map(c=>y.jsx("div",{className:"group flex flex-col gap-0 rounded-xl bg-white dark:bg-[#1a2e1c] shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-100 dark:border-white/5",children:y.jsxs("div",{className:"p-3 flex items-start justify-between",children:[y.jsxs("div",{className:"flex flex-col gap-0.5",children:[y.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"folder_open"}),y.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:c.apps[0]?.platform||"Generic"})]}),y.jsxs("h3",{className:"text-lg font-bold leading-tight group-hover:text-primary transition-colors",children:[c.displayName||c.name,y.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-2",children:["(",c.owner,"/",c.name,")"]})]}),y.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[y.jsx("span",{className:"relative flex h-2 w-2",children:y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-primary"})}),y.jsxs("p",{className:"text-primary text-xs font-bold",children:["Build #",c.apps[0]?.buildNumber]})]}),y.jsxs("div",{className:"flex items-center gap-3 text-[11px] text-gray-500 dark:text-gray-400 mt-1",children:[y.jsxs("span",{children:["Issues: ",y.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:o[c.id]?.issues??""})]}),y.jsxs("span",{children:["PRs: ",y.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:o[c.id]?.prs??""})]})]})]}),y.jsx(Ta,{to:`/dashboard?repo=${c.id}`,"aria-label":"View repository dashboard",className:"flex items-center justify-center size-10 rounded-full bg-gray-100 dark:bg-[#253827] text-primary",children:y.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})})]})},c.id))}),y.jsx(Mp,{onNotesClick:s})]})},_P=({repos:n,setRepos:e,user:t,globalSettings:s,setGlobalSettings:o})=>{const l=Mi(),[c]=Ff(),p=c.get("repo"),[f,v]=F.useState("list"),[E,T]=F.useState(null),[k,L]=F.useState(!1),[Q,H]=F.useState(""),[M,le]=F.useState(s||{}),[ee,ie]=F.useState({name:"",owner:"",displayName:"",githubToken:"",apps:[]}),[Te,Pe]=F.useState(Ii.getSavedThemeId()),[ge,P]=F.useState(Ii.getSavedMode()),I=K=>{Ii.applyTheme(K),Pe(K)},A=()=>{const K=!ge;Ii.setDarkMode(K),P(K)};F.useEffect(()=>{le(s||{})},[s]);const O=ee.useCustomToken!==!1,D=K=>{K?(T(K.id),ie({...K,useCustomToken:K.useCustomToken!==!1})):(T(null),ie({id:Date.now().toString(),name:"",owner:"",displayName:"",githubToken:"",useCustomToken:!0,apps:[{id:Date.now().toString(),name:"New App",platform:"android",buildNumber:"1"}],projects:[],templates:[]})),v("edit")};F.useEffect(()=>{if(!p||n.length===0||E===p&&f==="edit")return;const K=n.find(S=>S.id===p);K&&D(K)},[p,n,E,f]);const j=()=>{const K={id:Date.now().toString(),name:"",platform:"android",buildNumber:"1"};ie(S=>({...S,apps:[...S.apps||[],K]}))},C=(K,S,W)=>{const de=[...ee.apps||[]];de[K]={...de[K],[S]:W},ie(we=>({...we,apps:de}))},et=K=>{const S=[...ee.apps||[]];S.splice(K,1),ie(W=>({...W,apps:S}))},ft=async()=>{if(!ee.name||!ee.owner){H("Owner and repo name are required.");return}if(!/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/i.test(ee.owner)){H("Invalid owner name. Use only alphanumeric characters and single hyphens.");return}if(!/^[\w.-]+$/.test(ee.name)){H("Invalid repository name. Use only alphanumeric characters, underscores, hyphens, and periods.");return}if(ee.useCustomToken!==!1&&ee.githubToken&&/\s/.test(ee.githubToken)){H("Token must not contain whitespace.");return}H(""),L(!0);try{let W;E?W=n.map(de=>de.id===E?{...de,...ee}:de):W=[...n,{...ee,isConnected:!0}],e(W),await Ai.saveUserRepos(t.uid,W),v("list")}catch(W){console.error("Failed to save repository",W),H(W?.message||"Failed to save. Check your network or Firebase rules.")}finally{L(!1)}},Ct=async()=>{if(E){H(""),L(!0);try{const K=n.filter(S=>S.id!==E);e(K),await Ai.saveUserRepos(t.uid,K),v("list")}catch(K){console.error("Failed to delete repository",K),H(K?.message||"Failed to delete. Check your network or Firebase rules.")}finally{L(!1)}}},nt=()=>{H(""),L(!1),le(s||{}),v("global")},oe=async()=>{H(""),L(!0);try{const K={...M};o(K),await Ai.saveGlobalSettings(t.uid,K),v("list")}catch(K){console.error("Failed to save global settings",K),H(K?.message||"Failed to save global settings.")}finally{L(!1)}};return f==="list"?y.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-safe",children:[y.jsx("header",{className:"sticky top-0 z-20 flex items-center justify-between p-4 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-white/5",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>l(-1),"aria-label":"Go back",className:"p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10",children:y.jsx("span",{className:"material-symbols-outlined text-slate-900 dark:text-white",children:"arrow_back"})}),y.jsx("h1",{className:"text-lg font-bold",children:"Configuration"})]})}),y.jsxs("main",{className:"p-4 space-y-6",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsx("div",{className:"flex justify-between items-center",children:y.jsx("h2",{className:"text-xs uppercase text-gray-500 font-bold tracking-wider",children:"Appearance"})}),y.jsxs("div",{className:"p-4 bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-white/5 space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Dark Mode"}),y.jsx("button",{onClick:A,className:`w-12 h-6 rounded-full p-1 transition-colors ${ge?"bg-primary":"bg-gray-300"}`,children:y.jsx("div",{className:`w-4 h-4 bg-white rounded-full transition-transform ${ge?"translate-x-6":""}`})})]}),y.jsxs("div",{className:"space-y-2 qavt-theme-picker",children:[y.jsx("label",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"Theme Color"}),y.jsx("div",{className:"grid grid-cols-5 gap-3 qavt-theme-grid",children:Uc.map(K=>y.jsx("button",{onClick:()=>I(K.id),className:`qavt-theme-swatch w-full aspect-square rounded-lg border-2 ${Te===K.id?"border-slate-900 dark:border-white scale-110":"border-transparent"} transition-all shadow-sm`,style:{backgroundColor:K.colors.primary},title:K.name},K.id))}),y.jsx("p",{className:"text-center text-xs text-gray-500 mt-1",children:Uc.find(K=>K.id===Te)?.name})]})]})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-xs uppercase text-gray-500 font-bold tracking-wider",children:"Global GitHub"}),y.jsxs("button",{onClick:nt,className:"text-xs flex items-center gap-1 bg-black/5 dark:bg-white/5 px-2 py-1 rounded text-slate-900 dark:text-white hover:bg-black/10 dark:hover:bg-white/10",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"settings"}),"Edit"]})]}),y.jsxs("div",{className:"p-4 bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-white/5 space-y-2",children:[y.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"GitHub PAT"}),y.jsx("p",{className:"text-xs text-gray-500",children:s?.globalGithubToken?"Set (used when repo token is disabled)":"Not set"})]})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-xs uppercase text-gray-500 font-bold tracking-wider",children:"Repositories"}),y.jsxs("button",{onClick:()=>D(),className:"flex items-center gap-1 bg-primary text-black px-3 py-1.5 rounded-lg text-sm font-bold",children:[y.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})," New"]})]}),n.map(K=>y.jsxs("div",{onClick:()=>D(K),className:"p-4 bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-white/5 flex justify-between items-center cursor-pointer active:scale-[0.99] transition-transform",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:K.displayName||K.name}),y.jsxs("p",{className:"text-xs text-gray-500",children:[K.owner,"/",K.name]})]}),y.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"edit"})]},K.id))]})]})]}):f==="global"?y.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-safe",children:[y.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between p-4 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-white/5",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>v("list"),"aria-label":"Close global settings",className:"p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10",children:y.jsx("span",{className:"material-symbols-outlined text-slate-900 dark:text-white",children:"close"})}),y.jsx("h1",{className:"text-lg font-bold",children:"Global Settings"})]}),y.jsxs("button",{onClick:oe,disabled:k,className:"text-primary font-bold text-sm disabled:opacity-50 disabled:pointer-events-none flex items-center gap-2",children:[k&&y.jsx("span",{className:"size-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),k?"Saving...":"Save"]})]}),Q&&y.jsx("div",{className:"mx-4 mt-3 p-3 bg-red-500/10 border border-red-500/30 text-red-400 text-sm rounded-lg",children:Q}),y.jsx("main",{className:"p-4 space-y-6",children:y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-primary",children:"GitHub"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{htmlFor:"global-token",className:"text-xs text-gray-500",children:"Global GitHub Personal Access Token (PAT)"}),y.jsx("input",{id:"global-token",value:M.globalGithubToken||"",onChange:K=>le({...M,globalGithubToken:K.target.value}),type:"password",placeholder:"ghp_...",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"}),y.jsx("p",{className:"text-[10px] text-gray-500",children:"Used for repositories that disable per-repo tokens."})]})]})})]}):y.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-safe",children:[y.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between p-4 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-white/5",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>v("list"),"aria-label":"Close configuration",className:"p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10",children:y.jsx("span",{className:"material-symbols-outlined text-slate-900 dark:text-white",children:"close"})}),y.jsx("h1",{className:"text-lg font-bold",children:E?"Edit Repository":"Add Repository"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[E&&y.jsxs("button",{onClick:Ct,disabled:k,className:"text-red-500 font-bold text-sm disabled:opacity-50 disabled:pointer-events-none flex items-center gap-1 border border-red-500/40 rounded-md px-2 py-1",children:[y.jsx("span",{className:"material-symbols-outlined text-base",children:"delete"}),"Delete"]}),y.jsxs("button",{onClick:ft,disabled:k,className:"text-primary font-bold text-sm disabled:opacity-50 disabled:pointer-events-none flex items-center gap-2",children:[k&&y.jsx("span",{className:"size-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),k?"Saving...":"Save"]})]})]}),Q&&y.jsx("div",{className:"mx-4 mt-3 p-3 bg-red-500/10 border border-red-500/30 text-red-400 text-sm rounded-lg",children:Q}),y.jsxs("main",{className:"p-4 space-y-6",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-primary",children:"GitHub Details"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:"repo-display-name",className:"text-xs text-gray-500",children:"Display Name"}),y.jsx("input",{id:"repo-display-name",value:ee.displayName,onChange:K=>ie({...ee,displayName:K.target.value}),type:"text",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white",autoFocus:!0})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:"repo-owner",className:"text-xs text-gray-500",children:"Owner"}),y.jsx("input",{id:"repo-owner",value:ee.owner,onChange:K=>ie({...ee,owner:K.target.value}),type:"text",placeholder:"org",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:"repo-name",className:"text-xs text-gray-500",children:"Repo Name"}),y.jsx("input",{id:"repo-name",value:ee.name,onChange:K=>ie({...ee,name:K.target.value}),type:"text",placeholder:"repo",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("label",{className:"text-xs text-gray-500",children:"Use repo-specific PAT"}),y.jsx("button",{onClick:()=>ie({...ee,useCustomToken:!O}),className:`w-12 h-6 rounded-full p-1 transition-colors ${O?"bg-primary":"bg-gray-300"}`,type:"button",children:y.jsx("div",{className:`w-4 h-4 bg-white rounded-full transition-transform ${O?"translate-x-6":""}`})})]}),O?y.jsxs(y.Fragment,{children:[y.jsx("label",{htmlFor:"repo-token",className:"text-xs text-gray-500",children:"GitHub Personal Access Token (PAT)"}),y.jsx("input",{id:"repo-token",value:ee.githubToken||"",onChange:K=>ie({...ee,githubToken:K.target.value}),type:"password",placeholder:"ghp_...",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"}),y.jsx("p",{className:"text-[10px] text-gray-500",children:"Used for reading/writing to this repository."})]}):y.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-white/10 bg-white/60 dark:bg-input-dark px-3 py-2 text-xs text-gray-500",children:["Using global GitHub token. ",s?.globalGithubToken?"Global token is set.":"Global token is not set yet."]})]})]})]}),y.jsx("div",{className:"h-px bg-gray-200 dark:bg-white/5"}),y.jsxs("section",{className:"space-y-4",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-primary",children:"Apps & Builds"}),y.jsxs("button",{onClick:j,className:"text-xs flex items-center gap-1 bg-black/5 dark:bg-white/5 px-2 py-1 rounded text-slate-900 dark:text-white hover:bg-black/10 dark:hover:bg-white/10",children:[y.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})," Add App"]})]}),ee.apps?.map((K,S)=>y.jsxs("div",{className:"p-4 bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-white/5 space-y-3 relative group",children:[y.jsx("button",{onClick:()=>et(S),"aria-label":"Delete app",className:"absolute top-2 right-2 p-1 rounded hover:bg-red-500/10 text-gray-400 hover:text-red-500",children:y.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})}),y.jsxs("div",{className:"grid grid-cols-2 gap-3 pr-6",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:`app-name-${S}`,className:"text-[10px] uppercase text-gray-500",children:"App Name"}),y.jsx("input",{id:`app-name-${S}`,value:K.name,onChange:W=>C(S,"name",W.target.value),type:"text",className:"w-full bg-background-light dark:bg-background-dark border-transparent rounded px-2 py-1.5 text-sm text-slate-900 dark:text-white"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:`app-platform-${S}`,className:"text-[10px] uppercase text-gray-500",children:"Platform"}),y.jsxs("select",{id:`app-platform-${S}`,value:K.platform,onChange:W=>C(S,"platform",W.target.value),className:"w-full bg-background-light dark:bg-background-dark border-transparent rounded px-2 py-1.5 text-sm text-slate-900 dark:text-white",children:[y.jsx("option",{value:"android",children:"Android"}),y.jsx("option",{value:"ios",children:"iOS"}),y.jsx("option",{value:"web",children:"Web"})]})]})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:`app-url-${S}`,className:"text-[10px] uppercase text-gray-500",children:"Test URL (Play Store/TestFlight)"}),y.jsx("input",{id:`app-url-${S}`,value:K.playStoreUrl||"",onChange:W=>C(S,"playStoreUrl",W.target.value),type:"text",placeholder:"https://...",className:"w-full bg-background-light dark:bg-background-dark border-transparent rounded px-2 py-1.5 text-sm text-slate-900 dark:text-white"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:`app-build-${S}`,className:"text-[10px] uppercase text-gray-500",children:"Current Build #"}),y.jsx("input",{id:`app-build-${S}`,value:K.buildNumber,onChange:W=>C(S,"buildNumber",W.target.value),type:"text",className:"w-24 bg-background-light dark:bg-background-dark border-transparent rounded px-2 py-1.5 text-sm font-mono font-bold text-slate-900 dark:text-white"})]})]},S))]})]})]})},wP=({repos:n,user:e,globalSettings:t,onNotesClick:s})=>{const o=Mi(),[l]=Ff(),c=l.get("repo"),p=l.get("conflictPr"),f=n.find(R=>R.id===c)||n[0],[v,E]=F.useState(p?"prs":"issues"),[T,k]=F.useState(f?.apps[0]?.id||""),[L,Q]=F.useState(f?.apps[0]?.buildNumber||"0"),H=f?.apps.find(R=>R.id===T)||f?.apps[0],M=f?ld(f,t):"",[le,ee]=F.useState(()=>go(f?.tests)),[ie,Te]=F.useState(!1),[Pe,ge]=F.useState(""),[P,I]=F.useState(null);F.useEffect(()=>{f&&ee(go(f.tests))},[f]),F.useEffect(()=>{if(!p)return;const R=parseInt(p,10);Number.isNaN(R)||(I(R),E("prs"))},[p]),F.useEffect(()=>{if(!f?.apps?.length){k("");return}f.apps.some(R=>R.id===T)||k(f.apps[0].id)},[f?.id,f?.apps,T]),F.useEffect(()=>{H?.buildNumber&&Q(H.buildNumber)},[H?.id,H?.buildNumber]);const A=async(R,G)=>{if(!f)return;const X=G||H?.id;if(!X)return;const ue=f.apps.map(ve=>ve.id===X?{...ve,buildNumber:R}:ve),ae={...f,apps:ue,tests:go(le)},xe=n.map(ve=>ve.id===f.id?ae:ve);try{await Ai.saveUserRepos(e.uid,xe)}catch(ve){console.error("Failed to save build number",ve)}},O=async R=>{if(!f)return;const G=go(R),X={...f,tests:G},ue=n.map(ae=>ae.id===f.id?X:ae);try{await Ai.saveUserRepos(e.uid,ue)}catch(ae){console.error("Failed to save tests",ae)}},D=async()=>{Te(!0);try{const G=(await Zv.generateTests(f.name,f.displayName||f.name)).map(ue=>({id:Date.now().toString()+Math.random().toString().slice(2),description:ue,checkedBuilds:[]})),X=go([...le,...G]);ee(X),await O(X)}finally{Te(!1)}},j=async()=>{if(!Pe.trim())return;const R={id:Date.now().toString(),description:Pe,checkedBuilds:[]},G=go([...le,R]);ee(G),ge(""),await O(G)},C=R=>{k(R.id),E("tests"),R.buildNumber&&(Q(R.buildNumber),A(R.buildNumber,R.id))},et=async R=>{const G=(L||"").toString().trim();if(!G)return;const X=le.map(ue=>{if(ue.id!==R)return ue;const ae=new Set(Nf(ue));ae.has(G)?ae.delete(G):ae.add(G);const xe=jp(Array.from(ae));return{...ue,checkedBuilds:xe,lastCheckedBuild:xe.length?xe[xe.length-1]:void 0}});ee(X),await O(X)};F.useEffect(()=>{M&&Me.initialize(M)},[M]);const[ft,Ct]=F.useState([]),[nt,oe]=F.useState([]),[K,S]=F.useState({}),[W,de]=F.useState({}),[we,Ee]=F.useState([]),[Be,Le]=F.useState(!1),[Ge,je]=F.useState(null),[mt,zi]=F.useState(null),[Hs,Ws]=F.useState(new Set),[xt,Dn]=F.useState(new Set),[Rr,fn]=F.useState(!1),tn=we.filter(R=>xt.has(R.id)),as=we.length>0&&xt.size===we.length,gt=xt.size>0&&!as,lt=F.useRef(null),[He,ls]=F.useState(null),[Pr,$i]=F.useState([]),[Ye,Gs]=F.useState(null),[On,Yn]=F.useState(null),[Vn,Dt]=F.useState(!1),[mr,Ot]=F.useState(""),[pn,gr]=F.useState(new Set),[us,mn]=F.useState(!1),[cs,Ln]=F.useState([]),[jn,Mn]=F.useState([]),[xn,it]=F.useState(0),[Ks,Xn]=F.useState({}),[Fn,ds]=F.useState(new Set),[Vo,Tn]=F.useState(!1),[Qs,Nr]=F.useState(new Set),[Dr,Or]=F.useState({}),[qi,Un]=F.useState(""),[Bn,Vt]=F.useState(""),[In,Hi]=F.useState(new Set),[Wi,bn]=F.useState(""),[Ht,Vr]=F.useState(null),[Gi,Ys]=F.useState(""),[Ki,Lr]=F.useState(!1),[Xs,jr]=F.useState(""),hs=typeof window<"u"&&!!window.QAVT_AUTO_FIX?.issueCreated,Jn=Xr.useRef(new Set);F.useEffect(()=>{Jn.current=Qs},[Qs]),F.useEffect(()=>{f&&M&&rt(!1)},[f,M]);const rt=async(R=!1)=>{if(Le(!0),Un(""),!M){Un("Missing GitHub token. Configure a global or repo token."),Le(!1);return}if(R){const G=H?.buildNumber;G&&Q(G.toString())}try{const[G,X]=await Promise.all([Me.getIssues(f.owner,f.name,"open",!0),Me.getPullRequests(f.owner,f.name)]),ue=await Promise.all(X.map(async Je=>{try{const ut=await Me.getPullRequest(f.owner,f.name,Je.number),De=(ut.mergeable_state||"").toLowerCase(),vr=ut.mergeable===!1||De==="dirty"||De==="conflicting";return{...Je,hasConflicts:vr}}catch(ut){return console.warn("Failed to resolve conflict state for PR",Je.number,ut),Je}})),ae=/\b(open|closed|blocked|fixed)\b[^\d]*(?:build\s*)?v?\s*(\d+)\b/gi,xe=/\bverify\s*fix(?:es)?\b[^\d]*v?\s*(\d+)\b/gi,ve={},Se={};G.forEach(Je=>{if(!(Je.commentsCount<=0||!Je.comments))try{let ut=-1,De=-1;for(const vr of Je.comments){const ti=vr.text||"";let Ze;for(ae.lastIndex=0;(Ze=ae.exec(ti))!==null;){const Gt=parseInt(Ze[2],10);isNaN(Gt)||(ut=Math.max(ut,Gt))}let ot;for(xe.lastIndex=0;(ot=xe.exec(ti))!==null;){const Gt=parseInt(ot[1],10);isNaN(Gt)||(De=Math.max(De,Gt))}}ut>=0&&(ve[Je.id]=ut),De>=0&&(Se[Je.id]=De)}catch(ut){console.error("Failed to parse comments for issue",Je.number,ut)}}),oe(G),S(ve),de(Se),Ee(ue)}catch(G){console.error("Sync failed",G),Un("Failed to sync GitHub data. Check your token and network.")}finally{Le(!1)}};F.useEffect(()=>{const R=Xh(L);Ct(nt.filter(G=>{const X=W[G.id],ue=K[G.id];return R==null?X!=null||ue==null:X!=null&&X<=R?!0:ue==null}))},[L,nt,K,W]),F.useEffect(()=>{lt.current&&(lt.current.indeterminate=gt)},[gt]),F.useEffect(()=>{if(we.length===0){Dn(new Set);return}const R=new Set(we.map(G=>G.id));Dn(G=>new Set([...G].filter(ue=>R.has(ue))))},[we]);const fs=Xr.useCallback(R=>{Hi(G=>new Set(G).add(R))},[]),Zn=Xr.useCallback(R=>{Hi(G=>{const X=new Set(G);return X.delete(R),X})},[]),Qi=Xr.useCallback(async(R,G)=>{bn(""),fs(R);const X=(L||"").trim(),ue=X?`fixed v${X}`:"fixed";let ae=!1,xe=!1;try{try{await Me.addComment(f.owner,f.name,G,ue)}catch(ve){xe=!0,console.error("Failed to add fixed comment",ve)}await Me.updateIssueStatus(f.owner,f.name,G,"closed"),ae=!0}catch(ve){console.error("Failed to close issue",ve)}finally{ae?(oe(ve=>ve.filter(Se=>Se.id!==R)),S(ve=>{const Se={...ve};return delete Se[R],Se}),xe&&bn("Issue closed, but failed to add the build comment.")):bn("Failed to mark issue fixed. Check your token and try again."),Zn(R)}},[L,f.owner,f.name,fs,Zn]),ps=Xr.useCallback(async(R,G)=>{bn(""),fs(R);const X=(L||"").trim(),ue=X?`open v${X}`:"open";let ae=!1,xe=!1;try{try{await Me.addComment(f.owner,f.name,G,ue)}catch(ve){ae=!0,console.error("Failed to add open comment",ve)}await Me.updateIssueStatus(f.owner,f.name,G,"open"),xe=!0}catch(ve){console.error("Failed to mark issue open",ve)}finally{if(xe){const ve=Xh(L);ve!=null&&S(Se=>{const Je=Se[R]??-1;return{...Se,[R]:Math.max(Je,ve)}}),ae&&bn("Issue reopened, but failed to add the build comment.")}else bn("Failed to mark issue open. Check your token and try again.");Zn(R)}},[L,f.owner,f.name,fs,Zn]),Yi=Xr.useCallback(R=>{Vr(R),Ys(""),jr("")},[]),Js=async()=>{if(!Ht)return;const R=Ht.id;Lr(!0),jr(""),bn(""),fs(R);try{const G=(L||"").trim(),X=Gi.trim(),ue=G?`blocked v${G}`:"blocked",ae=X?`${ue} - ${X}`:ue;await Me.addComment(f.owner,f.name,Ht.number,ae);const xe=Xh(L);xe!=null&&S(ve=>{const Se=ve[R]??-1;return{...ve,[R]:Math.max(Se,xe)}}),Vr(null),Ys("")}catch(G){console.error("Failed to block issue",G),jr("Failed to mark issue blocked. Check your token and try again."),bn("Failed to mark issue blocked. Check your token and try again.")}finally{Lr(!1),Zn(R)}},ms=Xr.useCallback(async R=>{if(!Jn.current.has(R.id)){Nr(G=>new Set(G).add(R.id));try{const G=await Zv.analyzeIssue(R.title,R.description);Or(X=>({...X,[R.id]:G}))}finally{Nr(G=>{const X=new Set(G);return X.delete(R.id),X})}}},[]),gn=Xr.useCallback(R=>{if(!M){alert("GitHub token is required for Auto Fix.");return}if(typeof window>"u"||!window.QAVT_AUTO_FIX?.issueCreated){alert("Auto Fix plugin bridge not detected.");return}if(window.confirm(`Auto Fix issue #${R.number}? This will trigger AI agent and publish a new build.`))try{const X=new URLSearchParams({repoId:f.id,repoOwner:f.owner,repoName:f.name,issueNumber:R.number.toString(),title:R.title,description:R.description||"",buildNumber:L,githubToken:M}).toString();window.QAVT_AUTO_FIX.issueCreated(X)}catch(X){console.error("Failed to trigger auto fix",X),alert("Failed to trigger auto fix.")}},[f,M,L]),Lo=()=>{Dn(as?new Set:new Set(we.map(R=>R.id)))},yn=R=>{Dn(G=>{const X=new Set(G);return X.has(R)?X.delete(R):X.add(R),X})},Wt=()=>{Dn(new Set)},vn=async R=>{je(R.id),Vt("");try{R.isDraft&&await Me.markReadyForReview(f.owner,f.name,R.number),await Me.approvePR(f.owner,f.name,R.number),await Me.mergePR(f.owner,f.name,R.number),Ee(G=>G.filter(X=>X.id!==R.id))}catch(G){console.error("Merge sequence failed",G),Vt("Merge failed. Confirm repo access and PR state.")}finally{je(null)}},gs=async()=>{if(tn.length){fn(!0),Vt("");try{for(const R of tn)await vn(R)}finally{fn(!1),Wt()}}},er=async()=>{if(tn.length){fn(!0),Vt("");try{for(const R of tn)R.isDraft&&await Me.markReadyForReview(f.owner,f.name,R.number);Ee(R=>R.map(G=>xt.has(G.id)?{...G,isDraft:!1}:G))}catch(R){console.error("Bulk ready failed",R),Vt("Failed to mark some PRs ready. Check permissions and try again.")}finally{fn(!1),Wt()}}},Mr=async()=>{if(tn.length){fn(!0),Vt("");try{for(const R of tn)await Me.approvePR(f.owner,f.name,R.number),await Me.mergePR(f.owner,f.name,R.number);Ee(R=>R.filter(G=>!xt.has(G.id)))}catch(R){console.error("Bulk merge failed",R),Vt("Failed to merge some PRs. Confirm repo access and PR states.")}finally{fn(!1),Wt()}}},Ke=async()=>{if(tn.length){fn(!0),Vt("");try{for(const R of tn)await Me.denyPR(f.owner,f.name,R.number);Ee(R=>R.filter(G=>!xt.has(G.id)))}catch(R){console.error("Bulk close failed",R),Vt("Failed to close some PRs. Check your permissions.")}finally{fn(!1),Wt()}}},tr=async R=>{je(R.id),Vt(""),Ot(""),Dt(!0);try{const G=await Me.getPullRequest(f.owner,f.name,R.number),X=(G.mergeable_state||"").toLowerCase();if(!(G.mergeable===!1||X==="dirty"||X==="conflicting")){Ee(xe=>xe.map(ve=>ve.id===R.id?{...ve,hasConflicts:!1}:ve));return}const ae=await Me.getPullRequestFiles(f.owner,f.name,R.number);ls(R),$i(ae),ds(new Set(ae.map(xe=>xe.filename))),Xn({}),Tn(!1),yr(ae[0]||null),gr(new Set)}catch(G){console.error("Resolve failed",G),Ws(X=>new Set(X).add(R.id)),Vt("Resolve failed. Check permissions or try manually in GitHub.")}finally{Dt(!1),je(null)}};F.useEffect(()=>{if(!P||Be||!f)return;const R=we.find(G=>G.number===P);if(R){I(null),tr(R);return}we.length>0&&(Vt(`PR #${P} not found in list.`),I(null))},[P,we,Be,f?.id]);const Fr=()=>{ls(null),$i([]),Gs(null),Yn(null),gr(new Set),Ln([]),Mn([]),it(0),Xn({}),ds(new Set),Tn(!1),Ot(""),Dt(!1),mn(!1)},ys=(R,G)=>{const X=R.length?R.split(`
`):[],ue=G.length?G.split(`
`):[];if(X.length*ue.length>2e6)return{segments:[{type:"conflict",baseLines:X,headLines:ue}],conflictIndices:[0]};const xe=Array.from({length:X.length+1},()=>new Array(ue.length+1).fill(0));for(let Ze=X.length-1;Ze>=0;Ze-=1)for(let ot=ue.length-1;ot>=0;ot-=1)X[Ze]===ue[ot]?xe[Ze][ot]=xe[Ze+1][ot+1]+1:xe[Ze][ot]=Math.max(xe[Ze+1][ot],xe[Ze][ot+1]);const ve=[];let Se=0,Je=0;for(;Se<X.length&&Je<ue.length;)X[Se]===ue[Je]?(ve.push({type:"equal",line:X[Se]}),Se+=1,Je+=1):xe[Se+1][Je]>=xe[Se][Je+1]?(ve.push({type:"delete",line:X[Se]}),Se+=1):(ve.push({type:"insert",line:ue[Je]}),Je+=1);for(;Se<X.length;)ve.push({type:"delete",line:X[Se]}),Se+=1;for(;Je<ue.length;)ve.push({type:"insert",line:ue[Je]}),Je+=1;const ut=[];let De=null;const vr=()=>{De&&(ut.push({type:"conflict",baseLines:De.baseLines,headLines:De.headLines}),De=null)};for(const Ze of ve)if(Ze.type==="equal"){vr();const ot=ut[ut.length-1];ot&&ot.type==="equal"?ot.lines.push(Ze.line):ut.push({type:"equal",lines:[Ze.line]})}else De||(De={baseLines:[],headLines:[]}),Ze.type==="delete"?De.baseLines.push(Ze.line):De.headLines.push(Ze.line);vr();const ti=ut.reduce((Ze,ot,Gt)=>(ot.type==="conflict"&&Ze.push(Gt),Ze),[]);return{segments:ut,conflictIndices:ti}},Xi=(R,G)=>{const X=[];for(const ae of R)ae.type==="equal"?X.push(...ae.lines):ae.resolution==="incoming"?X.push(...ae.headLines):ae.resolution==="both"?X.push(...ae.baseLines,...ae.headLines):X.push(...ae.baseLines);let ue=X.join(`
`);return G&&ue.length>0&&(ue+=`
`),ue},yr=R=>{Gs(R),Yn(null),Ln([]),Mn([]),it(0),Ot("")},vs=(R,G,X)=>{const ue=Pr.filter(xe=>X.has(xe.filename));if(!ue.length)return null;const ae=R?ue.findIndex(xe=>xe.filename===R):-1;for(let xe=1;xe<=ue.length;xe+=1){const ve=(ae+xe)%ue.length,Se=ue[ve];if(!G.has(Se.filename))return Se}return null},_s=R=>{ds(G=>{const X=new Set(G);if(X.has(R)?X.delete(R):X.add(R),Ye?.filename===R&&!X.has(R)){const ue=vs(R,pn,X);yr(ue)}return X})};F.useEffect(()=>{if(!He||!Ye)return;(async()=>{Dt(!0),Ot("");try{const[G,X]=await Promise.all([Me.getFileContent(f.owner,f.name,Ye.filename,He.targetBranch),Me.getFileContent(f.owner,f.name,Ye.filename,He.branch)]),ue=G.content,ae=X.content;Yn({base:ue,head:ae,headSha:X.sha});const{segments:xe,conflictIndices:ve}=ys(ue,ae);if(Ln(xe),Mn(ve),it(0),Xn(Se=>({...Se,[Ye.filename]:ve.length})),ve.length===0){const Se=new Set(pn);Se.add(Ye.filename),gr(Se);const Je=vs(Ye.filename,Se,Fn);yr(Je);return}}catch(G){console.error("Failed to load conflict file",G),Ot("Unable to load file contents for resolution.")}finally{Dt(!1)}})()},[He?.id,Ye?.filename]);const Ji=async R=>{if(!He||!Ye||!On)return;const G=jn[xn];if(G===void 0)return;const X=cs.map((ae,xe)=>xe!==G||ae.type!=="conflict"?ae:{...ae,resolution:R});if(Ln(X),!(xn>=jn.length-1)){it(ae=>ae+1);return}mn(!0),Ot("");try{const ae=Xi(X,On.base.endsWith(`
`));await Me.updateFileContent(f.owner,f.name,Ye.filename,He.branch,ae,On.headSha,`Resolve conflict for ${Ye.filename}`);const xe=new Set(pn);xe.add(Ye.filename),gr(xe),await ws();const ve=vs(Ye.filename,xe,Fn);yr(ve)}catch(ae){console.error("Failed to resolve conflict file",ae),Ot("Failed to update file. Try again or resolve in GitHub.")}finally{mn(!1)}},ws=async()=>{if(He){Dt(!0),Ot("");try{const R=await Me.getPullRequest(f.owner,f.name,He.number),G=(R.mergeable_state||"").toLowerCase(),X=R.mergeable===!1||G==="dirty"||G==="conflicting";Ee(ue=>ue.map(ae=>ae.id===He.id?{...ae,hasConflicts:X}:ae)),Tn(!X),ls(ue=>ue&&{...ue,hasConflicts:X}),X||Ws(ue=>{const ae=new Set(ue);return ae.delete(He.id),ae})}catch(R){console.error("Failed to refresh conflict status",R),Ot("Unable to refresh merge status. Try again.")}finally{Dt(!1)}}},Fe=async()=>{if(He){Dt(!0),Ot("");try{if(!await Me.updateBranch(f.owner,f.name,He.number)){Ot("Auto-resolve failed. Resolve conflicts manually or choose file-level options.");return}await ws()}catch(R){console.error("Auto-resolve failed",R),Ot("Auto-resolve failed. Try again or resolve manually.")}finally{Dt(!1)}}},nr=async()=>{if(He){Dt(!0),Ot("");try{He.isDraft&&await Me.markReadyForReview(f.owner,f.name,He.number),await Me.approvePR(f.owner,f.name,He.number),await Me.mergePR(f.owner,f.name,He.number),Ee(R=>R.filter(G=>G.id!==He.id)),Fr()}catch(R){console.error("Merge after conflict resolution failed",R),Ot("Merge failed. Confirm review status and try again.")}finally{Dt(!1)}}},Es=Pr.filter(R=>Fn.has(R.filename)),Ur=Es.filter(R=>!pn.has(R.filename)),Zs=jn[xn],nn=Zs!==void 0?cs[Zs]:null,xs=Ye?Ks[Ye.filename]??jn.length:0,rr=Es.length>0&&Ur.length===0||Vo,ei=async R=>{Ee(G=>G.filter(X=>X.id!==R.id)),zi({id:R.id,pr:R}),await Me.denyPR(f.owner,f.name,R.number),setTimeout(()=>zi(null),5e3)},sr=async()=>{mt&&(Ee(R=>[...R,mt.pr]),zi(null),await Me.updateIssueStatus(f.owner,f.name,mt.pr.number,"open"))};return f?M?y.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col overflow-x-hidden pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-20 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-white/5 px-4 py-3 flex items-center gap-3",children:[y.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[y.jsx("button",{onClick:()=>o("/"),"aria-label":"Go back to home",className:"p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-slate-900 dark:text-white",children:"arrow_back"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-bold leading-none tracking-tight",children:"QA Dashboard"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:f?.displayName||f?.name})]})]}),y.jsx("div",{className:"flex-1 min-w-0 flex items-center justify-end",children:y.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto py-1",children:[y.jsxs("a",{href:f?`https://github.com/${f.owner}/${f.name}/projects`:"#",target:"_blank",rel:"noopener noreferrer",className:"shrink-0 inline-flex items-center gap-1 rounded-lg border border-gray-200 dark:border-white/10 bg-white/70 dark:bg-[#253827] px-2.5 py-1.5 text-[10px] sm:text-[11px] font-bold text-gray-700 dark:text-gray-200 hover:text-primary transition-colors whitespace-nowrap",children:[y.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"dashboard"}),"Projects"]}),y.jsxs("div",{className:"shrink-0 flex items-center bg-gray-200 dark:bg-surface-dark-lighter rounded-lg p-0.5 border border-transparent dark:border-white/10 whitespace-nowrap",children:[y.jsx("button",{onClick:()=>E("issues"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${v==="issues"?"bg-primary text-black shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white"}`,children:"Issues"}),y.jsx("button",{onClick:()=>E("prs"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${v==="prs"?"bg-primary text-black shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white"}`,children:"PRs"}),y.jsx("button",{onClick:()=>E("tests"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${v==="tests"?"bg-primary text-black shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white"}`,children:"Tests"})]})]})})]}),y.jsxs("section",{className:"px-4 py-3 space-y-3",children:[y.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-end",children:[y.jsxs("div",{className:"flex-1 space-y-1.5",children:[y.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-[#9db99f] uppercase tracking-wider",children:"Target Build"}),y.jsxs("div",{className:"relative flex items-center gap-2",children:[y.jsx("span",{className:"absolute left-3 material-symbols-outlined text-gray-400 text-[20px]",children:"tag"}),y.jsx("input",{className:"w-full bg-white dark:bg-[#1c2e1f] border-gray-200 dark:border-white/5 rounded-lg py-3 pl-10 pr-3 font-mono font-bold text-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-slate-900 dark:text-white",type:"text",value:L,onChange:R=>{const G=R.target.value;Q(G),A(G)}}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:()=>rt(!1),"aria-label":"Sync with GitHub",className:"bg-white dark:bg-[#253827] border border-gray-200 dark:border-white/5 rounded-lg px-3 py-3 hover:text-primary transition-colors flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined",children:"sync"}),y.jsx("span",{className:"text-xs font-bold hidden sm:inline",children:"Sync"})]}),y.jsxs("button",{onClick:()=>rt(!0),"aria-label":"Sync with Store",className:"bg-white dark:bg-[#253827] border border-gray-200 dark:border-white/5 rounded-lg px-3 py-3 hover:text-primary transition-colors flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined",children:"system_update_alt"}),y.jsx("span",{className:"text-xs font-bold hidden sm:inline",children:"Store"})]})]})]})]}),y.jsxs("div",{className:"flex-1 space-y-1.5",children:[y.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-[#9db99f] uppercase tracking-wider",children:"App Variant"}),y.jsx("select",{value:H?.id||"",onChange:R=>k(R.target.value),className:"w-full bg-white dark:bg-[#1c2e1f] border-gray-200 dark:border-white/5 rounded-lg h-[54px] px-3 font-medium text-sm text-slate-900 dark:text-white focus:ring-primary focus:border-primary",children:f?.apps.map(R=>y.jsxs("option",{value:R.id,children:[R.name," (",R.platform,")"]},R.id))})]})]}),y.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-white/10 bg-white dark:bg-surface-dark-lighter/80 p-3 shadow-sm",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Test Builds"}),y.jsx("p",{className:"text-[11px] text-gray-400",children:"Jump to tests by build and platform."})]}),y.jsx("button",{onClick:()=>E("tests"),className:"rounded-lg border border-gray-200 dark:border-white/10 bg-white/70 dark:bg-[#253827] px-2.5 py-1.5 text-[10px] font-bold text-gray-700 dark:text-gray-200 hover:text-primary transition-colors",children:"Open Tests"})]}),y.jsx("div",{className:"mt-3 space-y-2",children:f?.apps.map(R=>y.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-gray-100 dark:border-white/5 bg-white/80 dark:bg-black/20 p-2 sm:flex-row sm:items-center sm:justify-between",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[R.name," ",y.jsxs("span",{className:"text-[11px] text-gray-500",children:["(",R.platform,")"]})]}),y.jsxs("p",{className:"text-[11px] text-gray-500",children:["Build #",R.buildNumber||""]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>C(R),className:"rounded-lg border border-gray-200 dark:border-white/10 px-3 py-1.5 text-[11px] font-semibold text-gray-700 dark:text-gray-200 hover:text-primary transition-colors",children:"View Tests"}),R.playStoreUrl?y.jsx("a",{href:R.playStoreUrl,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg bg-primary/10 px-3 py-1.5 text-[11px] font-semibold text-primary hover:bg-primary/20",children:"Open Test"}):y.jsx("span",{className:"text-[10px] uppercase tracking-wide text-gray-400",children:"No test url"})]})]},R.id))})]})]}),y.jsx("div",{className:"h-px w-full bg-gray-200 dark:bg-white/5 mb-4"}),y.jsxs("main",{className:"flex-1 px-4 space-y-3",children:[mt&&y.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-3 rounded-lg animate-slide-in-right shadow-xl",children:[y.jsxs("span",{className:"text-sm",children:["PR #",mt.pr.number," closed."]}),y.jsx("button",{onClick:sr,className:"text-primary font-bold text-sm uppercase tracking-wider",children:"Undo"})]}),Be&&y.jsx("div",{className:"text-center py-10",children:y.jsx("div",{className:"inline-block size-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}),!Be&&v==="issues"&&y.jsxs(y.Fragment,{children:[qi&&y.jsx("div",{className:"mb-2 rounded-lg border border-red-500/30 bg-red-500/10 text-red-200 text-xs px-3 py-2",children:qi}),Wi&&y.jsx("div",{className:"mb-2 rounded-lg border border-amber-500/30 bg-amber-500/10 text-amber-200 text-xs px-3 py-2",children:Wi}),y.jsxs("div",{className:"flex justify-between items-center pb-1",children:[y.jsx("h2",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Pending Verification"}),y.jsxs("span",{className:"text-[11px] text-gray-400",children:[ft.length," remaining"]})]}),ft.length===0?y.jsxs("div",{className:"text-center py-10 opacity-50",children:[y.jsx("span",{className:"material-symbols-outlined text-6xl text-gray-600",children:"check_circle"}),y.jsxs("p",{className:"mt-4 text-gray-400",children:["All cleared for build ",L,"!"]})]}):ft.map(R=>y.jsx(fP,{issue:R,repoId:f.id,isBusy:In.has(R.id),isAnalyzing:Qs.has(R.id),analysisResult:Dr[R.id],onFixed:Qi,onOpen:ps,onBlock:Yi,onAnalyze:ms,onAutoFix:gn,autoFixAvailable:hs},R.id))]}),!Be&&v==="prs"&&y.jsxs("div",{className:"space-y-3",children:[Bn&&y.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 text-red-200 text-xs px-3 py-2",children:Bn}),we.length>0&&y.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-200 dark:border-white/10 bg-white dark:bg-surface-dark-lighter/80 p-3 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("input",{ref:lt,type:"checkbox",className:"size-4 accent-primary",checked:as,onChange:Lo}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Select all PRs"}),y.jsx("p",{className:"text-[11px] text-gray-500",children:xt.size>0?`${xt.size} of ${we.length} selected`:`${we.length} total`})]})]}),y.jsx("button",{onClick:Wt,disabled:xt.size===0,className:"text-xs font-bold uppercase tracking-wider text-gray-500 disabled:opacity-40 hover:text-primary",children:"Clear"})]}),we.map(R=>{const G=Ge===R.id,X=Hs.has(R.id);return y.jsxs("div",{className:"group relative bg-white dark:bg-[#1A1616] rounded-xl p-3 border border-gray-200 dark:border-white/10 shadow-sm transition-all animate-fade-in",children:[y.jsxs("div",{className:"flex items-start gap-3 mb-1.5",children:[y.jsx("input",{type:"checkbox",className:"mt-1 size-4 accent-primary",checked:xt.has(R.id),onChange:()=>yn(R.id)}),y.jsx("div",{className:"flex-1",children:y.jsx("div",{className:"flex justify-between items-start",children:y.jsxs("div",{className:"pr-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[R.isDraft&&y.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Draft"}),R.hasConflicts&&y.jsxs("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-red-500/10 text-red-500 uppercase tracking-wide flex items-center gap-1",children:[y.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"warning"}),"Conflict"]})]}),y.jsx("h3",{className:"text-slate-900 dark:text-white font-bold text-sm leading-tight",children:R.title}),y.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["#",R.number," - ",R.author.name]})]})})})]}),y.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-3 font-mono bg-gray-50 dark:bg-white/5 p-1.5 rounded-lg border border-gray-200 dark:border-white/5",children:[y.jsx("span",{className:"text-slate-700 dark:text-gray-300",children:R.branch}),y.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"arrow_forward"}),y.jsx("span",{className:"text-slate-700 dark:text-gray-300",children:R.targetBranch})]}),y.jsxs("div",{className:"flex gap-2",children:[R.hasConflicts?y.jsxs(y.Fragment,{children:[y.jsx("button",{disabled:G,onClick:()=>tr(R),className:"flex-1 bg-amber-600/20 text-amber-700 dark:text-amber-500 border border-amber-600/30 font-semibold text-xs py-2 rounded-lg flex items-center justify-center gap-1.5 active:scale-[0.98] disabled:opacity-50",children:G?"Loading...":y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"build"}),"Resolve Conflicts"]})}),X&&y.jsxs("a",{href:`https://github.com/${f.owner}/${f.name}/pull/${R.number}/conflicts`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-amber-600/10 text-amber-700 dark:text-amber-400 border border-amber-600/20 font-semibold text-xs py-2 rounded-lg flex items-center justify-center gap-1.5 active:scale-[0.98] hover:bg-amber-600/20",children:[y.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"open_in_new"}),"Open in GitHub"]})]}):y.jsx("button",{disabled:G,onClick:()=>vn(R),className:`flex-1 font-bold text-xs py-2 rounded-lg flex items-center justify-center gap-1.5 active:scale-[0.98] disabled:opacity-50 transition-colors ${R.isDraft?"bg-blue-600 text-white hover:bg-blue-700":"bg-primary text-black hover:bg-primary-hover"}`,children:G?"Processing...":y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"material-symbols-outlined text-[18px]",children:R.isDraft?"rocket_launch":"merge"}),R.isDraft?"Ready & Merge":"Merge"]})}),y.jsx("button",{disabled:G,onClick:()=>ei(R),"aria-label":"Close pull request",className:"px-4 bg-red-500/10 text-red-600 dark:text-red-500 border border-red-500/20 rounded-lg flex items-center justify-center active:scale-[0.98] hover:bg-red-500/20",children:y.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]})]},R.id)})]}),v==="tests"&&y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("div",{className:"bg-white dark:bg-surface-dark-lighter rounded-xl p-3 border border-gray-200 dark:border-white/5 space-y-3",children:[y.jsx("h3",{className:"font-bold text-sm text-slate-900 dark:text-white uppercase tracking-wider",children:"Add Manual Test"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",value:Pe,onChange:R=>ge(R.target.value),onKeyDown:R=>R.key==="Enter"&&j(),placeholder:"e.g. Verify login with invalid credentials",className:"flex-1 bg-background-light dark:bg-background-dark border-transparent rounded-lg px-3 py-2 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"}),y.jsx("button",{onClick:j,disabled:!Pe.trim(),className:"bg-black/5 dark:bg-white/10 hover:bg-black/10 dark:hover:bg-white/20 text-slate-900 dark:text-white px-4 rounded-lg font-bold text-sm disabled:opacity-50",children:"Add"})]})]}),y.jsxs("button",{onClick:D,disabled:ie,className:"w-full bg-primary/10 hover:bg-primary/20 text-primary border border-primary/20 rounded-xl p-3 flex items-center justify-center gap-2 font-bold text-sm transition-colors disabled:opacity-50",children:[ie?y.jsx("span",{className:"size-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):y.jsx("span",{className:"material-symbols-outlined text-lg",children:"smart_toy"}),"Generate AI Test Plan"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center pb-1",children:[y.jsx("h2",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Verification Checklist"}),y.jsxs("span",{className:"text-[11px] text-gray-400",children:["Build #",L]})]}),le.length===0?y.jsxs("div",{className:"text-center py-10 opacity-50",children:[y.jsx("span",{className:"material-symbols-outlined text-5xl mb-2",children:"playlist_add_check"}),y.jsx("p",{className:"text-sm font-medium",children:"No tests defined yet."})]}):le.map(R=>{const G=(L||"").toString().trim(),X=Nf(R),ue=G?X.includes(G):!1,ae=mP(R);return y.jsxs("div",{onClick:()=>et(R.id),className:`group cursor-pointer flex items-start gap-2 p-2 rounded-xl border transition-all ${ue?"bg-primary/5 border-primary/20":"bg-white dark:bg-surface-dark-lighter border-gray-200 dark:border-white/5 hover:border-primary/30"}`,children:[y.jsx("div",{className:`mt-0.5 flex-shrink-0 size-5 rounded border flex items-center justify-center transition-colors ${ue?"bg-primary border-primary text-black":"bg-transparent border-gray-400 dark:border-gray-500 group-hover:border-primary"}`,children:ue&&y.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"check"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:`text-sm ${ue?"text-gray-500 line-through":"text-slate-900 dark:text-white"}`,children:R.description}),ae&&!ue&&y.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:["Last checked on build #",ae]})]})]},R.id)})]})]})]}),v==="prs"&&xt.size>0&&y.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-40 px-4",children:y.jsxs("div",{className:"mx-auto max-w-md rounded-2xl border border-white/10 bg-surface-dark/95 p-3 text-white shadow-2xl backdrop-blur-md",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("span",{className:"text-sm font-semibold",children:[xt.size," selected"]}),y.jsx("button",{onClick:Wt,className:"text-[11px] font-bold uppercase tracking-wider text-gray-300 hover:text-primary",children:"Clear"})]}),y.jsxs("div",{className:"mt-2 flex items-center gap-2 overflow-x-auto",children:[y.jsx("button",{onClick:gs,disabled:Rr,className:"whitespace-nowrap rounded-lg bg-primary px-3 py-2 text-xs font-bold text-black disabled:opacity-50",children:Rr?"Working...":"Ready + Merge"}),y.jsx("button",{onClick:er,disabled:Rr,className:"whitespace-nowrap rounded-lg border border-white/15 px-3 py-2 text-xs font-semibold text-gray-200 disabled:opacity-50",children:"Ready"}),y.jsx("button",{onClick:Mr,disabled:Rr,className:"whitespace-nowrap rounded-lg border border-white/15 px-3 py-2 text-xs font-semibold text-gray-200 disabled:opacity-50",children:"Merge"}),y.jsx("button",{onClick:Ke,disabled:Rr,className:"whitespace-nowrap rounded-lg border border-red-500/40 px-3 py-2 text-xs font-semibold text-red-300 disabled:opacity-50",children:"Close"})]})]})}),y.jsx(Ta,{to:`/quick-issue?repo=${f?.id}&build=${encodeURIComponent(L)}`,"aria-label":"Create new issue",className:"fixed bottom-24 right-4 z-30 flex h-14 w-14 items-center justify-center rounded-full bg-primary text-black shadow-[0_4px_16px_rgba(19,236,37,0.4)] active:scale-90 transition-transform hover:scale-105",children:y.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})}),y.jsx(Mp,{onNotesClick:s}),Ht&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:y.jsxs("div",{className:"w-full max-w-md rounded-xl border border-white/10 bg-surface-dark p-5 text-white shadow-2xl",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("h3",{className:"text-lg font-bold",children:["Block Issue #",Ht.number]}),y.jsx("button",{onClick:()=>Vr(null),"aria-label":"Close block dialog",className:"rounded-full p-1 hover:bg-white/10",children:y.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),y.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Optional reason (saved to the issue as a comment)."}),y.jsx("textarea",{value:Gi,onChange:R=>Ys(R.target.value),className:"mt-3 w-full min-h-[120px] rounded-lg bg-input-dark p-3 text-sm text-white",placeholder:"e.g. Waiting on backend fix / missing access"}),Xs&&y.jsx("div",{className:"mt-3 rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:Xs}),y.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[y.jsx("button",{onClick:()=>Vr(null),className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-gray-200 hover:bg-white/10",children:"Cancel"}),y.jsx("button",{onClick:Js,disabled:Ki,className:"rounded-lg bg-red-600 px-3 py-2 text-xs font-semibold text-white disabled:opacity-50",children:Ki?"Blocking...":"Mark Blocked"})]})]})}),He&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:y.jsxs("div",{className:"flex h-[85vh] w-full max-w-5xl flex-col rounded-2xl border border-white/10 bg-surface-dark text-white shadow-2xl",children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 px-5 py-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold",children:"Resolve Conflicts"}),y.jsxs("p",{className:"text-xs text-gray-400",children:["PR #",He.number," - ",He.title]}),y.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-amber-400",children:"Conflicts detected"})]}),y.jsx("button",{onClick:Fr,"aria-label":"Close conflict resolver",className:"rounded-full p-1 hover:bg-white/10",children:y.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),y.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[y.jsxs("div",{className:"w-72 border-r border-white/10 overflow-y-auto",children:[y.jsxs("div",{className:"border-b border-white/5 px-4 py-3",children:[y.jsx("p",{className:"text-xs font-semibold text-gray-300",children:"Changed files"}),y.jsxs("p",{className:"text-[11px] text-gray-500",children:[Es.length," selected - ",pn.size," resolved"]})]}),Pr.length===0&&y.jsx("div",{className:"p-4 text-xs text-gray-400",children:"No changed files found."}),Pr.map(R=>{const G=Ye?.filename===R.filename,X=pn.has(R.filename),ue=Fn.has(R.filename),ae=Ks[R.filename],xe=ae===void 0?!0:ae>0,ve=ae===void 0?"Checking...":ae===0?"No conflicts":`${ae} conflict${ae===1?"":"s"}`;return y.jsxs("button",{onClick:()=>{ue||ds(Se=>new Set(Se).add(R.filename)),yr(R)},className:`w-full px-4 py-3 text-left text-xs border-b border-white/5 transition-colors ${G?"bg-white/10":"hover:bg-white/5"} ${ue?"":"opacity-50"}`,children:[y.jsxs("div",{className:"flex items-start justify-between gap-2",children:[y.jsxs("div",{className:"flex items-start gap-2",children:[y.jsx("input",{type:"checkbox",checked:ue,onChange:()=>_s(R.filename),onClick:Se=>Se.stopPropagation(),className:"mt-0.5 size-3 accent-amber-500"}),y.jsx("span",{className:`line-clamp-2 ${G?"text-white":xe?"text-amber-200":"text-gray-300"}`,children:R.filename})]}),X&&y.jsx("span",{className:"rounded-full bg-primary/20 px-2 py-0.5 text-[10px] font-bold text-primary",children:"Resolved"})]}),y.jsxs("div",{className:"mt-1 flex items-center justify-between text-[10px] uppercase",children:[y.jsx("span",{className:"text-gray-500",children:R.status}),y.jsx("span",{className:xe?"text-amber-400":"text-gray-500",children:ve})]})]},R.filename)})]}),y.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[y.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-xs text-gray-400",children:Ye?Ye.filename:"Select a file to resolve"}),Ye&&xs>0&&y.jsxs("div",{className:"text-[11px] font-semibold text-amber-400",children:["Conflict ",Math.min(xn+1,xs)," of ",xs]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>Ji("current"),disabled:!nn||us,className:"rounded-lg border border-white/10 px-3 py-1.5 text-[11px] font-semibold text-gray-200 disabled:opacity-40",children:"Accept Current"}),y.jsx("button",{onClick:()=>Ji("incoming"),disabled:!nn||us,className:"rounded-lg border border-white/10 px-3 py-1.5 text-[11px] font-semibold text-gray-200 disabled:opacity-40",children:"Accept Incoming"}),y.jsx("button",{onClick:()=>Ji("both"),disabled:!nn||us,className:"rounded-lg bg-amber-400 px-3 py-1.5 text-[11px] font-bold text-black disabled:opacity-40",children:"Accept Both"})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[mr&&y.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:mr}),Vn&&y.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[y.jsx("span",{className:"size-3 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),"Loading file contents..."]}),!Vn&&Ye&&On&&nn&&nn.type==="conflict"&&y.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] font-bold uppercase text-gray-400 mb-2",children:"Current change"}),y.jsx("pre",{className:"whitespace-pre-wrap rounded-lg bg-black/40 p-3 text-[11px] text-gray-200",children:nn.baseLines.length?nn.baseLines.join(`
`):"[no lines]"})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-[11px] font-bold uppercase text-gray-400 mb-2",children:"Incoming change"}),y.jsx("pre",{className:"whitespace-pre-wrap rounded-lg bg-black/40 p-3 text-[11px] text-gray-200",children:nn.headLines.length?nn.headLines.join(`
`):"[no lines]"})]})]}),!Vn&&Ye&&On&&jn.length===0&&y.jsx("div",{className:"text-xs text-gray-400",children:"No conflict blocks detected for this file."}),!Vn&&Ye&&On&&!nn&&jn.length>0&&y.jsx("div",{className:"text-xs text-gray-400",children:"All conflict blocks resolved for this file."}),!Vn&&!Ye&&y.jsx("div",{className:"text-xs text-gray-400",children:"Select a file to view and resolve conflicts."})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between border-t border-white/10 px-5 py-3",children:[y.jsx("span",{className:"text-xs text-gray-400",children:Ur.length===0?"All selected files resolved":`${Ur.length} files remaining`}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:nr,disabled:!rr||Vn,className:"rounded-lg bg-emerald-400 px-3 py-2 text-xs font-semibold text-black disabled:opacity-40",children:"Merge PR"}),y.jsx("button",{onClick:Fe,disabled:Vn,className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-gray-200 disabled:opacity-40",children:"Try Auto-Resolve"}),y.jsx("button",{onClick:ws,disabled:Vn,className:"rounded-lg border border-white/10 px-3 py-2 text-xs font-semibold text-gray-200 disabled:opacity-40",children:"Recheck Mergeable"}),y.jsx("a",{href:`https://github.com/${f.owner}/${f.name}/pull/${He.number}/conflicts`,target:"_blank",rel:"noopener noreferrer",className:"rounded-lg bg-white/10 px-3 py-2 text-xs font-semibold text-gray-100 hover:bg-white/20",children:"Open in GitHub"})]})]})]})})]}):y.jsx("div",{className:"p-10 text-center",children:"Missing GitHub token. Configure a global token or enable a repo token."}):y.jsx("div",{className:"p-10 text-center",children:"Please select a repository."})},EP=({repos:n,globalSettings:e,onNotesClick:t})=>{const s=Mi(),{repoId:o,issueNumber:l}=Wx(),c=n.find(P=>P.id===o),p=c?ld(c,e):"",[f,v]=F.useState(null),[E,T]=F.useState([]),[k,L]=F.useState(!0),[Q,H]=F.useState(""),[M,le]=F.useState(""),[ee,ie]=F.useState(!1),[Te,Pe]=F.useState("");F.useEffect(()=>{let P=!0;return(async()=>{if(!c){H("Repository not found."),L(!1);return}if(!p){H("Missing GitHub token. Configure a global or repo token."),L(!1);return}const A=Number(l);if(!A){H("Invalid issue number."),L(!1);return}L(!0),H("");try{Me.initialize(p);const O=await Me.getIssue(c.owner,c.name,A);P&&(v(O),T(O.comments))}catch(O){console.error("Failed to load issue",O),P&&H("Failed to load issue details.")}finally{P&&L(!1)}})(),()=>{P=!1}},[o,l,p]);const ge=async()=>{if(!c||!p||!f)return;const P=M.trim();if(P){ie(!0),Pe("");try{Me.initialize(p),await Me.addComment(c.owner,c.name,f.number,P);const I=await Me.getIssueComments(c.owner,c.name,f.number);T(I),v(A=>A&&{...A,comments:I,commentsCount:I.length}),le("")}catch(I){console.error("Failed to add comment",I),Pe("Failed to add comment. Check your token and try again.")}finally{ie(!1)}}};return y.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col overflow-hidden pb-24",children:[y.jsxs("header",{className:"sticky top-0 z-20 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-white/5 px-4 py-3 flex items-center gap-3",children:[y.jsx("button",{onClick:()=>s(-1),"aria-label":"Go back",className:"p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors",children:y.jsx("span",{className:"material-symbols-outlined text-slate-900 dark:text-white",children:"arrow_back"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-lg font-bold leading-none tracking-tight",children:"Issue Details"}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:c?.displayName||c?.name})]})]}),y.jsxs("main",{className:"flex-1 px-4 py-4 space-y-4",children:[k&&y.jsx("div",{className:"text-center py-10",children:y.jsx("div",{className:"inline-block size-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}),!k&&Q&&y.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 text-red-200 text-xs px-3 py-2",children:Q}),!k&&!Q&&f&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"bg-white dark:bg-surface-dark-lighter rounded-xl p-4 border border-gray-200 dark:border-white/10 space-y-3",children:[y.jsxs("div",{className:"flex items-start justify-between gap-3",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsxs("span",{className:"text-xs font-bold uppercase text-gray-500",children:["#",f.number]}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wide px-2 py-0.5 rounded ${f.state==="open"?"bg-primary/10 text-primary":"bg-gray-200 text-gray-600"}`,children:f.state})]}),y.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:f.title}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Reported by ",f.reporter.name]})]}),y.jsx("span",{className:`text-xs font-bold uppercase px-2 py-1 rounded ${f.priority==="critical"?"bg-red-500/10 text-red-500":f.priority==="high"?"bg-orange-500/10 text-orange-500":f.priority==="medium"?"bg-yellow-500/10 text-yellow-600":"bg-green-500/10 text-green-500"}`,children:f.priority})]}),y.jsx("div",{className:"bg-gray-50 dark:bg-black/30 rounded-lg p-3",children:y.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-200 whitespace-pre-wrap",children:f.description||"No description provided."})}),f.labels.length>0&&y.jsx("div",{className:"flex flex-wrap gap-2",children:f.labels.map(P=>y.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wide px-2 py-1 rounded bg-gray-100 dark:bg-white/10 text-gray-600 dark:text-gray-300",children:P},P))})]}),y.jsxs("div",{className:"bg-white dark:bg-surface-dark-lighter rounded-xl p-4 border border-gray-200 dark:border-white/10 space-y-3",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Comments"}),y.jsxs("span",{className:"text-[11px] text-gray-400",children:[E.length," total"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("textarea",{value:M,onChange:P=>le(P.target.value),className:"w-full min-h-[120px] rounded-lg bg-gray-50 dark:bg-black/30 p-3 text-sm text-gray-700 dark:text-gray-200",placeholder:"Add a comment..."}),Te&&y.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:Te}),y.jsx("div",{className:"flex justify-end",children:y.jsx("button",{onClick:ge,disabled:ee||!M.trim(),className:"rounded-lg bg-primary px-3 py-2 text-xs font-semibold text-black disabled:opacity-50",children:ee?"Posting...":"Post Comment"})})]}),E.length===0?y.jsx("p",{className:"text-xs text-gray-500",children:"No comments yet."}):y.jsx("div",{className:"space-y-2",children:E.map(P=>y.jsx("div",{className:"bg-gray-50 dark:bg-black/30 rounded-lg p-3 text-sm text-gray-700 dark:text-gray-200",children:P.text},P.id))})]})]})]}),y.jsx(Mp,{onNotesClick:t})]})},xP=({repos:n,globalSettings:e})=>{const t=Mi(),[s]=Ff(),o=s.get("repo"),l=s.get("build")||"",c=n.find(ge=>ge.id===o)||n[0],p=c?ld(c,e):"",[f,v]=F.useState(""),[E,T]=F.useState(""),[k,L]=F.useState(!1),[Q,H]=F.useState(l||c?.apps[0]?.buildNumber||""),M=typeof window<"u"&&!!window.QAVT_AUTO_FIX?.issueCreated,le=typeof window<"u"&&typeof window.QAVT_AUTO_FIX?.setEnabled=="function",[ee,ie]=F.useState(()=>typeof window>"u"?!1:!!window.QAVT_AUTO_FIX?.enabled);F.useEffect(()=>{H(l||c?.apps[0]?.buildNumber||"")},[l,c?.id,c?.apps]),F.useEffect(()=>{if(!M||typeof window>"u")return;const ge=P=>{const I=P.detail;ie(!!I?.enabled)};return window.addEventListener("qavt-auto-fix-changed",ge),ie(!!window.QAVT_AUTO_FIX?.enabled),()=>window.removeEventListener("qavt-auto-fix-changed",ge)},[M]);const Te=ge=>{if(ie(ge),!!le)try{window.QAVT_AUTO_FIX.setEnabled(ge)}catch(P){console.warn("Failed to update auto-fix state",P)}},Pe=async ge=>{if(ge&&ge.preventDefault(),!c||!p){alert("No GitHub token configured. Add a global or repo token.");return}L(!0);try{Me.initialize(p);const P=await Me.createIssue(c.id,{title:f,description:E,labels:[]},c.owner,c.name),I=(Q||"").trim();if(I)try{await Me.addComment(c.owner,c.name,P.number,`open v${I}`)}catch(A){console.error("Failed to add build comment",A),alert("Issue created, but failed to add the build comment.")}if(M&&ee)try{const A=new URLSearchParams({repoId:c.id,repoOwner:c.owner,repoName:c.name,issueNumber:P.number.toString(),title:P.title||f,description:E||"",buildNumber:I}).toString();window.QAVT_AUTO_FIX.issueCreated(A)}catch(A){console.warn("Failed to notify auto-fix bridge",A)}v(""),T(""),alert("Issue created successfully!")}catch{alert("Failed to create issue.")}finally{L(!1)}};return y.jsxs("div",{className:"bg-transparent h-screen w-full relative",children:[y.jsx("div",{onClick:()=>t(-1),className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-10"}),y.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 flex flex-col h-[90vh] bg-surface-dark rounded-t-[32px] shadow-2xl border-t border-white/10 animate-slide-up",children:[y.jsxs("div",{className:"sticky top-0 z-30 bg-surface-dark border-b border-white/10",children:[y.jsx("div",{className:"w-full flex justify-center pt-4 pb-2",children:y.jsx("div",{className:"w-14 h-1.5 bg-gray-600/40 rounded-full"})}),y.jsxs("div",{className:"px-6 py-2 flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-white text-2xl font-bold",children:"New Issue"}),M&&y.jsxs("div",{className:"mt-2 flex items-center gap-2 text-[11px] text-gray-400",children:[y.jsx("span",{children:"Auto-fix on submit"}),y.jsx("button",{type:"button",role:"switch","aria-checked":ee,onClick:()=>Te(!ee),className:`relative inline-flex h-5 w-9 items-center rounded-full transition ${ee?"bg-primary/90":"bg-white/15"}`,children:y.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition ${ee?"translate-x-4":"translate-x-1"}`})}),y.jsx("span",{children:ee?"On":"Off"})]})]}),y.jsx("button",{onClick:()=>t(-1),"aria-label":"Close",className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white",children:y.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto scroll-smooth",children:y.jsxs("form",{onSubmit:Pe,className:"p-6 space-y-4",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Found in Build"}),y.jsx("input",{value:Q,onChange:ge=>H(ge.target.value),className:"w-full bg-input-dark rounded-xl px-4 py-3 text-white font-mono text-sm focus:ring-primary focus:border-primary",placeholder:"e.g. 10"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:"quick-issue-title",className:"text-xs uppercase font-bold text-gray-500",children:"Title"}),y.jsx("input",{id:"quick-issue-title",value:f,onChange:ge=>v(ge.target.value),className:"w-full bg-input-dark rounded-xl px-4 py-4 text-white text-lg focus:ring-primary focus:border-primary",placeholder:"Title",autoFocus:!0,required:!0})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{htmlFor:"quick-issue-desc",className:"text-xs uppercase font-bold text-gray-500",children:"Description"}),y.jsx("textarea",{id:"quick-issue-desc",value:E,onChange:ge=>T(ge.target.value),className:"w-full bg-input-dark rounded-xl p-4 text-white min-h-[200px] focus:ring-primary focus:border-primary",placeholder:"Description"})]}),y.jsx("button",{type:"submit",disabled:!f||k,className:"w-full bg-primary h-14 rounded-xl font-bold text-black disabled:opacity-50",children:k?"Submitting...":"Submit"})]})})]})]})},TP=()=>{const n=Mi();return y.jsxs("div",{className:"h-screen bg-background-dark text-white p-6",children:[y.jsx("button",{onClick:()=>n(-1),className:"mb-4 text-primary",children:"Back"}),y.jsx("h1",{children:"Conflicts"}),y.jsx("p",{children:"Manual resolution required."})]})},da=({user:n,children:e})=>n?e:y.jsx(Zh,{to:"/login",replace:!0}),IP=()=>{const[n,e]=F.useState(null),[t,s]=F.useState(!0),[o,l]=F.useState([]),[c,p]=F.useState({}),[f,v]=F.useState(!1);return F.useEffect(()=>{const E=ck(Ul,T=>{e(T),s(!1)});return()=>E()},[]),F.useEffect(()=>{Ii.applyTheme(Ii.getSavedThemeId()),Ii.setDarkMode(Ii.getSavedMode())},[]),F.useEffect(()=>{if(n){const E=Ai.subscribeToRepos(n.uid,k=>{l(gP(k))}),T=Ai.subscribeToGlobalSettings(n.uid,k=>{p(k||{})});return()=>{E(),T()}}},[n]),t?y.jsx("div",{className:"min-h-screen bg-background-dark flex items-center justify-center",children:y.jsx("div",{className:"size-10 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):y.jsxs(mT,{children:[y.jsxs(aT,{children:[y.jsx(Os,{path:"/login",element:n?y.jsx(Zh,{to:"/",replace:!0}):y.jsx(yP,{})}),y.jsx(Os,{path:"/",element:y.jsx(da,{user:n,children:y.jsx(vP,{repos:o,user:n,globalSettings:c,onNotesClick:()=>v(!0)})})}),y.jsx(Os,{path:"/dashboard",element:y.jsx(da,{user:n,children:y.jsx(wP,{repos:o,user:n,globalSettings:c,onNotesClick:()=>v(!0)})})}),y.jsx(Os,{path:"/issue/:repoId/:issueNumber",element:y.jsx(da,{user:n,children:y.jsx(EP,{repos:o,globalSettings:c,onNotesClick:()=>v(!0)})})}),y.jsx(Os,{path:"/config",element:y.jsx(da,{user:n,children:y.jsx(_P,{repos:o,setRepos:l,user:n,globalSettings:c,setGlobalSettings:p})})}),y.jsx(Os,{path:"/quick-issue",element:y.jsx(da,{user:n,children:y.jsx(xP,{repos:o,globalSettings:c})})}),y.jsx(Os,{path:"/conflicts",element:y.jsx(da,{user:n,children:y.jsx(TP,{})})}),y.jsx(Os,{path:"*",element:y.jsx(Zh,{to:n?"/":"/login",replace:!0})})]}),n&&y.jsx(hP,{isOpen:f,onClose:()=>v(!1),userId:n.uid})]})},eE=document.getElementById("root");if(!eE)throw new Error("Could not find root element to mount to");const bP=yx.createRoot(eE);bP.render(y.jsx(Xr.StrictMode,{children:y.jsx(IP,{})}));export{e_ as g};
