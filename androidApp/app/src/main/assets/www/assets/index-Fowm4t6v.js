function AA(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Yp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Rh={exports:{}},wl={},Ph={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function RA(){if(__)return Me;__=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,U={};function P(V,Z,J){this.props=V,this.context=Z,this.refs=U,this.updater=J||C}P.prototype.isReactComponent={},P.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},P.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function $(){}$.prototype=P.prototype;function Q(V,Z,J){this.props=V,this.context=Z,this.refs=U,this.updater=J||C}var Y=Q.prototype=new $;Y.constructor=Q,M(Y,P.prototype),Y.isPureReactComponent=!0;var ee=Array.isArray,X=Object.prototype.hasOwnProperty,ie={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function x(V,Z,J){var he,me={},be=null,Ne=null;if(Z!=null)for(he in Z.ref!==void 0&&(Ne=Z.ref),Z.key!==void 0&&(be=""+Z.key),Z)X.call(Z,he)&&!N.hasOwnProperty(he)&&(me[he]=Z[he]);var Ge=arguments.length-2;if(Ge===1)me.children=J;else if(1<Ge){for(var Le=Array(Ge),rt=0;rt<Ge;rt++)Le[rt]=arguments[rt+2];me.children=Le}if(V&&V.defaultProps)for(he in Ge=V.defaultProps,Ge)me[he]===void 0&&(me[he]=Ge[he]);return{$$typeof:n,type:V,key:be,ref:Ne,props:me,_owner:ie.current}}function k(V,Z){return{$$typeof:n,type:V.type,key:Z,ref:V.ref,props:V.props,_owner:V._owner}}function L(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function F(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(J){return Z[J]})}var B=/\/+/g;function b(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?F(""+V.key):Z.toString(36)}function De(V,Z,J,he,me){var be=typeof V;(be==="undefined"||be==="boolean")&&(V=null);var Ne=!1;if(V===null)Ne=!0;else switch(be){case"string":case"number":Ne=!0;break;case"object":switch(V.$$typeof){case n:case e:Ne=!0}}if(Ne)return Ne=V,me=me(Ne),V=he===""?"."+b(Ne,0):he,ee(me)?(J="",V!=null&&(J=V.replace(B,"$&/")+"/"),De(me,Z,J,"",function(rt){return rt})):me!=null&&(L(me)&&(me=k(me,J+(!me.key||Ne&&Ne.key===me.key?"":(""+me.key).replace(B,"$&/")+"/")+V)),Z.push(me)),1;if(Ne=0,he=he===""?".":he+":",ee(V))for(var Ge=0;Ge<V.length;Ge++){be=V[Ge];var Le=he+b(be,Ge);Ne+=De(be,Z,J,Le,me)}else if(Le=E(V),typeof Le=="function")for(V=Le.call(V),Ge=0;!(be=V.next()).done;)be=be.value,Le=he+b(be,Ge++),Ne+=De(be,Z,J,Le,me);else if(be==="object")throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Ne}function it(V,Z,J){if(V==null)return V;var he=[],me=0;return De(V,he,"","",function(be){return Z.call(J,be,me++)}),he}function Qe(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(J){(V._status===0||V._status===-1)&&(V._status=1,V._result=J)},function(J){(V._status===0||V._status===-1)&&(V._status=2,V._result=J)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var Ke={current:null},ue={transition:null},ve={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:ue,ReactCurrentOwner:ie};return Me.Children={map:it,forEach:function(V,Z,J){it(V,function(){Z.apply(this,arguments)},J)},count:function(V){var Z=0;return it(V,function(){Z++}),Z},toArray:function(V){return it(V,function(Z){return Z})||[]},only:function(V){if(!L(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Me.Component=P,Me.Fragment=t,Me.Profiler=s,Me.PureComponent=Q,Me.StrictMode=r,Me.Suspense=f,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,Me.cloneElement=function(V,Z,J){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var he=M({},V.props),me=V.key,be=V.ref,Ne=V._owner;if(Z!=null){if(Z.ref!==void 0&&(be=Z.ref,Ne=ie.current),Z.key!==void 0&&(me=""+Z.key),V.type&&V.type.defaultProps)var Ge=V.type.defaultProps;for(Le in Z)X.call(Z,Le)&&!N.hasOwnProperty(Le)&&(he[Le]=Z[Le]===void 0&&Ge!==void 0?Ge[Le]:Z[Le])}var Le=arguments.length-2;if(Le===1)he.children=J;else if(1<Le){Ge=Array(Le);for(var rt=0;rt<Le;rt++)Ge[rt]=arguments[rt+2];he.children=Ge}return{$$typeof:n,type:V.type,key:me,ref:be,props:he,_owner:Ne}},Me.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:o,_context:V},V.Consumer=V},Me.createElement=x,Me.createFactory=function(V){var Z=x.bind(null,V);return Z.type=V,Z},Me.createRef=function(){return{current:null}},Me.forwardRef=function(V){return{$$typeof:c,render:V}},Me.isValidElement=L,Me.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:Qe}},Me.memo=function(V,Z){return{$$typeof:h,type:V,compare:Z===void 0?null:Z}},Me.startTransition=function(V){var Z=ue.transition;ue.transition={};try{V()}finally{ue.transition=Z}},Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Me.useCallback=function(V,Z){return Ke.current.useCallback(V,Z)},Me.useContext=function(V){return Ke.current.useContext(V)},Me.useDebugValue=function(){},Me.useDeferredValue=function(V){return Ke.current.useDeferredValue(V)},Me.useEffect=function(V,Z){return Ke.current.useEffect(V,Z)},Me.useId=function(){return Ke.current.useId()},Me.useImperativeHandle=function(V,Z,J){return Ke.current.useImperativeHandle(V,Z,J)},Me.useInsertionEffect=function(V,Z){return Ke.current.useInsertionEffect(V,Z)},Me.useLayoutEffect=function(V,Z){return Ke.current.useLayoutEffect(V,Z)},Me.useMemo=function(V,Z){return Ke.current.useMemo(V,Z)},Me.useReducer=function(V,Z,J){return Ke.current.useReducer(V,Z,J)},Me.useRef=function(V){return Ke.current.useRef(V)},Me.useState=function(V){return Ke.current.useState(V)},Me.useSyncExternalStore=function(V,Z,J){return Ke.current.useSyncExternalStore(V,Z,J)},Me.useTransition=function(){return Ke.current.useTransition()},Me.version="18.2.0",Me}var v_;function Qp(){return v_||(v_=1,Ph.exports=RA()),Ph.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function PA(){if(E_)return wl;E_=1;var n=Qp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,h){var y,v={},E=null,C=null;h!==void 0&&(E=""+h),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(C=f.ref);for(y in f)r.call(f,y)&&!o.hasOwnProperty(y)&&(v[y]=f[y]);if(c&&c.defaultProps)for(y in f=c.defaultProps,f)v[y]===void 0&&(v[y]=f[y]);return{$$typeof:e,type:c,key:E,ref:C,props:v,_owner:s.current}}return wl.Fragment=t,wl.jsx=l,wl.jsxs=l,wl}var T_;function kA(){return T_||(T_=1,Rh.exports=PA()),Rh.exports}var R=kA(),ne=Qp();const fw=Yp(ne),xA=AA({__proto__:null,default:fw},[ne]);var Cc={},kh={exports:{}},ln={},xh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function bA(){return w_||(w_=1,(function(n){function e(ue,ve){var V=ue.length;ue.push(ve);e:for(;0<V;){var Z=V-1>>>1,J=ue[Z];if(0<s(J,ve))ue[Z]=ve,ue[V]=J,V=Z;else break e}}function t(ue){return ue.length===0?null:ue[0]}function r(ue){if(ue.length===0)return null;var ve=ue[0],V=ue.pop();if(V!==ve){ue[0]=V;e:for(var Z=0,J=ue.length,he=J>>>1;Z<he;){var me=2*(Z+1)-1,be=ue[me],Ne=me+1,Ge=ue[Ne];if(0>s(be,V))Ne<J&&0>s(Ge,be)?(ue[Z]=Ge,ue[Ne]=V,Z=Ne):(ue[Z]=be,ue[me]=V,Z=me);else if(Ne<J&&0>s(Ge,V))ue[Z]=Ge,ue[Ne]=V,Z=Ne;else break e}}return ve}function s(ue,ve){var V=ue.sortIndex-ve.sortIndex;return V!==0?V:ue.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var f=[],h=[],y=1,v=null,E=3,C=!1,M=!1,U=!1,P=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(ue){for(var ve=t(h);ve!==null;){if(ve.callback===null)r(h);else if(ve.startTime<=ue)r(h),ve.sortIndex=ve.expirationTime,e(f,ve);else break;ve=t(h)}}function ee(ue){if(U=!1,Y(ue),!M)if(t(f)!==null)M=!0,Qe(X);else{var ve=t(h);ve!==null&&Ke(ee,ve.startTime-ue)}}function X(ue,ve){M=!1,U&&(U=!1,$(x),x=-1),C=!0;var V=E;try{for(Y(ve),v=t(f);v!==null&&(!(v.expirationTime>ve)||ue&&!F());){var Z=v.callback;if(typeof Z=="function"){v.callback=null,E=v.priorityLevel;var J=Z(v.expirationTime<=ve);ve=n.unstable_now(),typeof J=="function"?v.callback=J:v===t(f)&&r(f),Y(ve)}else r(f);v=t(f)}if(v!==null)var he=!0;else{var me=t(h);me!==null&&Ke(ee,me.startTime-ve),he=!1}return he}finally{v=null,E=V,C=!1}}var ie=!1,N=null,x=-1,k=5,L=-1;function F(){return!(n.unstable_now()-L<k)}function B(){if(N!==null){var ue=n.unstable_now();L=ue;var ve=!0;try{ve=N(!0,ue)}finally{ve?b():(ie=!1,N=null)}}else ie=!1}var b;if(typeof Q=="function")b=function(){Q(B)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,it=De.port2;De.port1.onmessage=B,b=function(){it.postMessage(null)}}else b=function(){P(B,0)};function Qe(ue){N=ue,ie||(ie=!0,b())}function Ke(ue,ve){x=P(function(){ue(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ue){ue.callback=null},n.unstable_continueExecution=function(){M||C||(M=!0,Qe(X))},n.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ue?Math.floor(1e3/ue):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ue){switch(E){case 1:case 2:case 3:var ve=3;break;default:ve=E}var V=E;E=ve;try{return ue()}finally{E=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ue,ve){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var V=E;E=ue;try{return ve()}finally{E=V}},n.unstable_scheduleCallback=function(ue,ve,V){var Z=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Z+V:Z):V=Z,ue){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,ue={id:y++,callback:ve,priorityLevel:ue,startTime:V,expirationTime:J,sortIndex:-1},V>Z?(ue.sortIndex=V,e(h,ue),t(f)===null&&ue===t(h)&&(U?($(x),x=-1):U=!0,Ke(ee,V-Z))):(ue.sortIndex=J,e(f,ue),M||C||(M=!0,Qe(X))),ue},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(ue){var ve=E;return function(){var V=E;E=ve;try{return ue.apply(this,arguments)}finally{E=V}}}})(bh)),bh}var S_;function NA(){return S_||(S_=1,xh.exports=bA()),xh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function DA(){if(I_)return ln;I_=1;var n=Qp(),e=NA();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function E(i){return f.call(v,i)?!0:f.call(y,i)?!1:h.test(i)?v[i]=!0:(y[i]=!0,!1)}function C(i,a,u,g){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return g?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function M(i,a,u,g){if(a===null||typeof a>"u"||C(i,a,u,g))return!0;if(g)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function U(i,a,u,g,_,T,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=g,this.attributeNamespace=_,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=T,this.removeEmptyString=I}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new U(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];P[a]=new U(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new U(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new U(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new U(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new U(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new U(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new U(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new U(i,5,!1,i.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace($,Q);P[a]=new U(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace($,Q);P[a]=new U(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace($,Q);P[a]=new U(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new U(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new U(i,1,!1,i.toLowerCase(),null,!0,!0)});function Y(i,a,u,g){var _=P.hasOwnProperty(a)?P[a]:null;(_!==null?_.type!==0:g||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(M(a,u,_,g)&&(u=null),g||_===null?E(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):_.mustUseProperty?i[_.propertyName]=u===null?_.type===3?!1:"":u:(a=_.attributeName,g=_.attributeNamespace,u===null?i.removeAttribute(a):(_=_.type,u=_===3||_===4&&u===!0?"":""+u,g?i.setAttributeNS(g,a,u):i.setAttribute(a,u))))}var ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),ie=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),F=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),it=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),Ke=Symbol.for("react.offscreen"),ue=Symbol.iterator;function ve(i){return i===null||typeof i!="object"?null:(i=ue&&i[ue]||i["@@iterator"],typeof i=="function"?i:null)}var V=Object.assign,Z;function J(i){if(Z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Z=a&&a[1]||""}return`
`+Z+i}var he=!1;function me(i,a){if(!i||he)return"";he=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(W){var g=W}Reflect.construct(i,[],a)}else{try{a.call()}catch(W){g=W}i.call(a.prototype)}else{try{throw Error()}catch(W){g=W}i()}}catch(W){if(W&&g&&typeof W.stack=="string"){for(var _=W.stack.split(`
`),T=g.stack.split(`
`),I=_.length-1,D=T.length-1;1<=I&&0<=D&&_[I]!==T[D];)D--;for(;1<=I&&0<=D;I--,D--)if(_[I]!==T[D]){if(I!==1||D!==1)do if(I--,D--,0>D||_[I]!==T[D]){var O=`
`+_[I].replace(" at new "," at ");return i.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",i.displayName)),O}while(1<=I&&0<=D);break}}}finally{he=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?J(i):""}function be(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=me(i.type,!1),i;case 11:return i=me(i.type.render,!1),i;case 1:return i=me(i.type,!0),i;default:return""}}function Ne(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case ie:return"Portal";case k:return"Profiler";case x:return"StrictMode";case b:return"Suspense";case De:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case F:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case B:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case it:return a=i.displayName||null,a!==null?a:Ne(i.type)||"Memo";case Qe:a=i._payload,i=i._init;try{return Ne(i(a))}catch{}}return null}function Ge(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(a);case 8:return a===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Le(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function rt(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ii(i){var a=rt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),g=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var _=u.get,T=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return _.call(this)},set:function(I){g=""+I,T.call(this,I)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return g},setValue:function(I){g=""+I},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function is(i){i._valueTracker||(i._valueTracker=ii(i))}function os(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),g="";return i&&(g=rt(i)?i.checked?"true":"false":i.value),i=g,i!==u?(a.setValue(i),!0):!1}function Tn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function as(i,a){var u=a.checked;return V({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function io(i,a){var u=a.defaultValue==null?"":a.defaultValue,g=a.checked!=null?a.checked:a.defaultChecked;u=Le(a.value!=null?a.value:u),i._wrapperState={initialChecked:g,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Pr(i,a){a=a.checked,a!=null&&Y(i,"checked",a,!1)}function er(i,a){Pr(i,a);var u=Le(a.value),g=a.type;if(u!=null)g==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(g==="submit"||g==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?gt(i,a.type,u):a.hasOwnProperty("defaultValue")&&gt(i,a.type,Le(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function ka(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var g=a.type;if(!(g!=="submit"&&g!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function gt(i,a,u){(a!=="number"||Tn(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var ft=Array.isArray;function Un(i,a,u,g){if(i=i.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<i.length;u++)_=a.hasOwnProperty("$"+i[u].value),i[u].selected!==_&&(i[u].selected=_),_&&g&&(i[u].defaultSelected=!0)}else{for(u=""+Le(u),a=null,_=0;_<i.length;_++){if(i[_].value===u){i[_].selected=!0,g&&(i[_].defaultSelected=!0);return}a!==null||i[_].disabled||(a=i[_])}a!==null&&(a.selected=!0)}}function xa(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return V({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ba(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(ft(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Le(u)}}function du(i,a){var u=Le(a.value),g=Le(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),g!=null&&(i.defaultValue=""+g)}function ls(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Na(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oo(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Na(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var us,fu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,g,_){MSApp.execUnsafeLocalFunction(function(){return i(a,u,g,_)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=us.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function oi(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hu=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(i){hu.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),cs[a]=cs[i]})});function ds(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||cs.hasOwnProperty(i)&&cs[i]?(""+a).trim():a+"px"}function ao(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var g=u.indexOf("--")===0,_=ds(u,a[u],g);u==="float"&&(u="cssFloat"),g?i.setProperty(u,_):i[u]=_}}var Da=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fn(i,a){if(a){if(Da[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function lo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fs=null;function uo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var kr=null,xr=null,ct=null;function Ma(i){if(i=al(i)){if(typeof kr!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Gu(a),kr(i.stateNode,i.type,a))}}function hs(i){xr?ct?ct.push(i):ct=[i]:xr=i}function ps(){if(xr){var i=xr,a=ct;if(ct=xr=null,Ma(i),a)for(i=0;i<a.length;i++)Ma(a[i])}}function pu(i,a){return i(a)}function mu(){}var tr=!1;function gu(i,a,u){if(tr)return i(a,u);tr=!0;try{return pu(i,a,u)}finally{tr=!1,(xr!==null||ct!==null)&&(mu(),ps())}}function ai(i,a){var u=i.stateNode;if(u===null)return null;var g=Gu(u);if(g===null)return null;u=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var ms=!1;if(c)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){ms=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{ms=!1}function yu(i,a,u,g,_,T,I,D,O){var W=Array.prototype.slice.call(arguments,3);try{a.apply(u,W)}catch(re){this.onError(re)}}var br=!1,nr=null,co=!1,wn=null,_u={onError:function(i){br=!0,nr=i}};function vu(i,a,u,g,_,T,I,D,O){br=!1,nr=null,yu.apply(_u,arguments)}function La(i,a,u,g,_,T,I,D,O){if(vu.apply(this,arguments),br){if(br){var W=nr;br=!1,nr=null}else throw Error(t(198));co||(co=!0,wn=W)}}function Vn(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Ua(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Eu(i){if(Vn(i)!==i)throw Error(t(188))}function Tu(i){var a=i.alternate;if(!a){if(a=Vn(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,g=a;;){var _=u.return;if(_===null)break;var T=_.alternate;if(T===null){if(g=_.return,g!==null){u=g;continue}break}if(_.child===T.child){for(T=_.child;T;){if(T===u)return Eu(_),i;if(T===g)return Eu(_),a;T=T.sibling}throw Error(t(188))}if(u.return!==g.return)u=_,g=T;else{for(var I=!1,D=_.child;D;){if(D===u){I=!0,u=_,g=T;break}if(D===g){I=!0,g=_,u=T;break}D=D.sibling}if(!I){for(D=T.child;D;){if(D===u){I=!0,u=T,g=_;break}if(D===g){I=!0,g=T,u=_;break}D=D.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==g)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function wu(i){return i=Tu(i),i!==null?li(i):null}function li(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=li(i);if(a!==null)return a;i=i.sibling}return null}var Fa=e.unstable_scheduleCallback,fo=e.unstable_cancelCallback,ui=e.unstable_shouldYield,Nr=e.unstable_requestPaint,Ze=e.unstable_now,rf=e.unstable_getCurrentPriorityLevel,ho=e.unstable_ImmediatePriority,Va=e.unstable_UserBlockingPriority,ci=e.unstable_NormalPriority,Oa=e.unstable_LowPriority,po=e.unstable_IdlePriority,di=null,cn=null;function Su(i){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(di,i,void 0,(i.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:fi,rr=Math.log,Sn=Math.LN2;function fi(i){return i>>>=0,i===0?32:31-(rr(i)/Sn|0)|0}var sr=64,ys=4194304;function ze(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Dr(i,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,T=i.pingedLanes,I=u&268435455;if(I!==0){var D=I&~_;D!==0?g=ze(D):(T&=I,T!==0&&(g=ze(T)))}else I=u&~_,I!==0?g=ze(I):T!==0&&(g=ze(T));if(g===0)return 0;if(a!==0&&a!==g&&(a&_)===0&&(_=g&-g,T=a&-a,_>=T||_===16&&(T&4194240)!==0))return a;if((g&4)!==0&&(g|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=g;0<a;)u=31-dn(a),_=1<<u,g|=i[u],a&=~_;return g}function hi(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pi(i,a){for(var u=i.suspendedLanes,g=i.pingedLanes,_=i.expirationTimes,T=i.pendingLanes;0<T;){var I=31-dn(T),D=1<<I,O=_[I];O===-1?((D&u)===0||(D&g)!==0)&&(_[I]=hi(D,a)):O<=a&&(i.expiredLanes|=D),T&=~D}}function Ga(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ba(){var i=sr;return sr<<=1,(sr&4194240)===0&&(sr=64),i}function qa(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function mi(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-dn(a),i[a]=u}function sf(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var g=i.eventTimes;for(i=i.expirationTimes;0<u;){var _=31-dn(u),T=1<<_;a[_]=0,g[_]=-1,i[_]=-1,u&=~T}}function Ha(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var g=31-dn(u),_=1<<g;_&a|i[g]&a&&(i[g]|=a),u&=~_}}var Oe=0;function ir(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var $a,mo,za,Wa,Ka,or=!1,go=[],ar=null,lr=null,Dt=null,gi=new Map,Mr=new Map,fn=[],Iu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _s(i,a){switch(i){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":gi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(a.pointerId)}}function On(i,a,u,g,_,T){return i===null||i.nativeEvent!==T?(i={blockedOn:a,domEventName:u,eventSystemFlags:g,nativeEvent:T,targetContainers:[_]},a!==null&&(a=al(a),a!==null&&mo(a)),i):(i.eventSystemFlags|=g,a=i.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),i)}function Cu(i,a,u,g,_){switch(a){case"focusin":return ar=On(ar,i,a,u,g,_),!0;case"dragenter":return lr=On(lr,i,a,u,g,_),!0;case"mouseover":return Dt=On(Dt,i,a,u,g,_),!0;case"pointerover":var T=_.pointerId;return gi.set(T,On(gi.get(T)||null,i,a,u,g,_)),!0;case"gotpointercapture":return T=_.pointerId,Mr.set(T,On(Mr.get(T)||null,i,a,u,g,_)),!0}return!1}function yo(i){var a=Ei(i.target);if(a!==null){var u=Vn(a);if(u!==null){if(a=u.tag,a===13){if(a=Ua(u),a!==null){i.blockedOn=a,Ka(i.priority,function(){za(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xe(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=_o(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var g=new u.constructor(u.type,u);fs=g,u.target.dispatchEvent(g),fs=null}else return a=al(u),a!==null&&mo(a),i.blockedOn=u,!1;a.shift()}return!0}function Au(i,a,u){Xe(i)&&u.delete(a)}function of(){or=!1,ar!==null&&Xe(ar)&&(ar=null),lr!==null&&Xe(lr)&&(lr=null),Dt!==null&&Xe(Dt)&&(Dt=null),gi.forEach(Au),Mr.forEach(Au)}function vs(i,a){i.blockedOn===a&&(i.blockedOn=null,or||(or=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,of)))}function Es(i){function a(_){return vs(_,i)}if(0<go.length){vs(go[0],i);for(var u=1;u<go.length;u++){var g=go[u];g.blockedOn===i&&(g.blockedOn=null)}}for(ar!==null&&vs(ar,i),lr!==null&&vs(lr,i),Dt!==null&&vs(Dt,i),gi.forEach(a),Mr.forEach(a),u=0;u<fn.length;u++)g=fn[u],g.blockedOn===i&&(g.blockedOn=null);for(;0<fn.length&&(u=fn[0],u.blockedOn===null);)yo(u),u.blockedOn===null&&fn.shift()}var Lr=ee.ReactCurrentBatchConfig,Ur=!0;function ur(i,a,u,g){var _=Oe,T=Lr.transition;Lr.transition=null;try{Oe=1,Ja(i,a,u,g)}finally{Oe=_,Lr.transition=T}}function Ru(i,a,u,g){var _=Oe,T=Lr.transition;Lr.transition=null;try{Oe=4,Ja(i,a,u,g)}finally{Oe=_,Lr.transition=T}}function Ja(i,a,u,g){if(Ur){var _=_o(i,a,u,g);if(_===null)yf(i,a,g,cr,u),_s(i,g);else if(Cu(_,i,a,u,g))g.stopPropagation();else if(_s(i,g),a&4&&-1<Iu.indexOf(i)){for(;_!==null;){var T=al(_);if(T!==null&&$a(T),T=_o(i,a,u,g),T===null&&yf(i,a,g,cr,u),T===_)break;_=T}_!==null&&g.stopPropagation()}else yf(i,a,g,null,u)}}var cr=null;function _o(i,a,u,g){if(cr=null,i=uo(g),i=Ei(i),i!==null)if(a=Vn(i),a===null)i=null;else if(u=a.tag,u===13){if(i=Ua(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return cr=i,null}function vo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rf()){case ho:return 1;case Va:return 4;case ci:case Oa:return 16;case po:return 536870912;default:return 16}default:return 16}}var hn=null,Eo=null,Fr=null;function Pu(){if(Fr)return Fr;var i,a=Eo,u=a.length,g,_="value"in hn?hn.value:hn.textContent,T=_.length;for(i=0;i<u&&a[i]===_[i];i++);var I=u-i;for(g=1;g<=I&&a[u-g]===_[T-g];g++);return Fr=_.slice(i,1<g?1-g:void 0)}function yi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function dr(){return!0}function Ya(){return!1}function Bt(i){function a(u,g,_,T,I){this._reactName=u,this._targetInst=_,this.type=g,this.nativeEvent=T,this.target=I,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(u=i[D],this[D]=u?u(T):T[D]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?dr:Ya,this.isPropagationStopped=Ya,this}return V(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=dr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=dr)},persist:function(){},isPersistent:dr}),a}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=Bt(fr),Ts=V({},fr,{view:0,detail:0}),To=Bt(Ts),wo,So,pn,vi=V({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ke,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pn&&(pn&&i.type==="mousemove"?(wo=i.screenX-pn.screenX,So=i.screenY-pn.screenY):So=wo=0,pn=i),wo)},movementY:function(i){return"movementY"in i?i.movementY:So}}),Qa=Bt(vi),ku=V({},vi,{dataTransfer:0}),xu=Bt(ku),Io=V({},Ts,{relatedTarget:0}),Mt=Bt(Io),bu=V({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=Bt(bu),ws=V({},fr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),m=Bt(ws),w=V({},fr,{data:0}),S=Bt(w),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function le(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=K[i])?!!a[i]:!1}function ke(){return le}var ht=V({},Ts,{key:function(i){if(i.key){var a=A[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=yi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?H[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ke,charCode:function(i){return i.type==="keypress"?yi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?yi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ye=Bt(ht),yt=V({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mn=Bt(yt),Vr=V({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ke}),hr=Bt(Vr),pr=V({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Co=Bt(pr),Xa=V({},vi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),EC=Bt(Xa),TC=[9,13,27,32],af=c&&"CompositionEvent"in window,ja=null;c&&"documentMode"in document&&(ja=document.documentMode);var wC=c&&"TextEvent"in window&&!ja,ug=c&&(!af||ja&&8<ja&&11>=ja),cg=" ",dg=!1;function fg(i,a){switch(i){case"keyup":return TC.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ao=!1;function SC(i,a){switch(i){case"compositionend":return hg(a);case"keypress":return a.which!==32?null:(dg=!0,cg);case"textInput":return i=a.data,i===cg&&dg?null:i;default:return null}}function IC(i,a){if(Ao)return i==="compositionend"||!af&&fg(i,a)?(i=Pu(),Fr=Eo=hn=null,Ao=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ug&&a.locale!=="ko"?null:a.data;default:return null}}var CC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!CC[i.type]:a==="textarea"}function mg(i,a,u,g){hs(g),a=Fu(a,"onChange"),0<a.length&&(u=new _i("onChange","change",null,u,g),i.push({event:u,listeners:a}))}var Za=null,el=null;function AC(i){Dg(i,0)}function Du(i){var a=bo(i);if(os(a))return i}function RC(i,a){if(i==="change")return a}var gg=!1;if(c){var lf;if(c){var uf="oninput"in document;if(!uf){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),uf=typeof yg.oninput=="function"}lf=uf}else lf=!1;gg=lf&&(!document.documentMode||9<document.documentMode)}function _g(){Za&&(Za.detachEvent("onpropertychange",vg),el=Za=null)}function vg(i){if(i.propertyName==="value"&&Du(el)){var a=[];mg(a,el,i,uo(i)),gu(AC,a)}}function PC(i,a,u){i==="focusin"?(_g(),Za=a,el=u,Za.attachEvent("onpropertychange",vg)):i==="focusout"&&_g()}function kC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Du(el)}function xC(i,a){if(i==="click")return Du(a)}function bC(i,a){if(i==="input"||i==="change")return Du(a)}function NC(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Gn=typeof Object.is=="function"?Object.is:NC;function tl(i,a){if(Gn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),g=Object.keys(a);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var _=u[g];if(!f.call(a,_)||!Gn(i[_],a[_]))return!1}return!0}function Eg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Tg(i,a){var u=Eg(i);i=0;for(var g;u;){if(u.nodeType===3){if(g=i+u.textContent.length,i<=a&&g>=a)return{node:u,offset:a-i};i=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Eg(u)}}function wg(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?wg(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Sg(){for(var i=window,a=Tn();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Tn(i.document)}return a}function cf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function DC(i){var a=Sg(),u=i.focusedElem,g=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&wg(u.ownerDocument.documentElement,u)){if(g!==null&&cf(u)){if(a=g.start,i=g.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var _=u.textContent.length,T=Math.min(g.start,_);g=g.end===void 0?T:Math.min(g.end,_),!i.extend&&T>g&&(_=g,g=T,T=_),_=Tg(u,T);var I=Tg(u,g);_&&I&&(i.rangeCount!==1||i.anchorNode!==_.node||i.anchorOffset!==_.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(_.node,_.offset),i.removeAllRanges(),T>g?(i.addRange(a),i.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var MC=c&&"documentMode"in document&&11>=document.documentMode,Ro=null,df=null,nl=null,ff=!1;function Ig(i,a,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ff||Ro==null||Ro!==Tn(g)||(g=Ro,"selectionStart"in g&&cf(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),nl&&tl(nl,g)||(nl=g,g=Fu(df,"onSelect"),0<g.length&&(a=new _i("onSelect","select",null,a,u),i.push({event:a,listeners:g}),a.target=Ro)))}function Mu(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Po={animationend:Mu("Animation","AnimationEnd"),animationiteration:Mu("Animation","AnimationIteration"),animationstart:Mu("Animation","AnimationStart"),transitionend:Mu("Transition","TransitionEnd")},hf={},Cg={};c&&(Cg=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Lu(i){if(hf[i])return hf[i];if(!Po[i])return i;var a=Po[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in Cg)return hf[i]=a[u];return i}var Ag=Lu("animationend"),Rg=Lu("animationiteration"),Pg=Lu("animationstart"),kg=Lu("transitionend"),xg=new Map,bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ss(i,a){xg.set(i,a),o(a,[i])}for(var pf=0;pf<bg.length;pf++){var mf=bg[pf],LC=mf.toLowerCase(),UC=mf[0].toUpperCase()+mf.slice(1);Ss(LC,"on"+UC)}Ss(Ag,"onAnimationEnd"),Ss(Rg,"onAnimationIteration"),Ss(Pg,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(kg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FC=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function Ng(i,a,u){var g=i.type||"unknown-event";i.currentTarget=u,La(g,a,void 0,i),i.currentTarget=null}function Dg(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var g=i[u],_=g.event;g=g.listeners;e:{var T=void 0;if(a)for(var I=g.length-1;0<=I;I--){var D=g[I],O=D.instance,W=D.currentTarget;if(D=D.listener,O!==T&&_.isPropagationStopped())break e;Ng(_,D,W),T=O}else for(I=0;I<g.length;I++){if(D=g[I],O=D.instance,W=D.currentTarget,D=D.listener,O!==T&&_.isPropagationStopped())break e;Ng(_,D,W),T=O}}}if(co)throw i=wn,co=!1,wn=null,i}function et(i,a){var u=a[Sf];u===void 0&&(u=a[Sf]=new Set);var g=i+"__bubble";u.has(g)||(Mg(a,i,2,!1),u.add(g))}function gf(i,a,u){var g=0;a&&(g|=4),Mg(u,i,g,a)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function sl(i){if(!i[Uu]){i[Uu]=!0,r.forEach(function(u){u!=="selectionchange"&&(FC.has(u)||gf(u,!1,i),gf(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Uu]||(a[Uu]=!0,gf("selectionchange",!1,a))}}function Mg(i,a,u,g){switch(vo(a)){case 1:var _=ur;break;case 4:_=Ru;break;default:_=Ja}u=_.bind(null,a,u,i),_=void 0,!ms||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),g?_!==void 0?i.addEventListener(a,u,{capture:!0,passive:_}):i.addEventListener(a,u,!0):_!==void 0?i.addEventListener(a,u,{passive:_}):i.addEventListener(a,u,!1)}function yf(i,a,u,g,_){var T=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var I=g.tag;if(I===3||I===4){var D=g.stateNode.containerInfo;if(D===_||D.nodeType===8&&D.parentNode===_)break;if(I===4)for(I=g.return;I!==null;){var O=I.tag;if((O===3||O===4)&&(O=I.stateNode.containerInfo,O===_||O.nodeType===8&&O.parentNode===_))return;I=I.return}for(;D!==null;){if(I=Ei(D),I===null)return;if(O=I.tag,O===5||O===6){g=T=I;continue e}D=D.parentNode}}g=g.return}gu(function(){var W=T,re=uo(u),oe=[];e:{var te=xg.get(i);if(te!==void 0){var de=_i,ge=i;switch(i){case"keypress":if(yi(u)===0)break e;case"keydown":case"keyup":de=Ye;break;case"focusin":ge="focus",de=Mt;break;case"focusout":ge="blur",de=Mt;break;case"beforeblur":case"afterblur":de=Mt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Qa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=hr;break;case Ag:case Rg:case Pg:de=Nu;break;case kg:de=Co;break;case"scroll":de=To;break;case"wheel":de=EC;break;case"copy":case"cut":case"paste":de=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=mn}var ye=(a&4)!==0,pt=!ye&&i==="scroll",q=ye?te!==null?te+"Capture":null:te;ye=[];for(var G=W,z;G!==null;){z=G;var ae=z.stateNode;if(z.tag===5&&ae!==null&&(z=ae,q!==null&&(ae=ai(G,q),ae!=null&&ye.push(il(G,ae,z)))),pt)break;G=G.return}0<ye.length&&(te=new de(te,ge,null,u,re),oe.push({event:te,listeners:ye}))}}if((a&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",te&&u!==fs&&(ge=u.relatedTarget||u.fromElement)&&(Ei(ge)||ge[Or]))break e;if((de||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=W,ge=ge?Ei(ge):null,ge!==null&&(pt=Vn(ge),ge!==pt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=W),de!==ge)){if(ye=Qa,ae="onMouseLeave",q="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(ye=mn,ae="onPointerLeave",q="onPointerEnter",G="pointer"),pt=de==null?te:bo(de),z=ge==null?te:bo(ge),te=new ye(ae,G+"leave",de,u,re),te.target=pt,te.relatedTarget=z,ae=null,Ei(re)===W&&(ye=new ye(q,G+"enter",ge,u,re),ye.target=z,ye.relatedTarget=pt,ae=ye),pt=ae,de&&ge)t:{for(ye=de,q=ge,G=0,z=ye;z;z=ko(z))G++;for(z=0,ae=q;ae;ae=ko(ae))z++;for(;0<G-z;)ye=ko(ye),G--;for(;0<z-G;)q=ko(q),z--;for(;G--;){if(ye===q||q!==null&&ye===q.alternate)break t;ye=ko(ye),q=ko(q)}ye=null}else ye=null;de!==null&&Lg(oe,te,de,ye,!1),ge!==null&&pt!==null&&Lg(oe,pt,ge,ye,!0)}}e:{if(te=W?bo(W):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var _e=RC;else if(pg(te))if(gg)_e=bC;else{_e=kC;var Te=PC}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(_e=xC);if(_e&&(_e=_e(i,W))){mg(oe,_e,u,re);break e}Te&&Te(i,te,W),i==="focusout"&&(Te=te._wrapperState)&&Te.controlled&&te.type==="number"&&gt(te,"number",te.value)}switch(Te=W?bo(W):window,i){case"focusin":(pg(Te)||Te.contentEditable==="true")&&(Ro=Te,df=W,nl=null);break;case"focusout":nl=df=Ro=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,Ig(oe,u,re);break;case"selectionchange":if(MC)break;case"keydown":case"keyup":Ig(oe,u,re)}var we;if(af)e:{switch(i){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ao?fg(i,u)&&(Ae="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ae="onCompositionStart");Ae&&(ug&&u.locale!=="ko"&&(Ao||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ao&&(we=Pu()):(hn=re,Eo="value"in hn?hn.value:hn.textContent,Ao=!0)),Te=Fu(W,Ae),0<Te.length&&(Ae=new S(Ae,i,null,u,re),oe.push({event:Ae,listeners:Te}),we?Ae.data=we:(we=hg(u),we!==null&&(Ae.data=we)))),(we=wC?SC(i,u):IC(i,u))&&(W=Fu(W,"onBeforeInput"),0<W.length&&(re=new S("onBeforeInput","beforeinput",null,u,re),oe.push({event:re,listeners:W}),re.data=we))}Dg(oe,a)})}function il(i,a,u){return{instance:i,listener:a,currentTarget:u}}function Fu(i,a){for(var u=a+"Capture",g=[];i!==null;){var _=i,T=_.stateNode;_.tag===5&&T!==null&&(_=T,T=ai(i,u),T!=null&&g.unshift(il(i,T,_)),T=ai(i,a),T!=null&&g.push(il(i,T,_))),i=i.return}return g}function ko(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Lg(i,a,u,g,_){for(var T=a._reactName,I=[];u!==null&&u!==g;){var D=u,O=D.alternate,W=D.stateNode;if(O!==null&&O===g)break;D.tag===5&&W!==null&&(D=W,_?(O=ai(u,T),O!=null&&I.unshift(il(u,O,D))):_||(O=ai(u,T),O!=null&&I.push(il(u,O,D)))),u=u.return}I.length!==0&&i.push({event:a,listeners:I})}var VC=/\r\n?/g,OC=/\u0000|\uFFFD/g;function Ug(i){return(typeof i=="string"?i:""+i).replace(VC,`
`).replace(OC,"")}function Vu(i,a,u){if(a=Ug(a),Ug(i)!==a&&u)throw Error(t(425))}function Ou(){}var _f=null,vf=null;function Ef(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,GC=typeof clearTimeout=="function"?clearTimeout:void 0,Fg=typeof Promise=="function"?Promise:void 0,BC=typeof queueMicrotask=="function"?queueMicrotask:typeof Fg<"u"?function(i){return Fg.resolve(null).then(i).catch(qC)}:Tf;function qC(i){setTimeout(function(){throw i})}function wf(i,a){var u=a,g=0;do{var _=u.nextSibling;if(i.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"){if(g===0){i.removeChild(_),Es(a);return}g--}else u!=="$"&&u!=="$?"&&u!=="$!"||g++;u=_}while(u);Es(a)}function Is(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Vg(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var xo=Math.random().toString(36).slice(2),mr="__reactFiber$"+xo,ol="__reactProps$"+xo,Or="__reactContainer$"+xo,Sf="__reactEvents$"+xo,HC="__reactListeners$"+xo,$C="__reactHandles$"+xo;function Ei(i){var a=i[mr];if(a)return a;for(var u=i.parentNode;u;){if(a=u[Or]||u[mr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=Vg(i);i!==null;){if(u=i[mr])return u;i=Vg(i)}return a}i=u,u=i.parentNode}return null}function al(i){return i=i[mr]||i[Or],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function bo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Gu(i){return i[ol]||null}var If=[],No=-1;function Cs(i){return{current:i}}function tt(i){0>No||(i.current=If[No],If[No]=null,No--)}function je(i,a){No++,If[No]=i.current,i.current=a}var As={},qt=Cs(As),nn=Cs(!1),Ti=As;function Do(i,a){var u=i.type.contextTypes;if(!u)return As;var g=i.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===a)return g.__reactInternalMemoizedMaskedChildContext;var _={},T;for(T in u)_[T]=a[T];return g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=_),_}function rn(i){return i=i.childContextTypes,i!=null}function Bu(){tt(nn),tt(qt)}function Og(i,a,u){if(qt.current!==As)throw Error(t(168));je(qt,a),je(nn,u)}function Gg(i,a,u){var g=i.stateNode;if(a=a.childContextTypes,typeof g.getChildContext!="function")return u;g=g.getChildContext();for(var _ in g)if(!(_ in a))throw Error(t(108,Ge(i)||"Unknown",_));return V({},u,g)}function qu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||As,Ti=qt.current,je(qt,i),je(nn,nn.current),!0}function Bg(i,a,u){var g=i.stateNode;if(!g)throw Error(t(169));u?(i=Gg(i,a,Ti),g.__reactInternalMemoizedMergedChildContext=i,tt(nn),tt(qt),je(qt,i)):tt(nn),je(nn,u)}var Gr=null,Hu=!1,Cf=!1;function qg(i){Gr===null?Gr=[i]:Gr.push(i)}function zC(i){Hu=!0,qg(i)}function Rs(){if(!Cf&&Gr!==null){Cf=!0;var i=0,a=Oe;try{var u=Gr;for(Oe=1;i<u.length;i++){var g=u[i];do g=g(!0);while(g!==null)}Gr=null,Hu=!1}catch(_){throw Gr!==null&&(Gr=Gr.slice(i+1)),Fa(ho,Rs),_}finally{Oe=a,Cf=!1}}return null}var Mo=[],Lo=0,$u=null,zu=0,In=[],Cn=0,wi=null,Br=1,qr="";function Si(i,a){Mo[Lo++]=zu,Mo[Lo++]=$u,$u=i,zu=a}function Hg(i,a,u){In[Cn++]=Br,In[Cn++]=qr,In[Cn++]=wi,wi=i;var g=Br;i=qr;var _=32-dn(g)-1;g&=~(1<<_),u+=1;var T=32-dn(a)+_;if(30<T){var I=_-_%5;T=(g&(1<<I)-1).toString(32),g>>=I,_-=I,Br=1<<32-dn(a)+_|u<<_|g,qr=T+i}else Br=1<<T|u<<_|g,qr=i}function Af(i){i.return!==null&&(Si(i,1),Hg(i,1,0))}function Rf(i){for(;i===$u;)$u=Mo[--Lo],Mo[Lo]=null,zu=Mo[--Lo],Mo[Lo]=null;for(;i===wi;)wi=In[--Cn],In[Cn]=null,qr=In[--Cn],In[Cn]=null,Br=In[--Cn],In[Cn]=null}var gn=null,yn=null,st=!1,Bn=null;function $g(i,a){var u=kn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function zg(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,gn=i,yn=Is(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,gn=i,yn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=wi!==null?{id:Br,overflow:qr}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=kn(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,gn=i,yn=null,!0):!1;default:return!1}}function Pf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function kf(i){if(st){var a=yn;if(a){var u=a;if(!zg(i,a)){if(Pf(i))throw Error(t(418));a=Is(u.nextSibling);var g=gn;a&&zg(i,a)?$g(g,u):(i.flags=i.flags&-4097|2,st=!1,gn=i)}}else{if(Pf(i))throw Error(t(418));i.flags=i.flags&-4097|2,st=!1,gn=i}}}function Wg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;gn=i}function Wu(i){if(i!==gn)return!1;if(!st)return Wg(i),st=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Ef(i.type,i.memoizedProps)),a&&(a=yn)){if(Pf(i))throw Kg(),Error(t(418));for(;a;)$g(i,a),a=Is(a.nextSibling)}if(Wg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){yn=Is(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}yn=null}}else yn=gn?Is(i.stateNode.nextSibling):null;return!0}function Kg(){for(var i=yn;i;)i=Is(i.nextSibling)}function Uo(){yn=gn=null,st=!1}function xf(i){Bn===null?Bn=[i]:Bn.push(i)}var WC=ee.ReactCurrentBatchConfig;function qn(i,a){if(i&&i.defaultProps){a=V({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}var Ku=Cs(null),Ju=null,Fo=null,bf=null;function Nf(){bf=Fo=Ju=null}function Df(i){var a=Ku.current;tt(Ku),i._currentValue=a}function Mf(i,a,u){for(;i!==null;){var g=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),i===u)break;i=i.return}}function Vo(i,a){Ju=i,bf=Fo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(sn=!0),i.firstContext=null)}function An(i){var a=i._currentValue;if(bf!==i)if(i={context:i,memoizedValue:a,next:null},Fo===null){if(Ju===null)throw Error(t(308));Fo=i,Ju.dependencies={lanes:0,firstContext:i}}else Fo=Fo.next=i;return a}var Ii=null;function Lf(i){Ii===null?Ii=[i]:Ii.push(i)}function Jg(i,a,u,g){var _=a.interleaved;return _===null?(u.next=u,Lf(a)):(u.next=_.next,_.next=u),a.interleaved=u,Hr(i,g)}function Hr(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ps=!1;function Uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yg(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function $r(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function ks(i,a,u){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(qe&2)!==0){var _=g.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),g.pending=a,Hr(i,u)}return _=g.interleaved,_===null?(a.next=a,Lf(g)):(a.next=_.next,_.next=a),g.interleaved=a,Hr(i,u)}function Yu(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var g=a.lanes;g&=i.pendingLanes,u|=g,a.lanes=u,Ha(i,u)}}function Qg(i,a){var u=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var _=null,T=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};T===null?_=T=I:T=T.next=I,u=u.next}while(u!==null);T===null?_=T=a:T=T.next=a}else _=T=a;u={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:T,shared:g.shared,effects:g.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function Qu(i,a,u,g){var _=i.updateQueue;Ps=!1;var T=_.firstBaseUpdate,I=_.lastBaseUpdate,D=_.shared.pending;if(D!==null){_.shared.pending=null;var O=D,W=O.next;O.next=null,I===null?T=W:I.next=W,I=O;var re=i.alternate;re!==null&&(re=re.updateQueue,D=re.lastBaseUpdate,D!==I&&(D===null?re.firstBaseUpdate=W:D.next=W,re.lastBaseUpdate=O))}if(T!==null){var oe=_.baseState;I=0,re=W=O=null,D=T;do{var te=D.lane,de=D.eventTime;if((g&te)===te){re!==null&&(re=re.next={eventTime:de,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var ge=i,ye=D;switch(te=a,de=u,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){oe=ge.call(de,oe,te);break e}oe=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,te=typeof ge=="function"?ge.call(de,oe,te):ge,te==null)break e;oe=V({},oe,te);break e;case 2:Ps=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,te=_.effects,te===null?_.effects=[D]:te.push(D))}else de={eventTime:de,lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},re===null?(W=re=de,O=oe):re=re.next=de,I|=te;if(D=D.next,D===null){if(D=_.shared.pending,D===null)break;te=D,D=te.next,te.next=null,_.lastBaseUpdate=te,_.shared.pending=null}}while(!0);if(re===null&&(O=oe),_.baseState=O,_.firstBaseUpdate=W,_.lastBaseUpdate=re,a=_.shared.interleaved,a!==null){_=a;do I|=_.lane,_=_.next;while(_!==a)}else T===null&&(_.shared.lanes=0);Ri|=I,i.lanes=I,i.memoizedState=oe}}function Xg(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var g=i[a],_=g.callback;if(_!==null){if(g.callback=null,g=u,typeof _!="function")throw Error(t(191,_));_.call(g)}}}var jg=new n.Component().refs;function Ff(i,a,u,g){a=i.memoizedState,u=u(g,a),u=u==null?a:V({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Xu={isMounted:function(i){return(i=i._reactInternals)?Vn(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var g=jt(),_=Ds(i),T=$r(g,_);T.payload=a,u!=null&&(T.callback=u),a=ks(i,T,_),a!==null&&(zn(a,i,_,g),Yu(a,i,_))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var g=jt(),_=Ds(i),T=$r(g,_);T.tag=1,T.payload=a,u!=null&&(T.callback=u),a=ks(i,T,_),a!==null&&(zn(a,i,_,g),Yu(a,i,_))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=jt(),g=Ds(i),_=$r(u,g);_.tag=2,a!=null&&(_.callback=a),a=ks(i,_,g),a!==null&&(zn(a,i,g,u),Yu(a,i,g))}};function Zg(i,a,u,g,_,T,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,T,I):a.prototype&&a.prototype.isPureReactComponent?!tl(u,g)||!tl(_,T):!0}function ey(i,a,u){var g=!1,_=As,T=a.contextType;return typeof T=="object"&&T!==null?T=An(T):(_=rn(a)?Ti:qt.current,g=a.contextTypes,T=(g=g!=null)?Do(i,_):As),a=new a(u,T),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Xu,i.stateNode=a,a._reactInternals=i,g&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=_,i.__reactInternalMemoizedMaskedChildContext=T),a}function ty(i,a,u,g){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,g),a.state!==i&&Xu.enqueueReplaceState(a,a.state,null)}function Vf(i,a,u,g){var _=i.stateNode;_.props=u,_.state=i.memoizedState,_.refs=jg,Uf(i);var T=a.contextType;typeof T=="object"&&T!==null?_.context=An(T):(T=rn(a)?Ti:qt.current,_.context=Do(i,T)),_.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Ff(i,a,T,u),_.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(a=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),a!==_.state&&Xu.enqueueReplaceState(_,_.state,null),Qu(i,u,_,g),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308)}function ll(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var g=u.stateNode}if(!g)throw Error(t(147,i));var _=g,T=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===T?a.ref:(a=function(I){var D=_.refs;D===jg&&(D=_.refs={}),I===null?delete D[T]:D[T]=I},a._stringRef=T,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function ju(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function ny(i){var a=i._init;return a(i._payload)}function ry(i){function a(q,G){if(i){var z=q.deletions;z===null?(q.deletions=[G],q.flags|=16):z.push(G)}}function u(q,G){if(!i)return null;for(;G!==null;)a(q,G),G=G.sibling;return null}function g(q,G){for(q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function _(q,G){return q=Ls(q,G),q.index=0,q.sibling=null,q}function T(q,G,z){return q.index=z,i?(z=q.alternate,z!==null?(z=z.index,z<G?(q.flags|=2,G):z):(q.flags|=2,G)):(q.flags|=1048576,G)}function I(q){return i&&q.alternate===null&&(q.flags|=2),q}function D(q,G,z,ae){return G===null||G.tag!==6?(G=Th(z,q.mode,ae),G.return=q,G):(G=_(G,z),G.return=q,G)}function O(q,G,z,ae){var _e=z.type;return _e===N?re(q,G,z.props.children,ae,z.key):G!==null&&(G.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Qe&&ny(_e)===G.type)?(ae=_(G,z.props),ae.ref=ll(q,G,z),ae.return=q,ae):(ae=yc(z.type,z.key,z.props,null,q.mode,ae),ae.ref=ll(q,G,z),ae.return=q,ae)}function W(q,G,z,ae){return G===null||G.tag!==4||G.stateNode.containerInfo!==z.containerInfo||G.stateNode.implementation!==z.implementation?(G=wh(z,q.mode,ae),G.return=q,G):(G=_(G,z.children||[]),G.return=q,G)}function re(q,G,z,ae,_e){return G===null||G.tag!==7?(G=bi(z,q.mode,ae,_e),G.return=q,G):(G=_(G,z),G.return=q,G)}function oe(q,G,z){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Th(""+G,q.mode,z),G.return=q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case X:return z=yc(G.type,G.key,G.props,null,q.mode,z),z.ref=ll(q,null,G),z.return=q,z;case ie:return G=wh(G,q.mode,z),G.return=q,G;case Qe:var ae=G._init;return oe(q,ae(G._payload),z)}if(ft(G)||ve(G))return G=bi(G,q.mode,z,null),G.return=q,G;ju(q,G)}return null}function te(q,G,z,ae){var _e=G!==null?G.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return _e!==null?null:D(q,G,""+z,ae);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case X:return z.key===_e?O(q,G,z,ae):null;case ie:return z.key===_e?W(q,G,z,ae):null;case Qe:return _e=z._init,te(q,G,_e(z._payload),ae)}if(ft(z)||ve(z))return _e!==null?null:re(q,G,z,ae,null);ju(q,z)}return null}function de(q,G,z,ae,_e){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return q=q.get(z)||null,D(G,q,""+ae,_e);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case X:return q=q.get(ae.key===null?z:ae.key)||null,O(G,q,ae,_e);case ie:return q=q.get(ae.key===null?z:ae.key)||null,W(G,q,ae,_e);case Qe:var Te=ae._init;return de(q,G,z,Te(ae._payload),_e)}if(ft(ae)||ve(ae))return q=q.get(z)||null,re(G,q,ae,_e,null);ju(G,ae)}return null}function ge(q,G,z,ae){for(var _e=null,Te=null,we=G,Ae=G=0,Pt=null;we!==null&&Ae<z.length;Ae++){we.index>Ae?(Pt=we,we=null):Pt=we.sibling;var He=te(q,we,z[Ae],ae);if(He===null){we===null&&(we=Pt);break}i&&we&&He.alternate===null&&a(q,we),G=T(He,G,Ae),Te===null?_e=He:Te.sibling=He,Te=He,we=Pt}if(Ae===z.length)return u(q,we),st&&Si(q,Ae),_e;if(we===null){for(;Ae<z.length;Ae++)we=oe(q,z[Ae],ae),we!==null&&(G=T(we,G,Ae),Te===null?_e=we:Te.sibling=we,Te=we);return st&&Si(q,Ae),_e}for(we=g(q,we);Ae<z.length;Ae++)Pt=de(we,q,Ae,z[Ae],ae),Pt!==null&&(i&&Pt.alternate!==null&&we.delete(Pt.key===null?Ae:Pt.key),G=T(Pt,G,Ae),Te===null?_e=Pt:Te.sibling=Pt,Te=Pt);return i&&we.forEach(function(Us){return a(q,Us)}),st&&Si(q,Ae),_e}function ye(q,G,z,ae){var _e=ve(z);if(typeof _e!="function")throw Error(t(150));if(z=_e.call(z),z==null)throw Error(t(151));for(var Te=_e=null,we=G,Ae=G=0,Pt=null,He=z.next();we!==null&&!He.done;Ae++,He=z.next()){we.index>Ae?(Pt=we,we=null):Pt=we.sibling;var Us=te(q,we,He.value,ae);if(Us===null){we===null&&(we=Pt);break}i&&we&&Us.alternate===null&&a(q,we),G=T(Us,G,Ae),Te===null?_e=Us:Te.sibling=Us,Te=Us,we=Pt}if(He.done)return u(q,we),st&&Si(q,Ae),_e;if(we===null){for(;!He.done;Ae++,He=z.next())He=oe(q,He.value,ae),He!==null&&(G=T(He,G,Ae),Te===null?_e=He:Te.sibling=He,Te=He);return st&&Si(q,Ae),_e}for(we=g(q,we);!He.done;Ae++,He=z.next())He=de(we,q,Ae,He.value,ae),He!==null&&(i&&He.alternate!==null&&we.delete(He.key===null?Ae:He.key),G=T(He,G,Ae),Te===null?_e=He:Te.sibling=He,Te=He);return i&&we.forEach(function(CA){return a(q,CA)}),st&&Si(q,Ae),_e}function pt(q,G,z,ae){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case X:e:{for(var _e=z.key,Te=G;Te!==null;){if(Te.key===_e){if(_e=z.type,_e===N){if(Te.tag===7){u(q,Te.sibling),G=_(Te,z.props.children),G.return=q,q=G;break e}}else if(Te.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Qe&&ny(_e)===Te.type){u(q,Te.sibling),G=_(Te,z.props),G.ref=ll(q,Te,z),G.return=q,q=G;break e}u(q,Te);break}else a(q,Te);Te=Te.sibling}z.type===N?(G=bi(z.props.children,q.mode,ae,z.key),G.return=q,q=G):(ae=yc(z.type,z.key,z.props,null,q.mode,ae),ae.ref=ll(q,G,z),ae.return=q,q=ae)}return I(q);case ie:e:{for(Te=z.key;G!==null;){if(G.key===Te)if(G.tag===4&&G.stateNode.containerInfo===z.containerInfo&&G.stateNode.implementation===z.implementation){u(q,G.sibling),G=_(G,z.children||[]),G.return=q,q=G;break e}else{u(q,G);break}else a(q,G);G=G.sibling}G=wh(z,q.mode,ae),G.return=q,q=G}return I(q);case Qe:return Te=z._init,pt(q,G,Te(z._payload),ae)}if(ft(z))return ge(q,G,z,ae);if(ve(z))return ye(q,G,z,ae);ju(q,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,G!==null&&G.tag===6?(u(q,G.sibling),G=_(G,z),G.return=q,q=G):(u(q,G),G=Th(z,q.mode,ae),G.return=q,q=G),I(q)):u(q,G)}return pt}var Oo=ry(!0),sy=ry(!1),ul={},gr=Cs(ul),cl=Cs(ul),dl=Cs(ul);function Ci(i){if(i===ul)throw Error(t(174));return i}function Of(i,a){switch(je(dl,a),je(cl,i),je(gr,ul),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:oo(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=oo(a,i)}tt(gr),je(gr,a)}function Go(){tt(gr),tt(cl),tt(dl)}function iy(i){Ci(dl.current);var a=Ci(gr.current),u=oo(a,i.type);a!==u&&(je(cl,i),je(gr,u))}function Gf(i){cl.current===i&&(tt(gr),tt(cl))}var ot=Cs(0);function Zu(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Bf=[];function qf(){for(var i=0;i<Bf.length;i++)Bf[i]._workInProgressVersionPrimary=null;Bf.length=0}var ec=ee.ReactCurrentDispatcher,Hf=ee.ReactCurrentBatchConfig,Ai=0,at=null,wt=null,At=null,tc=!1,fl=!1,hl=0,KC=0;function Ht(){throw Error(t(321))}function $f(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!Gn(i[u],a[u]))return!1;return!0}function zf(i,a,u,g,_,T){if(Ai=T,at=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ec.current=i===null||i.memoizedState===null?XC:jC,i=u(g,_),fl){T=0;do{if(fl=!1,hl=0,25<=T)throw Error(t(301));T+=1,At=wt=null,a.updateQueue=null,ec.current=ZC,i=u(g,_)}while(fl)}if(ec.current=sc,a=wt!==null&&wt.next!==null,Ai=0,At=wt=at=null,tc=!1,a)throw Error(t(300));return i}function Wf(){var i=hl!==0;return hl=0,i}function yr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?at.memoizedState=At=i:At=At.next=i,At}function Rn(){if(wt===null){var i=at.alternate;i=i!==null?i.memoizedState:null}else i=wt.next;var a=At===null?at.memoizedState:At.next;if(a!==null)At=a,wt=i;else{if(i===null)throw Error(t(310));wt=i,i={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},At===null?at.memoizedState=At=i:At=At.next=i}return At}function pl(i,a){return typeof a=="function"?a(i):a}function Kf(i){var a=Rn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var g=wt,_=g.baseQueue,T=u.pending;if(T!==null){if(_!==null){var I=_.next;_.next=T.next,T.next=I}g.baseQueue=_=T,u.pending=null}if(_!==null){T=_.next,g=g.baseState;var D=I=null,O=null,W=T;do{var re=W.lane;if((Ai&re)===re)O!==null&&(O=O.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),g=W.hasEagerState?W.eagerState:i(g,W.action);else{var oe={lane:re,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};O===null?(D=O=oe,I=g):O=O.next=oe,at.lanes|=re,Ri|=re}W=W.next}while(W!==null&&W!==T);O===null?I=g:O.next=D,Gn(g,a.memoizedState)||(sn=!0),a.memoizedState=g,a.baseState=I,a.baseQueue=O,u.lastRenderedState=g}if(i=u.interleaved,i!==null){_=i;do T=_.lane,at.lanes|=T,Ri|=T,_=_.next;while(_!==i)}else _===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Jf(i){var a=Rn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var g=u.dispatch,_=u.pending,T=a.memoizedState;if(_!==null){u.pending=null;var I=_=_.next;do T=i(T,I.action),I=I.next;while(I!==_);Gn(T,a.memoizedState)||(sn=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),u.lastRenderedState=T}return[T,g]}function oy(){}function ay(i,a){var u=at,g=Rn(),_=a(),T=!Gn(g.memoizedState,_);if(T&&(g.memoizedState=_,sn=!0),g=g.queue,Yf(cy.bind(null,u,g,i),[i]),g.getSnapshot!==a||T||At!==null&&At.memoizedState.tag&1){if(u.flags|=2048,ml(9,uy.bind(null,u,g,_,a),void 0,null),Rt===null)throw Error(t(349));(Ai&30)!==0||ly(u,a,_)}return _}function ly(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=at.updateQueue,a===null?(a={lastEffect:null,stores:null},at.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function uy(i,a,u,g){a.value=u,a.getSnapshot=g,dy(a)&&fy(i)}function cy(i,a,u){return u(function(){dy(a)&&fy(i)})}function dy(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!Gn(i,u)}catch{return!0}}function fy(i){var a=Hr(i,1);a!==null&&zn(a,i,1,-1)}function hy(i){var a=yr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:i},a.queue=i,i=i.dispatch=QC.bind(null,at,i),[a.memoizedState,i]}function ml(i,a,u,g){return i={tag:i,create:a,destroy:u,deps:g,next:null},a=at.updateQueue,a===null?(a={lastEffect:null,stores:null},at.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(g=u.next,u.next=i,i.next=g,a.lastEffect=i)),i}function py(){return Rn().memoizedState}function nc(i,a,u,g){var _=yr();at.flags|=i,_.memoizedState=ml(1|a,u,void 0,g===void 0?null:g)}function rc(i,a,u,g){var _=Rn();g=g===void 0?null:g;var T=void 0;if(wt!==null){var I=wt.memoizedState;if(T=I.destroy,g!==null&&$f(g,I.deps)){_.memoizedState=ml(a,u,T,g);return}}at.flags|=i,_.memoizedState=ml(1|a,u,T,g)}function my(i,a){return nc(8390656,8,i,a)}function Yf(i,a){return rc(2048,8,i,a)}function gy(i,a){return rc(4,2,i,a)}function yy(i,a){return rc(4,4,i,a)}function _y(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function vy(i,a,u){return u=u!=null?u.concat([i]):null,rc(4,4,_y.bind(null,a,i),u)}function Qf(){}function Ey(i,a){var u=Rn();a=a===void 0?null:a;var g=u.memoizedState;return g!==null&&a!==null&&$f(a,g[1])?g[0]:(u.memoizedState=[i,a],i)}function Ty(i,a){var u=Rn();a=a===void 0?null:a;var g=u.memoizedState;return g!==null&&a!==null&&$f(a,g[1])?g[0]:(i=i(),u.memoizedState=[i,a],i)}function wy(i,a,u){return(Ai&21)===0?(i.baseState&&(i.baseState=!1,sn=!0),i.memoizedState=u):(Gn(u,a)||(u=Ba(),at.lanes|=u,Ri|=u,i.baseState=!0),a)}function JC(i,a){var u=Oe;Oe=u!==0&&4>u?u:4,i(!0);var g=Hf.transition;Hf.transition={};try{i(!1),a()}finally{Oe=u,Hf.transition=g}}function Sy(){return Rn().memoizedState}function YC(i,a,u){var g=Ds(i);if(u={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null},Iy(i))Cy(a,u);else if(u=Jg(i,a,u,g),u!==null){var _=jt();zn(u,i,g,_),Ay(u,a,g)}}function QC(i,a,u){var g=Ds(i),_={lane:g,action:u,hasEagerState:!1,eagerState:null,next:null};if(Iy(i))Cy(a,_);else{var T=i.alternate;if(i.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var I=a.lastRenderedState,D=T(I,u);if(_.hasEagerState=!0,_.eagerState=D,Gn(D,I)){var O=a.interleaved;O===null?(_.next=_,Lf(a)):(_.next=O.next,O.next=_),a.interleaved=_;return}}catch{}finally{}u=Jg(i,a,_,g),u!==null&&(_=jt(),zn(u,i,g,_),Ay(u,a,g))}}function Iy(i){var a=i.alternate;return i===at||a!==null&&a===at}function Cy(i,a){fl=tc=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function Ay(i,a,u){if((u&4194240)!==0){var g=a.lanes;g&=i.pendingLanes,u|=g,a.lanes=u,Ha(i,u)}}var sc={readContext:An,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},XC={readContext:An,useCallback:function(i,a){return yr().memoizedState=[i,a===void 0?null:a],i},useContext:An,useEffect:my,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,nc(4194308,4,_y.bind(null,a,i),u)},useLayoutEffect:function(i,a){return nc(4194308,4,i,a)},useInsertionEffect:function(i,a){return nc(4,2,i,a)},useMemo:function(i,a){var u=yr();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var g=yr();return a=u!==void 0?u(a):a,g.memoizedState=g.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},g.queue=i,i=i.dispatch=YC.bind(null,at,i),[g.memoizedState,i]},useRef:function(i){var a=yr();return i={current:i},a.memoizedState=i},useState:hy,useDebugValue:Qf,useDeferredValue:function(i){return yr().memoizedState=i},useTransition:function(){var i=hy(!1),a=i[0];return i=JC.bind(null,i[1]),yr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var g=at,_=yr();if(st){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Rt===null)throw Error(t(349));(Ai&30)!==0||ly(g,a,u)}_.memoizedState=u;var T={value:u,getSnapshot:a};return _.queue=T,my(cy.bind(null,g,T,i),[i]),g.flags|=2048,ml(9,uy.bind(null,g,T,u,a),void 0,null),u},useId:function(){var i=yr(),a=Rt.identifierPrefix;if(st){var u=qr,g=Br;u=(g&~(1<<32-dn(g)-1)).toString(32)+u,a=":"+a+"R"+u,u=hl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=KC++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},jC={readContext:An,useCallback:Ey,useContext:An,useEffect:Yf,useImperativeHandle:vy,useInsertionEffect:gy,useLayoutEffect:yy,useMemo:Ty,useReducer:Kf,useRef:py,useState:function(){return Kf(pl)},useDebugValue:Qf,useDeferredValue:function(i){var a=Rn();return wy(a,wt.memoizedState,i)},useTransition:function(){var i=Kf(pl)[0],a=Rn().memoizedState;return[i,a]},useMutableSource:oy,useSyncExternalStore:ay,useId:Sy,unstable_isNewReconciler:!1},ZC={readContext:An,useCallback:Ey,useContext:An,useEffect:Yf,useImperativeHandle:vy,useInsertionEffect:gy,useLayoutEffect:yy,useMemo:Ty,useReducer:Jf,useRef:py,useState:function(){return Jf(pl)},useDebugValue:Qf,useDeferredValue:function(i){var a=Rn();return wt===null?a.memoizedState=i:wy(a,wt.memoizedState,i)},useTransition:function(){var i=Jf(pl)[0],a=Rn().memoizedState;return[i,a]},useMutableSource:oy,useSyncExternalStore:ay,useId:Sy,unstable_isNewReconciler:!1};function Bo(i,a){try{var u="",g=a;do u+=be(g),g=g.return;while(g);var _=u}catch(T){_=`
Error generating stack: `+T.message+`
`+T.stack}return{value:i,source:a,stack:_,digest:null}}function Xf(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function jf(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var eA=typeof WeakMap=="function"?WeakMap:Map;function Ry(i,a,u){u=$r(-1,u),u.tag=3,u.payload={element:null};var g=a.value;return u.callback=function(){dc||(dc=!0,hh=g),jf(i,a)},u}function Py(i,a,u){u=$r(-1,u),u.tag=3;var g=i.type.getDerivedStateFromError;if(typeof g=="function"){var _=a.value;u.payload=function(){return g(_)},u.callback=function(){jf(i,a)}}var T=i.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(u.callback=function(){jf(i,a),typeof g!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),u}function ky(i,a,u){var g=i.pingCache;if(g===null){g=i.pingCache=new eA;var _=new Set;g.set(a,_)}else _=g.get(a),_===void 0&&(_=new Set,g.set(a,_));_.has(u)||(_.add(u),i=pA.bind(null,i,a,u),a.then(i,i))}function xy(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function by(i,a,u,g,_){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=$r(-1,1),a.tag=2,ks(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=_,i)}var tA=ee.ReactCurrentOwner,sn=!1;function Xt(i,a,u,g){a.child=i===null?sy(a,null,u,g):Oo(a,i.child,u,g)}function Ny(i,a,u,g,_){u=u.render;var T=a.ref;return Vo(a,_),g=zf(i,a,u,g,T,_),u=Wf(),i!==null&&!sn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~_,zr(i,a,_)):(st&&u&&Af(a),a.flags|=1,Xt(i,a,g,_),a.child)}function Dy(i,a,u,g,_){if(i===null){var T=u.type;return typeof T=="function"&&!Eh(T)&&T.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=T,My(i,a,T,g,_)):(i=yc(u.type,null,g,a,a.mode,_),i.ref=a.ref,i.return=a,a.child=i)}if(T=i.child,(i.lanes&_)===0){var I=T.memoizedProps;if(u=u.compare,u=u!==null?u:tl,u(I,g)&&i.ref===a.ref)return zr(i,a,_)}return a.flags|=1,i=Ls(T,g),i.ref=a.ref,i.return=a,a.child=i}function My(i,a,u,g,_){if(i!==null){var T=i.memoizedProps;if(tl(T,g)&&i.ref===a.ref)if(sn=!1,a.pendingProps=g=T,(i.lanes&_)!==0)(i.flags&131072)!==0&&(sn=!0);else return a.lanes=i.lanes,zr(i,a,_)}return Zf(i,a,u,g,_)}function Ly(i,a,u){var g=a.pendingProps,_=g.children,T=i!==null?i.memoizedState:null;if(g.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Ho,_n),_n|=u;else{if((u&1073741824)===0)return i=T!==null?T.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,je(Ho,_n),_n|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:u,je(Ho,_n),_n|=g}else T!==null?(g=T.baseLanes|u,a.memoizedState=null):g=u,je(Ho,_n),_n|=g;return Xt(i,a,_,u),a.child}function Uy(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Zf(i,a,u,g,_){var T=rn(u)?Ti:qt.current;return T=Do(a,T),Vo(a,_),u=zf(i,a,u,g,T,_),g=Wf(),i!==null&&!sn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~_,zr(i,a,_)):(st&&g&&Af(a),a.flags|=1,Xt(i,a,u,_),a.child)}function Fy(i,a,u,g,_){if(rn(u)){var T=!0;qu(a)}else T=!1;if(Vo(a,_),a.stateNode===null)oc(i,a),ey(a,u,g),Vf(a,u,g,_),g=!0;else if(i===null){var I=a.stateNode,D=a.memoizedProps;I.props=D;var O=I.context,W=u.contextType;typeof W=="object"&&W!==null?W=An(W):(W=rn(u)?Ti:qt.current,W=Do(a,W));var re=u.getDerivedStateFromProps,oe=typeof re=="function"||typeof I.getSnapshotBeforeUpdate=="function";oe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==g||O!==W)&&ty(a,I,g,W),Ps=!1;var te=a.memoizedState;I.state=te,Qu(a,g,I,_),O=a.memoizedState,D!==g||te!==O||nn.current||Ps?(typeof re=="function"&&(Ff(a,u,re,g),O=a.memoizedState),(D=Ps||Zg(a,u,D,g,te,O,W))?(oe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=O),I.props=g,I.state=O,I.context=W,g=D):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{I=a.stateNode,Yg(i,a),D=a.memoizedProps,W=a.type===a.elementType?D:qn(a.type,D),I.props=W,oe=a.pendingProps,te=I.context,O=u.contextType,typeof O=="object"&&O!==null?O=An(O):(O=rn(u)?Ti:qt.current,O=Do(a,O));var de=u.getDerivedStateFromProps;(re=typeof de=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(D!==oe||te!==O)&&ty(a,I,g,O),Ps=!1,te=a.memoizedState,I.state=te,Qu(a,g,I,_);var ge=a.memoizedState;D!==oe||te!==ge||nn.current||Ps?(typeof de=="function"&&(Ff(a,u,de,g),ge=a.memoizedState),(W=Ps||Zg(a,u,W,g,te,ge,O)||!1)?(re||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(g,ge,O),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(g,ge,O)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=ge),I.props=g,I.state=ge,I.context=O,g=W):(typeof I.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),g=!1)}return eh(i,a,u,g,T,_)}function eh(i,a,u,g,_,T){Uy(i,a);var I=(a.flags&128)!==0;if(!g&&!I)return _&&Bg(a,u,!1),zr(i,a,T);g=a.stateNode,tA.current=a;var D=I&&typeof u.getDerivedStateFromError!="function"?null:g.render();return a.flags|=1,i!==null&&I?(a.child=Oo(a,i.child,null,T),a.child=Oo(a,null,D,T)):Xt(i,a,D,T),a.memoizedState=g.state,_&&Bg(a,u,!0),a.child}function Vy(i){var a=i.stateNode;a.pendingContext?Og(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Og(i,a.context,!1),Of(i,a.containerInfo)}function Oy(i,a,u,g,_){return Uo(),xf(_),a.flags|=256,Xt(i,a,u,g),a.child}var th={dehydrated:null,treeContext:null,retryLane:0};function nh(i){return{baseLanes:i,cachePool:null,transitions:null}}function Gy(i,a,u){var g=a.pendingProps,_=ot.current,T=!1,I=(a.flags&128)!==0,D;if((D=I)||(D=i!==null&&i.memoizedState===null?!1:(_&2)!==0),D?(T=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(_|=1),je(ot,_&1),i===null)return kf(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(I=g.children,i=g.fallback,T?(g=a.mode,T=a.child,I={mode:"hidden",children:I},(g&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=I):T=_c(I,g,0,null),i=bi(i,g,u,null),T.return=a,i.return=a,T.sibling=i,a.child=T,a.child.memoizedState=nh(u),a.memoizedState=th,i):rh(a,I));if(_=i.memoizedState,_!==null&&(D=_.dehydrated,D!==null))return nA(i,a,I,g,D,_,u);if(T){T=g.fallback,I=a.mode,_=i.child,D=_.sibling;var O={mode:"hidden",children:g.children};return(I&1)===0&&a.child!==_?(g=a.child,g.childLanes=0,g.pendingProps=O,a.deletions=null):(g=Ls(_,O),g.subtreeFlags=_.subtreeFlags&14680064),D!==null?T=Ls(D,T):(T=bi(T,I,u,null),T.flags|=2),T.return=a,g.return=a,g.sibling=T,a.child=g,g=T,T=a.child,I=i.child.memoizedState,I=I===null?nh(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},T.memoizedState=I,T.childLanes=i.childLanes&~u,a.memoizedState=th,g}return T=i.child,i=T.sibling,g=Ls(T,{mode:"visible",children:g.children}),(a.mode&1)===0&&(g.lanes=u),g.return=a,g.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=g,a.memoizedState=null,g}function rh(i,a){return a=_c({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function ic(i,a,u,g){return g!==null&&xf(g),Oo(a,i.child,null,u),i=rh(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function nA(i,a,u,g,_,T,I){if(u)return a.flags&256?(a.flags&=-257,g=Xf(Error(t(422))),ic(i,a,I,g)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(T=g.fallback,_=a.mode,g=_c({mode:"visible",children:g.children},_,0,null),T=bi(T,_,I,null),T.flags|=2,g.return=a,T.return=a,g.sibling=T,a.child=g,(a.mode&1)!==0&&Oo(a,i.child,null,I),a.child.memoizedState=nh(I),a.memoizedState=th,T);if((a.mode&1)===0)return ic(i,a,I,null);if(_.data==="$!"){if(g=_.nextSibling&&_.nextSibling.dataset,g)var D=g.dgst;return g=D,T=Error(t(419)),g=Xf(T,g,void 0),ic(i,a,I,g)}if(D=(I&i.childLanes)!==0,sn||D){if(g=Rt,g!==null){switch(I&-I){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(g.suspendedLanes|I))!==0?0:_,_!==0&&_!==T.retryLane&&(T.retryLane=_,Hr(i,_),zn(g,i,_,-1))}return vh(),g=Xf(Error(t(421))),ic(i,a,I,g)}return _.data==="$?"?(a.flags|=128,a.child=i.child,a=mA.bind(null,i),_._reactRetry=a,null):(i=T.treeContext,yn=Is(_.nextSibling),gn=a,st=!0,Bn=null,i!==null&&(In[Cn++]=Br,In[Cn++]=qr,In[Cn++]=wi,Br=i.id,qr=i.overflow,wi=a),a=rh(a,g.children),a.flags|=4096,a)}function By(i,a,u){i.lanes|=a;var g=i.alternate;g!==null&&(g.lanes|=a),Mf(i.return,a,u)}function sh(i,a,u,g,_){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:_}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=u,T.tailMode=_)}function qy(i,a,u){var g=a.pendingProps,_=g.revealOrder,T=g.tail;if(Xt(i,a,g.children,u),g=ot.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&By(i,u,a);else if(i.tag===19)By(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}if(je(ot,g),(a.mode&1)===0)a.memoizedState=null;else switch(_){case"forwards":for(u=a.child,_=null;u!==null;)i=u.alternate,i!==null&&Zu(i)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),sh(a,!1,_,u,T);break;case"backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(i=_.alternate,i!==null&&Zu(i)===null){a.child=_;break}i=_.sibling,_.sibling=u,u=_,_=i}sh(a,!0,u,null,T);break;case"together":sh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function oc(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function zr(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Ri|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=Ls(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Ls(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function rA(i,a,u){switch(a.tag){case 3:Vy(a),Uo();break;case 5:iy(a);break;case 1:rn(a.type)&&qu(a);break;case 4:Of(a,a.stateNode.containerInfo);break;case 10:var g=a.type._context,_=a.memoizedProps.value;je(Ku,g._currentValue),g._currentValue=_;break;case 13:if(g=a.memoizedState,g!==null)return g.dehydrated!==null?(je(ot,ot.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?Gy(i,a,u):(je(ot,ot.current&1),i=zr(i,a,u),i!==null?i.sibling:null);je(ot,ot.current&1);break;case 19:if(g=(u&a.childLanes)!==0,(i.flags&128)!==0){if(g)return qy(i,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),je(ot,ot.current),g)break;return null;case 22:case 23:return a.lanes=0,Ly(i,a,u)}return zr(i,a,u)}var Hy,ih,$y,zy;Hy=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},ih=function(){},$y=function(i,a,u,g){var _=i.memoizedProps;if(_!==g){i=a.stateNode,Ci(gr.current);var T=null;switch(u){case"input":_=as(i,_),g=as(i,g),T=[];break;case"select":_=V({},_,{value:void 0}),g=V({},g,{value:void 0}),T=[];break;case"textarea":_=xa(i,_),g=xa(i,g),T=[];break;default:typeof _.onClick!="function"&&typeof g.onClick=="function"&&(i.onclick=Ou)}Fn(u,g);var I;u=null;for(W in _)if(!g.hasOwnProperty(W)&&_.hasOwnProperty(W)&&_[W]!=null)if(W==="style"){var D=_[W];for(I in D)D.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(s.hasOwnProperty(W)?T||(T=[]):(T=T||[]).push(W,null));for(W in g){var O=g[W];if(D=_!=null?_[W]:void 0,g.hasOwnProperty(W)&&O!==D&&(O!=null||D!=null))if(W==="style")if(D){for(I in D)!D.hasOwnProperty(I)||O&&O.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in O)O.hasOwnProperty(I)&&D[I]!==O[I]&&(u||(u={}),u[I]=O[I])}else u||(T||(T=[]),T.push(W,u)),u=O;else W==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,D=D?D.__html:void 0,O!=null&&D!==O&&(T=T||[]).push(W,O)):W==="children"?typeof O!="string"&&typeof O!="number"||(T=T||[]).push(W,""+O):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(s.hasOwnProperty(W)?(O!=null&&W==="onScroll"&&et("scroll",i),T||D===O||(T=[])):(T=T||[]).push(W,O))}u&&(T=T||[]).push("style",u);var W=T;(a.updateQueue=W)&&(a.flags|=4)}},zy=function(i,a,u,g){u!==g&&(a.flags|=4)};function gl(i,a){if(!st)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function $t(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,g=0;if(a)for(var _=i.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags&14680064,g|=_.flags&14680064,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=g,i.childLanes=u,a}function sA(i,a,u){var g=a.pendingProps;switch(Rf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(a),null;case 1:return rn(a.type)&&Bu(),$t(a),null;case 3:return g=a.stateNode,Go(),tt(nn),tt(qt),qf(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(i===null||i.child===null)&&(Wu(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Bn!==null&&(gh(Bn),Bn=null))),ih(i,a),$t(a),null;case 5:Gf(a);var _=Ci(dl.current);if(u=a.type,i!==null&&a.stateNode!=null)$y(i,a,u,g,_),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!g){if(a.stateNode===null)throw Error(t(166));return $t(a),null}if(i=Ci(gr.current),Wu(a)){g=a.stateNode,u=a.type;var T=a.memoizedProps;switch(g[mr]=a,g[ol]=T,i=(a.mode&1)!==0,u){case"dialog":et("cancel",g),et("close",g);break;case"iframe":case"object":case"embed":et("load",g);break;case"video":case"audio":for(_=0;_<rl.length;_++)et(rl[_],g);break;case"source":et("error",g);break;case"img":case"image":case"link":et("error",g),et("load",g);break;case"details":et("toggle",g);break;case"input":io(g,T),et("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},et("invalid",g);break;case"textarea":ba(g,T),et("invalid",g)}Fn(u,T),_=null;for(var I in T)if(T.hasOwnProperty(I)){var D=T[I];I==="children"?typeof D=="string"?g.textContent!==D&&(T.suppressHydrationWarning!==!0&&Vu(g.textContent,D,i),_=["children",D]):typeof D=="number"&&g.textContent!==""+D&&(T.suppressHydrationWarning!==!0&&Vu(g.textContent,D,i),_=["children",""+D]):s.hasOwnProperty(I)&&D!=null&&I==="onScroll"&&et("scroll",g)}switch(u){case"input":is(g),ka(g,T,!0);break;case"textarea":is(g),ls(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=Ou)}g=_,a.updateQueue=g,g!==null&&(a.flags|=4)}else{I=_.nodeType===9?_:_.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Na(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof g.is=="string"?i=I.createElement(u,{is:g.is}):(i=I.createElement(u),u==="select"&&(I=i,g.multiple?I.multiple=!0:g.size&&(I.size=g.size))):i=I.createElementNS(i,u),i[mr]=a,i[ol]=g,Hy(i,a,!1,!1),a.stateNode=i;e:{switch(I=lo(u,g),u){case"dialog":et("cancel",i),et("close",i),_=g;break;case"iframe":case"object":case"embed":et("load",i),_=g;break;case"video":case"audio":for(_=0;_<rl.length;_++)et(rl[_],i);_=g;break;case"source":et("error",i),_=g;break;case"img":case"image":case"link":et("error",i),et("load",i),_=g;break;case"details":et("toggle",i),_=g;break;case"input":io(i,g),_=as(i,g),et("invalid",i);break;case"option":_=g;break;case"select":i._wrapperState={wasMultiple:!!g.multiple},_=V({},g,{value:void 0}),et("invalid",i);break;case"textarea":ba(i,g),_=xa(i,g),et("invalid",i);break;default:_=g}Fn(u,_),D=_;for(T in D)if(D.hasOwnProperty(T)){var O=D[T];T==="style"?ao(i,O):T==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&fu(i,O)):T==="children"?typeof O=="string"?(u!=="textarea"||O!=="")&&oi(i,O):typeof O=="number"&&oi(i,""+O):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(s.hasOwnProperty(T)?O!=null&&T==="onScroll"&&et("scroll",i):O!=null&&Y(i,T,O,I))}switch(u){case"input":is(i),ka(i,g,!1);break;case"textarea":is(i),ls(i);break;case"option":g.value!=null&&i.setAttribute("value",""+Le(g.value));break;case"select":i.multiple=!!g.multiple,T=g.value,T!=null?Un(i,!!g.multiple,T,!1):g.defaultValue!=null&&Un(i,!!g.multiple,g.defaultValue,!0);break;default:typeof _.onClick=="function"&&(i.onclick=Ou)}switch(u){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return $t(a),null;case 6:if(i&&a.stateNode!=null)zy(i,a,i.memoizedProps,g);else{if(typeof g!="string"&&a.stateNode===null)throw Error(t(166));if(u=Ci(dl.current),Ci(gr.current),Wu(a)){if(g=a.stateNode,u=a.memoizedProps,g[mr]=a,(T=g.nodeValue!==u)&&(i=gn,i!==null))switch(i.tag){case 3:Vu(g.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Vu(g.nodeValue,u,(i.mode&1)!==0)}T&&(a.flags|=4)}else g=(u.nodeType===9?u:u.ownerDocument).createTextNode(g),g[mr]=a,a.stateNode=g}return $t(a),null;case 13:if(tt(ot),g=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(st&&yn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Kg(),Uo(),a.flags|=98560,T=!1;else if(T=Wu(a),g!==null&&g.dehydrated!==null){if(i===null){if(!T)throw Error(t(318));if(T=a.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[mr]=a}else Uo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;$t(a),T=!1}else Bn!==null&&(gh(Bn),Bn=null),T=!0;if(!T)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(g=g!==null,g!==(i!==null&&i.memoizedState!==null)&&g&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(ot.current&1)!==0?St===0&&(St=3):vh())),a.updateQueue!==null&&(a.flags|=4),$t(a),null);case 4:return Go(),ih(i,a),i===null&&sl(a.stateNode.containerInfo),$t(a),null;case 10:return Df(a.type._context),$t(a),null;case 17:return rn(a.type)&&Bu(),$t(a),null;case 19:if(tt(ot),T=a.memoizedState,T===null)return $t(a),null;if(g=(a.flags&128)!==0,I=T.rendering,I===null)if(g)gl(T,!1);else{if(St!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(I=Zu(i),I!==null){for(a.flags|=128,gl(T,!1),g=I.updateQueue,g!==null&&(a.updateQueue=g,a.flags|=4),a.subtreeFlags=0,g=u,u=a.child;u!==null;)T=u,i=g,T.flags&=14680066,I=T.alternate,I===null?(T.childLanes=0,T.lanes=i,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=I.childLanes,T.lanes=I.lanes,T.child=I.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=I.memoizedProps,T.memoizedState=I.memoizedState,T.updateQueue=I.updateQueue,T.type=I.type,i=I.dependencies,T.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return je(ot,ot.current&1|2),a.child}i=i.sibling}T.tail!==null&&Ze()>$o&&(a.flags|=128,g=!0,gl(T,!1),a.lanes=4194304)}else{if(!g)if(i=Zu(I),i!==null){if(a.flags|=128,g=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),gl(T,!0),T.tail===null&&T.tailMode==="hidden"&&!I.alternate&&!st)return $t(a),null}else 2*Ze()-T.renderingStartTime>$o&&u!==1073741824&&(a.flags|=128,g=!0,gl(T,!1),a.lanes=4194304);T.isBackwards?(I.sibling=a.child,a.child=I):(u=T.last,u!==null?u.sibling=I:a.child=I,T.last=I)}return T.tail!==null?(a=T.tail,T.rendering=a,T.tail=a.sibling,T.renderingStartTime=Ze(),a.sibling=null,u=ot.current,je(ot,g?u&1|2:u&1),a):($t(a),null);case 22:case 23:return _h(),g=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==g&&(a.flags|=8192),g&&(a.mode&1)!==0?(_n&1073741824)!==0&&($t(a),a.subtreeFlags&6&&(a.flags|=8192)):$t(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function iA(i,a){switch(Rf(a),a.tag){case 1:return rn(a.type)&&Bu(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Go(),tt(nn),tt(qt),qf(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Gf(a),null;case 13:if(tt(ot),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Uo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return tt(ot),null;case 4:return Go(),null;case 10:return Df(a.type._context),null;case 22:case 23:return _h(),null;case 24:return null;default:return null}}var ac=!1,zt=!1,oA=typeof WeakSet=="function"?WeakSet:Set,pe=null;function qo(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(g){dt(i,a,g)}else u.current=null}function oh(i,a,u){try{u()}catch(g){dt(i,a,g)}}var Wy=!1;function aA(i,a){if(_f=Ur,i=Sg(),cf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var _=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{u.nodeType,T.nodeType}catch{u=null;break e}var I=0,D=-1,O=-1,W=0,re=0,oe=i,te=null;t:for(;;){for(var de;oe!==u||_!==0&&oe.nodeType!==3||(D=I+_),oe!==T||g!==0&&oe.nodeType!==3||(O=I+g),oe.nodeType===3&&(I+=oe.nodeValue.length),(de=oe.firstChild)!==null;)te=oe,oe=de;for(;;){if(oe===i)break t;if(te===u&&++W===_&&(D=I),te===T&&++re===g&&(O=I),(de=oe.nextSibling)!==null)break;oe=te,te=oe.parentNode}oe=de}u=D===-1||O===-1?null:{start:D,end:O}}else u=null}u=u||{start:0,end:0}}else u=null;for(vf={focusedElem:i,selectionRange:u},Ur=!1,pe=a;pe!==null;)if(a=pe,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,pe=i;else for(;pe!==null;){a=pe;try{var ge=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,pt=ge.memoizedState,q=a.stateNode,G=q.getSnapshotBeforeUpdate(a.elementType===a.type?ye:qn(a.type,ye),pt);q.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var z=a.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ae){dt(a,a.return,ae)}if(i=a.sibling,i!==null){i.return=a.return,pe=i;break}pe=a.return}return ge=Wy,Wy=!1,ge}function yl(i,a,u){var g=a.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var _=g=g.next;do{if((_.tag&i)===i){var T=_.destroy;_.destroy=void 0,T!==void 0&&oh(a,u,T)}_=_.next}while(_!==g)}}function lc(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var g=u.create;u.destroy=g()}u=u.next}while(u!==a)}}function ah(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function Ky(i){var a=i.alternate;a!==null&&(i.alternate=null,Ky(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[mr],delete a[ol],delete a[Sf],delete a[HC],delete a[$C])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Jy(i){return i.tag===5||i.tag===3||i.tag===4}function Yy(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Jy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lh(i,a,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Ou));else if(g!==4&&(i=i.child,i!==null))for(lh(i,a,u),i=i.sibling;i!==null;)lh(i,a,u),i=i.sibling}function uh(i,a,u){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(g!==4&&(i=i.child,i!==null))for(uh(i,a,u),i=i.sibling;i!==null;)uh(i,a,u),i=i.sibling}var Lt=null,Hn=!1;function xs(i,a,u){for(u=u.child;u!==null;)Qy(i,a,u),u=u.sibling}function Qy(i,a,u){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(di,u)}catch{}switch(u.tag){case 5:zt||qo(u,a);case 6:var g=Lt,_=Hn;Lt=null,xs(i,a,u),Lt=g,Hn=_,Lt!==null&&(Hn?(i=Lt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Lt.removeChild(u.stateNode));break;case 18:Lt!==null&&(Hn?(i=Lt,u=u.stateNode,i.nodeType===8?wf(i.parentNode,u):i.nodeType===1&&wf(i,u),Es(i)):wf(Lt,u.stateNode));break;case 4:g=Lt,_=Hn,Lt=u.stateNode.containerInfo,Hn=!0,xs(i,a,u),Lt=g,Hn=_;break;case 0:case 11:case 14:case 15:if(!zt&&(g=u.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){_=g=g.next;do{var T=_,I=T.destroy;T=T.tag,I!==void 0&&((T&2)!==0||(T&4)!==0)&&oh(u,a,I),_=_.next}while(_!==g)}xs(i,a,u);break;case 1:if(!zt&&(qo(u,a),g=u.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=u.memoizedProps,g.state=u.memoizedState,g.componentWillUnmount()}catch(D){dt(u,a,D)}xs(i,a,u);break;case 21:xs(i,a,u);break;case 22:u.mode&1?(zt=(g=zt)||u.memoizedState!==null,xs(i,a,u),zt=g):xs(i,a,u);break;default:xs(i,a,u)}}function Xy(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new oA),a.forEach(function(g){var _=gA.bind(null,i,g);u.has(g)||(u.add(g),g.then(_,_))})}}function $n(i,a){var u=a.deletions;if(u!==null)for(var g=0;g<u.length;g++){var _=u[g];try{var T=i,I=a,D=I;e:for(;D!==null;){switch(D.tag){case 5:Lt=D.stateNode,Hn=!1;break e;case 3:Lt=D.stateNode.containerInfo,Hn=!0;break e;case 4:Lt=D.stateNode.containerInfo,Hn=!0;break e}D=D.return}if(Lt===null)throw Error(t(160));Qy(T,I,_),Lt=null,Hn=!1;var O=_.alternate;O!==null&&(O.return=null),_.return=null}catch(W){dt(_,a,W)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)jy(a,i),a=a.sibling}function jy(i,a){var u=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if($n(a,i),_r(i),g&4){try{yl(3,i,i.return),lc(3,i)}catch(ye){dt(i,i.return,ye)}try{yl(5,i,i.return)}catch(ye){dt(i,i.return,ye)}}break;case 1:$n(a,i),_r(i),g&512&&u!==null&&qo(u,u.return);break;case 5:if($n(a,i),_r(i),g&512&&u!==null&&qo(u,u.return),i.flags&32){var _=i.stateNode;try{oi(_,"")}catch(ye){dt(i,i.return,ye)}}if(g&4&&(_=i.stateNode,_!=null)){var T=i.memoizedProps,I=u!==null?u.memoizedProps:T,D=i.type,O=i.updateQueue;if(i.updateQueue=null,O!==null)try{D==="input"&&T.type==="radio"&&T.name!=null&&Pr(_,T),lo(D,I);var W=lo(D,T);for(I=0;I<O.length;I+=2){var re=O[I],oe=O[I+1];re==="style"?ao(_,oe):re==="dangerouslySetInnerHTML"?fu(_,oe):re==="children"?oi(_,oe):Y(_,re,oe,W)}switch(D){case"input":er(_,T);break;case"textarea":du(_,T);break;case"select":var te=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!T.multiple;var de=T.value;de!=null?Un(_,!!T.multiple,de,!1):te!==!!T.multiple&&(T.defaultValue!=null?Un(_,!!T.multiple,T.defaultValue,!0):Un(_,!!T.multiple,T.multiple?[]:"",!1))}_[ol]=T}catch(ye){dt(i,i.return,ye)}}break;case 6:if($n(a,i),_r(i),g&4){if(i.stateNode===null)throw Error(t(162));_=i.stateNode,T=i.memoizedProps;try{_.nodeValue=T}catch(ye){dt(i,i.return,ye)}}break;case 3:if($n(a,i),_r(i),g&4&&u!==null&&u.memoizedState.isDehydrated)try{Es(a.containerInfo)}catch(ye){dt(i,i.return,ye)}break;case 4:$n(a,i),_r(i);break;case 13:$n(a,i),_r(i),_=i.child,_.flags&8192&&(T=_.memoizedState!==null,_.stateNode.isHidden=T,!T||_.alternate!==null&&_.alternate.memoizedState!==null||(fh=Ze())),g&4&&Xy(i);break;case 22:if(re=u!==null&&u.memoizedState!==null,i.mode&1?(zt=(W=zt)||re,$n(a,i),zt=W):$n(a,i),_r(i),g&8192){if(W=i.memoizedState!==null,(i.stateNode.isHidden=W)&&!re&&(i.mode&1)!==0)for(pe=i,re=i.child;re!==null;){for(oe=pe=re;pe!==null;){switch(te=pe,de=te.child,te.tag){case 0:case 11:case 14:case 15:yl(4,te,te.return);break;case 1:qo(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){g=te,u=te.return;try{a=g,ge.props=a.memoizedProps,ge.state=a.memoizedState,ge.componentWillUnmount()}catch(ye){dt(g,u,ye)}}break;case 5:qo(te,te.return);break;case 22:if(te.memoizedState!==null){t_(oe);continue}}de!==null?(de.return=te,pe=de):t_(oe)}re=re.sibling}e:for(re=null,oe=i;;){if(oe.tag===5){if(re===null){re=oe;try{_=oe.stateNode,W?(T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(D=oe.stateNode,O=oe.memoizedProps.style,I=O!=null&&O.hasOwnProperty("display")?O.display:null,D.style.display=ds("display",I))}catch(ye){dt(i,i.return,ye)}}}else if(oe.tag===6){if(re===null)try{oe.stateNode.nodeValue=W?"":oe.memoizedProps}catch(ye){dt(i,i.return,ye)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===i)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===i)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===i)break e;re===oe&&(re=null),oe=oe.return}re===oe&&(re=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:$n(a,i),_r(i),g&4&&Xy(i);break;case 21:break;default:$n(a,i),_r(i)}}function _r(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(Jy(u)){var g=u;break e}u=u.return}throw Error(t(160))}switch(g.tag){case 5:var _=g.stateNode;g.flags&32&&(oi(_,""),g.flags&=-33);var T=Yy(i);uh(i,T,_);break;case 3:case 4:var I=g.stateNode.containerInfo,D=Yy(i);lh(i,D,I);break;default:throw Error(t(161))}}catch(O){dt(i,i.return,O)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function lA(i,a,u){pe=i,Zy(i)}function Zy(i,a,u){for(var g=(i.mode&1)!==0;pe!==null;){var _=pe,T=_.child;if(_.tag===22&&g){var I=_.memoizedState!==null||ac;if(!I){var D=_.alternate,O=D!==null&&D.memoizedState!==null||zt;D=ac;var W=zt;if(ac=I,(zt=O)&&!W)for(pe=_;pe!==null;)I=pe,O=I.child,I.tag===22&&I.memoizedState!==null?n_(_):O!==null?(O.return=I,pe=O):n_(_);for(;T!==null;)pe=T,Zy(T),T=T.sibling;pe=_,ac=D,zt=W}e_(i)}else(_.subtreeFlags&8772)!==0&&T!==null?(T.return=_,pe=T):e_(i)}}function e_(i){for(;pe!==null;){var a=pe;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:zt||lc(5,a);break;case 1:var g=a.stateNode;if(a.flags&4&&!zt)if(u===null)g.componentDidMount();else{var _=a.elementType===a.type?u.memoizedProps:qn(a.type,u.memoizedProps);g.componentDidUpdate(_,u.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=a.updateQueue;T!==null&&Xg(a,T,g);break;case 3:var I=a.updateQueue;if(I!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Xg(a,I,u)}break;case 5:var D=a.stateNode;if(u===null&&a.flags&4){u=D;var O=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&u.focus();break;case"img":O.src&&(u.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var W=a.alternate;if(W!==null){var re=W.memoizedState;if(re!==null){var oe=re.dehydrated;oe!==null&&Es(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||a.flags&512&&ah(a)}catch(te){dt(a,a.return,te)}}if(a===i){pe=null;break}if(u=a.sibling,u!==null){u.return=a.return,pe=u;break}pe=a.return}}function t_(i){for(;pe!==null;){var a=pe;if(a===i){pe=null;break}var u=a.sibling;if(u!==null){u.return=a.return,pe=u;break}pe=a.return}}function n_(i){for(;pe!==null;){var a=pe;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{lc(4,a)}catch(O){dt(a,u,O)}break;case 1:var g=a.stateNode;if(typeof g.componentDidMount=="function"){var _=a.return;try{g.componentDidMount()}catch(O){dt(a,_,O)}}var T=a.return;try{ah(a)}catch(O){dt(a,T,O)}break;case 5:var I=a.return;try{ah(a)}catch(O){dt(a,I,O)}}}catch(O){dt(a,a.return,O)}if(a===i){pe=null;break}var D=a.sibling;if(D!==null){D.return=a.return,pe=D;break}pe=a.return}}var uA=Math.ceil,uc=ee.ReactCurrentDispatcher,ch=ee.ReactCurrentOwner,Pn=ee.ReactCurrentBatchConfig,qe=0,Rt=null,_t=null,Ut=0,_n=0,Ho=Cs(0),St=0,_l=null,Ri=0,cc=0,dh=0,vl=null,on=null,fh=0,$o=1/0,Wr=null,dc=!1,hh=null,bs=null,fc=!1,Ns=null,hc=0,El=0,ph=null,pc=-1,mc=0;function jt(){return(qe&6)!==0?Ze():pc!==-1?pc:pc=Ze()}function Ds(i){return(i.mode&1)===0?1:(qe&2)!==0&&Ut!==0?Ut&-Ut:WC.transition!==null?(mc===0&&(mc=Ba()),mc):(i=Oe,i!==0||(i=window.event,i=i===void 0?16:vo(i.type)),i)}function zn(i,a,u,g){if(50<El)throw El=0,ph=null,Error(t(185));mi(i,u,g),((qe&2)===0||i!==Rt)&&(i===Rt&&((qe&2)===0&&(cc|=u),St===4&&Ms(i,Ut)),an(i,g),u===1&&qe===0&&(a.mode&1)===0&&($o=Ze()+500,Hu&&Rs()))}function an(i,a){var u=i.callbackNode;pi(i,a);var g=Dr(i,i===Rt?Ut:0);if(g===0)u!==null&&fo(u),i.callbackNode=null,i.callbackPriority=0;else if(a=g&-g,i.callbackPriority!==a){if(u!=null&&fo(u),a===1)i.tag===0?zC(s_.bind(null,i)):qg(s_.bind(null,i)),BC(function(){(qe&6)===0&&Rs()}),u=null;else{switch(ir(g)){case 1:u=ho;break;case 4:u=Va;break;case 16:u=ci;break;case 536870912:u=po;break;default:u=ci}u=f_(u,r_.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function r_(i,a){if(pc=-1,mc=0,(qe&6)!==0)throw Error(t(327));var u=i.callbackNode;if(zo()&&i.callbackNode!==u)return null;var g=Dr(i,i===Rt?Ut:0);if(g===0)return null;if((g&30)!==0||(g&i.expiredLanes)!==0||a)a=gc(i,g);else{a=g;var _=qe;qe|=2;var T=o_();(Rt!==i||Ut!==a)&&(Wr=null,$o=Ze()+500,ki(i,a));do try{fA();break}catch(D){i_(i,D)}while(!0);Nf(),uc.current=T,qe=_,_t!==null?a=0:(Rt=null,Ut=0,a=St)}if(a!==0){if(a===2&&(_=Ga(i),_!==0&&(g=_,a=mh(i,_))),a===1)throw u=_l,ki(i,0),Ms(i,g),an(i,Ze()),u;if(a===6)Ms(i,g);else{if(_=i.current.alternate,(g&30)===0&&!cA(_)&&(a=gc(i,g),a===2&&(T=Ga(i),T!==0&&(g=T,a=mh(i,T))),a===1))throw u=_l,ki(i,0),Ms(i,g),an(i,Ze()),u;switch(i.finishedWork=_,i.finishedLanes=g,a){case 0:case 1:throw Error(t(345));case 2:xi(i,on,Wr);break;case 3:if(Ms(i,g),(g&130023424)===g&&(a=fh+500-Ze(),10<a)){if(Dr(i,0)!==0)break;if(_=i.suspendedLanes,(_&g)!==g){jt(),i.pingedLanes|=i.suspendedLanes&_;break}i.timeoutHandle=Tf(xi.bind(null,i,on,Wr),a);break}xi(i,on,Wr);break;case 4:if(Ms(i,g),(g&4194240)===g)break;for(a=i.eventTimes,_=-1;0<g;){var I=31-dn(g);T=1<<I,I=a[I],I>_&&(_=I),g&=~T}if(g=_,g=Ze()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*uA(g/1960))-g,10<g){i.timeoutHandle=Tf(xi.bind(null,i,on,Wr),g);break}xi(i,on,Wr);break;case 5:xi(i,on,Wr);break;default:throw Error(t(329))}}}return an(i,Ze()),i.callbackNode===u?r_.bind(null,i):null}function mh(i,a){var u=vl;return i.current.memoizedState.isDehydrated&&(ki(i,a).flags|=256),i=gc(i,a),i!==2&&(a=on,on=u,a!==null&&gh(a)),i}function gh(i){on===null?on=i:on.push.apply(on,i)}function cA(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var g=0;g<u.length;g++){var _=u[g],T=_.getSnapshot;_=_.value;try{if(!Gn(T(),_))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ms(i,a){for(a&=~dh,a&=~cc,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-dn(a),g=1<<u;i[u]=-1,a&=~g}}function s_(i){if((qe&6)!==0)throw Error(t(327));zo();var a=Dr(i,0);if((a&1)===0)return an(i,Ze()),null;var u=gc(i,a);if(i.tag!==0&&u===2){var g=Ga(i);g!==0&&(a=g,u=mh(i,g))}if(u===1)throw u=_l,ki(i,0),Ms(i,a),an(i,Ze()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,xi(i,on,Wr),an(i,Ze()),null}function yh(i,a){var u=qe;qe|=1;try{return i(a)}finally{qe=u,qe===0&&($o=Ze()+500,Hu&&Rs())}}function Pi(i){Ns!==null&&Ns.tag===0&&(qe&6)===0&&zo();var a=qe;qe|=1;var u=Pn.transition,g=Oe;try{if(Pn.transition=null,Oe=1,i)return i()}finally{Oe=g,Pn.transition=u,qe=a,(qe&6)===0&&Rs()}}function _h(){_n=Ho.current,tt(Ho)}function ki(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,GC(u)),_t!==null)for(u=_t.return;u!==null;){var g=u;switch(Rf(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Bu();break;case 3:Go(),tt(nn),tt(qt),qf();break;case 5:Gf(g);break;case 4:Go();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:Df(g.type._context);break;case 22:case 23:_h()}u=u.return}if(Rt=i,_t=i=Ls(i.current,null),Ut=_n=a,St=0,_l=null,dh=cc=Ri=0,on=vl=null,Ii!==null){for(a=0;a<Ii.length;a++)if(u=Ii[a],g=u.interleaved,g!==null){u.interleaved=null;var _=g.next,T=u.pending;if(T!==null){var I=T.next;T.next=_,g.next=I}u.pending=g}Ii=null}return i}function i_(i,a){do{var u=_t;try{if(Nf(),ec.current=sc,tc){for(var g=at.memoizedState;g!==null;){var _=g.queue;_!==null&&(_.pending=null),g=g.next}tc=!1}if(Ai=0,At=wt=at=null,fl=!1,hl=0,ch.current=null,u===null||u.return===null){St=1,_l=a,_t=null;break}e:{var T=i,I=u.return,D=u,O=a;if(a=Ut,D.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=O,re=D,oe=re.tag;if((re.mode&1)===0&&(oe===0||oe===11||oe===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var de=xy(I);if(de!==null){de.flags&=-257,by(de,I,D,T,a),de.mode&1&&ky(T,W,a),a=de,O=W;var ge=a.updateQueue;if(ge===null){var ye=new Set;ye.add(O),a.updateQueue=ye}else ge.add(O);break e}else{if((a&1)===0){ky(T,W,a),vh();break e}O=Error(t(426))}}else if(st&&D.mode&1){var pt=xy(I);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),by(pt,I,D,T,a),xf(Bo(O,D));break e}}T=O=Bo(O,D),St!==4&&(St=2),vl===null?vl=[T]:vl.push(T),T=I;do{switch(T.tag){case 3:T.flags|=65536,a&=-a,T.lanes|=a;var q=Ry(T,O,a);Qg(T,q);break e;case 1:D=O;var G=T.type,z=T.stateNode;if((T.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(bs===null||!bs.has(z)))){T.flags|=65536,a&=-a,T.lanes|=a;var ae=Py(T,D,a);Qg(T,ae);break e}}T=T.return}while(T!==null)}l_(u)}catch(_e){a=_e,_t===u&&u!==null&&(_t=u=u.return);continue}break}while(!0)}function o_(){var i=uc.current;return uc.current=sc,i===null?sc:i}function vh(){(St===0||St===3||St===2)&&(St=4),Rt===null||(Ri&268435455)===0&&(cc&268435455)===0||Ms(Rt,Ut)}function gc(i,a){var u=qe;qe|=2;var g=o_();(Rt!==i||Ut!==a)&&(Wr=null,ki(i,a));do try{dA();break}catch(_){i_(i,_)}while(!0);if(Nf(),qe=u,uc.current=g,_t!==null)throw Error(t(261));return Rt=null,Ut=0,St}function dA(){for(;_t!==null;)a_(_t)}function fA(){for(;_t!==null&&!ui();)a_(_t)}function a_(i){var a=d_(i.alternate,i,_n);i.memoizedProps=i.pendingProps,a===null?l_(i):_t=a,ch.current=null}function l_(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=sA(u,a,_n),u!==null){_t=u;return}}else{if(u=iA(u,a),u!==null){u.flags&=32767,_t=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{St=6,_t=null;return}}if(a=a.sibling,a!==null){_t=a;return}_t=a=i}while(a!==null);St===0&&(St=5)}function xi(i,a,u){var g=Oe,_=Pn.transition;try{Pn.transition=null,Oe=1,hA(i,a,u,g)}finally{Pn.transition=_,Oe=g}return null}function hA(i,a,u,g){do zo();while(Ns!==null);if((qe&6)!==0)throw Error(t(327));u=i.finishedWork;var _=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var T=u.lanes|u.childLanes;if(sf(i,T),i===Rt&&(_t=Rt=null,Ut=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||fc||(fc=!0,f_(ci,function(){return zo(),null})),T=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||T){T=Pn.transition,Pn.transition=null;var I=Oe;Oe=1;var D=qe;qe|=4,ch.current=null,aA(i,u),jy(u,i),DC(vf),Ur=!!_f,vf=_f=null,i.current=u,lA(u),Nr(),qe=D,Oe=I,Pn.transition=T}else i.current=u;if(fc&&(fc=!1,Ns=i,hc=_),T=i.pendingLanes,T===0&&(bs=null),Su(u.stateNode),an(i,Ze()),a!==null)for(g=i.onRecoverableError,u=0;u<a.length;u++)_=a[u],g(_.value,{componentStack:_.stack,digest:_.digest});if(dc)throw dc=!1,i=hh,hh=null,i;return(hc&1)!==0&&i.tag!==0&&zo(),T=i.pendingLanes,(T&1)!==0?i===ph?El++:(El=0,ph=i):El=0,Rs(),null}function zo(){if(Ns!==null){var i=ir(hc),a=Pn.transition,u=Oe;try{if(Pn.transition=null,Oe=16>i?16:i,Ns===null)var g=!1;else{if(i=Ns,Ns=null,hc=0,(qe&6)!==0)throw Error(t(331));var _=qe;for(qe|=4,pe=i.current;pe!==null;){var T=pe,I=T.child;if((pe.flags&16)!==0){var D=T.deletions;if(D!==null){for(var O=0;O<D.length;O++){var W=D[O];for(pe=W;pe!==null;){var re=pe;switch(re.tag){case 0:case 11:case 15:yl(8,re,T)}var oe=re.child;if(oe!==null)oe.return=re,pe=oe;else for(;pe!==null;){re=pe;var te=re.sibling,de=re.return;if(Ky(re),re===W){pe=null;break}if(te!==null){te.return=de,pe=te;break}pe=de}}}var ge=T.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var pt=ye.sibling;ye.sibling=null,ye=pt}while(ye!==null)}}pe=T}}if((T.subtreeFlags&2064)!==0&&I!==null)I.return=T,pe=I;else e:for(;pe!==null;){if(T=pe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:yl(9,T,T.return)}var q=T.sibling;if(q!==null){q.return=T.return,pe=q;break e}pe=T.return}}var G=i.current;for(pe=G;pe!==null;){I=pe;var z=I.child;if((I.subtreeFlags&2064)!==0&&z!==null)z.return=I,pe=z;else e:for(I=G;pe!==null;){if(D=pe,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:lc(9,D)}}catch(_e){dt(D,D.return,_e)}if(D===I){pe=null;break e}var ae=D.sibling;if(ae!==null){ae.return=D.return,pe=ae;break e}pe=D.return}}if(qe=_,Rs(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(di,i)}catch{}g=!0}return g}finally{Oe=u,Pn.transition=a}}return!1}function u_(i,a,u){a=Bo(u,a),a=Ry(i,a,1),i=ks(i,a,1),a=jt(),i!==null&&(mi(i,1,a),an(i,a))}function dt(i,a,u){if(i.tag===3)u_(i,i,u);else for(;a!==null;){if(a.tag===3){u_(a,i,u);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(bs===null||!bs.has(g))){i=Bo(u,i),i=Py(a,i,1),a=ks(a,i,1),i=jt(),a!==null&&(mi(a,1,i),an(a,i));break}}a=a.return}}function pA(i,a,u){var g=i.pingCache;g!==null&&g.delete(a),a=jt(),i.pingedLanes|=i.suspendedLanes&u,Rt===i&&(Ut&u)===u&&(St===4||St===3&&(Ut&130023424)===Ut&&500>Ze()-fh?ki(i,0):dh|=u),an(i,a)}function c_(i,a){a===0&&((i.mode&1)===0?a=1:(a=ys,ys<<=1,(ys&130023424)===0&&(ys=4194304)));var u=jt();i=Hr(i,a),i!==null&&(mi(i,a,u),an(i,u))}function mA(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),c_(i,u)}function gA(i,a){var u=0;switch(i.tag){case 13:var g=i.stateNode,_=i.memoizedState;_!==null&&(u=_.retryLane);break;case 19:g=i.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(a),c_(i,u)}var d_;d_=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||nn.current)sn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return sn=!1,rA(i,a,u);sn=(i.flags&131072)!==0}else sn=!1,st&&(a.flags&1048576)!==0&&Hg(a,zu,a.index);switch(a.lanes=0,a.tag){case 2:var g=a.type;oc(i,a),i=a.pendingProps;var _=Do(a,qt.current);Vo(a,u),_=zf(null,a,g,i,_,u);var T=Wf();return a.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,rn(g)?(T=!0,qu(a)):T=!1,a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Uf(a),_.updater=Xu,a.stateNode=_,_._reactInternals=a,Vf(a,g,i,u),a=eh(null,a,g,!0,T,u)):(a.tag=0,st&&T&&Af(a),Xt(null,a,_,u),a=a.child),a;case 16:g=a.elementType;e:{switch(oc(i,a),i=a.pendingProps,_=g._init,g=_(g._payload),a.type=g,_=a.tag=_A(g),i=qn(g,i),_){case 0:a=Zf(null,a,g,i,u);break e;case 1:a=Fy(null,a,g,i,u);break e;case 11:a=Ny(null,a,g,i,u);break e;case 14:a=Dy(null,a,g,qn(g.type,i),u);break e}throw Error(t(306,g,""))}return a;case 0:return g=a.type,_=a.pendingProps,_=a.elementType===g?_:qn(g,_),Zf(i,a,g,_,u);case 1:return g=a.type,_=a.pendingProps,_=a.elementType===g?_:qn(g,_),Fy(i,a,g,_,u);case 3:e:{if(Vy(a),i===null)throw Error(t(387));g=a.pendingProps,T=a.memoizedState,_=T.element,Yg(i,a),Qu(a,g,null,u);var I=a.memoizedState;if(g=I.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){_=Bo(Error(t(423)),a),a=Oy(i,a,g,u,_);break e}else if(g!==_){_=Bo(Error(t(424)),a),a=Oy(i,a,g,u,_);break e}else for(yn=Is(a.stateNode.containerInfo.firstChild),gn=a,st=!0,Bn=null,u=sy(a,null,g,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Uo(),g===_){a=zr(i,a,u);break e}Xt(i,a,g,u)}a=a.child}return a;case 5:return iy(a),i===null&&kf(a),g=a.type,_=a.pendingProps,T=i!==null?i.memoizedProps:null,I=_.children,Ef(g,_)?I=null:T!==null&&Ef(g,T)&&(a.flags|=32),Uy(i,a),Xt(i,a,I,u),a.child;case 6:return i===null&&kf(a),null;case 13:return Gy(i,a,u);case 4:return Of(a,a.stateNode.containerInfo),g=a.pendingProps,i===null?a.child=Oo(a,null,g,u):Xt(i,a,g,u),a.child;case 11:return g=a.type,_=a.pendingProps,_=a.elementType===g?_:qn(g,_),Ny(i,a,g,_,u);case 7:return Xt(i,a,a.pendingProps,u),a.child;case 8:return Xt(i,a,a.pendingProps.children,u),a.child;case 12:return Xt(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(g=a.type._context,_=a.pendingProps,T=a.memoizedProps,I=_.value,je(Ku,g._currentValue),g._currentValue=I,T!==null)if(Gn(T.value,I)){if(T.children===_.children&&!nn.current){a=zr(i,a,u);break e}}else for(T=a.child,T!==null&&(T.return=a);T!==null;){var D=T.dependencies;if(D!==null){I=T.child;for(var O=D.firstContext;O!==null;){if(O.context===g){if(T.tag===1){O=$r(-1,u&-u),O.tag=2;var W=T.updateQueue;if(W!==null){W=W.shared;var re=W.pending;re===null?O.next=O:(O.next=re.next,re.next=O),W.pending=O}}T.lanes|=u,O=T.alternate,O!==null&&(O.lanes|=u),Mf(T.return,u,a),D.lanes|=u;break}O=O.next}}else if(T.tag===10)I=T.type===a.type?null:T.child;else if(T.tag===18){if(I=T.return,I===null)throw Error(t(341));I.lanes|=u,D=I.alternate,D!==null&&(D.lanes|=u),Mf(I,u,a),I=T.sibling}else I=T.child;if(I!==null)I.return=T;else for(I=T;I!==null;){if(I===a){I=null;break}if(T=I.sibling,T!==null){T.return=I.return,I=T;break}I=I.return}T=I}Xt(i,a,_.children,u),a=a.child}return a;case 9:return _=a.type,g=a.pendingProps.children,Vo(a,u),_=An(_),g=g(_),a.flags|=1,Xt(i,a,g,u),a.child;case 14:return g=a.type,_=qn(g,a.pendingProps),_=qn(g.type,_),Dy(i,a,g,_,u);case 15:return My(i,a,a.type,a.pendingProps,u);case 17:return g=a.type,_=a.pendingProps,_=a.elementType===g?_:qn(g,_),oc(i,a),a.tag=1,rn(g)?(i=!0,qu(a)):i=!1,Vo(a,u),ey(a,g,_),Vf(a,g,_,u),eh(null,a,g,!0,i,u);case 19:return qy(i,a,u);case 22:return Ly(i,a,u)}throw Error(t(156,a.tag))};function f_(i,a){return Fa(i,a)}function yA(i,a,u,g){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(i,a,u,g){return new yA(i,a,u,g)}function Eh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function _A(i){if(typeof i=="function")return Eh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===it)return 14}return 2}function Ls(i,a){var u=i.alternate;return u===null?(u=kn(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function yc(i,a,u,g,_,T){var I=2;if(g=i,typeof i=="function")Eh(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case N:return bi(u.children,_,T,a);case x:I=8,_|=8;break;case k:return i=kn(12,u,a,_|2),i.elementType=k,i.lanes=T,i;case b:return i=kn(13,u,a,_),i.elementType=b,i.lanes=T,i;case De:return i=kn(19,u,a,_),i.elementType=De,i.lanes=T,i;case Ke:return _c(u,_,T,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:I=10;break e;case F:I=9;break e;case B:I=11;break e;case it:I=14;break e;case Qe:I=16,g=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=kn(I,u,a,_),a.elementType=i,a.type=g,a.lanes=T,a}function bi(i,a,u,g){return i=kn(7,i,g,a),i.lanes=u,i}function _c(i,a,u,g){return i=kn(22,i,g,a),i.elementType=Ke,i.lanes=u,i.stateNode={isHidden:!1},i}function Th(i,a,u){return i=kn(6,i,null,a),i.lanes=u,i}function wh(i,a,u){return a=kn(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function vA(i,a,u,g,_){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qa(0),this.expirationTimes=qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qa(0),this.identifierPrefix=g,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Sh(i,a,u,g,_,T,I,D,O){return i=new vA(i,a,u,D,O),a===1?(a=1,T===!0&&(a|=8)):a=0,T=kn(3,null,null,a),i.current=T,T.stateNode=i,T.memoizedState={element:g,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uf(T),i}function EA(i,a,u){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:g==null?null:""+g,children:i,containerInfo:a,implementation:u}}function h_(i){if(!i)return As;i=i._reactInternals;e:{if(Vn(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(rn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(rn(u))return Gg(i,u,a)}return a}function p_(i,a,u,g,_,T,I,D,O){return i=Sh(u,g,!0,i,_,T,I,D,O),i.context=h_(null),u=i.current,g=jt(),_=Ds(u),T=$r(g,_),T.callback=a??null,ks(u,T,_),i.current.lanes=_,mi(i,_,g),an(i,g),i}function vc(i,a,u,g){var _=a.current,T=jt(),I=Ds(_);return u=h_(u),a.context===null?a.context=u:a.pendingContext=u,a=$r(T,I),a.payload={element:i},g=g===void 0?null:g,g!==null&&(a.callback=g),i=ks(_,a,I),i!==null&&(zn(i,_,I,T),Yu(i,_,I)),I}function Ec(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function m_(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Ih(i,a){m_(i,a),(i=i.alternate)&&m_(i,a)}function TA(){return null}var g_=typeof reportError=="function"?reportError:function(i){console.error(i)};function Ch(i){this._internalRoot=i}Tc.prototype.render=Ch.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));vc(i,a,null,null)},Tc.prototype.unmount=Ch.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Pi(function(){vc(null,i,null,null)}),a[Or]=null}};function Tc(i){this._internalRoot=i}Tc.prototype.unstable_scheduleHydration=function(i){if(i){var a=Wa();i={blockedOn:null,target:i,priority:a};for(var u=0;u<fn.length&&a!==0&&a<fn[u].priority;u++);fn.splice(u,0,i),u===0&&yo(i)}};function Ah(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function wc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function y_(){}function wA(i,a,u,g,_){if(_){if(typeof g=="function"){var T=g;g=function(){var W=Ec(I);T.call(W)}}var I=p_(a,g,i,0,null,!1,!1,"",y_);return i._reactRootContainer=I,i[Or]=I.current,sl(i.nodeType===8?i.parentNode:i),Pi(),I}for(;_=i.lastChild;)i.removeChild(_);if(typeof g=="function"){var D=g;g=function(){var W=Ec(O);D.call(W)}}var O=Sh(i,0,!1,null,null,!1,!1,"",y_);return i._reactRootContainer=O,i[Or]=O.current,sl(i.nodeType===8?i.parentNode:i),Pi(function(){vc(a,O,u,g)}),O}function Sc(i,a,u,g,_){var T=u._reactRootContainer;if(T){var I=T;if(typeof _=="function"){var D=_;_=function(){var O=Ec(I);D.call(O)}}vc(a,I,i,_)}else I=wA(u,a,i,_,g);return Ec(I)}$a=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=ze(a.pendingLanes);u!==0&&(Ha(a,u|1),an(a,Ze()),(qe&6)===0&&($o=Ze()+500,Rs()))}break;case 13:Pi(function(){var g=Hr(i,1);if(g!==null){var _=jt();zn(g,i,1,_)}}),Ih(i,1)}},mo=function(i){if(i.tag===13){var a=Hr(i,134217728);if(a!==null){var u=jt();zn(a,i,134217728,u)}Ih(i,134217728)}},za=function(i){if(i.tag===13){var a=Ds(i),u=Hr(i,a);if(u!==null){var g=jt();zn(u,i,a,g)}Ih(i,a)}},Wa=function(){return Oe},Ka=function(i,a){var u=Oe;try{return Oe=i,a()}finally{Oe=u}},kr=function(i,a,u){switch(a){case"input":if(er(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var g=u[a];if(g!==i&&g.form===i.form){var _=Gu(g);if(!_)throw Error(t(90));os(g),er(g,_)}}}break;case"textarea":du(i,u);break;case"select":a=u.value,a!=null&&Un(i,!!u.multiple,a,!1)}},pu=yh,mu=Pi;var SA={usingClientEntryPoint:!1,Events:[al,bo,Gu,hs,ps,yh]},Tl={findFiberByHostInstance:Ei,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},IA={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=wu(i),i===null?null:i.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||TA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{di=Ic.inject(IA),cn=Ic}catch{}}return ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SA,ln.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ah(a))throw Error(t(200));return EA(i,a,null,u)},ln.createRoot=function(i,a){if(!Ah(i))throw Error(t(299));var u=!1,g="",_=g_;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=Sh(i,1,!1,null,null,u,!1,g,_),i[Or]=a.current,sl(i.nodeType===8?i.parentNode:i),new Ch(a)},ln.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=wu(a),i=i===null?null:i.stateNode,i},ln.flushSync=function(i){return Pi(i)},ln.hydrate=function(i,a,u){if(!wc(a))throw Error(t(200));return Sc(null,i,a,!0,u)},ln.hydrateRoot=function(i,a,u){if(!Ah(i))throw Error(t(405));var g=u!=null&&u.hydratedSources||null,_=!1,T="",I=g_;if(u!=null&&(u.unstable_strictMode===!0&&(_=!0),u.identifierPrefix!==void 0&&(T=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),a=p_(a,null,i,1,u??null,_,!1,T,I),i[Or]=a.current,sl(i),g)for(i=0;i<g.length;i++)u=g[i],_=u._getVersion,_=_(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,_]:a.mutableSourceEagerHydrationData.push(u,_);return new Tc(a)},ln.render=function(i,a,u){if(!wc(a))throw Error(t(200));return Sc(null,i,a,!1,u)},ln.unmountComponentAtNode=function(i){if(!wc(i))throw Error(t(40));return i._reactRootContainer?(Pi(function(){Sc(null,null,i,!1,function(){i._reactRootContainer=null,i[Or]=null})}),!0):!1},ln.unstable_batchedUpdates=yh,ln.unstable_renderSubtreeIntoContainer=function(i,a,u,g){if(!wc(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Sc(i,a,u,!1,g)},ln.version="18.2.0-next-9e3b772b8-20220608",ln}var C_;function hw(){if(C_)return kh.exports;C_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kh.exports=DA(),kh.exports}var A_;function MA(){if(A_)return Cc;A_=1;var n=hw();return Cc.createRoot=n.createRoot,Cc.hydrateRoot=n.hydrateRoot,Cc}var LA=MA();const UA=Yp(LA);hw();/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gl.apply(this,arguments)}var Bs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Bs||(Bs={}));const R_="popstate";function FA(n){n===void 0&&(n={});function e(s,o){let{pathname:l="/",search:c="",hash:f=""}=Ji(s.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),np("",{pathname:l,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){let l=s.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let f=s.location.href,h=f.indexOf("#");c=h===-1?f:f.slice(0,h)}return c+"#"+(typeof o=="string"?o:Xc(o))}function r(s,o){Xp(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return OA(e,t,r,n)}function Tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Xp(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VA(){return Math.random().toString(36).substr(2,8)}function P_(n,e){return{usr:n.state,key:n.key,idx:e}}function np(n,e,t,r){return t===void 0&&(t=null),Gl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ji(e):e,{state:t,key:e&&e.key||r||VA()})}function Xc(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ji(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function OA(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c=Bs.Pop,f=null,h=y();h==null&&(h=0,l.replaceState(Gl({},l.state,{idx:h}),""));function y(){return(l.state||{idx:null}).idx}function v(){c=Bs.Pop;let P=y(),$=P==null?null:P-h;h=P,f&&f({action:c,location:U.location,delta:$})}function E(P,$){c=Bs.Push;let Q=np(U.location,P,$);t&&t(Q,P),h=y()+1;let Y=P_(Q,h),ee=U.createHref(Q);try{l.pushState(Y,"",ee)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(ee)}o&&f&&f({action:c,location:U.location,delta:1})}function C(P,$){c=Bs.Replace;let Q=np(U.location,P,$);t&&t(Q,P),h=y();let Y=P_(Q,h),ee=U.createHref(Q);l.replaceState(Y,"",ee),o&&f&&f({action:c,location:U.location,delta:0})}function M(P){let $=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof P=="string"?P:Xc(P);return Q=Q.replace(/ $/,"%20"),Tt($,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,$)}let U={get action(){return c},get location(){return n(s,l)},listen(P){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(R_,v),f=P,()=>{s.removeEventListener(R_,v),f=null}},createHref(P){return e(s,P)},createURL:M,encodeLocation(P){let $=M(P);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:E,replace:C,go(P){return l.go(P)}};return U}var k_;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(k_||(k_={}));function GA(n,e,t){t===void 0&&(t="/");let r=typeof e=="string"?Ji(e):e,s=jp(r.pathname||"/",t);if(s==null)return null;let o=pw(n);BA(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let f=ZA(s);l=QA(o[c],f)}return l}function pw(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(o,l,c)=>{let f={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};f.relativePath.startsWith("/")&&(Tt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let h=$s([r,f.relativePath]),y=t.concat(f);o.children&&o.children.length>0&&(Tt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),pw(o.children,e,y,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:JA(h,o.index),routesMeta:y})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,l);else for(let f of mw(o.path))s(o,l,f)}),e}function mw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=mw(r.join("/")),c=[];return c.push(...l.map(f=>f===""?o:[o,f].join("/"))),s&&c.push(...l),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function BA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:YA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const qA=/^:[\w-]+$/,HA=3,$A=2,zA=1,WA=10,KA=-2,x_=n=>n==="*";function JA(n,e){let t=n.split("/"),r=t.length;return t.some(x_)&&(r+=KA),e&&(r+=$A),t.filter(s=>!x_(s)).reduce((s,o)=>s+(qA.test(o)?HA:o===""?zA:WA),r)}function YA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function QA(n,e){let{routesMeta:t}=n,r={},s="/",o=[];for(let l=0;l<t.length;++l){let c=t[l],f=l===t.length-1,h=s==="/"?e:e.slice(s.length)||"/",y=XA({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h);if(!y)return null;Object.assign(r,y.params);let v=c.route;o.push({params:r,pathname:$s([s,y.pathname]),pathnameBase:rR($s([s,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(s=$s([s,y.pathnameBase]))}return o}function XA(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=jA(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((h,y,v)=>{let{paramName:E,isOptional:C}=y;if(E==="*"){let U=c[v]||"";l=o.slice(0,o.length-U.length).replace(/(.)\/+$/,"$1")}const M=c[v];return C&&!M?h[E]=void 0:h[E]=(M||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:n}}function jA(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Xp(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function ZA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xp(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function jp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function eR(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ji(n):n;return{pathname:t?t.startsWith("/")?t:tR(t,e):e,search:sR(r),hash:iR(s)}}function tR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Nh(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gw(n,e){let t=nR(n);return e?t.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function yw(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Ji(n):(s=Gl({},n),Tt(!s.pathname||!s.pathname.includes("?"),Nh("?","pathname","search",s)),Tt(!s.pathname||!s.pathname.includes("#"),Nh("#","pathname","hash",s)),Tt(!s.search||!s.search.includes("#"),Nh("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}c=v>=0?e[v]:"/"}let f=eR(s,c),h=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(h||y)&&(f.pathname+="/"),f}const $s=n=>n.join("/").replace(/\/\/+/g,"/"),rR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),sR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,iR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function oR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const _w=["post","put","patch","delete"];new Set(_w);const aR=["get",..._w];new Set(aR);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bl.apply(this,arguments)}const Zp=ne.createContext(null),lR=ne.createContext(null),Yi=ne.createContext(null),Pd=ne.createContext(null),Qi=ne.createContext({outlet:null,matches:[],isDataRoute:!1}),vw=ne.createContext(null);function uR(n,e){let{relative:t}=e===void 0?{}:e;Zl()||Tt(!1);let{basename:r,navigator:s}=ne.useContext(Yi),{hash:o,pathname:l,search:c}=Tw(n,{relative:t}),f=l;return r!=="/"&&(f=l==="/"?r:$s([r,l])),s.createHref({pathname:f,search:c,hash:o})}function Zl(){return ne.useContext(Pd)!=null}function eu(){return Zl()||Tt(!1),ne.useContext(Pd).location}function Ew(n){ne.useContext(Yi).static||ne.useLayoutEffect(n)}function Xi(){let{isDataRoute:n}=ne.useContext(Qi);return n?wR():cR()}function cR(){Zl()||Tt(!1);let n=ne.useContext(Zp),{basename:e,future:t,navigator:r}=ne.useContext(Yi),{matches:s}=ne.useContext(Qi),{pathname:o}=eu(),l=JSON.stringify(gw(s,t.v7_relativeSplatPath)),c=ne.useRef(!1);return Ew(()=>{c.current=!0}),ne.useCallback(function(h,y){if(y===void 0&&(y={}),!c.current)return;if(typeof h=="number"){r.go(h);return}let v=yw(h,JSON.parse(l),o,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:$s([e,v.pathname])),(y.replace?r.replace:r.push)(v,y.state,y)},[e,r,l,o,n])}function Tw(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=ne.useContext(Yi),{matches:s}=ne.useContext(Qi),{pathname:o}=eu(),l=JSON.stringify(gw(s,r.v7_relativeSplatPath));return ne.useMemo(()=>yw(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function dR(n,e){return fR(n,e)}function fR(n,e,t,r){Zl()||Tt(!1);let{navigator:s}=ne.useContext(Yi),{matches:o}=ne.useContext(Qi),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let h=eu(),y;if(e){var v;let P=typeof e=="string"?Ji(e):e;f==="/"||(v=P.pathname)!=null&&v.startsWith(f)||Tt(!1),y=P}else y=h;let E=y.pathname||"/",C=E;if(f!=="/"){let P=f.replace(/^\//,"").split("/");C="/"+E.replace(/^\//,"").split("/").slice(P.length).join("/")}let M=GA(n,{pathname:C}),U=yR(M&&M.map(P=>Object.assign({},P,{params:Object.assign({},c,P.params),pathname:$s([f,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?f:$s([f,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),o,t,r);return e&&U?ne.createElement(Pd.Provider,{value:{location:Bl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Bs.Pop}},U):U}function hR(){let n=TR(),e=oR(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),t?ne.createElement("pre",{style:s},t):null,null)}const pR=ne.createElement(hR,null);class mR extends ne.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ne.createElement(Qi.Provider,{value:this.props.routeContext},ne.createElement(vw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gR(n){let{routeContext:e,match:t,children:r}=n,s=ne.useContext(Zp);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),ne.createElement(Qi.Provider,{value:e},r)}function yR(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if((o=t)!=null&&o.errors)n=t.matches;else return null}let l=n,c=(s=t)==null?void 0:s.errors;if(c!=null){let y=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id]));y>=0||Tt(!1),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,h=-1;if(t&&r&&r.v7_partialHydration)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=y),v.route.id){let{loaderData:E,errors:C}=t,M=v.route.loader&&E[v.route.id]===void 0&&(!C||C[v.route.id]===void 0);if(v.route.lazy||M){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((y,v,E)=>{let C,M=!1,U=null,P=null;t&&(C=c&&v.route.id?c[v.route.id]:void 0,U=v.route.errorElement||pR,f&&(h<0&&E===0?(SR("route-fallback"),M=!0,P=null):h===E&&(M=!0,P=v.route.hydrateFallbackElement||null)));let $=e.concat(l.slice(0,E+1)),Q=()=>{let Y;return C?Y=U:M?Y=P:v.route.Component?Y=ne.createElement(v.route.Component,null):v.route.element?Y=v.route.element:Y=y,ne.createElement(gR,{match:v,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:Y})};return t&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?ne.createElement(mR,{location:t.location,revalidation:t.revalidation,component:U,error:C,children:Q(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):Q()},null)}var ww=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(ww||{}),Sw=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Sw||{});function _R(n){let e=ne.useContext(Zp);return e||Tt(!1),e}function vR(n){let e=ne.useContext(lR);return e||Tt(!1),e}function ER(n){let e=ne.useContext(Qi);return e||Tt(!1),e}function Iw(n){let e=ER(),t=e.matches[e.matches.length-1];return t.route.id||Tt(!1),t.route.id}function TR(){var n;let e=ne.useContext(vw),t=vR(),r=Iw();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function wR(){let{router:n}=_R(ww.UseNavigateStable),e=Iw(Sw.UseNavigateStable),t=ne.useRef(!1);return Ew(()=>{t.current=!0}),ne.useCallback(function(s,o){o===void 0&&(o={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Bl({fromRouteId:e},o)))},[n,e])}const b_={};function SR(n,e,t){b_[n]||(b_[n]=!0)}function Ni(n){Tt(!1)}function IR(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Bs.Pop,navigator:o,static:l=!1,future:c}=n;Zl()&&Tt(!1);let f=e.replace(/^\/*/,"/"),h=ne.useMemo(()=>({basename:f,navigator:o,static:l,future:Bl({v7_relativeSplatPath:!1},c)}),[f,c,o,l]);typeof r=="string"&&(r=Ji(r));let{pathname:y="/",search:v="",hash:E="",state:C=null,key:M="default"}=r,U=ne.useMemo(()=>{let P=jp(y,f);return P==null?null:{location:{pathname:P,search:v,hash:E,state:C,key:M},navigationType:s}},[f,y,v,E,C,M,s]);return U==null?null:ne.createElement(Yi.Provider,{value:h},ne.createElement(Pd.Provider,{children:t,value:U}))}function CR(n){let{children:e,location:t}=n;return dR(rp(e),t)}new Promise(()=>{});function rp(n,e){e===void 0&&(e=[]);let t=[];return ne.Children.forEach(n,(r,s)=>{if(!ne.isValidElement(r))return;let o=[...e,s];if(r.type===ne.Fragment){t.push.apply(t,rp(r.props.children,o));return}r.type!==Ni&&Tt(!1),!r.props.index||!r.props.children||Tt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=rp(r.props.children,o)),t.push(l)}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sp(){return sp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sp.apply(this,arguments)}function AR(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function RR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function PR(n,e){return n.button===0&&(!e||e==="_self")&&!RR(n)}function ip(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function kR(n,e){let t=ip(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(o=>{t.append(s,o)})}),t}const xR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],bR="6";try{window.__reactRouterVersion=bR}catch{}const NR="startTransition",N_=xA[NR];function DR(n){let{basename:e,children:t,future:r,window:s}=n,o=ne.useRef();o.current==null&&(o.current=FA({window:s,v5Compat:!0}));let l=o.current,[c,f]=ne.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},y=ne.useCallback(v=>{h&&N_?N_(()=>f(v)):f(v)},[f,h]);return ne.useLayoutEffect(()=>l.listen(y),[l,y]),ne.createElement(IR,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:r})}const MR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fa=ne.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:o,replace:l,state:c,target:f,to:h,preventScrollReset:y,unstable_viewTransition:v}=e,E=AR(e,xR),{basename:C}=ne.useContext(Yi),M,U=!1;if(typeof h=="string"&&LR.test(h)&&(M=h,MR))try{let Y=new URL(window.location.href),ee=h.startsWith("//")?new URL(Y.protocol+h):new URL(h),X=jp(ee.pathname,C);ee.origin===Y.origin&&X!=null?h=X+ee.search+ee.hash:U=!0}catch{}let P=uR(h,{relative:s}),$=UR(h,{replace:l,state:c,target:f,preventScrollReset:y,relative:s,unstable_viewTransition:v});function Q(Y){r&&r(Y),Y.defaultPrevented||$(Y)}return ne.createElement("a",sp({},E,{href:M||P,onClick:U||o?r:Q,ref:t,target:f}))});var D_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(D_||(D_={}));var M_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(M_||(M_={}));function UR(n,e){let{target:t,replace:r,state:s,preventScrollReset:o,relative:l,unstable_viewTransition:c}=e===void 0?{}:e,f=Xi(),h=eu(),y=Tw(n,{relative:l});return ne.useCallback(v=>{if(PR(v,t)){v.preventDefault();let E=r!==void 0?r:Xc(h)===Xc(y);f(n,{replace:E,state:s,preventScrollReset:o,relative:l,unstable_viewTransition:c})}},[h,f,y,r,s,t,n,o,l,c])}function Cw(n){let e=ne.useRef(ip(n)),t=ne.useRef(!1),r=eu(),s=ne.useMemo(()=>kR(r.search,t.current?null:e.current),[r.search]),o=Xi(),l=ne.useCallback((c,f)=>{const h=ip(typeof c=="function"?c(s):c);t.current=!0,o("?"+h,f)},[o,s]);return[s,l]}function kd(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var Wo={exports:{}},Dh,L_;function FR(){if(L_)return Dh;L_=1,Dh=n;function n(e,t,r,s){if(typeof r!="function")throw new Error("method for before hook must be a function");return s||(s={}),Array.isArray(t)?t.reverse().reduce(function(o,l){return n.bind(null,e,l,o,s)},r)():Promise.resolve().then(function(){return e.registry[t]?e.registry[t].reduce(function(o,l){return l.hook.bind(null,o,s)},r)():r(s)})}return Dh}var Mh,U_;function VR(){if(U_)return Mh;U_=1,Mh=n;function n(e,t,r,s){var o=s;e.registry[r]||(e.registry[r]=[]),t==="before"&&(s=function(l,c){return Promise.resolve().then(o.bind(null,c)).then(l.bind(null,c))}),t==="after"&&(s=function(l,c){var f;return Promise.resolve().then(l.bind(null,c)).then(function(h){return f=h,o(f,c)}).then(function(){return f})}),t==="error"&&(s=function(l,c){return Promise.resolve().then(l.bind(null,c)).catch(function(f){return o(f,c)})}),e.registry[r].push({hook:s,orig:o})}return Mh}var Lh,F_;function OR(){if(F_)return Lh;F_=1,Lh=n;function n(e,t,r){if(e.registry[t]){var s=e.registry[t].map(function(o){return o.orig}).indexOf(r);s!==-1&&e.registry[t].splice(s,1)}}return Lh}var V_;function GR(){if(V_)return Wo.exports;V_=1;var n=FR(),e=VR(),t=OR(),r=Function.bind,s=r.bind(r);function o(y,v,E){var C=s(t,null).apply(null,E?[v,E]:[v]);y.api={remove:C},y.remove=C,["before","error","after","wrap"].forEach(function(M){var U=E?[v,M,E]:[v,M];y[M]=y.api[M]=s(e,null).apply(null,U)})}function l(){var y="h",v={registry:{}},E=n.bind(null,v,y);return o(E,v,y),E}function c(){var y={registry:{}},v=n.bind(null,y);return o(v,y),v}var f=!1;function h(){return f||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),f=!0),c()}return h.Singular=l.bind(),h.Collection=c.bind(),Wo.exports=h,Wo.exports.Hook=h,Wo.exports.Singular=h.Singular,Wo.exports.Collection=h.Collection,Wo.exports}var BR=GR(),qR="9.0.6",HR=`octokit-endpoint.js/${qR} ${kd()}`,$R={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":HR},mediaType:{format:""}};function zR(n){return n?Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=n[t],e),{}):{}}function WR(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;const e=Object.getPrototypeOf(n);if(e===null)return!0;const t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function Aw(n,e){const t=Object.assign({},n);return Object.keys(e).forEach(r=>{WR(e[r])?r in n?t[r]=Aw(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function O_(n){for(const e in n)n[e]===void 0&&delete n[e];return n}function op(n,e,t){var s;if(typeof e=="string"){let[o,l]=e.split(" ");t=Object.assign(l?{method:o,url:l}:{url:o},t)}else t=Object.assign({},e);t.headers=zR(t.headers),O_(t),O_(t.headers);const r=Aw(n||{},t);return t.url==="/graphql"&&(n&&((s=n.mediaType.previews)!=null&&s.length)&&(r.mediaType.previews=n.mediaType.previews.filter(o=>!r.mediaType.previews.includes(o)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(o=>o.replace(/-preview/,""))),r}function KR(n,e){const t=/\?/.test(n)?"&":"?",r=Object.keys(e);return r.length===0?n:n+t+r.map(s=>s==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${s}=${encodeURIComponent(e[s])}`).join("&")}var JR=/\{[^{}}]+\}/g;function YR(n){return n.replace(new RegExp("(?:^\\W+)|(?:(?<!\\W)\\W+$)","g"),"").split(/,/)}function QR(n){const e=n.match(JR);return e?e.map(YR).reduce((t,r)=>t.concat(r),[]):[]}function G_(n,e){const t={__proto__:null};for(const r of Object.keys(n))e.indexOf(r)===-1&&(t[r]=n[r]);return t}function Rw(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function ea(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Sl(n,e,t){return e=n==="+"||n==="#"?Rw(e):ea(e),t?ea(t)+"="+e:e}function Ko(n){return n!=null}function Uh(n){return n===";"||n==="&"||n==="?"}function XR(n,e,t,r){var s=n[t],o=[];if(Ko(s)&&s!=="")if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")s=s.toString(),r&&r!=="*"&&(s=s.substring(0,parseInt(r,10))),o.push(Sl(e,s,Uh(e)?t:""));else if(r==="*")Array.isArray(s)?s.filter(Ko).forEach(function(l){o.push(Sl(e,l,Uh(e)?t:""))}):Object.keys(s).forEach(function(l){Ko(s[l])&&o.push(Sl(e,s[l],l))});else{const l=[];Array.isArray(s)?s.filter(Ko).forEach(function(c){l.push(Sl(e,c))}):Object.keys(s).forEach(function(c){Ko(s[c])&&(l.push(ea(c)),l.push(Sl(e,s[c].toString())))}),Uh(e)?o.push(ea(t)+"="+l.join(",")):l.length!==0&&o.push(l.join(","))}else e===";"?Ko(s)&&o.push(ea(t)):s===""&&(e==="&"||e==="?")?o.push(ea(t)+"="):s===""&&o.push("");return o}function jR(n){return{expand:ZR.bind(null,n)}}function ZR(n,e){var t=["+","#",".","/",";","?","&"];return n=n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,s,o){if(s){let c="";const f=[];if(t.indexOf(s.charAt(0))!==-1&&(c=s.charAt(0),s=s.substr(1)),s.split(/,/g).forEach(function(h){var y=/([^:\*]*)(?::(\d+)|(\*))?/.exec(h);f.push(XR(e,c,y[1],y[2]||y[3]))}),c&&c!=="+"){var l=",";return c==="?"?l="&":c!=="#"&&(l=c),(f.length!==0?c:"")+f.join(l)}else return f.join(",")}else return Rw(o)}),n==="/"?n:n.replace(/\/$/,"")}function Pw(n){var y;let e=n.method.toUpperCase(),t=(n.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},n.headers),s,o=G_(n,["method","baseUrl","url","headers","request","mediaType"]);const l=QR(t);t=jR(t).expand(o),/^http/.test(t)||(t=n.baseUrl+t);const c=Object.keys(n).filter(v=>l.includes(v)).concat("baseUrl"),f=G_(o,c);if(!/application\/octet-stream/i.test(r.accept)&&(n.mediaType.format&&(r.accept=r.accept.split(/,/).map(v=>v.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${n.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&(y=n.mediaType.previews)!=null&&y.length)){const v=r.accept.match(new RegExp("(?<![\\w-])[\\w-]+(?=-preview)","g"))||[];r.accept=v.concat(n.mediaType.previews).map(E=>{const C=n.mediaType.format?`.${n.mediaType.format}`:"+json";return`application/vnd.github.${E}-preview${C}`}).join(",")}return["GET","HEAD"].includes(e)?t=KR(t,f):"data"in f?s=f.data:Object.keys(f).length&&(s=f),!r["content-type"]&&typeof s<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof s>"u"&&(s=""),Object.assign({method:e,url:t,headers:r},typeof s<"u"?{body:s}:null,n.request?{request:n.request}:null)}function eP(n,e,t){return Pw(op(n,e,t))}function kw(n,e){const t=op(n,e),r=eP.bind(null,t);return Object.assign(r,{DEFAULTS:t,defaults:kw.bind(null,t),merge:op.bind(null,t),parse:Pw})}var tP=kw(null,$R);class B_ extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Ac={exports:{}},Fh,q_;function nP(){if(q_)return Fh;q_=1,Fh=n;function n(e,t){if(e&&t)return n(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(s){r[s]=e[s]}),r;function r(){for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];var l=e.apply(this,s),c=s[s.length-1];return typeof l=="function"&&l!==c&&Object.keys(c).forEach(function(f){l[f]=c[f]}),l}}return Fh}var H_;function rP(){if(H_)return Ac.exports;H_=1;var n=nP();Ac.exports=n(e),Ac.exports.strict=n(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(r){var s=function(){return s.called?s.value:(s.called=!0,s.value=r.apply(this,arguments))};return s.called=!1,s}function t(r){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=r.apply(this,arguments)},o=r.name||"Function wrapped with `once`";return s.onceError=o+" shouldn't be called more than once",s.called=!1,s}return Ac.exports}var sP=rP();const xw=Yp(sP);var iP=xw(n=>console.warn(n)),oP=xw(n=>console.warn(n)),Il=class extends Error{constructor(n,e,t){super(n),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=e;let r;"headers"in t&&typeof t.headers<"u"&&(r=t.headers),"response"in t&&(this.response=t.response,r=t.response.headers);const s=Object.assign({},t.request);t.request.headers.authorization&&(s.headers=Object.assign({},t.request.headers,{authorization:t.request.headers.authorization.replace(new RegExp("(?<! ) .*$")," [REDACTED]")})),s.url=s.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=s,Object.defineProperty(this,"code",{get(){return iP(new B_("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),e}}),Object.defineProperty(this,"headers",{get(){return oP(new B_("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),r||{}}})}},aP="8.4.1";function lP(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;const e=Object.getPrototypeOf(n);if(e===null)return!0;const t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function uP(n){return n.arrayBuffer()}function $_(n){var c,f,h,y;const e=n.request&&n.request.log?n.request.log:console,t=((c=n.request)==null?void 0:c.parseSuccessResponseBody)!==!1;(lP(n.body)||Array.isArray(n.body))&&(n.body=JSON.stringify(n.body));let r={},s,o,{fetch:l}=globalThis;if((f=n.request)!=null&&f.fetch&&(l=n.request.fetch),!l)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");return l(n.url,{method:n.method,body:n.body,redirect:(h=n.request)==null?void 0:h.redirect,headers:n.headers,signal:(y=n.request)==null?void 0:y.signal,...n.body&&{duplex:"half"}}).then(async v=>{o=v.url,s=v.status;for(const E of v.headers)r[E[0]]=E[1];if("deprecation"in r){const E=r.link&&r.link.match(/<([^<>]+)>; rel="deprecation"/),C=E&&E.pop();e.warn(`[@octokit/request] "${n.method} ${n.url}" is deprecated. It is scheduled to be removed on ${r.sunset}${C?`. See ${C}`:""}`)}if(!(s===204||s===205)){if(n.method==="HEAD"){if(s<400)return;throw new Il(v.statusText,s,{response:{url:o,status:s,headers:r,data:void 0},request:n})}if(s===304)throw new Il("Not modified",s,{response:{url:o,status:s,headers:r,data:await Vh(v)},request:n});if(s>=400){const E=await Vh(v);throw new Il(cP(E),s,{response:{url:o,status:s,headers:r,data:E},request:n})}return t?await Vh(v):v.body}}).then(v=>({status:s,url:o,headers:r,data:v})).catch(v=>{if(v instanceof Il)throw v;if(v.name==="AbortError")throw v;let E=v.message;throw v.name==="TypeError"&&"cause"in v&&(v.cause instanceof Error?E=v.cause.message:typeof v.cause=="string"&&(E=v.cause)),new Il(E,500,{request:n})})}async function Vh(n){const e=n.headers.get("content-type");return/application\/json/.test(e)?n.json().catch(()=>n.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?n.text():uP(n)}function cP(n){if(typeof n=="string")return n;let e;return"documentation_url"in n?e=` - ${n.documentation_url}`:e="","message"in n?Array.isArray(n.errors)?`${n.message}: ${n.errors.map(JSON.stringify).join(", ")}${e}`:`${n.message}${e}`:`Unknown error: ${JSON.stringify(n)}`}function ap(n,e){const t=n.defaults(e);return Object.assign(function(s,o){const l=t.merge(s,o);if(!l.request||!l.request.hook)return $_(t.parse(l));const c=(f,h)=>$_(t.parse(t.merge(f,h)));return Object.assign(c,{endpoint:t,defaults:ap.bind(null,t)}),l.request.hook(c,l)},{endpoint:t,defaults:ap.bind(null,t)})}var lp=ap(tP,{headers:{"user-agent":`octokit-request.js/${aP} ${kd()}`}}),dP="7.1.1";function fP(n){return`Request failed due to following response errors:
`+n.errors.map(e=>` - ${e.message}`).join(`
`)}var hP=class extends Error{constructor(n,e,t){super(fP(t)),this.request=n,this.headers=e,this.response=t,this.name="GraphqlResponseError",this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},pP=["method","baseUrl","url","headers","request","query","mediaType"],mP=["query","method","url"],z_=/\/api\/v3\/?$/;function gP(n,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const l in t)if(mP.includes(l))return Promise.reject(new Error(`[@octokit/graphql] "${l}" cannot be used as variable name`))}const r=typeof e=="string"?Object.assign({query:e},t):e,s=Object.keys(r).reduce((l,c)=>pP.includes(c)?(l[c]=r[c],l):(l.variables||(l.variables={}),l.variables[c]=r[c],l),{}),o=r.baseUrl||n.endpoint.DEFAULTS.baseUrl;return z_.test(o)&&(s.url=o.replace(z_,"/api/graphql")),n(s).then(l=>{if(l.data.errors){const c={};for(const f of Object.keys(l.headers))c[f]=l.headers[f];throw new hP(s,c,l.data)}return l.data.data})}function em(n,e){const t=n.defaults(e);return Object.assign((s,o)=>gP(t,s,o),{defaults:em.bind(null,t),endpoint:t.endpoint})}em(lp,{headers:{"user-agent":`octokit-graphql.js/${dP} ${kd()}`},method:"POST",url:"/graphql"});function yP(n){return em(n,{method:"POST",url:"/graphql"})}var _P=/^v1\./,vP=/^ghs_/,EP=/^ghu_/;async function TP(n){const e=n.split(/\./).length===3,t=_P.test(n)||vP.test(n),r=EP.test(n);return{type:"token",token:n,tokenType:e?"app":t?"installation":r?"user-to-server":"oauth"}}function wP(n){return n.split(/\./).length===3?`bearer ${n}`:`token ${n}`}async function SP(n,e,t,r){const s=e.endpoint.merge(t,r);return s.headers.authorization=wP(n),e(s)}var IP=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(TP.bind(null,e),{hook:SP.bind(null,e)})},bw="5.2.2",W_=()=>{},CP=console.warn.bind(console),AP=console.error.bind(console);function RP(n={}){return typeof n.debug!="function"&&(n.debug=W_),typeof n.info!="function"&&(n.info=W_),typeof n.warn!="function"&&(n.warn=CP),typeof n.error!="function"&&(n.error=AP),n}var K_=`octokit-core.js/${bw} ${kd()}`,Bi,PP=(Bi=class{static defaults(e){return class extends this{constructor(...r){const s=r[0]||{};if(typeof e=="function"){super(e(s));return}super(Object.assign({},e,s,s.userAgent&&e.userAgent?{userAgent:`${s.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var s;const t=this.plugins;return s=class extends this{},s.plugins=t.concat(e.filter(l=>!t.includes(l))),s}constructor(e={}){const t=new BR.Collection,r={baseUrl:lp.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=e.userAgent?`${e.userAgent} ${K_}`:K_,e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=lp.defaults(r),this.graphql=yP(this.request).defaults(r),this.log=RP(e.log),this.hook=t,e.authStrategy){const{authStrategy:o,...l}=e,c=o(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:l},e.auth));t.wrap("request",c.hook),this.auth=c}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const o=IP(e.auth);t.wrap("request",o.hook),this.auth=o}const s=this.constructor;for(let o=0;o<s.plugins.length;++o)Object.assign(this,s.plugins[o](this,e))}},Bi.VERSION=bw,Bi.plugins=[],Bi),kP="4.0.1";function Nw(n){n.hook.wrap("request",(e,t)=>{n.log.debug("request",t);const r=Date.now(),s=n.request.endpoint.parse(t),o=s.url.replace(t.baseUrl,"");return e(t).then(l=>(n.log.info(`${s.method} ${o} - ${l.status} in ${Date.now()-r}ms`),l)).catch(l=>{throw n.log.info(`${s.method} ${o} - ${l.status} in ${Date.now()-r}ms`),l})})}Nw.VERSION=kP;var xP="9.2.2";function bP(n){if(!n.data)return{...n,data:[]};if(!("total_count"in n.data&&!("url"in n.data)))return n;const t=n.data.incomplete_results,r=n.data.repository_selection,s=n.data.total_count;delete n.data.incomplete_results,delete n.data.repository_selection,delete n.data.total_count;const o=Object.keys(n.data)[0],l=n.data[o];return n.data=l,typeof t<"u"&&(n.data.incomplete_results=t),typeof r<"u"&&(n.data.repository_selection=r),n.data.total_count=s,n}function tm(n,e,t){const r=typeof e=="function"?e.endpoint(t):n.request.endpoint(e,t),s=typeof e=="function"?e:n.request,o=r.method,l=r.headers;let c=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!c)return{done:!0};try{const f=await s({method:o,url:c,headers:l}),h=bP(f);return c=((h.headers.link||"").match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:h}}catch(f){if(f.status!==409)throw f;return c="",{value:{status:200,headers:{},data:[]}}}}})}}function Dw(n,e,t,r){return typeof t=="function"&&(r=t,t=void 0),Mw(n,[],tm(n,e,t)[Symbol.asyncIterator](),r)}function Mw(n,e,t,r){return t.next().then(s=>{if(s.done)return e;let o=!1;function l(){o=!0}return e=e.concat(r?r(s.value,l):s.value.data),o?e:Mw(n,e,t,r)})}Object.assign(Dw,{iterator:tm});function Lw(n){return{paginate:Object.assign(Dw.bind(null,n),{iterator:tm.bind(null,n)})}}Lw.VERSION=xP;var NP="10.4.1",DP={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repositories/{repository_id}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repositories/{repository_id}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repositories/{repository_id}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.cancelImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#cancel-an-import"}],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors",{},{deprecated:"octokit.rest.migrations.getCommitAuthors() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-commit-authors"}],getImportStatus:["GET /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.getImportStatus() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-an-import-status"}],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files",{},{deprecated:"octokit.rest.migrations.getLargeFiles() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-large-files"}],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}",{},{deprecated:"octokit.rest.migrations.mapCommitAuthor() is deprecated, see https://docs.github.com/rest/migrations/source-imports#map-a-commit-author"}],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs",{},{deprecated:"octokit.rest.migrations.setLfsPreference() is deprecated, see https://docs.github.com/rest/migrations/source-imports#update-git-lfs-preference"}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.startImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#start-an-import"}],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"],updateImport:["PATCH /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.updateImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#update-an-import"}]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}"],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createCustomOrganizationRole:["POST /orgs/{org}/organization-roles"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteCustomOrganizationRole:["DELETE /orgs/{org}/organization-roles/{role_id}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}"],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers"],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],patchCustomOrganizationRole:["PATCH /orgs/{org}/organization-roles/{role_id}"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}"],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createTagProtection:["POST /repos/{owner}/{repo}/tags/protection"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteTagProtection:["DELETE /repos/{owner}/{repo}/tags/protection/{tag_protection_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTagProtection:["GET /repos/{owner}/{repo}/tags/protection"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},MP=DP,Vi=new Map;for(const[n,e]of Object.entries(MP))for(const[t,r]of Object.entries(e)){const[s,o,l]=r,[c,f]=s.split(/ /),h=Object.assign({method:c,url:f},o);Vi.has(n)||Vi.set(n,new Map),Vi.get(n).set(t,{scope:n,methodName:t,endpointDefaults:h,decorations:l})}var LP={has({scope:n},e){return Vi.get(n).has(e)},getOwnPropertyDescriptor(n,e){return{value:this.get(n,e),configurable:!0,writable:!0,enumerable:!0}},defineProperty(n,e,t){return Object.defineProperty(n.cache,e,t),!0},deleteProperty(n,e){return delete n.cache[e],!0},ownKeys({scope:n}){return[...Vi.get(n).keys()]},set(n,e,t){return n.cache[e]=t},get({octokit:n,scope:e,cache:t},r){if(t[r])return t[r];const s=Vi.get(e).get(r);if(!s)return;const{endpointDefaults:o,decorations:l}=s;return l?t[r]=FP(n,e,r,o,l):t[r]=n.request.defaults(o),t[r]}};function UP(n){const e={};for(const t of Vi.keys())e[t]=new Proxy({octokit:n,scope:t,cache:{}},LP);return e}function FP(n,e,t,r,s){const o=n.request.defaults(r);function l(...c){let f=o.endpoint.merge(...c);if(s.mapToData)return f=Object.assign({},f,{data:f[s.mapToData],[s.mapToData]:void 0}),o(f);if(s.renamed){const[h,y]=s.renamed;n.log.warn(`octokit.${e}.${t}() has been renamed to octokit.${h}.${y}()`)}if(s.deprecated&&n.log.warn(s.deprecated),s.renamedParameters){const h=o.endpoint.merge(...c);for(const[y,v]of Object.entries(s.renamedParameters))y in h&&(n.log.warn(`"${y}" parameter is deprecated for "octokit.${e}.${t}()". Use "${v}" instead`),v in h||(h[v]=h[y]),delete h[y]);return o(h)}return o(...c)}return Object.assign(l,o)}function Uw(n){const e=UP(n);return{...e,rest:e}}Uw.VERSION=NP;var VP="20.0.2",OP=PP.plugin(Nw,Uw,Lw).defaults({userAgent:`octokit-rest.js/${VP}`});let We=null;const Rc=new Map,GP=n=>{const e=n.map(t=>(t.name||"").toLowerCase());return e.some(t=>t==="critical"||t.includes("p0")||t.includes("sev: critical")||t.includes("severity: critical"))?"critical":e.some(t=>t==="high"||t.includes("p1")||t.includes("priority: high")||t.includes("severity: high"))?"high":e.some(t=>t==="medium"||t.includes("p2")||t.includes("priority: medium")||t.includes("severity: medium"))?"medium":e.some(t=>t==="low"||t.includes("p3")||t.includes("priority: low")||t.includes("severity: low")||t.includes("minor"))?"low":"medium"},kt={initialize:n=>{We=new OP({auth:n})},getIssueComments:async(n,e,t,r)=>{if(!We)throw new Error("GitHub service not initialized. Please configure your token.");const s=`${n}/${e}/${t}`;if(r){const l=Rc.get(s);if(l&&l.timestamp===r)return l.data}const{data:o}=await We.issues.listComments({owner:n,repo:e,issue_number:t,per_page:100});return r&&(Rc.size>500&&Rc.clear(),Rc.set(s,{timestamp:r,data:o})),o},getIssues:async(n,e,t="open")=>{if(!We)throw new Error("GitHub service not initialized. Please configure your token.");try{return(await We.issues.listForRepo({owner:n,repo:e,state:t,sort:"updated",direction:"desc",per_page:50})).data.filter(s=>!s.pull_request).map(s=>{var o;return{id:s.id,number:s.number,title:s.title,description:s.body||"",state:s.state,priority:GP(s.labels),labels:s.labels.map(l=>l.name),type:((o=s.labels.find(l=>l.name==="bug"||l.name==="feature"||l.name==="ui"))==null?void 0:o.name)||"bug",createdAt:s.created_at,updatedAt:s.updated_at,commentsCount:s.comments,reporter:{name:s.user.login,avatar:s.user.avatar_url},comments:[]}})}catch(r){return console.error("Failed to fetch issues",r),[]}},getPullRequests:async(n,e)=>{if(!We)throw new Error("GitHub service not initialized");try{return(await We.pulls.list({owner:n,repo:e,state:"open",sort:"updated",direction:"desc"})).data.map(r=>({id:r.id,number:r.number,title:r.title,branch:r.head.ref,targetBranch:r.base.ref,author:{name:r.user.login,avatar:r.user.avatar_url},hasConflicts:!1,isDraft:r.draft,status:r.draft?"draft":"open",filesChanged:0}))}catch(t){return console.error("Failed to fetch PRs",t),[]}},getPullRequest:async(n,e,t)=>{if(!We)throw new Error("GitHub service not initialized");const{data:r}=await We.pulls.get({owner:n,repo:e,pull_number:t});return r},createIssue:async(n,e,t,r)=>{if(!We)throw new Error("GitHub service not initialized");return(await We.issues.create({owner:t,repo:r,title:e.title||"",body:e.description,labels:e.labels})).data},addComment:async(n,e,t,r)=>{if(!We)throw new Error("GitHub service not initialized");return await We.issues.createComment({owner:n,repo:e,issue_number:t,body:r}),!0},updateIssueStatus:async(n,e,t,r)=>{if(!We)throw new Error("GitHub service not initialized");return await We.issues.update({owner:n,repo:e,issue_number:t,state:r}),!0},mergePR:async(n,e,t)=>{if(!We)throw new Error("GitHub service not initialized");return await We.pulls.merge({owner:n,repo:e,pull_number:t}),!0},denyPR:async(n,e,t)=>{if(!We)throw new Error("GitHub service not initialized");return await We.pulls.update({owner:n,repo:e,pull_number:t,state:"closed"}),!0},updatePR:async(n,e,t,r)=>{if(!We)throw new Error("GitHub service not initialized");const{isDraft:s,...o}=r;if(s!==void 0){const{data:l}=await We.pulls.get({owner:n,repo:e,pull_number:t}),c=s?"mutation($id: ID!) { convertPullRequestToDraft(input: {pullRequestId: $id}) { clientMutationId } }":"mutation($id: ID!) { markPullRequestReadyForReview(input: {pullRequestId: $id}) { clientMutationId } }";await We.request("POST /graphql",{query:c,variables:{id:l.node_id}})}return Object.keys(o).length>0&&await We.pulls.update({owner:n,repo:e,pull_number:t,...o}),!0},addReviewer:async(n,e,t,r)=>{if(!We)throw new Error("GitHub service not initialized");return await We.pulls.requestReviewers({owner:n,repo:e,pull_number:t,reviewers:[r]}),!0},approvePR:async(n,e,t)=>{if(!We)throw new Error("GitHub service not initialized");return await We.pulls.createReview({owner:n,repo:e,pull_number:t,event:"APPROVE"}),!0},updateBranch:async(n,e,t)=>{if(!We)throw new Error("GitHub service not initialized");try{return await We.pulls.updateBranch({owner:n,repo:e,pull_number:t}),!0}catch(r){return console.error("Auto-resolve (update branch) failed",r),!1}},getOpenIssueCount:async(n,e)=>{if(!We)throw new Error("GitHub service not initialized");return(await We.search.issuesAndPullRequests({q:`repo:${n}/${e} is:issue is:open`})).data.total_count}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=()=>{};var J_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},qP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],f=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Vw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,f=s+2<n.length,h=f?n[s+2]:0,y=o>>2,v=(o&3)<<4|c>>4;let E=(c&15)<<2|h>>6,C=h&63;f||(C=64,l||(E=64)),r.push(t[y],t[v],t[E],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Fw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||h==null||v==null)throw new HP;const E=o<<2|c>>4;if(r.push(E),h!==64){const C=c<<4&240|h>>2;if(r.push(C),v!==64){const M=h<<6&192|v;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class HP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $P=function(n){const e=Fw(n);return Vw.encodeByteArray(e,!0)},jc=function(n){return $P(n).replace(/\./g,"")},Ow=function(n){try{return Vw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=()=>zP().__FIREBASE_DEFAULTS__,KP=()=>{if(typeof process>"u"||typeof J_>"u")return;const n=J_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},JP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ow(n[1]);return e&&JSON.parse(e)},xd=()=>{try{return BP()||WP()||KP()||JP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Gw=n=>{var e,t;return(t=(e=xd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},YP=n=>{const e=Gw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Bw=()=>{var n;return(n=xd())==null?void 0:n.config},qw=n=>{var e;return(e=xd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[jc(JSON.stringify(t)),jc(JSON.stringify(l)),""].join(".")}const Ml={};function jP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ml))Ml[e]?n.emulator.push(e):n.prod.push(e);return n}function ZP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Y_=!1;function $w(n,e){if(typeof window>"u"||typeof document>"u"||!va(window.location.host)||Ml[n]===e||Ml[n]||Y_)return;Ml[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",o=jP().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function c(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,C){E.setAttribute("width","24"),E.setAttribute("id",C),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function h(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Y_=!0,l()},E}function y(E,C){E.setAttribute("id",C),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=ZP(r),C=t("text"),M=document.getElementById(C)||document.createElement("span"),U=t("learnmore"),P=document.getElementById(U)||document.createElement("a"),$=t("preprendIcon"),Q=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Y=E.element;c(Y),y(P,U);const ee=h();f(Q,$),Y.append(Q,M,P,ee),document.body.appendChild(Y)}o?(M.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ek(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function tk(){var e;const n=(e=xd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nm(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sk(){const n=Qt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ik(){return!tk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rm(){try{return typeof indexedDB=="object"}catch{return!1}}function sm(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}function zw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="FirebaseError";class jn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ok,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ji.prototype.create)}}class ji{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?ak(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new jn(s,c,r)}}function ak(n,e){return n.replace(lk,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const lk=/\{\$([^}]+)}/g;function uk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Js(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(Q_(o)&&Q_(l)){if(!Js(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Q_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Pl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function ck(n,e){const t=new dk(n,e);return t.subscribe.bind(t)}class dk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Oh),s.error===void 0&&(s.error=Oh),s.complete===void 0&&(s.complete=Oh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Oh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=1e3,pk=2,mk=14400*1e3,gk=.5;function X_(n,e=hk,t=pk){const r=e*Math.pow(t,n),s=Math.round(gk*r*(Math.random()-.5)*2);return Math.min(mk,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n){return n&&n._delegate?n._delegate:n}class Xn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new QP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vk(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_k(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _k(n){return n===Di?void 0:n}function vk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const Tk={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},wk=Ue.INFO,Sk={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Ik=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Sk[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bd{constructor(e){this.name=e,this._logLevel=wk,this._logHandler=Ik,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Ck=(n,e)=>e.some(t=>n instanceof t);let j_,Z_;function Ak(){return j_||(j_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rk(){return Z_||(Z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ww=new WeakMap,up=new WeakMap,Kw=new WeakMap,Gh=new WeakMap,im=new WeakMap;function Pk(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(zs(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Ww.set(t,n)}).catch(()=>{}),im.set(e,n),e}function kk(n){if(up.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});up.set(n,e)}let cp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Kw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xk(n){cp=n(cp)}function bk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Bh(this),e,...t);return Kw.set(r,e.sort?e.sort():[e]),zs(r)}:Rk().includes(n)?function(...e){return n.apply(Bh(this),e),zs(Ww.get(this))}:function(...e){return zs(n.apply(Bh(this),e))}}function Nk(n){return typeof n=="function"?bk(n):(n instanceof IDBTransaction&&kk(n),Ck(n,Ak())?new Proxy(n,cp):n)}function zs(n){if(n instanceof IDBRequest)return Pk(n);if(Gh.has(n))return Gh.get(n);const e=Nk(n);return e!==n&&(Gh.set(n,e),im.set(e,n)),e}const Bh=n=>im.get(n);function Jw(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=zs(l);return r&&l.addEventListener("upgradeneeded",f=>{r(zs(l.result),f.oldVersion,f.newVersion,zs(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Dk=["get","getKey","getAll","getAllKeys","count"],Mk=["put","add","delete","clear"],qh=new Map;function ev(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qh.get(e))return qh.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Mk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Dk.includes(t)))return;const o=async function(l,...c){const f=this.transaction(l,s?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&f.done]))[0]};return qh.set(e,o),o}xk(n=>({...n,get:(e,t,r)=>ev(e,t)||n.get(e,t,r),has:(e,t)=>!!ev(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Uk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Uk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dp="@firebase/app",tv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new bd("@firebase/app"),Fk="@firebase/app-compat",Vk="@firebase/analytics-compat",Ok="@firebase/analytics",Gk="@firebase/app-check-compat",Bk="@firebase/app-check",qk="@firebase/auth",Hk="@firebase/auth-compat",$k="@firebase/database",zk="@firebase/data-connect",Wk="@firebase/database-compat",Kk="@firebase/functions",Jk="@firebase/functions-compat",Yk="@firebase/installations",Qk="@firebase/installations-compat",Xk="@firebase/messaging",jk="@firebase/messaging-compat",Zk="@firebase/performance",ex="@firebase/performance-compat",tx="@firebase/remote-config",nx="@firebase/remote-config-compat",rx="@firebase/storage",sx="@firebase/storage-compat",ix="@firebase/firestore",ox="@firebase/ai",ax="@firebase/firestore-compat",lx="firebase",ux="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",cx={[dp]:"fire-core",[Fk]:"fire-core-compat",[Ok]:"fire-analytics",[Vk]:"fire-analytics-compat",[Bk]:"fire-app-check",[Gk]:"fire-app-check-compat",[qk]:"fire-auth",[Hk]:"fire-auth-compat",[$k]:"fire-rtdb",[zk]:"fire-data-connect",[Wk]:"fire-rtdb-compat",[Kk]:"fire-fn",[Jk]:"fire-fn-compat",[Yk]:"fire-iid",[Qk]:"fire-iid-compat",[Xk]:"fire-fcm",[jk]:"fire-fcm-compat",[Zk]:"fire-perf",[ex]:"fire-perf-compat",[tx]:"fire-rc",[nx]:"fire-rc-compat",[rx]:"fire-gcs",[sx]:"fire-gcs-compat",[ix]:"fire-fst",[ax]:"fire-fst-compat",[ox]:"fire-vertex","fire-js":"fire-js",[lx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc=new Map,dx=new Map,hp=new Map;function nv(n,e){try{n.container.addComponent(e)}catch(t){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cr(n){const e=n.name;if(hp.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,n);for(const t of Zc.values())nv(t,n);for(const t of dx.values())nv(t,n);return!0}function Zi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new ji("app","Firebase",fx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=ux;function Yw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:fp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ws.create("bad-app-name",{appName:String(s)});if(t||(t=Bw()),!t)throw Ws.create("no-options");const o=Zc.get(s);if(o){if(Js(t,o.options)&&Js(r,o.config))return o;throw Ws.create("duplicate-app",{appName:s})}const l=new Ek(s);for(const f of hp.values())l.addComponent(f);const c=new hx(t,r,l);return Zc.set(s,c),c}function om(n=fp){const e=Zc.get(n);if(!e&&n===fp&&Bw())return Yw();if(!e)throw Ws.create("no-app",{appName:n});return e}function Nn(n,e,t){let r=cx[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(l.join(" "));return}Cr(new Xn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="firebase-heartbeat-database",mx=1,ql="firebase-heartbeat-store";let Hh=null;function Qw(){return Hh||(Hh=Jw(px,mx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ql)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ws.create("idb-open",{originalErrorMessage:n.message})})),Hh}async function gx(n){try{const t=(await Qw()).transaction(ql),r=await t.objectStore(ql).get(Xw(n));return await t.done,r}catch(e){if(e instanceof jn)jr.warn(e.message);else{const t=Ws.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jr.warn(t.message)}}}async function rv(n,e){try{const r=(await Qw()).transaction(ql,"readwrite");await r.objectStore(ql).put(e,Xw(n)),await r.done}catch(t){if(t instanceof jn)jr.warn(t.message);else{const r=Ws.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});jr.warn(r.message)}}}function Xw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=1024,_x=30;class vx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>_x){const l=wx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sv(),{heartbeatsToSend:r,unsentEntries:s}=Ex(this._heartbeatsCache.heartbeats),o=jc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return jr.warn(t),""}}}function sv(){return new Date().toISOString().substring(0,10)}function Ex(n,e=yx){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),iv(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),iv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Tx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rm()?sm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iv(n){return jc(JSON.stringify({version:2,heartbeats:n})).length}function wx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(n){Cr(new Xn("platform-logger",e=>new Lk(e),"PRIVATE")),Cr(new Xn("heartbeat",e=>new vx(e),"PRIVATE")),Nn(dp,tv,n),Nn(dp,tv,"esm2020"),Nn("fire-js","")}Sx("");var Ix="firebase",Cx="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(Ix,Cx,"app");function jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ax=jw,Zw=new ji("auth","Firebase",jw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new bd("@firebase/auth");function Rx(n,...e){ed.logLevel<=Ue.WARN&&ed.warn(`Auth (${Ea}): ${n}`,...e)}function Oc(n,...e){ed.logLevel<=Ue.ERROR&&ed.error(`Auth (${Ea}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(n,...e){throw lm(n,...e)}function Jn(n,...e){return lm(n,...e)}function am(n,e,t){const r={...Ax(),[e]:t};return new ji("auth","Firebase",r).create(e,{appName:n.name})}function Qr(n){return am(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Px(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Mn(n,"argument-error"),am(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Zw.create(n,...e)}function Ie(n,e,...t){if(!n)throw lm(e,...t)}function Jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Oc(e),new Error(e)}function Zr(n,e){n||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function kx(){return ov()==="http:"||ov()==="https:"}function ov(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kx()||nm()||"connection"in navigator)?navigator.onLine:!0}function bx(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zr(t>e,"Short delay should be less than long delay!"),this.isMobile=ek()||rk()}get(){return xx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(n,e){Zr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mx=new nu(3e4,6e4);function ti(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ni(n,e,t,r,s={}){return t0(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=tu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...o};return nk()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&va(n.emulatorConfig.host)&&(h.credentials="include"),e0.fetch()(await n0(n,n.config.apiHost,t,c),h)})}async function t0(n,e,t){n._canInitEmulator=!1;const r={...Nx,...e};try{const s=new Ux(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Pc(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,h]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Pc(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Pc(n,"user-disabled",l);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw am(n,y,h);Mn(n,y)}}catch(s){if(s instanceof jn)throw s;Mn(n,"network-request-failed",{message:String(s)})}}async function ru(n,e,t,r,s={}){const o=await ni(n,e,t,r,s);return"mfaPendingCredential"in o&&Mn(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function n0(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?um(n.config,s):`${n.config.apiScheme}://${s}`;return Dx.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function Lx(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ux{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Jn(this.auth,"network-request-failed")),Mx.get())})}}function Pc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Jn(n,e,r);return s.customData._tokenResponse=t,s}function av(n){return n!==void 0&&n.enterprise!==void 0}class Fx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Lx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Vx(n,e){return ni(n,"GET","/v2/recaptchaConfig",ti(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(n,e){return ni(n,"POST","/v1/accounts:delete",e)}async function td(n,e){return ni(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gx(n,e=!1){const t=Ot(n),r=await t.getIdToken(e),s=cm(r);Ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Ll($h(s.auth_time)),issuedAtTime:Ll($h(s.iat)),expirationTime:Ll($h(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function $h(n){return Number(n)*1e3}function cm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ow(t);return s?JSON.parse(s):(Oc("Failed to decode base64 JWT payload"),null)}catch(s){return Oc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function lv(n){const e=cm(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof jn&&Bx(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Bx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ll(this.lastLoginAt),this.creationTime=Ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(n){var v;const e=n.auth,t=await n.getIdToken(),r=await Hl(n,td(e,{idToken:t}));Ie(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=(v=s.providerUserInfo)!=null&&v.length?r0(s.providerUserInfo):[],l=$x(n.providerData,o),c=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),h=c?f:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new mp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,y)}async function Hx(n){const e=Ot(n);await nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $x(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function r0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(n,e){const t=await t0(n,{},async()=>{const r=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await n0(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return n.emulatorConfig&&va(n.emulatorConfig.host)&&(f.credentials="include"),e0.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Wx(n,e){return ni(n,"POST","/v2/accounts:revokeToken",ti(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=lv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await zx(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new ra;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ie(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Wn{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new qx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Hl(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Gx(this,e)}reload(){return Hx(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await nd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await Hl(this,Ox(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:E,isAnonymous:C,providerData:M,stsTokenManager:U}=t;Ie(v&&U,e,"internal-error");const P=ra.fromJSON(this.name,U);Ie(typeof v=="string",e,"internal-error"),Fs(r,e.name),Fs(s,e.name),Ie(typeof E=="boolean",e,"internal-error"),Ie(typeof C=="boolean",e,"internal-error"),Fs(o,e.name),Fs(l,e.name),Fs(c,e.name),Fs(f,e.name),Fs(h,e.name),Fs(y,e.name);const $=new Wn({uid:v,auth:e,email:s,emailVerified:E,displayName:r,isAnonymous:C,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:P,createdAt:h,lastLoginAt:y});return M&&Array.isArray(M)&&($.providerData=M.map(Q=>({...Q}))),f&&($._redirectEventId=f),$}static async _fromIdTokenResponse(e,t,r=!1){const s=new ra;s.updateFromServerResponse(t);const o=new Wn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await nd(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ie(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?r0(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new ra;c.updateFromIdToken(r);const f=new Wn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new mp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new Map;function Yr(n){Zr(n instanceof Function,"Expected a class definition");let e=uv.get(n);return e?(Zr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}s0.type="NONE";const cv=s0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n,e,t){return`firebase:${n}:${e}:${t}`}class sa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Gc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Gc("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await td(this.auth,{idToken:e}).catch(()=>{});return t?Wn._fromGetAccountInfoResponse(this.auth,t,e):null}return Wn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new sa(Yr(cv),e,r);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Yr(cv);const l=Gc(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const y=await h._get(l);if(y){let v;if(typeof y=="string"){const E=await td(e,{idToken:y}).catch(()=>{});if(!E)break;v=await Wn._fromGetAccountInfoResponse(e,E,y)}else v=Wn._fromJSON(e,y);h!==o&&(c=v),o=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new sa(o,e,r):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new sa(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(i0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c0(e))return"Blackberry";if(d0(e))return"Webos";if(o0(e))return"Safari";if((e.includes("chrome/")||a0(e))&&!e.includes("edge/"))return"Chrome";if(u0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function i0(n=Qt()){return/firefox\//i.test(n)}function o0(n=Qt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a0(n=Qt()){return/crios\//i.test(n)}function l0(n=Qt()){return/iemobile/i.test(n)}function u0(n=Qt()){return/android/i.test(n)}function c0(n=Qt()){return/blackberry/i.test(n)}function d0(n=Qt()){return/webos/i.test(n)}function dm(n=Qt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Kx(n=Qt()){var e;return dm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Jx(){return sk()&&document.documentMode===10}function f0(n=Qt()){return dm(n)||u0(n)||d0(n)||c0(n)||/windows phone/i.test(n)||l0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(n,e=[]){let t;switch(n){case"Browser":t=dv(Qt());break;case"Worker":t=`${dv(Qt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ea}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(n,e={}){return ni(n,"GET","/v2/passwordPolicy",ti(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=6;class jx{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Xx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fv(this),this.idTokenSubscription=new fv(this),this.beforeStateQueue=new Yx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yr(t)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await sa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await td(this,{idToken:e}),r=await Wn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(vn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,c=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&(f!=null&&f.user)&&(r=f.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Qr(this));const t=e?Ot(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qx(this),t=new jx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ji("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Wx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Yr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await sa.create(this,[Yr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Rx(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ri(n){return Ot(n)}class fv{constructor(e){this.auth=e,this.observer=null,this.addObserver=ck(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eb(n){Nd=n}function p0(n){return Nd.loadJS(n)}function tb(){return Nd.recaptchaEnterpriseScript}function nb(){return Nd.gapiScript}function rb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sb{constructor(){this.enterprise=new ib}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ib{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ob="recaptcha-enterprise",m0="NO_RECAPTCHA";class ab{constructor(e){this.type=ob,this.auth=ri(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{Vx(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new Fx(f);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(f=>{c(f)})})}function s(o,l,c){const f=window.grecaptcha;av(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(m0)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sb().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&av(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=tb();f.length!==0&&(f+=c),p0(f).then(()=>{s(c,o,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function hv(n,e,t,r=!1,s=!1){const o=new ab(n);let l;if(s)l=m0;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function gp(n,e,t,r,s){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await hv(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await hv(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n,e){const t=Zi(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Js(o,e??{}))return s;Mn(s,"already-initialized")}return t.initialize({options:e})}function ub(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Yr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cb(n,e,t){const r=ri(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=g0(e),{host:l,port:c}=db(e),f=c===null?"":`:${c}`,h={url:`${o}//${l}${f}/`},y=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Js(h,r.config.emulator)&&Js(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,va(l)?(Hw(`${o}//${l}${f}`),$w("Auth",!0)):fb()}function g0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function db(n){const e=g0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:pv(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:pv(l)}}}function pv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,t){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}async function hb(n,e){return ni(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pb(n,e){return ru(n,"POST","/v1/accounts:signInWithPassword",ti(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(n,e){return ru(n,"POST","/v1/accounts:signInWithEmailLink",ti(n,e))}async function gb(n,e){return ru(n,"POST","/v1/accounts:signInWithEmailLink",ti(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends fm{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new $l(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new $l(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gp(e,t,"signInWithPassword",pb);case"emailLink":return mb(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gp(e,r,"signUpPassword",hb);case"emailLink":return gb(e,{idToken:t,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(n,e){return ru(n,"POST","/v1/accounts:signInWithIdp",ti(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="http://localhost";class qi extends fm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new qi(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return ia(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ia(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ia(e,t)}buildRequest(){const e={requestUri:yb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vb(n){const e=Rl(Pl(n)).link,t=e?Rl(Pl(e)).deep_link_id:null,r=Rl(Pl(n)).deep_link_id;return(r?Rl(Pl(r)).link:null)||r||t||e||n}class hm{constructor(e){const t=Rl(Pl(e)),r=t.apiKey??null,s=t.oobCode??null,o=_b(t.mode??null);Ie(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=vb(e);try{return new hm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.providerId=Ta.PROVIDER_ID}static credential(e,t){return $l._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=hm.parseLink(t);return Ie(r,"argument-error"),$l._fromEmailAndCode(e,r.code,r.tenantId)}}Ta.PROVIDER_ID="password";Ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends pm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends su{constructor(){super("facebook.com")}static credential(e){return qi._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qi._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Kr.credential(t,r)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends su{constructor(){super("github.com")}static credential(e){return qi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.GITHUB_SIGN_IN_METHOD="github.com";Os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends su{constructor(){super("twitter.com")}static credential(e,t){return qi._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Gs.credential(t,r)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(n,e){return ru(n,"POST","/v1/accounts:signUp",ti(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Wn._fromIdTokenResponse(e,r,s),l=mv(r);return new Hi({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=mv(r);return new Hi({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function mv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends jn{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new rd(e,t,r,s)}}function y0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(n,o,e,r):o})}async function Tb(n,e,t=!1){const r=await Hl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Hi._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(n,e,t=!1){const{auth:r}=n;if(vn(r.app))return Promise.reject(Qr(r));const s="reauthenticate";try{const o=await Hl(n,y0(r,s,e,n),t);Ie(o.idToken,r,"internal-error");const l=cm(o.idToken);Ie(l,r,"internal-error");const{sub:c}=l;return Ie(n.uid===c,r,"user-mismatch"),Hi._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Mn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _0(n,e,t=!1){if(vn(n.app))return Promise.reject(Qr(n));const r="signIn",s=await y0(n,r,e),o=await Hi._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function Sb(n,e){return _0(ri(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v0(n){const e=ri(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ib(n,e,t){if(vn(n.app))return Promise.reject(Qr(n));const r=ri(n),l=await gp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Eb).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&v0(n),f}),c=await Hi._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function Cb(n,e,t){return vn(n.app)?Promise.reject(Qr(n)):Sb(Ot(n),Ta.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&v0(n),r})}function Ab(n,e,t,r){return Ot(n).onIdTokenChanged(e,t,r)}function Rb(n,e,t){return Ot(n).beforeAuthStateChanged(e,t)}function Pb(n,e,t,r){return Ot(n).onAuthStateChanged(e,t,r)}function kb(n){return Ot(n).signOut()}const sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=1e3,bb=10;class T0 extends E0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);Jx()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bb):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},xb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}T0.type="LOCAL";const Nb=T0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends E0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}w0.type="SESSION";const S0=w0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Dd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async h=>h(t.origin,o)),f=await Db(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const h=mm("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(E.data.response);break;default:clearTimeout(y),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return window}function Lb(n){Er().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function Ub(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fb(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Vb(){return I0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="firebaseLocalStorageDb",Ob=1,id="firebaseLocalStorage",A0="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Md(n,e){return n.transaction([id],e?"readwrite":"readonly").objectStore(id)}function Gb(){const n=indexedDB.deleteDatabase(C0);return new iu(n).toPromise()}function yp(){const n=indexedDB.open(C0,Ob);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(id,{keyPath:A0})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(id)?e(r):(r.close(),await Gb(),e(await yp()))})})}async function gv(n,e,t){const r=Md(n,!0).put({[A0]:e,value:t});return new iu(r).toPromise()}async function Bb(n,e){const t=Md(n,!1).get(e),r=await new iu(t).toPromise();return r===void 0?null:r.value}function yv(n,e){const t=Md(n,!0).delete(e);return new iu(t).toPromise()}const qb=800,Hb=3;class R0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Hb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return I0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dd._getInstance(Vb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Ub(),!this.activeServiceWorker)return;this.sender=new Mb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Fb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yp();return await gv(e,sd,"1"),await yv(e,sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Bb(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Md(s,!1).getAll();return new iu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}R0.type="LOCAL";const $b=R0;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(n,e){return e?Yr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends fm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ia(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ia(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ia(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zb(n){return _0(n.auth,new gm(n),n.bypassAuthState)}function Wb(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),wb(t,new gm(n),n.bypassAuthState)}async function Kb(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),Tb(t,new gm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zb;case"linkViaPopup":case"linkViaRedirect":return Kb;case"reauthViaPopup":case"reauthViaRedirect":return Wb;default:Mn(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=new nu(2e3,1e4);async function Yb(n,e,t){if(vn(n.app))return Promise.reject(Jn(n,"operation-not-supported-in-this-environment"));const r=ri(n);Px(n,e,pm);const s=P0(r,t);return new Li(r,"signInViaPopup",e,s).executeNotNull()}class Li extends k0{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Li.currentPopupAction&&Li.currentPopupAction.cancel(),Li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Zr(this.filter.length===1,"Popup operations only handle one event");const e=mm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Jb.get())};e()}}Li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="pendingRedirect",Bc=new Map;class Xb extends k0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Bc.get(this.auth._key());if(!e){try{const r=await jb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bc.set(this.auth._key(),e)}return this.bypassAuthState||Bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jb(n,e){const t=tN(e),r=eN(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function Zb(n,e){Bc.set(n._key(),e)}function eN(n){return Yr(n._redirectPersistence)}function tN(n){return Gc(Qb,n.config.apiKey,n.name)}async function nN(n,e,t=!1){if(vn(n.app))return Promise.reject(Qr(n));const r=ri(n),s=P0(r,e),l=await new Xb(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=600*1e3;class sN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!x0(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Jn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rN&&this.cachedEventUids.clear(),this.cachedEventUids.has(_v(e))}saveEventToCache(e){this.cachedEventUids.add(_v(e)),this.lastProcessedEventTime=Date.now()}}function _v(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function x0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return x0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(n,e={}){return ni(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lN=/^https?/;async function uN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oN(n);for(const t of e)try{if(cN(t))return}catch{}Mn(n,"unauthorized-domain")}function cN(n){const e=pp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!lN.test(t))return!1;if(aN.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new nu(3e4,6e4);function vv(){const n=Er().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fN(n){return new Promise((e,t)=>{var s,o,l;function r(){vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vv(),t(Jn(n,"network-request-failed"))},timeout:dN.get()})}if((o=(s=Er().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=Er().gapi)!=null&&l.load)r();else{const c=rb("iframefcb");return Er()[c]=()=>{gapi.load?r():t(Jn(n,"network-request-failed"))},p0(`${nb()}?onload=${c}`).catch(f=>t(f))}}).catch(e=>{throw qc=null,e})}let qc=null;function hN(n){return qc=qc||fN(n),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=new nu(5e3,15e3),mN="__/auth/iframe",gN="emulator/auth/iframe",yN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_N=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vN(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?um(e,gN):`https://${n.config.authDomain}/${mN}`,r={apiKey:e.apiKey,appName:n.name,v:Ea},s=_N.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${tu(r).slice(1)}`}async function EN(n){const e=await hN(n),t=Er().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:vN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yN,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Jn(n,"network-request-failed"),c=Er().setTimeout(()=>{o(l)},pN.get());function f(){Er().clearTimeout(c),s(r)}r.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wN=500,SN=600,IN="_blank",CN="http://localhost";class Ev{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AN(n,e,t,r=wN,s=SN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f={...TN,width:r.toString(),height:s.toString(),top:o,left:l},h=Qt().toLowerCase();t&&(c=a0(h)?IN:t),i0(h)&&(e=e||CN,f.scrollbars="yes");const y=Object.entries(f).reduce((E,[C,M])=>`${E}${C}=${M},`,"");if(Kx(h)&&c!=="_self")return RN(e||"",c),new Ev(null);const v=window.open(e||"",c,y);Ie(v,n,"popup-blocked");try{v.focus()}catch{}return new Ev(v)}function RN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="__/auth/handler",kN="emulator/auth/handler",xN=encodeURIComponent("fac");async function Tv(n,e,t,r,s,o){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ea,eventId:s};if(e instanceof pm){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",uk(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))l[y]=v}if(e instanceof su){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const f=await n._getAppCheckToken(),h=f?`#${xN}=${encodeURIComponent(f)}`:"";return`${bN(n)}?${tu(c).slice(1)}${h}`}function bN({config:n}){return n.emulator?um(n,kN):`https://${n.authDomain}/${PN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="webStorageSupport";class NN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S0,this._completeRedirectFn=nN,this._overrideRedirectResult=Zb}async _openPopup(e,t,r,s){var l;Zr((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await Tv(e,t,r,pp(),s);return AN(e,o,mm())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await Tv(e,t,r,pp(),s);return Lb(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Zr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await EN(e),r=new sN(e);return t.register("authEvent",s=>(Ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zh,{type:zh},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[zh];o!==void 0&&t(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return f0()||o0()||dm()}}const DN=NN;var wv="@firebase/auth",Sv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UN(n){Cr(new Xn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ie(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h0(n)},h=new Zx(r,s,o,f);return ub(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Cr(new Xn("auth-internal",e=>{const t=ri(e.getProvider("auth").getImmediate());return(r=>new MN(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(wv,Sv,LN(n)),Nn(wv,Sv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=300,VN=qw("authIdTokenMaxAge")||FN;let Iv=null;const ON=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VN)return;const s=t==null?void 0:t.token;Iv!==s&&(Iv=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GN(n=om()){const e=Zi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=lb(n,{popupRedirectResolver:DN,persistence:[$b,Nb,S0]}),r=qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=ON(o.toString());Rb(t,l,()=>l(t.currentUser)),Ab(t,c=>l(c))}}const s=Gw("auth");return s&&cb(t,`http://${s}`),t}function BN(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}eb({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Jn("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",BN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UN("Browser");var Cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ks,b0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function k(){}k.prototype=x.prototype,N.F=x.prototype,N.prototype=new k,N.prototype.constructor=N,N.D=function(L,F,B){for(var b=Array(arguments.length-2),De=2;De<arguments.length;De++)b[De-2]=arguments[De];return x.prototype[F].apply(L,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,x,k){k||(k=0);const L=Array(16);if(typeof x=="string")for(var F=0;F<16;++F)L[F]=x.charCodeAt(k++)|x.charCodeAt(k++)<<8|x.charCodeAt(k++)<<16|x.charCodeAt(k++)<<24;else for(F=0;F<16;++F)L[F]=x[k++]|x[k++]<<8|x[k++]<<16|x[k++]<<24;x=N.g[0],k=N.g[1],F=N.g[2];let B=N.g[3],b;b=x+(B^k&(F^B))+L[0]+3614090360&4294967295,x=k+(b<<7&4294967295|b>>>25),b=B+(F^x&(k^F))+L[1]+3905402710&4294967295,B=x+(b<<12&4294967295|b>>>20),b=F+(k^B&(x^k))+L[2]+606105819&4294967295,F=B+(b<<17&4294967295|b>>>15),b=k+(x^F&(B^x))+L[3]+3250441966&4294967295,k=F+(b<<22&4294967295|b>>>10),b=x+(B^k&(F^B))+L[4]+4118548399&4294967295,x=k+(b<<7&4294967295|b>>>25),b=B+(F^x&(k^F))+L[5]+1200080426&4294967295,B=x+(b<<12&4294967295|b>>>20),b=F+(k^B&(x^k))+L[6]+2821735955&4294967295,F=B+(b<<17&4294967295|b>>>15),b=k+(x^F&(B^x))+L[7]+4249261313&4294967295,k=F+(b<<22&4294967295|b>>>10),b=x+(B^k&(F^B))+L[8]+1770035416&4294967295,x=k+(b<<7&4294967295|b>>>25),b=B+(F^x&(k^F))+L[9]+2336552879&4294967295,B=x+(b<<12&4294967295|b>>>20),b=F+(k^B&(x^k))+L[10]+4294925233&4294967295,F=B+(b<<17&4294967295|b>>>15),b=k+(x^F&(B^x))+L[11]+2304563134&4294967295,k=F+(b<<22&4294967295|b>>>10),b=x+(B^k&(F^B))+L[12]+1804603682&4294967295,x=k+(b<<7&4294967295|b>>>25),b=B+(F^x&(k^F))+L[13]+4254626195&4294967295,B=x+(b<<12&4294967295|b>>>20),b=F+(k^B&(x^k))+L[14]+2792965006&4294967295,F=B+(b<<17&4294967295|b>>>15),b=k+(x^F&(B^x))+L[15]+1236535329&4294967295,k=F+(b<<22&4294967295|b>>>10),b=x+(F^B&(k^F))+L[1]+4129170786&4294967295,x=k+(b<<5&4294967295|b>>>27),b=B+(k^F&(x^k))+L[6]+3225465664&4294967295,B=x+(b<<9&4294967295|b>>>23),b=F+(x^k&(B^x))+L[11]+643717713&4294967295,F=B+(b<<14&4294967295|b>>>18),b=k+(B^x&(F^B))+L[0]+3921069994&4294967295,k=F+(b<<20&4294967295|b>>>12),b=x+(F^B&(k^F))+L[5]+3593408605&4294967295,x=k+(b<<5&4294967295|b>>>27),b=B+(k^F&(x^k))+L[10]+38016083&4294967295,B=x+(b<<9&4294967295|b>>>23),b=F+(x^k&(B^x))+L[15]+3634488961&4294967295,F=B+(b<<14&4294967295|b>>>18),b=k+(B^x&(F^B))+L[4]+3889429448&4294967295,k=F+(b<<20&4294967295|b>>>12),b=x+(F^B&(k^F))+L[9]+568446438&4294967295,x=k+(b<<5&4294967295|b>>>27),b=B+(k^F&(x^k))+L[14]+3275163606&4294967295,B=x+(b<<9&4294967295|b>>>23),b=F+(x^k&(B^x))+L[3]+4107603335&4294967295,F=B+(b<<14&4294967295|b>>>18),b=k+(B^x&(F^B))+L[8]+1163531501&4294967295,k=F+(b<<20&4294967295|b>>>12),b=x+(F^B&(k^F))+L[13]+2850285829&4294967295,x=k+(b<<5&4294967295|b>>>27),b=B+(k^F&(x^k))+L[2]+4243563512&4294967295,B=x+(b<<9&4294967295|b>>>23),b=F+(x^k&(B^x))+L[7]+1735328473&4294967295,F=B+(b<<14&4294967295|b>>>18),b=k+(B^x&(F^B))+L[12]+2368359562&4294967295,k=F+(b<<20&4294967295|b>>>12),b=x+(k^F^B)+L[5]+4294588738&4294967295,x=k+(b<<4&4294967295|b>>>28),b=B+(x^k^F)+L[8]+2272392833&4294967295,B=x+(b<<11&4294967295|b>>>21),b=F+(B^x^k)+L[11]+1839030562&4294967295,F=B+(b<<16&4294967295|b>>>16),b=k+(F^B^x)+L[14]+4259657740&4294967295,k=F+(b<<23&4294967295|b>>>9),b=x+(k^F^B)+L[1]+2763975236&4294967295,x=k+(b<<4&4294967295|b>>>28),b=B+(x^k^F)+L[4]+1272893353&4294967295,B=x+(b<<11&4294967295|b>>>21),b=F+(B^x^k)+L[7]+4139469664&4294967295,F=B+(b<<16&4294967295|b>>>16),b=k+(F^B^x)+L[10]+3200236656&4294967295,k=F+(b<<23&4294967295|b>>>9),b=x+(k^F^B)+L[13]+681279174&4294967295,x=k+(b<<4&4294967295|b>>>28),b=B+(x^k^F)+L[0]+3936430074&4294967295,B=x+(b<<11&4294967295|b>>>21),b=F+(B^x^k)+L[3]+3572445317&4294967295,F=B+(b<<16&4294967295|b>>>16),b=k+(F^B^x)+L[6]+76029189&4294967295,k=F+(b<<23&4294967295|b>>>9),b=x+(k^F^B)+L[9]+3654602809&4294967295,x=k+(b<<4&4294967295|b>>>28),b=B+(x^k^F)+L[12]+3873151461&4294967295,B=x+(b<<11&4294967295|b>>>21),b=F+(B^x^k)+L[15]+530742520&4294967295,F=B+(b<<16&4294967295|b>>>16),b=k+(F^B^x)+L[2]+3299628645&4294967295,k=F+(b<<23&4294967295|b>>>9),b=x+(F^(k|~B))+L[0]+4096336452&4294967295,x=k+(b<<6&4294967295|b>>>26),b=B+(k^(x|~F))+L[7]+1126891415&4294967295,B=x+(b<<10&4294967295|b>>>22),b=F+(x^(B|~k))+L[14]+2878612391&4294967295,F=B+(b<<15&4294967295|b>>>17),b=k+(B^(F|~x))+L[5]+4237533241&4294967295,k=F+(b<<21&4294967295|b>>>11),b=x+(F^(k|~B))+L[12]+1700485571&4294967295,x=k+(b<<6&4294967295|b>>>26),b=B+(k^(x|~F))+L[3]+2399980690&4294967295,B=x+(b<<10&4294967295|b>>>22),b=F+(x^(B|~k))+L[10]+4293915773&4294967295,F=B+(b<<15&4294967295|b>>>17),b=k+(B^(F|~x))+L[1]+2240044497&4294967295,k=F+(b<<21&4294967295|b>>>11),b=x+(F^(k|~B))+L[8]+1873313359&4294967295,x=k+(b<<6&4294967295|b>>>26),b=B+(k^(x|~F))+L[15]+4264355552&4294967295,B=x+(b<<10&4294967295|b>>>22),b=F+(x^(B|~k))+L[6]+2734768916&4294967295,F=B+(b<<15&4294967295|b>>>17),b=k+(B^(F|~x))+L[13]+1309151649&4294967295,k=F+(b<<21&4294967295|b>>>11),b=x+(F^(k|~B))+L[4]+4149444226&4294967295,x=k+(b<<6&4294967295|b>>>26),b=B+(k^(x|~F))+L[11]+3174756917&4294967295,B=x+(b<<10&4294967295|b>>>22),b=F+(x^(B|~k))+L[2]+718787259&4294967295,F=B+(b<<15&4294967295|b>>>17),b=k+(B^(F|~x))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(F+(b<<21&4294967295|b>>>11))&4294967295,N.g[2]=N.g[2]+F&4294967295,N.g[3]=N.g[3]+B&4294967295}r.prototype.v=function(N,x){x===void 0&&(x=N.length);const k=x-this.blockSize,L=this.C;let F=this.h,B=0;for(;B<x;){if(F==0)for(;B<=k;)s(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<x;)if(L[F++]=N.charCodeAt(B++),F==this.blockSize){s(this,L),F=0;break}}else for(;B<x;)if(L[F++]=N[B++],F==this.blockSize){s(this,L),F=0;break}}this.h=F,this.o+=x},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var k=N.length-8;k<N.length;++k)N[k]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,k=0;k<4;++k)for(let L=0;L<32;L+=8)N[x++]=this.g[k]>>>L&255;return N};function o(N,x){var k=c;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=x(N)}function l(N,x){this.h=x;const k=[];let L=!0;for(let F=N.length-1;F>=0;F--){const B=N[F]|0;L&&B==x||(k[F]=B,L=!1)}this.g=k}var c={};function f(N){return-128<=N&&N<128?o(N,function(x){return new l([x|0],x<0?-1:0)}):new l([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return v;if(N<0)return P(h(-N));const x=[];let k=1;for(let L=0;N>=k;L++)x[L]=N/k|0,k*=4294967296;return new l(x,0)}function y(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return P(y(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(x,8));let L=v;for(let B=0;B<N.length;B+=8){var F=Math.min(8,N.length-B);const b=parseInt(N.substring(B,B+F),x);F<8?(F=h(Math.pow(x,F)),L=L.j(F).add(h(b))):(L=L.j(k),L=L.add(h(b)))}return L}var v=f(0),E=f(1),C=f(16777216);n=l.prototype,n.m=function(){if(U(this))return-P(this).m();let N=0,x=1;for(let k=0;k<this.g.length;k++){const L=this.i(k);N+=(L>=0?L:4294967296+L)*x,x*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(M(this))return"0";if(U(this))return"-"+P(this).toString(N);const x=h(Math.pow(N,6));var k=this;let L="";for(;;){const F=ee(k,x).g;k=$(k,F.j(x));let B=((k.g.length>0?k.g[0]:k.h)>>>0).toString(N);if(k=F,M(k))return B+L;for(;B.length<6;)B="0"+B;L=B+L}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function M(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function U(N){return N.h==-1}n.l=function(N){return N=$(this,N),U(N)?-1:M(N)?0:1};function P(N){const x=N.g.length,k=[];for(let L=0;L<x;L++)k[L]=~N.g[L];return new l(k,~N.h).add(E)}n.abs=function(){return U(this)?P(this):this},n.add=function(N){const x=Math.max(this.g.length,N.g.length),k=[];let L=0;for(let F=0;F<=x;F++){let B=L+(this.i(F)&65535)+(N.i(F)&65535),b=(B>>>16)+(this.i(F)>>>16)+(N.i(F)>>>16);L=b>>>16,B&=65535,b&=65535,k[F]=b<<16|B}return new l(k,k[k.length-1]&-2147483648?-1:0)};function $(N,x){return N.add(P(x))}n.j=function(N){if(M(this)||M(N))return v;if(U(this))return U(N)?P(this).j(P(N)):P(P(this).j(N));if(U(N))return P(this.j(P(N)));if(this.l(C)<0&&N.l(C)<0)return h(this.m()*N.m());const x=this.g.length+N.g.length,k=[];for(var L=0;L<2*x;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(let F=0;F<N.g.length;F++){const B=this.i(L)>>>16,b=this.i(L)&65535,De=N.i(F)>>>16,it=N.i(F)&65535;k[2*L+2*F]+=b*it,Q(k,2*L+2*F),k[2*L+2*F+1]+=B*it,Q(k,2*L+2*F+1),k[2*L+2*F+1]+=b*De,Q(k,2*L+2*F+1),k[2*L+2*F+2]+=B*De,Q(k,2*L+2*F+2)}for(N=0;N<x;N++)k[N]=k[2*N+1]<<16|k[2*N];for(N=x;N<2*x;N++)k[N]=0;return new l(k,0)};function Q(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function Y(N,x){this.g=N,this.h=x}function ee(N,x){if(M(x))throw Error("division by zero");if(M(N))return new Y(v,v);if(U(N))return x=ee(P(N),x),new Y(P(x.g),P(x.h));if(U(x))return x=ee(N,P(x)),new Y(P(x.g),x.h);if(N.g.length>30){if(U(N)||U(x))throw Error("slowDivide_ only works with positive integers.");for(var k=E,L=x;L.l(N)<=0;)k=X(k),L=X(L);var F=ie(k,1),B=ie(L,1);for(L=ie(L,2),k=ie(k,2);!M(L);){var b=B.add(L);b.l(N)<=0&&(F=F.add(k),B=b),L=ie(L,1),k=ie(k,1)}return x=$(N,F.j(x)),new Y(F,x)}for(F=v;N.l(x)>=0;){for(k=Math.max(1,Math.floor(N.m()/x.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),B=h(k),b=B.j(x);U(b)||b.l(N)>0;)k-=L,B=h(k),b=B.j(x);M(B)&&(B=E),F=F.add(B),N=$(N,b)}return new Y(F,N)}n.B=function(N){return ee(this,N).h},n.and=function(N){const x=Math.max(this.g.length,N.g.length),k=[];for(let L=0;L<x;L++)k[L]=this.i(L)&N.i(L);return new l(k,this.h&N.h)},n.or=function(N){const x=Math.max(this.g.length,N.g.length),k=[];for(let L=0;L<x;L++)k[L]=this.i(L)|N.i(L);return new l(k,this.h|N.h)},n.xor=function(N){const x=Math.max(this.g.length,N.g.length),k=[];for(let L=0;L<x;L++)k[L]=this.i(L)^N.i(L);return new l(k,this.h^N.h)};function X(N){const x=N.g.length+1,k=[];for(let L=0;L<x;L++)k[L]=N.i(L)<<1|N.i(L-1)>>>31;return new l(k,N.h)}function ie(N,x){const k=x>>5;x%=32;const L=N.g.length-k,F=[];for(let B=0;B<L;B++)F[B]=x>0?N.i(B+k)>>>x|N.i(B+k+1)<<32-x:N.i(B+k);return new l(F,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,b0=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=y,Ks=l}).apply(typeof Cv<"u"?Cv:typeof self<"u"?self:typeof window<"u"?window:{});var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N0,kl,D0,Hc,_p,M0,L0,U0;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof kc=="object"&&kc];for(var w=0;w<m.length;++w){var S=m[w];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function s(m,w){if(w)e:{var S=r;m=m.split(".");for(var A=0;A<m.length-1;A++){var H=m[A];if(!(H in S))break e;S=S[H]}m=m[m.length-1],A=S[m],w=w(A),w!=A&&w!=null&&e(S,m,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(w){var S=[],A;for(A in w)Object.prototype.hasOwnProperty.call(w,A)&&S.push([A,w[A]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function f(m,w,S){return m.call.apply(m.bind,arguments)}function h(m,w,S){return h=f,h.apply(null,arguments)}function y(m,w){var S=Array.prototype.slice.call(arguments,1);return function(){var A=S.slice();return A.push.apply(A,arguments),m.apply(this,A)}}function v(m,w){function S(){}S.prototype=w.prototype,m.Z=w.prototype,m.prototype=new S,m.prototype.constructor=m,m.Ob=function(A,H,K){for(var le=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)le[ke-2]=arguments[ke];return w.prototype[H].apply(A,le)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function C(m){const w=m.length;if(w>0){const S=Array(w);for(let A=0;A<w;A++)S[A]=m[A];return S}return[]}function M(m,w){for(let A=1;A<arguments.length;A++){const H=arguments[A];var S=typeof H;if(S=S!="object"?S:H?Array.isArray(H)?"array":S:"null",S=="array"||S=="object"&&typeof H.length=="number"){S=m.length||0;const K=H.length||0;m.length=S+K;for(let le=0;le<K;le++)m[S+le]=H[le]}else m.push(H)}}class U{constructor(w,S){this.i=w,this.j=S,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function P(m){l.setTimeout(()=>{throw m},0)}function $(){var m=N;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class Q{constructor(){this.h=this.g=null}add(w,S){const A=Y.get();A.set(w,S),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new U(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(w,S){this.h=w,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let X,ie=!1,N=new Q,x=()=>{const m=Promise.resolve(void 0);X=()=>{m.then(k)}};function k(){for(var m;m=$();){try{m.h.call(m.g)}catch(S){P(S)}var w=Y;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}ie=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};l.addEventListener("test",S,w),l.removeEventListener("test",S,w)}catch{}return m})();function b(m){return/^[\s\xa0]*$/.test(m)}function De(m,w){F.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}v(De,F),De.prototype.init=function(m,w){const S=this.type=m.type,A=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(S=="mouseover"?w=m.fromElement:S=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var it="closure_listenable_"+(Math.random()*1e6|0),Qe=0;function Ke(m,w,S,A,H){this.listener=m,this.proxy=null,this.src=w,this.type=S,this.capture=!!A,this.ha=H,this.key=++Qe,this.da=this.fa=!1}function ue(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ve(m,w,S){for(const A in m)w.call(S,m[A],A,m)}function V(m,w){for(const S in m)w.call(void 0,m[S],S,m)}function Z(m){const w={};for(const S in m)w[S]=m[S];return w}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(m,w){let S,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(S in A)m[S]=A[S];for(let K=0;K<J.length;K++)S=J[K],Object.prototype.hasOwnProperty.call(A,S)&&(m[S]=A[S])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,w,S,A,H){const K=m.toString();m=this.g[K],m||(m=this.g[K]=[],this.h++);const le=Ne(m,w,A,H);return le>-1?(w=m[le],S||(w.fa=!1)):(w=new Ke(w,this.src,K,!!A,H),w.fa=S,m.push(w)),w};function be(m,w){const S=w.type;if(S in m.g){var A=m.g[S],H=Array.prototype.indexOf.call(A,w,void 0),K;(K=H>=0)&&Array.prototype.splice.call(A,H,1),K&&(ue(w),m.g[S].length==0&&(delete m.g[S],m.h--))}}function Ne(m,w,S,A){for(let H=0;H<m.length;++H){const K=m[H];if(!K.da&&K.listener==w&&K.capture==!!S&&K.ha==A)return H}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Le={};function rt(m,w,S,A,H){if(Array.isArray(w)){for(let K=0;K<w.length;K++)rt(m,w[K],S,A,H);return null}return S=ka(S),m&&m[it]?m.J(w,S,c(A)?!!A.capture:!1,H):ii(m,w,S,!1,A,H)}function ii(m,w,S,A,H,K){if(!w)throw Error("Invalid event type");const le=c(H)?!!H.capture:!!H;let ke=Pr(m);if(ke||(m[Ge]=ke=new me(m)),S=ke.add(w,S,A,le,K),S.proxy)return S;if(A=is(),S.proxy=A,A.src=m,A.listener=S,m.addEventListener)B||(H=le),H===void 0&&(H=!1),m.addEventListener(w.toString(),A,H);else if(m.attachEvent)m.attachEvent(as(w.toString()),A);else if(m.addListener&&m.removeListener)m.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return S}function is(){function m(S){return w.call(m.src,m.listener,S)}const w=io;return m}function os(m,w,S,A,H){if(Array.isArray(w))for(var K=0;K<w.length;K++)os(m,w[K],S,A,H);else A=c(A)?!!A.capture:!!A,S=ka(S),m&&m[it]?(m=m.i,K=String(w).toString(),K in m.g&&(w=m.g[K],S=Ne(w,S,A,H),S>-1&&(ue(w[S]),Array.prototype.splice.call(w,S,1),w.length==0&&(delete m.g[K],m.h--)))):m&&(m=Pr(m))&&(w=m.g[w.toString()],m=-1,w&&(m=Ne(w,S,A,H)),(S=m>-1?w[m]:null)&&Tn(S))}function Tn(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[it])be(w.i,m);else{var S=m.type,A=m.proxy;w.removeEventListener?w.removeEventListener(S,A,m.capture):w.detachEvent?w.detachEvent(as(S),A):w.addListener&&w.removeListener&&w.removeListener(A),(S=Pr(w))?(be(S,m),S.h==0&&(S.src=null,w[Ge]=null)):ue(m)}}}function as(m){return m in Le?Le[m]:Le[m]="on"+m}function io(m,w){if(m.da)m=!0;else{w=new De(w,this);const S=m.listener,A=m.ha||m.src;m.fa&&Tn(m),m=S.call(A,w)}return m}function Pr(m){return m=m[Ge],m instanceof me?m:null}var er="__closure_events_fn_"+(Math.random()*1e9>>>0);function ka(m){return typeof m=="function"?m:(m[er]||(m[er]=function(w){return m.handleEvent(w)}),m[er])}function gt(){L.call(this),this.i=new me(this),this.M=this,this.G=null}v(gt,L),gt.prototype[it]=!0,gt.prototype.removeEventListener=function(m,w,S,A){os(this,m,w,S,A)};function ft(m,w){var S,A=m.G;if(A)for(S=[];A;A=A.G)S.push(A);if(m=m.M,A=w.type||w,typeof w=="string")w=new F(w,m);else if(w instanceof F)w.target=w.target||m;else{var H=w;w=new F(A,m),he(w,H)}H=!0;let K,le;if(S)for(le=S.length-1;le>=0;le--)K=w.g=S[le],H=Un(K,A,!0,w)&&H;if(K=w.g=m,H=Un(K,A,!0,w)&&H,H=Un(K,A,!1,w)&&H,S)for(le=0;le<S.length;le++)K=w.g=S[le],H=Un(K,A,!1,w)&&H}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const S=m.g[w];for(let A=0;A<S.length;A++)ue(S[A]);delete m.g[w],m.h--}}this.G=null},gt.prototype.J=function(m,w,S,A){return this.i.add(String(m),w,!1,S,A)},gt.prototype.K=function(m,w,S,A){return this.i.add(String(m),w,!0,S,A)};function Un(m,w,S,A){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let H=!0;for(let K=0;K<w.length;++K){const le=w[K];if(le&&!le.da&&le.capture==S){const ke=le.listener,ht=le.ha||le.src;le.fa&&be(m.i,le),H=ke.call(ht,A)!==!1&&H}}return H&&!A.defaultPrevented}function xa(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(m,w||0)}function ba(m){m.g=xa(()=>{m.g=null,m.i&&(m.i=!1,ba(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class du extends L{constructor(w,S){super(),this.m=w,this.l=S,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:ba(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ls(m){L.call(this),this.h=m,this.g={}}v(ls,L);var Na=[];function oo(m){ve(m.g,function(w,S){this.g.hasOwnProperty(S)&&Tn(w)},m),m.g={}}ls.prototype.N=function(){ls.Z.N.call(this),oo(this)},ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var us=l.JSON.stringify,fu=l.JSON.parse,oi=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function cs(){}function hu(){}var ds={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ao(){F.call(this,"d")}v(ao,F);function Da(){F.call(this,"c")}v(Da,F);var Fn={},lo=null;function fs(){return lo=lo||new gt}Fn.Ia="serverreachability";function uo(m){F.call(this,Fn.Ia,m)}v(uo,F);function kr(m){const w=fs();ft(w,new uo(w))}Fn.STAT_EVENT="statevent";function xr(m,w){F.call(this,Fn.STAT_EVENT,m),this.stat=w}v(xr,F);function ct(m){const w=fs();ft(w,new xr(w,m))}Fn.Ja="timingevent";function Ma(m,w){F.call(this,Fn.Ja,m),this.size=w}v(Ma,F);function hs(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},w)}function ps(){this.g=!0}ps.prototype.ua=function(){this.g=!1};function pu(m,w,S,A,H,K){m.info(function(){if(m.g)if(K){var le="",ke=K.split("&");for(let Ye=0;Ye<ke.length;Ye++){var ht=ke[Ye].split("=");if(ht.length>1){const yt=ht[0];ht=ht[1];const mn=yt.split("_");le=mn.length>=2&&mn[1]=="type"?le+(yt+"="+ht+"&"):le+(yt+"=redacted&")}}}else le=null;else le=K;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+w+`
`+S+`
`+le})}function mu(m,w,S,A,H,K,le){m.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+w+`
`+S+`
`+K+" "+le})}function tr(m,w,S,A){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+ai(m,S)+(A?" "+A:"")})}function gu(m,w){m.info(function(){return"TIMEOUT: "+w})}ps.prototype.info=function(){};function ai(m,w){if(!m.g)return w;if(!w)return null;try{const K=JSON.parse(w);if(K){for(m=0;m<K.length;m++)if(Array.isArray(K[m])){var S=K[m];if(!(S.length<2)){var A=S[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let le=1;le<A.length;le++)A[le]=""}}}}return us(K)}catch{return w}}var ms={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yu;function br(){}v(br,cs),br.prototype.g=function(){return new XMLHttpRequest},yu=new br;function nr(m){return encodeURIComponent(String(m))}function co(m){var w=1;m=m.split(":");const S=[];for(;w>0&&m.length;)S.push(m.shift()),w--;return m.length&&S.push(m.join(":")),S}function wn(m,w,S,A){this.j=m,this.i=w,this.l=S,this.S=A||1,this.V=new ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _u}function _u(){this.i=null,this.g="",this.h=!1}var vu={},La={};function Vn(m,w,S){m.M=1,m.A=Dr(Sn(w)),m.u=S,m.R=!0,Ua(m,null)}function Ua(m,w){m.F=Date.now(),li(m),m.B=Sn(m.A);var S=m.B,A=m.S;Array.isArray(A)||(A=[String(A)]),Wa(S.i,"t",A),m.C=0,S=m.j.L,m.h=new _u,m.g=ku(m.j,S?w:null,!m.u),m.P>0&&(m.O=new du(h(m.Y,m,m.g),m.P)),w=m.V,S=m.g,A=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(Na[0]=H.toString()),H=Na);for(let K=0;K<H.length;K++){const le=rt(S,H[K],A||w.handleEvent,!1,w.h||w);if(!le)break;w.g[le.key]=le}w=m.J?Z(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),kr(),pu(m.i,m.v,m.B,m.l,m.S,m.u)}wn.prototype.ba=function(m){m=m.target;const w=this.O;w&&ur(m)==3?w.j():this.Y(m)},wn.prototype.Y=function(m){try{if(m==this.g)e:{const ke=ur(this.g),ht=this.g.ya(),Ye=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Ru(this.g)))){this.K||ke!=4||ht==7||(ht==8||Ye<=0?kr(3):kr(2)),fo(this);var w=this.g.ca();this.X=w;var S=Eu(this);if(this.o=w==200,mu(this.i,this.v,this.B,this.l,this.S,ke,w),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(A)){var K=A;break t}}K=null}if(m=K)tr(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ze(this,m);else{this.o=!1,this.m=3,ct(12),Nr(this),ui(this);break e}}if(this.R){m=!0;let yt;for(;!this.K&&this.C<S.length;)if(yt=wu(this,S),yt==La){ke==4&&(this.m=4,ct(14),m=!1),tr(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==vu){this.m=4,ct(15),tr(this.i,this.l,S,"[Invalid Chunk]"),m=!1;break}else tr(this.i,this.l,yt,null),Ze(this,yt);if(Tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||S.length!=0||this.h.h||(this.m=1,ct(16),m=!1),this.o=this.o&&m,!m)tr(this.i,this.l,S,"[Invalid Chunked Response]"),Nr(this),ui(this);else if(S.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),_i(le),le.P=!0,ct(11))}}else tr(this.i,this.l,S,null),Ze(this,S);ke==4&&Nr(this),this.o&&!this.K&&(ke==4?wo(this.j,this):(this.o=!1,li(this)))}else Ja(this.g),w==400&&S.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),Nr(this),ui(this)}}}catch{}finally{}};function Eu(m){if(!Tu(m))return m.g.la();const w=Ru(m.g);if(w==="")return"";let S="";const A=w.length,H=ur(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Nr(m),ui(m),"";m.h.i=new l.TextDecoder}for(let K=0;K<A;K++)m.h.h=!0,S+=m.h.i.decode(w[K],{stream:!(H&&K==A-1)});return w.length=0,m.h.g+=S,m.C=0,m.h.g}function Tu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function wu(m,w){var S=m.C,A=w.indexOf(`
`,S);return A==-1?La:(S=Number(w.substring(S,A)),isNaN(S)?vu:(A+=1,A+S>w.length?La:(w=w.slice(A,A+S),m.C=A+S,w)))}wn.prototype.cancel=function(){this.K=!0,Nr(this)};function li(m){m.T=Date.now()+m.H,Fa(m,m.H)}function Fa(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=hs(h(m.aa,m),w)}function fo(m){m.D&&(l.clearTimeout(m.D),m.D=null)}wn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(gu(this.i,this.B),this.M!=2&&(kr(),ct(17)),Nr(this),this.m=2,ui(this)):Fa(this,this.T-m)};function ui(m){m.j.I==0||m.K||wo(m.j,m)}function Nr(m){fo(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,oo(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function Ze(m,w){try{var S=m.j;if(S.I!=0&&(S.g==m||Oa(S.h,m))){if(!m.L&&Oa(S.h,m)&&S.I==3){try{var A=S.Ba.g.parse(w)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<m.F)To(S),hn(S);else break e;fr(S),ct(18)}}else S.xa=H[1],0<S.xa-S.K&&H[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=hs(h(S.Va,S),6e3));ci(S.h)<=1&&S.ta&&(S.ta=void 0)}else pn(S,11)}else if((m.L||S.g==m)&&To(S),!b(w))for(H=S.Ba.g.parse(w),w=0;w<H.length;w++){let Ye=H[w];const yt=Ye[0];if(!(yt<=S.K))if(S.K=yt,Ye=Ye[1],S.I==2)if(Ye[0]=="c"){S.M=Ye[1],S.ba=Ye[2];const mn=Ye[3];mn!=null&&(S.ka=mn,S.j.info("VER="+S.ka));const Vr=Ye[4];Vr!=null&&(S.za=Vr,S.j.info("SVER="+S.za));const hr=Ye[5];hr!=null&&typeof hr=="number"&&hr>0&&(A=1.5*hr,S.O=A,S.j.info("backChannelRequestTimeoutMs_="+A)),A=S;const pr=m.g;if(pr){const Co=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var K=A.h;K.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(po(K,K.h),K.h=null))}if(A.G){const Xa=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(A.wa=Xa,ze(A.J,A.G,Xa))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-m.F,S.j.info("Handshake RTT: "+S.T+"ms")),A=S;var le=m;if(A.na=Qa(A,A.L?A.ba:null,A.W),le.L){di(A.h,le);var ke=le,ht=A.O;ht&&(ke.H=ht),ke.D&&(fo(ke),li(ke)),A.g=le}else Bt(A);S.i.length>0&&Fr(S)}else Ye[0]!="stop"&&Ye[0]!="close"||pn(S,7);else S.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?pn(S,7):vo(S):Ye[0]!="noop"&&S.l&&S.l.qa(Ye),S.A=0)}}kr(4)}catch{}}var rf=class{constructor(m,w){this.g=m,this.map=w}};function ho(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Va(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ci(m){return m.h?1:m.g?m.g.size:0}function Oa(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function po(m,w){m.g?m.g.add(w):m.h=w}function di(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}ho.prototype.cancel=function(){if(this.i=cn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function cn(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const S of m.g.values())w=w.concat(S.G);return w}return C(m.i)}var Su=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dn(m,w){if(m){m=m.split("&");for(let S=0;S<m.length;S++){const A=m[S].indexOf("=");let H,K=null;A>=0?(H=m[S].substring(0,A),K=m[S].substring(A+1)):H=m[S],w(H,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function rr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof rr?(this.l=m.l,fi(this,m.j),this.o=m.o,this.g=m.g,sr(this,m.u),this.h=m.h,ys(this,Ka(m.i)),this.m=m.m):m&&(w=String(m).match(Su))?(this.l=!1,fi(this,w[1]||"",!0),this.o=hi(w[2]||""),this.g=hi(w[3]||"",!0),sr(this,w[4]),this.h=hi(w[5]||"",!0),ys(this,w[6]||"",!0),this.m=hi(w[7]||"")):(this.l=!1,this.i=new Oe(null,this.l))}rr.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(pi(w,Ba,!0),":");var S=this.g;return(S||w=="file")&&(m.push("//"),(w=this.o)&&m.push(pi(w,Ba,!0),"@"),m.push(nr(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&m.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(pi(S,S.charAt(0)=="/"?mi:qa,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",pi(S,Ha)),m.join("")},rr.prototype.resolve=function(m){const w=Sn(this);let S=!!m.j;S?fi(w,m.j):S=!!m.o,S?w.o=m.o:S=!!m.g,S?w.g=m.g:S=m.u!=null;var A=m.h;if(S)sr(w,m.u);else if(S=!!m.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=w.h.lastIndexOf("/");H!=-1&&(A=w.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const K=[];for(let le=0;le<H.length;){const ke=H[le++];ke=="."?A&&le==H.length&&K.push(""):ke==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),A&&le==H.length&&K.push("")):(K.push(ke),A=!0)}A=K.join("/")}else A=H}return S?w.h=A:S=m.i.toString()!=="",S?ys(w,Ka(m.i)):S=!!m.m,S&&(w.m=m.m),w};function Sn(m){return new rr(m)}function fi(m,w,S){m.j=S?hi(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function sr(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function ys(m,w,S){w instanceof Oe?(m.i=w,go(m.i,m.l)):(S||(w=pi(w,sf)),m.i=new Oe(w,m.l))}function ze(m,w,S){m.i.set(w,S)}function Dr(m){return ze(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function hi(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function pi(m,w,S){return typeof m=="string"?(m=encodeURI(m).replace(w,Ga),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ga(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ba=/[#\/\?@]/g,qa=/[#\?:]/g,mi=/[#\?]/g,sf=/[#\?@]/g,Ha=/#/g;function Oe(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function ir(m){m.g||(m.g=new Map,m.h=0,m.i&&dn(m.i,function(w,S){m.add(decodeURIComponent(w.replace(/\+/g," ")),S)}))}n=Oe.prototype,n.add=function(m,w){ir(this),this.i=null,m=or(this,m);let S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(w),this.h+=1,this};function $a(m,w){ir(m),w=or(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function mo(m,w){return ir(m),w=or(m,w),m.g.has(w)}n.forEach=function(m,w){ir(this),this.g.forEach(function(S,A){S.forEach(function(H){m.call(w,H,A,this)},this)},this)};function za(m,w){ir(m);let S=[];if(typeof w=="string")mo(m,w)&&(S=S.concat(m.g.get(or(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)S=S.concat(m[w]);return S}n.set=function(m,w){return ir(this),this.i=null,m=or(this,m),mo(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},n.get=function(m,w){return m?(m=za(this,m),m.length>0?String(m[0]):w):w};function Wa(m,w,S){$a(m,w),S.length>0&&(m.i=null,m.g.set(or(m,w),C(S)),m.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let A=0;A<w.length;A++){var S=w[A];const H=nr(S);S=za(this,S);for(let K=0;K<S.length;K++){let le=H;S[K]!==""&&(le+="="+nr(S[K])),m.push(le)}}return this.i=m.join("&")};function Ka(m){const w=new Oe;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function or(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function go(m,w){w&&!m.j&&(ir(m),m.i=null,m.g.forEach(function(S,A){const H=A.toLowerCase();A!=H&&($a(this,A),Wa(this,H,S))},m)),m.j=w}function ar(m,w){const S=new ps;if(l.Image){const A=new Image;A.onload=y(Dt,S,"TestLoadImage: loaded",!0,w,A),A.onerror=y(Dt,S,"TestLoadImage: error",!1,w,A),A.onabort=y(Dt,S,"TestLoadImage: abort",!1,w,A),A.ontimeout=y(Dt,S,"TestLoadImage: timeout",!1,w,A),l.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=m}else w(!1)}function lr(m,w){const S=new ps,A=new AbortController,H=setTimeout(()=>{A.abort(),Dt(S,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:A.signal}).then(K=>{clearTimeout(H),K.ok?Dt(S,"TestPingServer: ok",!0,w):Dt(S,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(H),Dt(S,"TestPingServer: error",!1,w)})}function Dt(m,w,S,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(S)}catch{}}function gi(){this.g=new oi}function Mr(m){this.i=m.Sb||null,this.h=m.ab||!1}v(Mr,cs),Mr.prototype.g=function(){return new fn(this.i,this.h)};function fn(m,w){gt.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(fn,gt),n=fn.prototype,n.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,On(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Iu(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Iu(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?_s(this):On(this),this.readyState==3&&Iu(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,_s(this))},n.Na=function(m){this.g&&(this.response=m,_s(this))},n.ga=function(){this.g&&_s(this)};function _s(m){m.readyState=4,m.l=null,m.j=null,m.B=null,On(m)}n.setRequestHeader=function(m,w){this.A.append(m,w)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var S=w.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=w.next();return m.join(`\r
`)};function On(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Cu(m){let w="";return ve(m,function(S,A){w+=A,w+=":",w+=S,w+=`\r
`}),w}function yo(m,w,S){e:{for(A in S){var A=!1;break e}A=!0}A||(S=Cu(S),typeof m=="string"?S!=null&&nr(S):ze(m,w,S))}function Xe(m){gt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Xe,gt);var Au=/^https?$/i,of=["POST","PUT"];n=Xe.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,w,S,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yu.g(),this.g.onreadystatechange=E(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(K){vs(this,K);return}if(m=S||"",S=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)S.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())S.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(S.keys()).find(K=>K.toLowerCase()=="content-type"),H=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(of,w,void 0)>=0)||A||H||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of S)this.g.setRequestHeader(K,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(K){vs(this,K)}};function vs(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,Es(m),Ur(m)}function Es(m){m.A||(m.A=!0,ft(m,"complete"),ft(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ft(this,"complete"),ft(this,"abort"),Ur(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Lr(this):this.Xa())},n.Xa=function(){Lr(this)};function Lr(m){if(m.h&&typeof o<"u"){if(m.v&&ur(m)==4)setTimeout(m.Ca.bind(m),0);else if(ft(m,"readystatechange"),ur(m)==4){m.h=!1;try{const K=m.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var S;if(!(S=w)){var A;if(A=K===0){let le=String(m.D).match(Su)[1]||null;!le&&l.self&&l.self.location&&(le=l.self.location.protocol.slice(0,-1)),A=!Au.test(le?le.toLowerCase():"")}S=A}if(S)ft(m,"complete"),ft(m,"success");else{m.o=6;try{var H=ur(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",Es(m)}}finally{Ur(m)}}}}function Ur(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const S=m.g;m.g=null,w||ft(m,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ur(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ur(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),fu(w)}};function Ru(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ja(m){const w={};m=(m.g&&ur(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<m.length;A++){if(b(m[A]))continue;var S=co(m[A]);const H=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const K=w[H]||[];w[H]=K,K.push(S)}V(w,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function cr(m,w,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||w}function _o(m){this.za=0,this.i=[],this.j=new ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=cr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=cr("baseRetryDelayMs",5e3,m),this.Za=cr("retryDelaySeedMs",1e4,m),this.Ta=cr("forwardChannelMaxRetries",2,m),this.va=cr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new ho(m&&m.concurrentRequestLimit),this.Ba=new gi,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=_o.prototype,n.ka=8,n.I=1,n.connect=function(m,w,S,A){ct(0),this.W=m,this.H=w||{},S&&A!==void 0&&(this.H.OSID=S,this.H.OAID=A),this.F=this.X,this.J=Qa(this,null,this.W),Fr(this)};function vo(m){if(Eo(m),m.I==3){var w=m.V++,S=Sn(m.J);if(ze(S,"SID",m.M),ze(S,"RID",w),ze(S,"TYPE","terminate"),dr(m,S),w=new wn(m,m.j,w),w.M=2,w.A=Dr(Sn(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!S&&l.Image&&(new Image().src=w.A,S=!0),S||(w.g=ku(w.j,null),w.g.ea(w.A)),w.F=Date.now(),li(w)}vi(m)}function hn(m){m.g&&(_i(m),m.g.cancel(),m.g=null)}function Eo(m){hn(m),m.v&&(l.clearTimeout(m.v),m.v=null),To(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function Fr(m){if(!Va(m.h)&&!m.m){m.m=!0;var w=m.Ea;X||x(),ie||(X(),ie=!0),N.add(w,m),m.D=0}}function Pu(m,w){return ci(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=hs(h(m.Ea,m,w),So(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new wn(this,this.j,m);let K=this.o;if(this.U&&(K?(K=Z(K),he(K,this.U)):K=this.U),this.u!==null||this.R||(H.J=K,K=null),this.S)e:{for(var w=0,S=0;S<this.i.length;S++){t:{var A=this.i[S];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(w+=A,w>4096){w=S;break e}if(w===4096||S===this.i.length-1){w=S+1;break e}}w=1e3}else w=1e3;w=Ya(this,H,w),S=Sn(this.J),ze(S,"RID",m),ze(S,"CVER",22),this.G&&ze(S,"X-HTTP-Session-Id",this.G),dr(this,S),K&&(this.R?w="headers="+nr(Cu(K))+"&"+w:this.u&&yo(S,this.u,K)),po(this.h,H),this.Ra&&ze(S,"TYPE","init"),this.S?(ze(S,"$req",w),ze(S,"SID","null"),H.U=!0,Vn(H,S,null)):Vn(H,S,w),this.I=2}}else this.I==3&&(m?yi(this,m):this.i.length==0||Va(this.h)||yi(this))};function yi(m,w){var S;w?S=w.l:S=m.V++;const A=Sn(m.J);ze(A,"SID",m.M),ze(A,"RID",S),ze(A,"AID",m.K),dr(m,A),m.u&&m.o&&yo(A,m.u,m.o),S=new wn(m,m.j,S,m.D+1),m.u===null&&(S.J=m.o),w&&(m.i=w.G.concat(m.i)),w=Ya(m,S,1e3),S.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),po(m.h,S),Vn(S,A,w)}function dr(m,w){m.H&&ve(m.H,function(S,A){ze(w,A,S)}),m.l&&ve({},function(S,A){ze(w,A,S)})}function Ya(m,w,S){S=Math.min(m.i.length,S);const A=m.l?h(m.l.Ka,m.l,m):null;e:{var H=m.i;let ke=-1;for(;;){const ht=["count="+S];ke==-1?S>0?(ke=H[0].g,ht.push("ofs="+ke)):ke=0:ht.push("ofs="+ke);let Ye=!0;for(let yt=0;yt<S;yt++){var K=H[yt].g;const mn=H[yt].map;if(K-=ke,K<0)ke=Math.max(0,H[yt].g-100),Ye=!1;else try{K="req"+K+"_"||"";try{var le=mn instanceof Map?mn:Object.entries(mn);for(const[Vr,hr]of le){let pr=hr;c(hr)&&(pr=us(hr)),ht.push(K+Vr+"="+encodeURIComponent(pr))}}catch(Vr){throw ht.push(K+"type="+encodeURIComponent("_badmap")),Vr}}catch{A&&A(mn)}}if(Ye){le=ht.join("&");break e}}le=void 0}return m=m.i.splice(0,S),w.G=m,le}function Bt(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;X||x(),ie||(X(),ie=!0),N.add(w,m),m.A=0}}function fr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=hs(h(m.Da,m),So(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Ts(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=hs(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),hn(this),Ts(this))};function _i(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Ts(m){m.g=new wn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=Sn(m.na);ze(w,"RID","rpc"),ze(w,"SID",m.M),ze(w,"AID",m.K),ze(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&ze(w,"TO",m.ia),ze(w,"TYPE","xmlhttp"),dr(m,w),m.u&&m.o&&yo(w,m.u,m.o),m.O&&(m.g.H=m.O);var S=m.g;m=m.ba,S.M=1,S.A=Dr(Sn(w)),S.u=null,S.R=!0,Ua(S,m)}n.Va=function(){this.C!=null&&(this.C=null,hn(this),fr(this),ct(19))};function To(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function wo(m,w){var S=null;if(m.g==w){To(m),_i(m),m.g=null;var A=2}else if(Oa(m.h,w))S=w.G,di(m.h,w),A=1;else return;if(m.I!=0){if(w.o)if(A==1){S=w.u?w.u.length:0,w=Date.now()-w.F;var H=m.D;A=fs(),ft(A,new Ma(A,S)),Fr(m)}else Bt(m);else if(H=w.m,H==3||H==0&&w.X>0||!(A==1&&Pu(m,w)||A==2&&fr(m)))switch(S&&S.length>0&&(w=m.h,w.i=w.i.concat(S)),H){case 1:pn(m,5);break;case 4:pn(m,10);break;case 3:pn(m,6);break;default:pn(m,2)}}}function So(m,w){let S=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(S*=2),S*w}function pn(m,w){if(m.j.info("Error code "+w),w==2){var S=h(m.bb,m),A=m.Ua;const H=!A;A=new rr(A||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fi(A,"https"),Dr(A),H?ar(A.toString(),S):lr(A.toString(),S)}else ct(2);m.I=0,m.l&&m.l.pa(w),vi(m),Eo(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function vi(m){if(m.I=0,m.ja=[],m.l){const w=cn(m.h);(w.length!=0||m.i.length!=0)&&(M(m.ja,w),M(m.ja,m.i),m.h.i.length=0,C(m.i),m.i.length=0),m.l.oa()}}function Qa(m,w,S){var A=S instanceof rr?Sn(S):new rr(S);if(A.g!="")w&&(A.g=w+"."+A.g),sr(A,A.u);else{var H=l.location;A=H.protocol,w=w?w+"."+H.hostname:H.hostname,H=+H.port;const K=new rr(null);A&&fi(K,A),w&&(K.g=w),H&&sr(K,H),S&&(K.h=S),A=K}return S=m.G,w=m.wa,S&&w&&ze(A,S,w),ze(A,"VER",m.ka),dr(m,A),A}function ku(m,w,S){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new Xe(new Mr({ab:S})):new Xe(m.ma),w.Fa(m.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}n=xu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Io(){}Io.prototype.g=function(m,w){return new Mt(m,w)};function Mt(m,w){gt.call(this),this.g=new _o(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!b(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!b(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new ws(this)}v(Mt,gt),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){vo(this.g)},Mt.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.v&&(S={},S.__data__=us(m),m=S);w.i.push(new rf(w.Ya++,m)),w.I==3&&Fr(w)},Mt.prototype.N=function(){this.g.l=null,delete this.j,vo(this.g),delete this.g,Mt.Z.N.call(this)};function bu(m){ao.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const S in w){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}v(bu,ao);function Nu(){Da.call(this),this.status=1}v(Nu,Da);function ws(m){this.g=m}v(ws,xu),ws.prototype.ra=function(){ft(this.g,"a")},ws.prototype.qa=function(m){ft(this.g,new bu(m))},ws.prototype.pa=function(m){ft(this.g,new Nu)},ws.prototype.oa=function(){ft(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,U0=function(){return new Io},L0=function(){return fs()},M0=Fn,_p={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,Hc=ms,gs.COMPLETE="complete",D0=gs,hu.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",gt.prototype.listen=gt.prototype.J,kl=hu,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,N0=Xe}).apply(typeof kc<"u"?kc:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore",Rv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new bd("@firebase/firestore");function Yo(){return $i.logLevel}function fe(n,...e){if($i.logLevel<=Ue.DEBUG){const t=e.map(ym);$i.debug(`Firestore (${wa}): ${n}`,...t)}}function es(n,...e){if($i.logLevel<=Ue.ERROR){const t=e.map(ym);$i.error(`Firestore (${wa}): ${n}`,...t)}}function ha(n,...e){if($i.logLevel<=Ue.WARN){const t=e.map(ym);$i.warn(`Firestore (${wa}): ${n}`,...t)}}function ym(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,F0(n,r,t)}function F0(n,e,t){let r=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw es(r),new Error(r)}function Je(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||F0(e,s,r)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kt.UNAUTHENTICATED)))}shutdown(){}}class HN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $N{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let o=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Oi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},c=f=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Oi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new V0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class zN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new zN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Kt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Pv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const r=o=>{o.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Pv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Pv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=JN(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Fe(n,e){return n<e?-1:n>e?1:0}function vp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return Wh(s)===Wh(o)?Fe(s,o):Wh(s)?1:-1}return Fe(n.length,e.length)}const YN=55296,QN=57343;function Wh(n){const e=n.charCodeAt(0);return e>=YN&&e<=QN}function pa(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="__name__";class vr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=vr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Fe(e.length,t.length)}static compareSegments(e,t){const r=vr.isNumericId(e),s=vr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?vr.extractNumericId(e).compare(vr.extractNumericId(t)):vp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}}class lt extends vr{construct(e,t,r){return new lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const XN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends vr{construct(e,t,r){return new Vt(e,t,r)}static isValidIdentifier(e){return XN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kv}static keyField(){return new Vt([kv])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ee(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Ee(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ee(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new Ee(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(lt.fromString(e))}static fromName(e){return new Se(lt.fromString(e).popFirst(5))}static empty(){return new Se(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(n,e,t){if(!t)throw new Ee(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZN(n,e,t,r){if(e===!0&&r===!0)throw new Ee(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xv(n){if(!Se.isDocumentKey(n))throw new Ee(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function O0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function vm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function oa(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vm(n);throw new Ee(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(n,e){const t={typeString:n};return e&&(t.value=e),t}function ou(n,e){if(!O0(n))throw new Ee(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Ee(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=-62135596800,Nv=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Nv);return new nt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bv)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nv}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ou(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:Et("string",nt._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new nt(0,0))}static max(){return new Pe(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=-1;function eD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(r===1e9?new nt(t+1,0):new nt(t,r));return new Ys(s,Se.empty(),e)}function tD(n){return new Ys(n.readTime,n.key,zl)}class Ys{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ys(Pe.min(),Se.empty(),zl)}static max(){return new Ys(Pe.max(),Se.empty(),zl)}}function nD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==rD)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,r)=>{t(e)}))}static reject(e){return new j(((t,r)=>{r(e)}))}static waitFor(e){return new j(((t,r)=>{let s=0,o=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++o,l&&o===s&&t()}),(f=>r(f)))})),l=!0,o===s&&t()}))}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next((s=>s?j.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new j(((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const h=f;t(e[h]).next((y=>{l[h]=y,++c,c===o&&r(l)}),(y=>s(y)))}}))}static doWhile(e,t){return new j(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function iD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ia(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ld.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=-1;function Ud(n){return n==null}function od(n){return n===0&&1/n==-1/0}function oD(n){return typeof n=="number"&&Number.isInteger(n)&&!od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="";function aD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Dv(e)),e=lD(n.get(t),e);return Dv(e)}function lD(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case G0:t+="";break;default:t+=o}}return t}function Dv(n){return n+G0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function eo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function B0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||Ft.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}}class xc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=o??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Ft(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new Ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lv(this.data.getIterator())}getIteratorFrom(e){return new Lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ct(this.comparator);return t.data=e,t}}class Lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new Kn([])}unionWith(e){let t=new Ct(Vt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new q0("Invalid base64 string: "+o):o}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const uD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=uD.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="server_timestamp",$0="__type__",z0="__previous_value__",W0="__local_write_time__";function Tm(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[$0])==null?void 0:r.stringValue)===H0}function Fd(n){const e=n.mapValue.fields[z0];return Tm(e)?Fd(e):e}function Wl(n){const e=Qs(n.mapValue.fields[W0].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,t,r,s,o,l,c,f,h,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=y}}const ad="(default)";class Kl{constructor(e,t){this.projectId=e,this.database=t||ad}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===ad}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="__type__",dD="__max__",bc={mapValue:{}},J0="__vector__",ld="value";function js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tm(n)?4:hD(n)?9007199254740991:fD(n)?10:11:Ce(28295,{value:n})}function Ar(n,e){if(n===e)return!0;const t=js(n);if(t!==js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wl(n).isEqual(Wl(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Qs(s.timestampValue),c=Qs(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return Xs(s.bytesValue).isEqual(Xs(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return mt(s.geoPointValue.latitude)===mt(o.geoPointValue.latitude)&&mt(s.geoPointValue.longitude)===mt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return mt(s.integerValue)===mt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=mt(s.doubleValue),c=mt(o.doubleValue);return l===c?od(l)===od(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return pa(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(Mv(l)!==Mv(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Ar(l[f],c[f])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function Jl(n,e){return(n.values||[]).find((t=>Ar(t,e)))!==void 0}function ma(n,e){if(n===e)return 0;const t=js(n),r=js(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=mt(o.integerValue||o.doubleValue),f=mt(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return Uv(n.timestampValue,e.timestampValue);case 4:return Uv(Wl(n),Wl(e));case 5:return vp(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=Xs(o),f=Xs(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),f=l.split("/");for(let h=0;h<c.length&&h<f.length;h++){const y=Fe(c[h],f[h]);if(y!==0)return y}return Fe(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Fe(mt(o.latitude),mt(l.latitude));return c!==0?c:Fe(mt(o.longitude),mt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Fv(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var E,C,M,U;const c=o.fields||{},f=l.fields||{},h=(E=c[ld])==null?void 0:E.arrayValue,y=(C=f[ld])==null?void 0:C.arrayValue,v=Fe(((M=h==null?void 0:h.values)==null?void 0:M.length)||0,((U=y==null?void 0:y.values)==null?void 0:U.length)||0);return v!==0?v:Fv(h,y)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===bc.mapValue&&l===bc.mapValue)return 0;if(o===bc.mapValue)return 1;if(l===bc.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),h=l.fields||{},y=Object.keys(h);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const E=vp(f[v],y[v]);if(E!==0)return E;const C=ma(c[f[v]],h[y[v]]);if(C!==0)return C}return Fe(f.length,y.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function Uv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Qs(n),r=Qs(e),s=Fe(t.seconds,r.seconds);return s!==0?s:Fe(t.nanos,r.nanos)}function Fv(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=ma(t[s],r[s]);if(o)return o}return Fe(t.length,r.length)}function ga(n){return Ep(n)}function Ep(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Qs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Ep(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Ep(t.fields[l])}`;return s+"}"})(n.mapValue):Ce(61005,{value:n})}function $c(n){switch(js(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fd(n);return e?16+$c(e):16;case 5:return 2*n.stringValue.length;case 6:return Xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+$c(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return eo(r.fields,((o,l)=>{s+=o.length+$c(l)})),s})(n.mapValue);default:throw Ce(13486,{value:n})}}function Tp(n){return!!n&&"integerValue"in n}function wm(n){return!!n&&"arrayValue"in n}function Vv(n){return!!n&&"nullValue"in n}function Ov(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zc(n){return!!n&&"mapValue"in n}function fD(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[K0])==null?void 0:r.stringValue)===J0}function Ul(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return eo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ul(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ul(n.arrayValue.values[t]);return e}return{...n}}function hD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ul(t)}setAll(e){let t=Vt.emptyPath(),r={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=Ul(l):s.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());zc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];zc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){eo(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new xn(Ul(this.value))}}function Y0(n){const e=[];return eo(n.fields,((t,r)=>{const s=new Vt([t]);if(zc(r)){const o=Y0(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Jt(e,0,Pe.min(),Pe.min(),Pe.min(),xn.empty(),0)}static newFoundDocument(e,t,r,s){return new Jt(e,1,t,Pe.min(),r,s,0)}static newNoDocument(e,t){return new Jt(e,2,t,Pe.min(),Pe.min(),xn.empty(),0)}static newUnknownDocument(e,t){return new Jt(e,3,t,Pe.min(),Pe.min(),xn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.position=e,this.inclusive=t}}function Gv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Se.comparator(Se.fromName(l.referenceValue),t.key):r=ma(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function pD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{}class It extends Q0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gD(e,t,r):t==="array-contains"?new vD(e,r):t==="in"?new ED(e,r):t==="not-in"?new TD(e,r):t==="array-contains-any"?new wD(e,r):new It(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new yD(e,r):new _D(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ma(t,this.value)):t!==null&&js(this.value)===js(t)&&this.matchesComparison(ma(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rr extends Q0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Rr(e,t)}matches(e){return X0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function X0(n){return n.op==="and"}function j0(n){return mD(n)&&X0(n)}function mD(n){for(const e of n.filters)if(e instanceof Rr)return!1;return!0}function wp(n){if(n instanceof It)return n.field.canonicalString()+n.op.toString()+ga(n.value);if(j0(n))return n.filters.map((e=>wp(e))).join(",");{const e=n.filters.map((t=>wp(t))).join(",");return`${n.op}(${e})`}}function Z0(n,e){return n instanceof It?(function(r,s){return s instanceof It&&r.op===s.op&&r.field.isEqual(s.field)&&Ar(r.value,s.value)})(n,e):n instanceof Rr?(function(r,s){return s instanceof Rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,c)=>o&&Z0(l,s.filters[c])),!0):!1})(n,e):void Ce(19439)}function eS(n){return n instanceof It?(function(t){return`${t.field.canonicalString()} ${t.op} ${ga(t.value)}`})(n):n instanceof Rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(eS).join(" ,")+"}"})(n):"Filter"}class gD extends It{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class yD extends It{constructor(e,t){super(e,"in",t),this.keys=tS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _D extends It{constructor(e,t){super(e,"not-in",t),this.keys=tS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Se.fromName(r.referenceValue)))}class vD extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wm(t)&&Jl(t.arrayValue,this.value)}}class ED extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Jl(this.value.arrayValue,t)}}class TD extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jl(this.value.arrayValue,t)}}class wD extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Jl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function qv(n,e=null,t=[],r=[],s=null,o=null,l=null){return new SD(n,e,t,r,s,o,l)}function Sm(n){const e=xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>wp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Ud(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ga(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ga(r))).join(",")),e.Te=t}return e.Te}function Im(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Z0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bv(n.startAt,e.startAt)&&Bv(n.endAt,e.endAt)}function Sp(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ID(n,e,t,r,s,o,l,c){return new Vd(n,e,t,r,s,o,l,c)}function Cm(n){return new Vd(n)}function Hv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CD(n){return n.collectionGroup!==null}function Fl(n){const e=xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Ct(Vt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new cd(o,r))})),t.has(Vt.keyField().canonicalString())||e.Ie.push(new cd(Vt.keyField(),r))}return e.Ie}function Tr(n){const e=xe(n);return e.Ee||(e.Ee=AD(e,Fl(n))),e.Ee}function AD(n,e){if(n.limitType==="F")return qv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new cd(s.field,o)}));const t=n.endAt?new ud(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ud(n.startAt.position,n.startAt.inclusive):null;return qv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ip(n,e,t){return new Vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Od(n,e){return Im(Tr(n),Tr(e))&&n.limitType===e.limitType}function nS(n){return`${Sm(Tr(n))}|lt:${n.limitType}`}function Qo(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>eS(s))).join(", ")}]`),Ud(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>ga(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>ga(s))).join(",")),`Target(${r})`})(Tr(n))}; limitType=${n.limitType})`}function Gd(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Se.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Fl(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,c,f){const h=Gv(l,c,f);return l.inclusive?h<=0:h<0})(r.startAt,Fl(r),s)||r.endAt&&!(function(l,c,f){const h=Gv(l,c,f);return l.inclusive?h>=0:h>0})(r.endAt,Fl(r),s))})(n,e)}function RD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rS(n){return(e,t)=>{let r=!1;for(const s of Fl(n)){const o=PD(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function PD(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(o,l,c){const f=l.data.field(o),h=c.data.field(o);return f!==null&&h!==null?ma(f,h):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return B0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=new ut(Se.comparator);function ts(){return kD}const sS=new ut(Se.comparator);function xl(...n){let e=sS;for(const t of n)e=e.insert(t.key,t);return e}function iS(n){let e=sS;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ui(){return Vl()}function oS(){return Vl()}function Vl(){return new to((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xD=new ut(Se.comparator),bD=new Ct(Se.comparator);function Ve(...n){let e=bD;for(const t of n)e=e.add(t);return e}const ND=new Ct(Fe);function DD(){return ND}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function aS(n){return{integerValue:""+n}}function MD(n,e){return oD(e)?aS(e):Am(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(){this._=void 0}}function LD(n,e,t){return n instanceof dd?(function(s,o){const l={fields:{[$0]:{stringValue:H0},[W0]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Tm(o)&&(o=Fd(o)),o&&(l.fields[z0]=o),{mapValue:l}})(t,e):n instanceof Yl?uS(n,e):n instanceof Ql?cS(n,e):(function(s,o){const l=lS(s,o),c=$v(l)+$v(s.Ae);return Tp(l)&&Tp(s.Ae)?aS(c):Am(s.serializer,c)})(n,e)}function UD(n,e,t){return n instanceof Yl?uS(n,e):n instanceof Ql?cS(n,e):t}function lS(n,e){return n instanceof fd?(function(r){return Tp(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class dd extends Bd{}class Yl extends Bd{constructor(e){super(),this.elements=e}}function uS(n,e){const t=dS(e);for(const r of n.elements)t.some((s=>Ar(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ql extends Bd{constructor(e){super(),this.elements=e}}function cS(n,e){let t=dS(e);for(const r of n.elements)t=t.filter((s=>!Ar(s,r)));return{arrayValue:{values:t}}}class fd extends Bd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $v(n){return mt(n.integerValue||n.doubleValue)}function dS(n){return wm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function FD(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Yl&&s instanceof Yl||r instanceof Ql&&s instanceof Ql?pa(r.elements,s.elements,Ar):r instanceof fd&&s instanceof fd?Ar(r.Ae,s.Ae):r instanceof dd&&s instanceof dd})(n.transform,e.transform)}class VD{constructor(e,t){this.version=e,this.transformResults=t}}class Xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qd{}function fS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pS(n.key,Xr.none()):new au(n.key,n.data,Xr.none());{const t=n.data,r=xn.empty();let s=new Ct(Vt.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new no(n.key,r,new Kn(s.toArray()),Xr.none())}}function OD(n,e,t){n instanceof au?(function(s,o,l){const c=s.value.clone(),f=Wv(s.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof no?(function(s,o,l){if(!Wc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Wv(s.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(hS(s)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Ol(n,e,t,r){return n instanceof au?(function(o,l,c,f){if(!Wc(o.precondition,l))return c;const h=o.value.clone(),y=Kv(o.fieldTransforms,f,l);return h.setAll(y),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof no?(function(o,l,c,f){if(!Wc(o.precondition,l))return c;const h=Kv(o.fieldTransforms,f,l),y=l.data;return y.setAll(hS(o)),y.setAll(h),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(o,l,c){return Wc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function GD(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=lS(r.transform,s||null);o!=null&&(t===null&&(t=xn.empty()),t.set(r.field,o))}return t||null}function zv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pa(r,s,((o,l)=>FD(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class au extends qd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class no extends qd{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Wv(n,e,t){const r=new Map;Je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,UD(l,c,t[s]))}return r}function Kv(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,LD(o,l,e))}return r}class pS extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BD extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&OD(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ol(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ol(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oS();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const f=fS(l,c);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Pe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,((t,r)=>zv(t,r)))&&pa(this.baseMutations,e.baseMutations,((t,r)=>zv(t,r)))}}class Rm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return xD})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new Rm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Be;function zD(n){switch(n){case se.OK:return Ce(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function mS(n){if(n===void 0)return es("GRPC error has no .code"),se.UNKNOWN;switch(n){case vt.OK:return se.OK;case vt.CANCELLED:return se.CANCELLED;case vt.UNKNOWN:return se.UNKNOWN;case vt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case vt.INTERNAL:return se.INTERNAL;case vt.UNAVAILABLE:return se.UNAVAILABLE;case vt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case vt.NOT_FOUND:return se.NOT_FOUND;case vt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case vt.ABORTED:return se.ABORTED;case vt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case vt.DATA_LOSS:return se.DATA_LOSS;default:return Ce(39323,{code:n})}}(Be=vt||(vt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=new Ks([4294967295,4294967295],0);function Jv(n){const e=WD().encode(n),t=new b0;return t.update(e),new Uint8Array(t.digest())}function Yv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ks([t,r],0),new Ks([s,o],0)]}class Pm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bl(`Invalid padding: ${t}`);if(r<0)throw new bl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ks.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Ks.fromNumber(r)));return s.compare(KD)===1&&(s=new Ks([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Jv(e),[r,s]=Yv(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Pm(o,s,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=Jv(e),[r,s]=Yv(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,lu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Hd(Pe.min(),s,new ut(Fe),ts(),Ve())}}class lu{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new lu(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class gS{constructor(e,t){this.targetId=e,this.Ce=t}}class yS{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Qv{constructor(){this.ve=0,this.Fe=Xv(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),r=Ve();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ce(38017,{changeType:o})}})),new lu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Xv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JD{constructor(e){this.Ge=e,this.ze=new Map,this.je=ts(),this.Je=Nc(),this.He=Nc(),this.Ye=new ut(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Sp(o))if(r===0){const l=new Se(o.path);this.et(t,l,Jt.newNoDocument(l,Pe.min()))}else Je(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),f=c?this.ct(c,e,l):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=Xs(r).toUint8Array()}catch(f){if(f instanceof q0)return ha("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new Pm(l,s,o)}catch(f){return ha(f instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Sp(c.target)){const f=new Se(c.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Jt.newNoDocument(f,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let r=Ve();this.He.forEach(((o,l)=>{let c=!0;l.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Hd(e,t,this.Ye,this.je,r);return this.je=ts(),this.Je=Nc(),this.He=Nc(),this.Ye=new ut(Fe),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Qv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ct(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ct(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Qv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nc(){return new ut(Se.comparator)}function Xv(){return new ut(Se.comparator)}const YD={asc:"ASCENDING",desc:"DESCENDING"},QD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XD={and:"AND",or:"OR"};class jD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cp(n,e){return n.useProto3Json||Ud(e)?e:{value:e}}function hd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _S(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ZD(n,e){return hd(n,e.toTimestamp())}function wr(n){return Je(!!n,49232),Pe.fromTimestamp((function(t){const r=Qs(t);return new nt(r.seconds,r.nanos)})(n))}function km(n,e){return Ap(n,e).canonicalString()}function Ap(n,e){const t=(function(s){return new lt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function vS(n){const e=lt.fromString(n);return Je(IS(e),10190,{key:e.toString()}),e}function Rp(n,e){return km(n.databaseId,e.path)}function Kh(n,e){const t=vS(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(TS(t))}function ES(n,e){return km(n.databaseId,e)}function e1(n){const e=vS(n);return e.length===4?lt.emptyPath():TS(e)}function Pp(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TS(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function jv(n,e,t){return{name:Rp(n,e),fields:t.value.mapValue.fields}}function t1(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ce(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(h,y){return h.useProto3Json?(Je(y===void 0||typeof y=="string",58123),Gt.fromBase64String(y||"")):(Je(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Gt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(h){const y=h.code===void 0?se.UNKNOWN:mS(h.code);return new Ee(y,h.message||"")})(l);t=new yS(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Kh(n,r.document.name),o=wr(r.document.updateTime),l=r.document.createTime?wr(r.document.createTime):Pe.min(),c=new xn({mapValue:{fields:r.document.fields}}),f=Jt.newFoundDocument(s,o,l,c),h=r.targetIds||[],y=r.removedTargetIds||[];t=new Kc(h,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Kh(n,r.document),o=r.readTime?wr(r.readTime):Pe.min(),l=Jt.newNoDocument(s,o),c=r.removedTargetIds||[];t=new Kc([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Kh(n,r.document),o=r.removedTargetIds||[];t=new Kc([],o,s,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new $D(s,o),c=r.targetId;t=new gS(c,l)}}return t}function n1(n,e){let t;if(e instanceof au)t={update:jv(n,e.key,e.value)};else if(e instanceof pS)t={delete:Rp(n,e.key)};else if(e instanceof no)t={update:jv(n,e.key,e.data),updateMask:d1(e.fieldMask)};else{if(!(e instanceof BD))return Ce(16599,{Vt:e.type});t={verify:Rp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof dd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ql)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof fd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ce(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:ZD(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ce(27497)})(n,e.precondition)),t}function r1(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?wr(s.updateTime):wr(o);return l.isEqual(Pe.min())&&(l=wr(o)),new VD(l,s.transformResults||[])})(t,e)))):[]}function s1(n,e){return{documents:[ES(n,e.path)]}}function i1(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ES(n,s);const o=(function(h){if(h.length!==0)return SS(Rr.create(h,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(h){if(h.length!==0)return h.map((y=>(function(E){return{field:Xo(E.field),direction:l1(E.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Cp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function o1(n){let e=e1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Je(r===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=(function(v){const E=wS(v);return E instanceof Rr&&j0(E)?E.getFilters():[E]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((E=>(function(M){return new cd(jo(M.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(E)))})(t.orderBy));let c=null;t.limit&&(c=(function(v){let E;return E=typeof v=="object"?v.value:v,Ud(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(v){const E=!!v.before,C=v.values||[];return new ud(C,E)})(t.startAt));let h=null;return t.endAt&&(h=(function(v){const E=!v.before,C=v.values||[];return new ud(C,E)})(t.endAt)),ID(e,s,l,o,c,"F",f,h)}function a1(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jo(t.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=jo(t.unaryFilter.field);return It.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=jo(t.unaryFilter.field);return It.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=jo(t.unaryFilter.field);return It.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return It.create(jo(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Rr.create(t.compositeFilter.filters.map((r=>wS(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function l1(n){return YD[n]}function u1(n){return QD[n]}function c1(n){return XD[n]}function Xo(n){return{fieldPath:n.canonicalString()}}function jo(n){return Vt.fromServerFormat(n.fieldPath)}function SS(n){return n instanceof It?(function(t){if(t.op==="=="){if(Ov(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NAN"}};if(Vv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ov(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NAN"}};if(Vv(t.value))return{unaryFilter:{field:Xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(t.field),op:u1(t.op),value:t.value}}})(n):n instanceof Rr?(function(t){const r=t.getFilters().map((s=>SS(s)));return r.length===1?r[0]:{compositeFilter:{op:c1(t.op),filters:r}}})(n):Ce(54877,{filter:n})}function d1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function IS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,r,s,o=Pe.min(),l=Pe.min(),c=Gt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.yt=e}}function h1(n){const e=o1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.Cn=new m1}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Ys.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class m1{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ct(lt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ct(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CS=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(CS,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ya(0)}static cr(){return new ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="LruGarbageCollector",g1=1048576;function tE([n,e],[t,r]){const s=Fe(n,t);return s===0?Fe(e,r):s}class y1{constructor(e){this.Ir=e,this.buffer=new Ct(tE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(eE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ia(t)?fe(eE,"Ignoring IndexedDB error during garbage collection: ",t):await Sa(t)}await this.Vr(3e5)}))}}class v1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Ld.ce);const r=new y1(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Zv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,l,c,f,h;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s)))).next((v=>(r=v,c=Date.now(),this.removeTargets(e,r,t)))).next((v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(h=Date.now(),Yo()<=Ue.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${v} documents in `+(h-f)+`ms
Total Duration: ${h-y}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v}))))}}function E1(n,e){return new v1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(){this.changes=new to((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ol(r.mutation,s,Kn.empty(),nt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ve()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ve()){const s=Ui();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=xl();return o.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Ui();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ve())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,s){let o=ts();const l=Vl(),c=(function(){return Vl()})();return t.forEach(((f,h)=>{const y=r.get(h.key);s.has(h.key)&&(y===void 0||y.mutation instanceof no)?o=o.insert(h.key,h):y!==void 0?(l.set(h.key,y.mutation.getFieldMask()),Ol(y.mutation,h,y.mutation.getFieldMask(),nt.now())):l.set(h.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((h,y)=>l.set(h,y))),t.forEach(((h,y)=>c.set(h,new w1(y,l.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Vl();let s=new ut(((l,c)=>l-c)),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let y=r.get(f)||Kn.empty();y=c.applyToLocalView(h,y),r.set(f,y);const v=(s.get(c.batchId)||Ve()).add(f);s=s.insert(c.batchId,v)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),h=f.key,y=f.value,v=oS();y.forEach((E=>{if(!o.has(E)){const C=fS(t.get(E),r.get(E));C!==null&&v.set(E,C),o=o.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,v))}return j.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return Se.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):CD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):j.resolve(Ui());let c=zl,f=o;return l.next((h=>j.forEach(h,((y,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(y)?j.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{f=f.insert(y,E)}))))).next((()=>this.populateOverlays(e,h,o))).next((()=>this.computeViews(e,f,h,Ve()))).next((y=>({batchId:c,changes:iS(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((r=>{let s=xl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=xl();return this.indexManager.getCollectionParents(e,o).next((c=>j.forEach(c,(f=>{const h=(function(v,E){return new Vd(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((y=>{y.forEach(((v,E)=>{l=l.insert(v,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((f,h)=>{const y=h.getKey();l.get(y)===null&&(l=l.insert(y,Jt.newInvalidDocument(y)))}));let c=xl();return l.forEach(((f,h)=>{const y=o.get(f);y!==void 0&&Ol(y.mutation,h,Kn.empty(),nt.now()),Gd(t,h)&&(c=c.insert(f,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:wr(s.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:h1(s.bundledQuery),readTime:wr(s.readTime)}})(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.overlays=new ut(Se.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ui();return j.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),j.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const s=Ui(),o=t.length+1,l=new Se(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return j.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new ut(((h,y)=>h-y));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let y=o.get(h.largestBatchId);y===null&&(y=Ui(),o=o.insert(h.largestBatchId,y)),y.set(h.getKey(),h)}}const c=Ui(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,y)=>c.set(h,y))),!(c.size()>=s)););return j.resolve(c)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new HD(t,r));let o=this.qr.get(t);o===void 0&&(o=Ve(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.Qr=new Ct(xt.$r),this.Ur=new Ct(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new xt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new xt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Se(new lt([])),r=new xt(t,e),s=new xt(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new lt([])),r=new xt(t,e),s=new xt(t,e+1);let o=Ve();return this.Ur.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new xt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(xt.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new qD(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Zr=this.Zr.add(new xt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return j.resolve(l)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Em:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xt(t,0),s=new xt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(l=>{const c=this.Xr(l.Yr);o.push(c)})),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ct(Fe);return t.forEach((s=>{const o=new xt(s,0),l=new xt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(c=>{r=r.add(c.Yr)}))})),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Se.isDocumentKey(o)||(o=o.child(""));const l=new xt(new Se(o),0);let c=new Ct(Fe);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(f.Yr)),!0)}),l),j.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(t.mutations,(s=>{const o=new xt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new xt(t,0),s=this.Zr.firstAfterOrEqual(r);return j.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.ri=e,this.docs=(function(){return new ut(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(t))}getEntries(e,t){let r=ts();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Jt.newInvalidDocument(s))})),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=ts();const l=t.path,c=new Se(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:h,value:{document:y}}=f.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||nD(tD(y),r)<=0||(s.has(y.key)||Gd(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ce(9500)}ii(e,t){return j.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new k1(this)}getSize(e){return j.resolve(this.size)}}class k1 extends T1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.persistence=e,this.si=new to((t=>Sm(t)),Im),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new xm,this.targetCount=0,this.ai=ya.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ya(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),j.waitFor(o).next((()=>s))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),j.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ld(0),this.li=!1,this.li=!0,this.hi=new A1,this.referenceDelegate=e(this),this.Pi=new x1(this),this.indexManager=new p1,this.remoteDocumentCache=(function(s){return new P1(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new f1(t),this.Ii=new I1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new C1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new R1(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const s=new b1(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return j.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class b1 extends sD{constructor(e){super(),this.currentSequenceNumber=e}}class bm{constructor(e){this.persistence=e,this.Ri=new xm,this.Vi=null}static mi(e){return new bm(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(r=>{const s=Se.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,Pe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pd{constructor(e,t){this.persistence=e,this.pi=new to((r=>aD(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=E1(this,t)}static mi(e,t){return new pd(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?j.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((c=>{c||(r++,o.removeEntry(l,Pe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$c(e.data.value)),t}br(e,t,r){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ve(),s=Ve();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Nm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ik()?8:iD(Qt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new N1;return this.Ss(e,t,l).next((c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(Yo()<=Ue.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(Yo()<=Ue.DEBUG&&fe("QueryEngine","Query:",Qo(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Yo()<=Ue.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(t))):j.resolve())}ys(e,t){if(Hv(t))return j.resolve(null);let r=Tr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ip(t,null,"F"),r=Tr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Ve(...o);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.Ds(t,c);return this.Cs(t,h,l,f.readTime)?this.ys(e,Ip(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,r,s){return Hv(t)||s.isEqual(Pe.min())?j.resolve(null):this.ps.getDocuments(e,r).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,s)?j.resolve(null):(Yo()<=Ue.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qo(t)),this.vs(e,l,t,eD(s,zl)).next((c=>c)))}))}Ds(e,t){let r=new Ct(rS(e));return t.forEach(((s,o)=>{Gd(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return Yo()<=Ue.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ys.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="LocalStore",M1=3e8;class L1{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new ut(Fe),this.xs=new to((o=>Sm(o)),Im),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function U1(n,e,t,r){return new L1(n,e,t,r)}async function RS(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let f=Ve();for(const h of s){l.push(h.batchId);for(const y of h.mutations)f=f.add(y.key)}for(const h of o){c.push(h.batchId);for(const y of h.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next((h=>({Ls:h,removedBatchIds:l,addedBatchIds:c})))}))}))}function F1(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,h,y){const v=h.batch,E=v.keys();let C=j.resolve();return E.forEach((M=>{C=C.next((()=>y.getEntry(f,M))).next((U=>{const P=h.docVersions.get(M);Je(P!==null,48541),U.version.compareTo(P)<0&&(v.applyToRemoteDocument(U,h),U.isValidDocument()&&(U.setReadTime(h.commitVersion),y.addEntry(U)))}))})),C.next((()=>c.mutationQueue.removeMutationBatch(f,v)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let f=Ve();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(f=f.add(c.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function PS(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function V1(n,e){const t=xe(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach(((y,v)=>{const E=s.get(v);if(!E)return;c.push(t.Pi.removeMatchingKeys(o,y.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(o,y.addedDocuments,v))));let C=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?C=C.withResumeToken(Gt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):y.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(y.resumeToken,r)),s=s.insert(v,C),(function(U,P,$){return U.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=M1?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(E,C,y)&&c.push(t.Pi.updateTargetData(o,C))}));let f=ts(),h=Ve();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))})),c.push(O1(o,l,e.documentUpdates).next((y=>{f=y.ks,h=y.qs}))),!r.isEqual(Pe.min())){const y=t.Pi.getLastRemoteSnapshotVersion(o).next((v=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(y)}return j.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,f,h))).next((()=>f))})).then((o=>(t.Ms=s,o)))}function O1(n,e,t){let r=Ve(),s=Ve();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=ts();return t.forEach(((c,f)=>{const h=o.get(c);f.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(Pe.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):fe(Dm,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",f.version)})),{ks:l,qs:s}}))}function G1(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Em),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function B1(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,j.resolve(s)):t.Pi.allocateTargetId(r).next((l=>(s=new qs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function kp(n,e,t){const r=xe(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Ia(l))throw l;fe(Dm,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function nE(n,e,t){const r=xe(n);let s=Pe.min(),o=Ve();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,h,y){const v=xe(f),E=v.xs.get(y);return E!==void 0?j.resolve(v.Ms.get(E)):v.Pi.getTargetData(h,y)})(r,l,Tr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next((f=>{o=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?s:Pe.min(),t?o:Ve()))).next((c=>(q1(r,RD(e),c),{documents:c,Qs:o})))))}function q1(n,e,t){let r=n.Os.get(e)||Pe.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class rE{constructor(){this.activeTargetIds=DD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H1{constructor(){this.Mo=new rE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="ConnectivityMonitor";class iE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(sE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(sE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc=null;function xp(){return Dc===null?Dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dc++,"0x"+Dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="RestConnection",z1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W1{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ad?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const l=xp(),c=this.zo(e,t.toUriEncodedString());fe(Jh,`Sending RPC '${e}' ${l}:`,c,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,o);const{host:h}=new URL(c),y=va(h);return this.Jo(e,c,f,r,y).then((v=>(fe(Jh,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw ha(Jh,`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",r),v}))}Ho(e,t,r,s,o,l){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=z1[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class J1 extends W1{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const l=xp();return new Promise(((c,f)=>{const h=new N0;h.setWithCredentials(!0),h.listenOnce(D0.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Hc.NO_ERROR:const v=h.getResponseJson();fe(Wt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case Hc.TIMEOUT:fe(Wt,`RPC '${e}' ${l} timed out`),f(new Ee(se.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const E=h.getStatus();if(fe(Wt,`RPC '${e}' ${l} failed with status:`,E,"response text:",h.getResponseText()),E>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const M=C==null?void 0:C.error;if(M&&M.status&&M.message){const U=(function($){const Q=$.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(Q)>=0?Q:se.UNKNOWN})(M.status);f(new Ee(U,M.message))}else f(new Ee(se.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Ee(se.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:l,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{fe(Wt,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(s);fe(Wt,`RPC '${e}' ${l} sending request:`,s),h.send(t,"POST",y,r,15)}))}T_(e,t,r){const s=xp(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=U0(),c=L0(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=o.join("");fe(Wt,`Creating RPC '${e}' stream ${s}: ${y}`,f);const v=l.createWebChannel(y,f);this.I_(v);let E=!1,C=!1;const M=new K1({Yo:P=>{C?fe(Wt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(E||(fe(Wt,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),fe(Wt,`RPC '${e}' stream ${s} sending:`,P),v.send(P))},Zo:()=>v.close()}),U=(P,$,Q)=>{P.listen($,(Y=>{try{Q(Y)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return U(v,kl.EventType.OPEN,(()=>{C||(fe(Wt,`RPC '${e}' stream ${s} transport opened.`),M.o_())})),U(v,kl.EventType.CLOSE,(()=>{C||(C=!0,fe(Wt,`RPC '${e}' stream ${s} transport closed`),M.a_(),this.E_(v))})),U(v,kl.EventType.ERROR,(P=>{C||(C=!0,ha(Wt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),M.a_(new Ee(se.UNAVAILABLE,"The operation could not be completed")))})),U(v,kl.EventType.MESSAGE,(P=>{var $;if(!C){const Q=P.data[0];Je(!!Q,16349);const Y=Q,ee=(Y==null?void 0:Y.error)||(($=Y[0])==null?void 0:$.error);if(ee){fe(Wt,`RPC '${e}' stream ${s} received error:`,ee);const X=ee.status;let ie=(function(k){const L=vt[k];if(L!==void 0)return mS(L)})(X),N=ee.message;ie===void 0&&(ie=se.INTERNAL,N="Unknown error status: "+X+" with message "+ee.message),C=!0,M.a_(new Ee(ie,N)),v.close()}else fe(Wt,`RPC '${e}' stream ${s} received:`,Q),M.u_(Q)}})),U(c,M0.STAT_EVENT,(P=>{P.stat===_p.PROXY?fe(Wt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===_p.NOPROXY&&fe(Wt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(n){return new jD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="PersistentStream";class xS{constructor(e,t,r,s,o,l,c,f){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(es(t.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new Ee(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(oE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(oE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Y1 extends xS{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=t1(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Pe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Pe.min():l.readTime?wr(l.readTime):Pe.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Pp(this.serializer),t.addTarget=(function(o,l){let c;const f=l.target;if(c=Sp(f)?{documents:s1(o,f)}:{query:i1(o,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=_S(o,l.resumeToken);const h=Cp(o,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Pe.min())>0){c.readTime=hd(o,l.snapshotVersion.toTimestamp());const h=Cp(o,l.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=a1(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Pp(this.serializer),t.removeTarget=e,this.q_(t)}}class Q1 extends xS{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=r1(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Pp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>n1(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{}class j1 extends X1{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,Ap(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(se.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,Ap(t,r),s,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(se.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Z1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="RemoteStore";class eM{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{ro(this)&&(fe(zi,"Restarting streams for network reachability change."),await(async function(f){const h=xe(f);h.Ea.add(4),await uu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await zd(h)})(this))}))})),this.Ra=new Z1(r,s)}}async function zd(n){if(ro(n))for(const e of n.da)await e(!0)}async function uu(n){for(const e of n.da)await e(!1)}function bS(n,e){const t=xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fm(t)?Um(t):Ca(t).O_()&&Lm(t,e))}function Mm(n,e){const t=xe(n),r=Ca(t);t.Ia.delete(e),r.O_()&&NS(t,e),t.Ia.size===0&&(r.O_()?r.L_():ro(t)&&t.Ra.set("Unknown"))}function Lm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ca(n).Y_(e)}function NS(n,e){n.Va.Ue(e),Ca(n).Z_(e)}function Um(n){n.Va=new JD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ca(n).start(),n.Ra.ua()}function Fm(n){return ro(n)&&!Ca(n).x_()&&n.Ia.size>0}function ro(n){return xe(n).Ea.size===0}function DS(n){n.Va=void 0}async function tM(n){n.Ra.set("Online")}async function nM(n){n.Ia.forEach(((e,t)=>{Lm(n,e)}))}async function rM(n,e){DS(n),Fm(n)?(n.Ra.ha(e),Um(n)):n.Ra.set("Unknown")}async function sM(n,e,t){if(n.Ra.set("Online"),e instanceof yS&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(r){fe(zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await md(n,r)}else if(e instanceof Kc?n.Va.Ze(e):e instanceof gS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Pe.min()))try{const r=await PS(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const y=o.Ia.get(h);y&&o.Ia.set(h,y.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,h)=>{const y=o.Ia.get(f);if(!y)return;o.Ia.set(f,y.withResumeToken(Gt.EMPTY_BYTE_STRING,y.snapshotVersion)),NS(o,f);const v=new qs(y.target,f,h,y.sequenceNumber);Lm(o,v)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){fe(zi,"Failed to raise snapshot:",r),await md(n,r)}}async function md(n,e,t){if(!Ia(e))throw e;n.Ea.add(1),await uu(n),n.Ra.set("Offline"),t||(t=()=>PS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(zi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await zd(n)}))}function MS(n,e){return e().catch((t=>md(n,t,e)))}async function Wd(n){const e=xe(n),t=Zs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Em;for(;iM(e);)try{const s=await G1(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,oM(e,s)}catch(s){await md(e,s)}LS(e)&&US(e)}function iM(n){return ro(n)&&n.Ta.length<10}function oM(n,e){n.Ta.push(e);const t=Zs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function LS(n){return ro(n)&&!Zs(n).x_()&&n.Ta.length>0}function US(n){Zs(n).start()}async function aM(n){Zs(n).ra()}async function lM(n){const e=Zs(n);for(const t of n.Ta)e.ea(t.mutations)}async function uM(n,e,t){const r=n.Ta.shift(),s=Rm.from(r,e,t);await MS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Wd(n)}async function cM(n,e){e&&Zs(n).X_&&await(async function(r,s){if((function(l){return zD(l)&&l!==se.ABORTED})(s.code)){const o=r.Ta.shift();Zs(r).B_(),await MS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Wd(r)}})(n,e),LS(n)&&US(n)}async function aE(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),fe(zi,"RemoteStore received new credentials");const r=ro(t);t.Ea.add(3),await uu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await zd(t)}async function dM(n,e){const t=xe(n);e?(t.Ea.delete(2),await zd(t)):e||(t.Ea.add(2),await uu(t),t.Ra.set("Unknown"))}function Ca(n){return n.ma||(n.ma=(function(t,r,s){const o=xe(t);return o.sa(),new Y1(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:tM.bind(null,n),t_:nM.bind(null,n),r_:rM.bind(null,n),H_:sM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Fm(n)?Um(n):n.Ra.set("Unknown")):(await n.ma.stop(),DS(n))}))),n.ma}function Zs(n){return n.fa||(n.fa=(function(t,r,s){const o=xe(t);return o.sa(),new Q1(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:aM.bind(null,n),r_:cM.bind(null,n),ta:lM.bind(null,n),na:uM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Wd(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(zi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new Vm(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Om(n,e){if(es("AsyncQueue",`${e}: ${n}`),Ia(n))return new Ee(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{static emptySet(e){return new aa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=xl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`
`)+`
)`}copy(e,t){const r=new aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(){this.ga=new ut(Se.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class _a{constructor(e,t,r,s,o,l,c,f,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new _a(e,t,aa.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class hM{constructor(){this.queries=uE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=xe(t),o=s.queries;s.queries=uE(),o.forEach(((l,c)=>{for(const f of c.Sa)f.onError(r)}))})(this,new Ee(se.ABORTED,"Firestore shutting down"))}}function uE(){return new to((n=>nS(n)),Od)}async function pM(n,e){const t=xe(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new fM,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=Om(l,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Gm(t)}async function mM(n,e){const t=xe(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function gM(n,e){const t=xe(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(s)&&(r=!0);l.wa=s}}r&&Gm(t)}function yM(n,e,t){const r=xe(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function Gm(n){n.Ca.forEach((e=>{e.next()}))}var bp,cE;(cE=bp||(bp={})).Ma="default",cE.Cache="cache";class _M{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.key=e}}class VS{constructor(e){this.key=e}}class vM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=rS(e),this.tu=new aa(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new lE,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,v)=>{const E=s.get(y),C=Gd(this.query,v)?v:null,M=!!E&&this.mutatedKeys.has(E.key),U=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let P=!1;E&&C?E.data.isEqual(C.data)?M!==U&&(r.track({type:3,doc:C}),P=!0):this.su(E,C)||(r.track({type:2,doc:C}),P=!0,(f&&this.eu(C,f)>0||h&&this.eu(C,h)<0)&&(c=!0)):!E&&C?(r.track({type:0,doc:C}),P=!0):E&&!C&&(r.track({type:1,doc:E}),P=!0,(f||h)&&(c=!0)),P&&(C?(l=l.add(C),o=U?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,v)=>(function(C,M){const U=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:P})}};return U(C)-U(M)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,h=f!==this.Za;return this.Za=f,l.length!==0||h?{snapshot:new _a(this.query,e.tu,o,l,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new VS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new FS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _a.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Bm="SyncEngine";class EM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TM{constructor(e){this.key=e,this.hu=!1}}class wM{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new to((c=>nS(c)),Od),this.Iu=new Map,this.Eu=new Set,this.du=new ut(Se.comparator),this.Au=new Map,this.Ru=new xm,this.Vu={},this.mu=new Map,this.fu=ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SM(n,e,t=!0){const r=$S(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await OS(r,e,t,!0),s}async function IM(n,e){const t=$S(n);await OS(t,e,!0,!1)}async function OS(n,e,t,r){const s=await B1(n.localStore,Tr(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await CM(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&bS(n.remoteStore,s),c}async function CM(n,e,t,r,s){n.pu=(v,E,C)=>(async function(U,P,$,Q){let Y=P.view.ru($);Y.Cs&&(Y=await nE(U.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,Y))));const ee=Q&&Q.targetChanges.get(P.targetId),X=Q&&Q.targetMismatches.get(P.targetId)!=null,ie=P.view.applyChanges(Y,U.isPrimaryClient,ee,X);return fE(U,P.targetId,ie.au),ie.snapshot})(n,v,E,C);const o=await nE(n.localStore,e,!0),l=new vM(e,o.Qs),c=l.ru(o.documents),f=lu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),h=l.applyChanges(c,n.isPrimaryClient,f);fE(n,t,h.au);const y=new EM(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function AM(n,e,t){const r=xe(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!Od(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kp(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Mm(r.remoteStore,s.targetId),Np(r,s.targetId)})).catch(Sa)):(Np(r,s.targetId),await kp(r.localStore,s.targetId,!0))}async function RM(n,e){const t=xe(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mm(t.remoteStore,r.targetId))}async function PM(n,e,t){const r=LM(n);try{const s=await(function(l,c){const f=xe(l),h=nt.now(),y=c.reduce(((C,M)=>C.add(M.key)),Ve());let v,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let M=ts(),U=Ve();return f.Ns.getEntries(C,y).next((P=>{M=P,M.forEach((($,Q)=>{Q.isValidDocument()||(U=U.add($))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,M))).next((P=>{v=P;const $=[];for(const Q of c){const Y=GD(Q,v.get(Q.key).overlayedDocument);Y!=null&&$.push(new no(Q.key,Y,Y0(Y.value.mapValue),Xr.exists(!0)))}return f.mutationQueue.addMutationBatch(C,h,$,c)})).next((P=>{E=P;const $=P.applyToLocalDocumentSet(v,U);return f.documentOverlayCache.saveOverlays(C,P.batchId,$)}))})).then((()=>({batchId:E.batchId,changes:iS(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,c,f){let h=l.Vu[l.currentUser.toKey()];h||(h=new ut(Fe)),h=h.insert(c,f),l.Vu[l.currentUser.toKey()]=h})(r,s.batchId,t),await cu(r,s.changes),await Wd(r.remoteStore)}catch(s){const o=Om(s,"Failed to persist write");t.reject(o)}}async function GS(n,e){const t=xe(n);try{const r=await V1(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Je(l.hu,14607):s.removedDocuments.size>0&&(Je(l.hu,42227),l.hu=!1))})),await cu(t,r,e)}catch(r){await Sa(r)}}function dE(n,e,t){const r=xe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const f=xe(l);f.onlineState=c;let h=!1;f.queries.forEach(((y,v)=>{for(const E of v.Sa)E.va(c)&&(h=!0)})),h&&Gm(f)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kM(n,e,t){const r=xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new ut(Se.comparator);l=l.insert(o,Jt.newNoDocument(o,Pe.min()));const c=Ve().add(o),f=new Hd(Pe.min(),new Map,new ut(Fe),l,c);await GS(r,f),r.du=r.du.remove(o),r.Au.delete(e),qm(r)}else await kp(r.localStore,e,!1).then((()=>Np(r,e,t))).catch(Sa)}async function xM(n,e){const t=xe(n),r=e.batch.batchId;try{const s=await F1(t.localStore,e);qS(t,r,null),BS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await cu(t,s)}catch(s){await Sa(s)}}async function bM(n,e,t){const r=xe(n);try{const s=await(function(l,c){const f=xe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let y;return f.mutationQueue.lookupMutationBatch(h,c).next((v=>(Je(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(h,v)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,y,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,y))).next((()=>f.localDocuments.getDocuments(h,y)))}))})(r.localStore,e);qS(r,e,t),BS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await cu(r,s)}catch(s){await Sa(s)}}function BS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function qS(n,e,t){const r=xe(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Np(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||HS(n,r)}))}function HS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Mm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qm(n))}function fE(n,e,t){for(const r of t)r instanceof FS?(n.Ru.addReference(r.key,e),NM(n,r)):r instanceof VS?(fe(Bm,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||HS(n,r.key)):Ce(19791,{wu:r})}function NM(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(fe(Bm,"New document in limbo: "+t),n.Eu.add(r),qm(n))}function qm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(lt.fromString(e)),r=n.fu.next();n.Au.set(r,new TM(t)),n.du=n.du.insert(t,r),bS(n.remoteStore,new qs(Tr(Cm(t.path)),r,"TargetPurposeLimboResolution",Ld.ce))}}async function cu(n,e,t){const r=xe(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,f)=>{l.push(r.pu(f,e,t).then((h=>{var y;if((h||t)&&r.isPrimaryClient){const v=h?!h.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(h){s.push(h);const v=Nm.As(f.targetId,h);o.push(v)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(f,h){const y=xe(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>j.forEach(h,(E=>j.forEach(E.Es,(C=>y.persistence.referenceDelegate.addReference(v,E.targetId,C))).next((()=>j.forEach(E.ds,(C=>y.persistence.referenceDelegate.removeReference(v,E.targetId,C)))))))))}catch(v){if(!Ia(v))throw v;fe(Dm,"Failed to update sequence numbers: "+v)}for(const v of h){const E=v.targetId;if(!v.fromCache){const C=y.Ms.get(E),M=C.snapshotVersion,U=C.withLastLimboFreeSnapshotVersion(M);y.Ms=y.Ms.insert(E,U)}}})(r.localStore,o))}async function DM(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){fe(Bm,"User change. New user:",e.toKey());const r=await RS(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((f=>{f.reject(new Ee(se.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cu(t,r.Ls)}}function MM(n,e){const t=xe(n),r=t.Au.get(e);if(r&&r.hu)return Ve().add(r.key);{let s=Ve();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const c=t.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function $S(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kM.bind(null,e),e.Pu.H_=gM.bind(null,e.eventManager),e.Pu.yu=yM.bind(null,e.eventManager),e}function LM(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bM.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return U1(this.persistence,new D1,e.initialUser,this.serializer)}Cu(e){return new AS(bm.mi,this.serializer)}Du(e){return new H1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class UM extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof pd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new AS((r=>pd.mi(r,t)),this.serializer)}}class Dp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DM.bind(null,this.syncEngine),await dM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new hM})()}createDatastore(e){const t=$d(e.databaseInfo.databaseId),r=(function(o){return new J1(o)})(e.databaseInfo);return(function(o,l,c,f){return new j1(o,l,c,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,c){return new eM(r,s,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>dE(this.syncEngine,t,0)),(function(){return iE.v()?new iE:new $1})())}createSyncEngine(e,t){return(function(s,o,l,c,f,h,y){const v=new wM(s,o,l,c,f,h);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const o=xe(s);fe(zi,"RemoteStore shutting down."),o.Ea.add(5),await uu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="FirestoreClient";class VM{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Kt.UNAUTHENTICATED,this.clientId=_m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{fe(ei,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(fe(ei,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Om(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Qh(n,e){n.asyncQueue.verifyOperationInProgress(),fe(ei,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await RS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function hE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await OM(n);fe(ei,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>aE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>aE(e.remoteStore,s))),n._onlineComponents=e}async function OM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(ei,"Using user provided OfflineComponentProvider");try{await Qh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===se.FAILED_PRECONDITION||s.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ha("Error using user provided cache. Falling back to memory cache: "+t),await Qh(n,new gd)}}else fe(ei,"Using default OfflineComponentProvider"),await Qh(n,new UM(void 0));return n._offlineComponents}async function zS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(ei,"Using user provided OnlineComponentProvider"),await hE(n,n._uninitializedComponentsProvider._online)):(fe(ei,"Using default OnlineComponentProvider"),await hE(n,new Dp))),n._onlineComponents}function GM(n){return zS(n).then((e=>e.syncEngine))}async function pE(n){const e=await zS(n),t=e.eventManager;return t.onListen=SM.bind(null,e.syncEngine),t.onUnlisten=AM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RM.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="firestore.googleapis.com",gE=!0;class yE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KS,this.ssl=gE}else this.host=e.host,this.ssl=e.ssl??gE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g1)throw new Ee(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qN;switch(r.type){case"firstParty":return new WN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=mE.get(t);r&&(fe("ComponentProvider","Removing Datastore"),mE.delete(t),r.terminate())})(this),Promise.resolve()}}function BM(n,e,t,r={}){var h;n=oa(n,Hm);const s=va(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Hw(`https://${c}`),$w("Firestore",!0)),o.host!==KS&&o.host!==c&&ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:c,ssl:s,emulatorOptions:r};if(!Js(f,l)&&(n._setSettings(f),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=Kt.MOCK_USER;else{y=XP(r.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Ee(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Kt(E)}n._authCredentials=new HN(new V0(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kd(this.firestore,e,this._query)}}class bt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ou(t,bt._jsonSchema))return new bt(e,r||null,new Se(lt.fromString(t.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:Et("string",bt._jsonSchemaVersion),referencePath:Et("string")};class Xl extends Kd{constructor(e,t,r){super(e,t,Cm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new Se(e))}withConverter(e){return new Xl(this.firestore,e,this._path)}}function _E(n,e,...t){if(n=Ot(n),arguments.length===1&&(e=_m.newId()),jN("doc","path",e),n instanceof Hm){const r=lt.fromString(e,...t);return xv(r),new bt(n,null,new Se(r))}{if(!(n instanceof bt||n instanceof Xl))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(lt.fromString(e,...t));return xv(r),new bt(n.firestore,n instanceof Xl?n.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="AsyncQueue";class EE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kS(this,"async_queue_retry"),this._c=()=>{const r=Yh();r&&fe(vE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Yh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Yh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Oi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ia(e))throw e;fe(vE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",TE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Vm.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:TE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function TE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class yd extends Hm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new EE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new EE(e),this._firestoreClient=void 0,await e}}}function qM(n,e){const t=typeof n=="object"?n:om(),r=typeof n=="string"?n:ad,s=Zi(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=YP("firestore");o&&BM(s,...o)}return s}function JS(n){if(n._terminated)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HM(n),n._firestoreClient}function HM(n){var r,s,o;const e=n._freezeSettings(),t=(function(c,f,h,y){return new cD(c,f,h,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,WS(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new VM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bn(Gt.fromBase64String(e))}catch(t){throw new Ee(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ou(e,bn._jsonSchema))return bn.fromBase64String(e.bytes)}}bn._jsonSchemaVersion="firestore/bytes/1.0",bn._jsonSchema={type:Et("string",bn._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sr._jsonSchemaVersion}}static fromJSON(e){if(ou(e,Sr._jsonSchema))return new Sr(e.latitude,e.longitude)}}Sr._jsonSchemaVersion="firestore/geoPoint/1.0",Sr._jsonSchema={type:Et("string",Sr._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ou(e,Ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ir(e.vectorValues);throw new Ee(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ir._jsonSchemaVersion="firestore/vectorValue/1.0",Ir._jsonSchema={type:Et("string",Ir._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=/^__.*__$/;class zM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new no(e,this.data,this.fieldMask,t,this.fieldTransforms):new au(e,this.data,t,this.fieldTransforms)}}function QS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class zm{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QS(this.Ac)&&$M.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$d(e)}Cc(e,t,r,s=!1){return new zm({Ac:e,methodName:t,Dc:r,path:Vt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KM(n){const e=n._freezeSettings(),t=$d(n._databaseId);return new WM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JM(n,e,t,r,s,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);eI("Data must be an object, but it was:",l,r);const c=jS(r,l);let f,h;if(o.merge)f=new Kn(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const v of o.mergeFields){const E=YM(e,v,t);if(!l.contains(E))throw new Ee(se.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);XM(y,E)||y.push(E)}f=new Kn(y),h=l.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,h=l.fieldTransforms;return new zM(new xn(c),f,h)}function XS(n,e){if(ZS(n=Ot(n)))return eI("Unsupported field value:",e,n),jS(n,e);if(n instanceof YS)return(function(r,s){if(!QS(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const c of r){let f=XS(c,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=nt.fromDate(r);return{timestampValue:hd(s.serializer,o)}}if(r instanceof nt){const o=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hd(s.serializer,o)}}if(r instanceof Sr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bn)return{bytesValue:_S(s.serializer,r._byteString)};if(r instanceof bt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:km(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ir)return(function(l,c){return{mapValue:{fields:{[K0]:{stringValue:J0},[ld]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return Am(c.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${vm(r)}`)})(n,e)}function jS(n,e){const t={};return B0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(n,((r,s)=>{const o=XS(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function ZS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nt||n instanceof Sr||n instanceof bn||n instanceof bt||n instanceof YS||n instanceof Ir)}function eI(n,e,t){if(!ZS(t)||!O0(t)){const r=vm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function YM(n,e,t){if((e=Ot(e))instanceof $m)return e._internalPath;if(typeof e=="string")return tI(n,e);throw _d("Field path arguments must be of type string or ",n,!1,void 0,t)}const QM=new RegExp("[~\\*/\\[\\]]");function tI(n,e,t){if(e.search(QM)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $m(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _d(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new Ee(se.INVALID_ARGUMENT,c+n+f)}function XM(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jM extends nI{data(){return super.data()}}function rI(n,e){return typeof e=="string"?tI(n,e):e instanceof $m?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eL{convertValue(e,t="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return eo(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){var r,s,o;const t=(o=(s=(r=e.fields)==null?void 0:r[ld].arrayValue)==null?void 0:s.values)==null?void 0:o.map((l=>mt(l.doubleValue)));return new Ir(t)}convertGeoPoint(e){return new Sr(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Fd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const t=Qs(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=lt.fromString(e);Je(IS(r),9688,{name:e});const s=new Kl(r.get(1),r.get(3)),o=new Se(r.popFirst(5));return s.isEqual(t)||es(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Nl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gi extends nI{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Gi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gi._jsonSchema={type:Et("string",Gi._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class Jc extends Gi{data(e={}){return super.data(e)}}class la{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Nl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Jc(this._firestore,this._userDataWriter,r.key,r,new Nl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const f=new Jc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Nl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const f=new Jc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Nl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,y=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:nL(c.type),doc:f,oldIndex:h,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=la._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Et("string",la._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class sI extends eL{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function rL(n,e,t){n=oa(n,bt);const r=oa(n.firestore,yd),s=tL(n.converter,e,t);return iL(r,[JM(KM(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Xr.none())])}function sL(n,...e){var f,h,y;n=Ot(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||wE(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(wE(e[r])){const v=e[r];e[r]=(f=v.next)==null?void 0:f.bind(v),e[r+1]=(h=v.error)==null?void 0:h.bind(v),e[r+2]=(y=v.complete)==null?void 0:y.bind(v)}let o,l,c;if(n instanceof bt)l=oa(n.firestore,yd),c=Cm(n._key.path),o={next:v=>{e[r]&&e[r](oL(l,n,v))},error:e[r+1],complete:e[r+2]};else{const v=oa(n,Kd);l=oa(v.firestore,yd),c=v._query;const E=new sI(l);o={next:C=>{e[r]&&e[r](new la(l,E,v,C))},error:e[r+1],complete:e[r+2]},ZM(n._query)}return(function(E,C,M,U){const P=new FM(U),$=new _M(C,P,M);return E.asyncQueue.enqueueAndForget((async()=>pM(await pE(E),$))),()=>{P.Nu(),E.asyncQueue.enqueueAndForget((async()=>mM(await pE(E),$)))}})(JS(l),c,s,o)}function iL(n,e){return(function(r,s){const o=new Oi;return r.asyncQueue.enqueueAndForget((async()=>PM(await GM(r),s,o))),o.promise})(JS(n),e)}function oL(n,e,t){const r=t.docs.get(e._key),s=new sI(n);return new Gi(n,s,e._key,r,new Nl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){wa=s})(Ea),Cr(new Xn("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new yd(new $N(r.getProvider("auth-internal")),new KN(l,r.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ee(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(h.options.projectId,y)})(l,s),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),Nn(Av,Rv,e),Nn(Av,Rv,"esm2020")})();const iI="@firebase/installations",Wm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=1e4,aI=`w:${Wm}`,lI="FIS_v2",aL="https://firebaseinstallations.googleapis.com/v1",lL=3600*1e3,uL="installations",cL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wi=new ji(uL,cL,dL);function uI(n){return n instanceof jn&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI({projectId:n}){return`${aL}/projects/${n}/installations`}function dI(n){return{token:n.token,requestStatus:2,expiresIn:hL(n.expiresIn),creationTime:Date.now()}}async function fI(n,e){const r=(await e.json()).error;return Wi.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function fL(n,{refreshToken:e}){const t=hI(n);return t.append("Authorization",pL(e)),t}async function pI(n){const e=await n();return e.status>=500&&e.status<600?n():e}function hL(n){return Number(n.replace("s","000"))}function pL(n){return`${lI} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=cI(n),s=hI(n),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const l={fid:t,authVersion:lI,appId:n.appId,sdkVersion:aI},c={method:"POST",headers:s,body:JSON.stringify(l)},f=await pI(()=>fetch(r,c));if(f.ok){const h=await f.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:dI(h.authToken)}}else throw await fI("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=/^[cdef][\w-]{21}$/,Mp="";function _L(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=vL(n);return yL.test(t)?t:Mp}catch{return Mp}}function vL(n){return gL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Map;function yI(n,e){const t=Jd(n);_I(t,e),EL(t,e)}function _I(n,e){const t=gI.get(n);if(t)for(const r of t)r(e)}function EL(n,e){const t=TL();t&&t.postMessage({key:n,fid:e}),wL()}let Fi=null;function TL(){return!Fi&&"BroadcastChannel"in self&&(Fi=new BroadcastChannel("[Firebase] FID Change"),Fi.onmessage=n=>{_I(n.data.key,n.data.fid)}),Fi}function wL(){gI.size===0&&Fi&&(Fi.close(),Fi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="firebase-installations-database",IL=1,Ki="firebase-installations-store";let Xh=null;function Km(){return Xh||(Xh=Jw(SL,IL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ki)}}})),Xh}async function vd(n,e){const t=Jd(n),s=(await Km()).transaction(Ki,"readwrite"),o=s.objectStore(Ki),l=await o.get(t);return await o.put(e,t),await s.done,(!l||l.fid!==e.fid)&&yI(n,e.fid),e}async function vI(n){const e=Jd(n),r=(await Km()).transaction(Ki,"readwrite");await r.objectStore(Ki).delete(e),await r.done}async function Yd(n,e){const t=Jd(n),s=(await Km()).transaction(Ki,"readwrite"),o=s.objectStore(Ki),l=await o.get(t),c=e(l);return c===void 0?await o.delete(t):await o.put(c,t),await s.done,c&&(!l||l.fid!==c.fid)&&yI(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jm(n){let e;const t=await Yd(n.appConfig,r=>{const s=CL(r),o=AL(n,s);return e=o.registrationPromise,o.installationEntry});return t.fid===Mp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function CL(n){const e=n||{fid:_L(),registrationStatus:0};return EI(e)}function AL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Wi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=RL(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:PL(n)}:{installationEntry:e}}async function RL(n,e){try{const t=await mL(n,e);return vd(n.appConfig,t)}catch(t){throw uI(t)&&t.customData.serverCode===409?await vI(n.appConfig):await vd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function PL(n){let e=await SE(n.appConfig);for(;e.registrationStatus===1;)await mI(100),e=await SE(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Jm(n);return r||t}return e}function SE(n){return Yd(n,e=>{if(!e)throw Wi.create("installation-not-found");return EI(e)})}function EI(n){return kL(n)?{fid:n.fid,registrationStatus:0}:n}function kL(n){return n.registrationStatus===1&&n.registrationTime+oI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL({appConfig:n,heartbeatServiceProvider:e},t){const r=bL(n,t),s=fL(n,t),o=e.getImmediate({optional:!0});if(o){const h=await o.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const l={installation:{sdkVersion:aI,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},f=await pI(()=>fetch(r,c));if(f.ok){const h=await f.json();return dI(h)}else throw await fI("Generate Auth Token",f)}function bL(n,{fid:e}){return`${cI(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ym(n,e=!1){let t;const r=await Yd(n.appConfig,o=>{if(!TI(o))throw Wi.create("not-registered");const l=o.authToken;if(!e&&ML(l))return o;if(l.requestStatus===1)return t=NL(n,e),o;{if(!navigator.onLine)throw Wi.create("app-offline");const c=UL(o);return t=DL(n,c),c}});return t?await t:r.authToken}async function NL(n,e){let t=await IE(n.appConfig);for(;t.authToken.requestStatus===1;)await mI(100),t=await IE(n.appConfig);const r=t.authToken;return r.requestStatus===0?Ym(n,e):r}function IE(n){return Yd(n,e=>{if(!TI(e))throw Wi.create("not-registered");const t=e.authToken;return FL(t)?{...e,authToken:{requestStatus:0}}:e})}async function DL(n,e){try{const t=await xL(n,e),r={...e,authToken:t};return await vd(n.appConfig,r),t}catch(t){if(uI(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await vI(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await vd(n.appConfig,r)}throw t}}function TI(n){return n!==void 0&&n.registrationStatus===2}function ML(n){return n.requestStatus===2&&!LL(n)}function LL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+lL}function UL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function FL(n){return n.requestStatus===1&&n.requestTime+oI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(n){const e=n,{installationEntry:t,registrationPromise:r}=await Jm(e);return r?r.catch(console.error):Ym(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(n,e=!1){const t=n;return await GL(t),(await Ym(t,e)).token}async function GL(n){const{registrationPromise:e}=await Jm(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(n){if(!n||!n.options)throw jh("App Configuration");if(!n.name)throw jh("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw jh(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function jh(n){return Wi.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="installations",qL="installations-internal",HL=n=>{const e=n.getProvider("app").getImmediate(),t=BL(e),r=Zi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},$L=n=>{const e=n.getProvider("app").getImmediate(),t=Zi(e,wI).getImmediate();return{getId:()=>VL(t),getToken:s=>OL(t,s)}};function zL(){Cr(new Xn(wI,HL,"PUBLIC")),Cr(new Xn(qL,$L,"PRIVATE"))}zL();Nn(iI,Wm);Nn(iI,Wm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="analytics",WL="firebase_id",KL="origin",JL=60*1e3,YL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new bd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new ji("analytics","Analytics",QL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(n){if(!n.startsWith(Qm)){const e=En.create("invalid-gtag-resource",{gtagURL:n});return en.warn(e.message),""}return n}function SI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function jL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function ZL(n,e){const t=jL("firebase-js-sdk-policy",{createScriptURL:XL}),r=document.createElement("script"),s=`${Qm}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function eU(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function tU(n,e,t,r,s,o){const l=r[s];try{if(l)await e[l];else{const f=(await SI(t)).find(h=>h.measurementId===s);f&&await e[f.appId]}}catch(c){en.error(c)}n("config",s,o)}async function nU(n,e,t,r,s){try{let o=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const c=await SI(t);for(const f of l){const h=c.find(v=>v.measurementId===f),y=h&&e[h.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,s||{})}catch(o){en.error(o)}}function rU(n,e,t,r){async function s(o,...l){try{if(o==="event"){const[c,f]=l;await nU(n,e,t,c,f)}else if(o==="config"){const[c,f]=l;await tU(n,e,t,r,c,f)}else if(o==="consent"){const[c,f]=l;n("consent",c,f)}else if(o==="get"){const[c,f,h]=l;n("get",c,f,h)}else if(o==="set"){const[c]=l;n("set",c)}else n(o,...l)}catch(c){en.error(c)}}return s}function sU(n,e,t,r,s){let o=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=rU(o,n,e,t),{gtagCore:o,wrappedGtag:window[s]}}function iU(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Qm)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=30,aU=1e3;class lU{constructor(e={},t=aU){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const II=new lU;function uU(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function cU(n){var l;const{appId:e,apiKey:t}=n,r={method:"GET",headers:uU(t)},s=YL.replace("{app-id}",e),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let c="";try{const f=await o.json();(l=f.error)!=null&&l.message&&(c=f.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function dU(n,e=II,t){const{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw En.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw En.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new pU;return setTimeout(async()=>{c.abort()},JL),CI({appId:r,apiKey:s,measurementId:o},l,c,e)}async function CI(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=II){var c;const{appId:o,measurementId:l}=n;try{await fU(r,e)}catch(f){if(l)return en.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:l};throw f}try{const f=await cU(n);return s.deleteThrottleMetadata(o),f}catch(f){const h=f;if(!hU(h)){if(s.deleteThrottleMetadata(o),l)return en.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw f}const y=Number((c=h==null?void 0:h.customData)==null?void 0:c.httpStatus)===503?X_(t,s.intervalMillis,oU):X_(t,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return s.setThrottleMetadata(o,v),en.debug(`Calling attemptFetch again in ${y} millis`),CI(n,v,r,s)}}function fU(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(o),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function hU(n){if(!(n instanceof jn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class pU{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function mU(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const o=await e,l={...r,send_to:o};n("event",t,l)}}async function gU(n,e,t,r){if(r&&r.global){const s={};for(const o of Object.keys(t))s[`user_properties.${o}`]=t[o];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(){if(rm())try{await sm()}catch(n){return en.warn(En.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return en.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _U(n,e,t,r,s,o,l){const c=dU(n);c.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&en.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>en.error(E)),e.push(c);const f=yU().then(E=>{if(E)return r.getId()}),[h,y]=await Promise.all([c,f]);iU(o)||ZL(o,h.measurementId),s("js",new Date);const v=(l==null?void 0:l.config)??{};return v[KL]="firebase",v.update=!0,y!=null&&(v[WL]=y),s("config",h.measurementId,v),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e){this.app=e}_delete(){return delete ua[this.app.options.appId],Promise.resolve()}}let ua={},CE=[];const AE={};let Zh="dataLayer",EU="gtag",RE,Xm,PE=!1;function TU(){const n=[];if(nm()&&n.push("This is a browser extension environment."),zw()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=En.create("invalid-analytics-context",{errorInfo:e});en.warn(t.message)}}function wU(n,e,t){TU();const r=n.options.appId;if(!r)throw En.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)en.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(ua[r]!=null)throw En.create("already-exists",{id:r});if(!PE){eU(Zh);const{wrappedGtag:o,gtagCore:l}=sU(ua,CE,AE,Zh,EU);Xm=o,RE=l,PE=!0}return ua[r]=_U(n,CE,AE,e,RE,Zh,t),new vU(n)}function SU(n=om()){n=Ot(n);const e=Zi(n,Ed);return e.isInitialized()?e.getImmediate():IU(n)}function IU(n,e={}){const t=Zi(n,Ed);if(t.isInitialized()){const s=t.getImmediate();if(Js(e,t.getOptions()))return s;throw En.create("already-initialized")}return t.initialize({options:e})}async function CU(){if(nm()||!zw()||!rm())return!1;try{return await sm()}catch{return!1}}function AU(n,e,t){n=Ot(n),gU(Xm,ua[n.app.options.appId],e,t).catch(r=>en.error(r))}function RU(n,e,t,r){n=Ot(n),mU(Xm,ua[n.app.options.appId],e,t,r).catch(s=>en.error(s))}const kE="@firebase/analytics",xE="0.10.19";function PU(){Cr(new Xn(Ed,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return wU(r,s,t)},"PUBLIC")),Cr(new Xn("analytics-internal",n,"PRIVATE")),Nn(kE,xE),Nn(kE,xE,"esm2020");function n(e){try{const t=e.getProvider(Ed).getImmediate();return{logEvent:(r,s,o)=>RU(t,r,s,o),setUserProperties:(r,s)=>AU(t,r,s)}}catch(t){throw En.create("interop-component-reg-failed",{reason:t})}}}PU();const kU={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},jm=Yw(kU),jl=GN(jm),bE=qM(jm),xU=new Kr;CU().then(n=>{n&&SU(jm)});const Td={signInWithGoogle:async()=>{try{return(await Yb(jl,xU)).user}catch(n){throw console.error("Error signing in with Google",n),n}},subscribeToRepos:(n,e)=>{const t=_E(bE,"user_settings",n);return sL(t,r=>{if(r.exists()){const s=r.data();e(s.repos||[])}else e([])})},saveUserRepos:async(n,e)=>{const t=_E(bE,"user_settings",n);await rL(t,{repos:e},{merge:!0})}};var bU={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let NU,DU;function MU(){return{geminiUrl:NU,vertexUrl:DU}}function LU(n,e,t,r){var s,o;if(!(n!=null&&n.baseUrl)){const l=MU();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:t:(o=l.geminiUrl)!==null&&o!==void 0?o:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rs{}function ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const o=e[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(n,e,t){for(let o=0;o<e.length-1;o++){const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in n))if(Array.isArray(t))n[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[c])){const f=n[c];if(Array.isArray(t))for(let h=0;h<f.length;h++){const y=f[h];p(y,e.slice(o+1),t[h])}else for(const h of f)p(h,e.slice(o+1),t)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in n||(n[c]=[{}]);const f=n[c];p(f[0],e.slice(o+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const r=e[e.length-1],s=n[r];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in n){const l=n[o];return Array.isArray(l)?l.map(c=>d(c,e.slice(r+1),t)):t}else return t}else n=n[s]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function UU(n,e){for(const[t,r]of Object.entries(e)){const s=t.split("."),o=r.split("."),l=new Set;let c=-1;for(let f=0;f<s.length;f++)if(s[f]==="*"){c=f;break}if(c!==-1&&o.length>c)for(let f=c;f<o.length;f++){const h=o[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}Lp(n,s,o,0,l)}}function Lp(n,e,t,r,s){if(r>=e.length||typeof n!="object"||n===null)return;const o=e[r];if(o.endsWith("[]")){const l=o.slice(0,-2),c=n;if(l in c&&Array.isArray(c[l]))for(const f of c[l])Lp(f,e,t,r+1,s)}else if(o==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),f={};for(const h of c)f[h]=l[h];for(const[h,y]of Object.entries(f)){const v=[];for(const E of t.slice(r))E==="*"?v.push(h):v.push(E);p(l,v,y)}for(const h of c)delete l[h]}}else{const l=n;o in l&&Lp(l[o],e,t,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FU(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const r=d(n,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function VU(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);o!=null&&p(e,["error"],o);const l=d(n,["response","generateVideoResponse"]);return l!=null&&p(e,["response"],GU(l)),e}function OU(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);o!=null&&p(e,["error"],o);const l=d(n,["response"]);return l!=null&&p(e,["response"],BU(l)),e}function GU(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>qU(l))),p(e,["generatedVideos"],o)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=d(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function BU(n){const e={},t=d(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>HU(l))),p(e,["generatedVideos"],o)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=d(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function qU(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],YU(t)),e}function HU(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],QU(t)),e}function $U(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function zU(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function WU(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);o!=null&&p(e,["error"],o);const l=d(n,["response"]);return l!=null&&p(e,["response"],KU(l)),e}function KU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["parent"]);r!=null&&p(e,["parent"],r);const s=d(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function AI(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);o!=null&&p(e,["error"],o);const l=d(n,["response"]);return l!=null&&p(e,["response"],JU(l)),e}function JU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["parent"]);r!=null&&p(e,["parent"],r);const s=d(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function YU(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const r=d(n,["encodedVideo"]);r!=null&&p(e,["videoBytes"],Zm(r));const s=d(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function QU(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const r=d(n,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],Zm(r));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var NE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(NE||(NE={}));var DE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(DE||(DE={}));var ME;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(ME||(ME={}));var Hs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Hs||(Hs={}));var LE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(LE||(LE={}));var UE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(UE||(UE={}));var FE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(FE||(FE={}));var VE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(VE||(VE={}));var OE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(OE||(OE={}));var GE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(GE||(GE={}));var BE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(BE||(BE={}));var qE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(qE||(qE={}));var HE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(HE||(HE={}));var $E;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})($E||($E={}));var zE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(zE||(zE={}));var WE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(WE||(WE={}));var KE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(KE||(KE={}));var JE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(JE||(JE={}));var YE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(YE||(YE={}));var QE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(QE||(QE={}));var XE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(XE||(XE={}));var wd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(wd||(wd={}));var jE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(jE||(jE={}));var ZE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(ZE||(ZE={}));var eT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(eT||(eT={}));var Up;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Up||(Up={}));var tT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(tT||(tT={}));var nT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(nT||(nT={}));var rT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(rT||(rT={}));var sT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sT||(sT={}));var iT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(iT||(iT={}));var oT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(oT||(oT={}));var aT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(aT||(aT={}));var lT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lT||(lT={}));var uT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(uT||(uT={}));var cT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(cT||(cT={}));var dT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dT||(dT={}));var fT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(fT||(fT={}));var hT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(hT||(hT={}));var pT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(pT||(pT={}));var mT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(mT||(mT={}));var gT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(gT||(gT={}));var yT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(yT||(yT={}));var _T;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(_T||(_T={}));var vT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(vT||(vT={}));var ET;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ET||(ET={}));var TT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(TT||(TT={}));var wT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(wT||(wT={}));var ST;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ST||(ST={}));var IT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(IT||(IT={}));var CT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(CT||(CT={}));var AT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(AT||(AT={}));var RT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(RT||(RT={}));var PT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(PT||(PT={}));var ta;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ta||(ta={}));class Fp{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Cl{get text(){var e,t,r,s,o,l,c,f;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const v=[];for(const E of(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[C,M]of Object.entries(E))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(M!==null||M!==void 0)&&v.push(C);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;y=!0,h+=E.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,t,r,s,o,l,c,f;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const v of(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[E,C]of Object.entries(v))E!=="inlineData"&&(C!==null||C!==void 0)&&y.push(E);v.inlineData&&typeof v.inlineData.data=="string"&&(h+=atob(v.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,r,s,o,l,c,f;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,r,s,o,l,c,f,h;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,r,s,o,l,c,f,h;if(((s=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(f=(c=(l=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class kT{}class xT{}class XU{}class jU{}class ZU{}class eF{}class bT{}class NT{}class DT{}class tF{}class Sd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Sd;let s;const o=e;return t?s=OU(o):s=VU(o),Object.assign(r,s),r}}class MT{}class LT{}class UT{}class FT{}class nF{}class rF{}class sF{}class eg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new eg,o=WU(e);return Object.assign(r,o),r}}class iF{}class oF{}class aF{}class VT{}class lF{get text(){var e,t,r;let s="",o=!1;const l=[];for(const c of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[f,h]of Object.entries(c))f!=="text"&&f!=="thought"&&h!==null&&l.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;o=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var e,t,r;let s="";const o=[];for(const l of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(l))c!=="inlineData"&&f!==null&&o.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class uF{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class tg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new tg,o=AI(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function RI(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function PI(n){return Array.isArray(n)?n.map(e=>Id(e)):[Id(n)]}function Id(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function kI(n){const e=Id(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function xI(n){const e=Id(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function bI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>OT(e)):[OT(n)]}function Vp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function GT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function BT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Yt(n){if(n==null)throw new Error("ContentUnion is required");return Vp(n)?n:{role:"user",parts:bI(n)}}function ng(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Yt(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Yt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Yt(t)):[Yt(e)]}function Dn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(GT(n)||BT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yt(n)]}const e=[],t=[],r=Vp(n[0]);for(const s of n){const o=Vp(s);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(s);else{if(GT(s)||BT(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return r||e.push({role:"user",parts:bI(t)}),e}function cF(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(Hs).includes(t[0].toUpperCase())?t[0].toUpperCase():Hs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(Hs).includes(r.toUpperCase())?r.toUpperCase():Hs.TYPE_UNSPECIFIED})}}function ca(n){const e={},t=["items"],r=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,n=o[1]):o[1].type==="null"&&(e.nullable=!0,n=o[0])),n.type instanceof Array&&cF(n.type,e);for(const[l,c]of Object.entries(n))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Hs).includes(c.toUpperCase())?c.toUpperCase():Hs.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=ca(c);else if(r.includes(l)){const f=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}f.push(ca(h))}e[l]=f}else if(s.includes(l)){const f={};for(const[h,y]of Object.entries(c))f[h]=ca(y);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=c}return e}function rg(n){return ca(n)}function sg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ig(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Aa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ca(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ca(e.response));return n}function Ra(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function dF(n,e,t,r=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function ss(n,e){if(typeof e!="string")throw new Error("name must be a string");return dF(n,e,"cachedContents")}function NI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function si(n){return Zm(n)}function fF(n){return n!=null&&typeof n=="object"&&"name"in n}function hF(n){return n!=null&&typeof n=="object"&&"video"in n}function pF(n){return n!=null&&typeof n=="object"&&"uri"in n}function DI(n){var e;let t;if(fF(n)&&(t=n.name),!(pF(n)&&(t=n.uri,t===void 0))&&!(hF(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function MI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function LI(n){for(const e of["models","tunedModels","publisherModels"])if(mF(n,e))return n[e];return[]}function mF(n,e){return n!==null&&typeof n=="object"&&e in n}function gF(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function yF(n,e={}){const t=[],r=new Set;for(const s of n){const o=s.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const l=gF(s,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function UI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function _F(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function FI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let o=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Pa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function VI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vF(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const r=d(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>ZF(l))),p(e,["inlinedResponses"],o)}const s=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["inlinedEmbedContentResponses"],o)}return e}function EF(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const r=d(n,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const s=d(n,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function TF(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const r=d(n,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const s=d(n,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Yc(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const s=d(n,["metadata","state"]);s!=null&&p(e,["state"],VI(s));const o=d(n,["metadata","createTime"]);o!=null&&p(e,["createTime"],o);const l=d(n,["metadata","endTime"]);l!=null&&p(e,["endTime"],l);const c=d(n,["metadata","updateTime"]);c!=null&&p(e,["updateTime"],c);const f=d(n,["metadata","model"]);f!=null&&p(e,["model"],f);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],vF(FI(h))),e}function Op(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=d(n,["state"]);s!=null&&p(e,["state"],VI(s));const o=d(n,["error"]);o!=null&&p(e,["error"],o);const l=d(n,["createTime"]);l!=null&&p(e,["createTime"],l);const c=d(n,["startTime"]);c!=null&&p(e,["startTime"],c);const f=d(n,["endTime"]);f!=null&&p(e,["endTime"],f);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const y=d(n,["model"]);y!=null&&p(e,["model"],y);const v=d(n,["inputConfig"]);v!=null&&p(e,["src"],wF(v));const E=d(n,["outputConfig"]);E!=null&&p(e,["dest"],EF(FI(E)));const C=d(n,["completionStats"]);return C!=null&&p(e,["completionStats"],C),e}function wF(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const r=d(n,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const s=d(n,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function SF(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=d(e,["fileName"]);r!=null&&p(t,["fileName"],r);const s=d(e,["inlinedRequests"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>jF(n,l))),p(t,["requests","requests"],o)}return t}function IF(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const r=d(n,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const s=d(n,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function CF(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function AF(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],Pa(n,r)),t}function RF(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],Pa(n,r)),t}function PF(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const r=d(n,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],kF(r));const s=d(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const o=d(n,["finishReason"]);o!=null&&p(e,["finishReason"],o);const l=d(n,["avgLogprobs"]);l!=null&&p(e,["avgLogprobs"],l);const c=d(n,["groundingMetadata"]);c!=null&&p(e,["groundingMetadata"],c);const f=d(n,["index"]);f!=null&&p(e,["index"],f);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const y=d(n,["safetyRatings"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(C=>C)),p(e,["safetyRatings"],E)}const v=d(n,["urlContextMetadata"]);return v!=null&&p(e,["urlContextMetadata"],v),e}function kF(n){const e={},t=d(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function OI(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>oV(o))),p(e,["parts"],s)}const r=d(n,["role"]);return r!=null&&p(e,["role"],r),e}function xF(n,e){const t={},r=d(n,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function bF(n,e){const t={},r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=d(n,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],TF(_F(s))),t}function qT(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["src"]);s!=null&&p(t,["batch","inputConfig"],SF(n,UI(n,s)));const o=d(e,["config"]);return o!=null&&xF(o,t),t}function NF(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["model"],$e(n,r));const s=d(e,["src"]);s!=null&&p(t,["inputConfig"],IF(UI(n,s)));const o=d(e,["config"]);return o!=null&&bF(o,t),t}function DF(n,e){const t={},r=d(n,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),t}function MF(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["src"]);s!=null&&p(t,["batch","inputConfig"],BF(n,s));const o=d(e,["config"]);return o!=null&&DF(o,t),t}function LF(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],Pa(n,r)),t}function UF(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],Pa(n,r)),t}function FF(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["name"]);r!=null&&p(e,["name"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);return o!=null&&p(e,["error"],o),e}function VF(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["name"]);r!=null&&p(e,["name"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);return o!=null&&p(e,["error"],o),e}function OF(n,e){const t={},r=d(e,["contents"]);if(r!=null){let o=ng(n,r);Array.isArray(o)&&(o=o.map(l=>l)),p(t,["requests[]","request","content"],o)}const s=d(e,["config"]);return s!=null&&(p(t,["_self"],GF(s,t)),UU(t,{"requests[].*":"requests[].request.*"})),t}function GF(n,e){const t={},r=d(n,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=d(n,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const o=d(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function BF(n,e){const t={},r=d(e,["fileName"]);r!=null&&p(t,["file_name"],r);const s=d(e,["inlinedRequests"]);return s!=null&&p(t,["requests"],OF(n,s)),t}function qF(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function HF(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const r=d(n,["args"]);r!=null&&p(e,["args"],r);const s=d(n,["name"]);if(s!=null&&p(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $F(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const r=d(n,["mode"]);if(r!=null&&p(e,["mode"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zF(n,e,t){const r={},s=d(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],OI(Yt(s)));const o=d(e,["temperature"]);o!=null&&p(r,["temperature"],o);const l=d(e,["topP"]);l!=null&&p(r,["topP"],l);const c=d(e,["topK"]);c!=null&&p(r,["topK"],c);const f=d(e,["candidateCount"]);f!=null&&p(r,["candidateCount"],f);const h=d(e,["maxOutputTokens"]);h!=null&&p(r,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&p(r,["stopSequences"],y);const v=d(e,["responseLogprobs"]);v!=null&&p(r,["responseLogprobs"],v);const E=d(e,["logprobs"]);E!=null&&p(r,["logprobs"],E);const C=d(e,["presencePenalty"]);C!=null&&p(r,["presencePenalty"],C);const M=d(e,["frequencyPenalty"]);M!=null&&p(r,["frequencyPenalty"],M);const U=d(e,["seed"]);U!=null&&p(r,["seed"],U);const P=d(e,["responseMimeType"]);P!=null&&p(r,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(r,["responseSchema"],rg($));const Q=d(e,["responseJsonSchema"]);if(Q!=null&&p(r,["responseJsonSchema"],Q),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Y=d(e,["safetySettings"]);if(t!==void 0&&Y!=null){let b=Y;Array.isArray(b)&&(b=b.map(De=>aV(De))),p(t,["safetySettings"],b)}const ee=d(e,["tools"]);if(t!==void 0&&ee!=null){let b=Ra(ee);Array.isArray(b)&&(b=b.map(De=>uV(Aa(De)))),p(t,["tools"],b)}const X=d(e,["toolConfig"]);if(t!==void 0&&X!=null&&p(t,["toolConfig"],lV(X)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=d(e,["cachedContent"]);t!==void 0&&ie!=null&&p(t,["cachedContent"],ss(n,ie));const N=d(e,["responseModalities"]);N!=null&&p(r,["responseModalities"],N);const x=d(e,["mediaResolution"]);x!=null&&p(r,["mediaResolution"],x);const k=d(e,["speechConfig"]);if(k!=null&&p(r,["speechConfig"],sg(k)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(r,["thinkingConfig"],L);const F=d(e,["imageConfig"]);F!=null&&p(r,["imageConfig"],XF(F));const B=d(e,["enableEnhancedCivicAnswers"]);return B!=null&&p(r,["enableEnhancedCivicAnswers"],B),r}function WF(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>PF(h))),p(e,["candidates"],f)}const s=d(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const o=d(n,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const l=d(n,["responseId"]);l!=null&&p(e,["responseId"],l);const c=d(n,["usageMetadata"]);return c!=null&&p(e,["usageMetadata"],c),e}function KF(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],Pa(n,r)),t}function JF(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],Pa(n,r)),t}function YF(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function QF(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function XF(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const r=d(n,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),d(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function jF(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["request","model"],$e(n,r));const s=d(e,["contents"]);if(s!=null){let c=Dn(s);Array.isArray(c)&&(c=c.map(f=>OI(f))),p(t,["request","contents"],c)}const o=d(e,["metadata"]);o!=null&&p(t,["metadata"],o);const l=d(e,["config"]);return l!=null&&p(t,["request","generationConfig"],zF(n,l,d(t,["request"],{}))),t}function ZF(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],WF(t));const r=d(n,["error"]);return r!=null&&p(e,["error"],r),e}function eV(n,e){const t={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(n,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function tV(n,e){const t={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(n,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const o=d(n,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),t}function nV(n){const e={},t=d(n,["config"]);return t!=null&&eV(t,e),e}function rV(n){const e={},t=d(n,["config"]);return t!=null&&tV(t,e),e}function sV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["operations"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Yc(l))),p(e,["batchJobs"],o)}return e}function iV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["batchPredictionJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>Op(l))),p(e,["batchJobs"],o)}return e}function oV(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const r=d(n,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const o=d(n,["fileData"]);o!=null&&p(e,["fileData"],qF(o));const l=d(n,["functionCall"]);l!=null&&p(e,["functionCall"],HF(l));const c=d(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&p(e,["inlineData"],CF(f));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const y=d(n,["thought"]);y!=null&&p(e,["thought"],y);const v=d(n,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function aV(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(n,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function lV(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const r=d(n,["functionCallingConfig"]);return r!=null&&p(e,["functionCallingConfig"],$F(r)),e}function uV(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const r=d(n,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const s=d(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(n,["functionDeclarations"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const l=d(n,["googleMaps"]);l!=null&&p(e,["googleMaps"],YF(l));const c=d(n,["googleSearch"]);c!=null&&p(e,["googleSearch"],QF(c));const f=d(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ns;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ns||(ns={}));class so{constructor(e,t,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,s)}init(e,t,r){var s,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(o=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cV extends rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(ns.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=qT(this.apiClient,e),r=t._url,s=ce("{model}:batchGenerateContent",r),c=t.batch.inputConfig.requests,f=c.requests,h=[];for(const y of f){const v=Object.assign({},y);if(v.systemInstruction){const E=v.systemInstruction;delete v.systemInstruction;const C=v.request;C.systemInstruction=E,v.request=C}h.push(v)}return c.requests=h,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const o=this.getGcsUri(e),l=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${s}`;else if(l)r.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=NF(this.apiClient,e);return c=ce("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Op(y))}else{const h=qT(this.apiClient,e);return c=ce("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Yc(y))}}async createEmbeddingsInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=MF(this.apiClient,e);return o=ce("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Yc(f))}}async get(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=JF(this.apiClient,e);return c=ce("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Op(y))}else{const h=KF(this.apiClient,e);return c=ce("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Yc(y))}}async cancel(e){var t,r,s,o;let l="",c={};if(this.apiClient.isVertexAI()){const f=RF(this.apiClient,e);l=ce("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=AF(this.apiClient,e);l=ce("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=rV(e);return c=ce("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=iV(y),E=new VT;return Object.assign(E,v),E})}else{const h=nV(e);return c=ce("batches",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=sV(y),E=new VT;return Object.assign(E,v),E})}}async delete(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=UF(this.apiClient,e);return c=ce("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>VF(y))}else{const h=LF(this.apiClient,e);return c=ce("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>FF(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dV(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function HT(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>MV(o))),p(e,["parts"],s)}const r=d(n,["role"]);return r!=null&&p(e,["role"],r),e}function fV(n,e){const t={},r=d(n,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=d(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const o=d(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const l=d(n,["contents"]);if(e!==void 0&&l!=null){let y=Dn(l);Array.isArray(y)&&(y=y.map(v=>HT(v))),p(e,["contents"],y)}const c=d(n,["systemInstruction"]);e!==void 0&&c!=null&&p(e,["systemInstruction"],HT(Yt(c)));const f=d(n,["tools"]);if(e!==void 0&&f!=null){let y=f;Array.isArray(y)&&(y=y.map(v=>UV(v))),p(e,["tools"],y)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],LV(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function hV(n,e){const t={},r=d(n,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=d(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const o=d(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const l=d(n,["contents"]);if(e!==void 0&&l!=null){let v=Dn(l);Array.isArray(v)&&(v=v.map(E=>E)),p(e,["contents"],v)}const c=d(n,["systemInstruction"]);e!==void 0&&c!=null&&p(e,["systemInstruction"],Yt(c));const f=d(n,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(E=>FV(E))),p(e,["tools"],v)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const y=d(n,["kmsKeyName"]);return e!==void 0&&y!=null&&p(e,["encryption_spec","kmsKeyName"],y),t}function pV(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["model"],RI(n,r));const s=d(e,["config"]);return s!=null&&fV(s,t),t}function mV(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["model"],RI(n,r));const s=d(e,["config"]);return s!=null&&hV(s,t),t}function gV(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],ss(n,r)),t}function yV(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],ss(n,r)),t}function _V(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function vV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function EV(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function TV(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const r=d(n,["args"]);r!=null&&p(e,["args"],r);const s=d(n,["name"]);if(s!=null&&p(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wV(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const r=d(n,["mode"]);if(r!=null&&p(e,["mode"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SV(n){const e={},t=d(n,["description"]);t!=null&&p(e,["description"],t);const r=d(n,["name"]);r!=null&&p(e,["name"],r);const s=d(n,["parameters"]);s!=null&&p(e,["parameters"],s);const o=d(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const l=d(n,["response"]);l!=null&&p(e,["response"],l);const c=d(n,["responseJsonSchema"]);if(c!=null&&p(e,["responseJsonSchema"],c),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function IV(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],ss(n,r)),t}function CV(n,e){const t={},r=d(e,["name"]);return r!=null&&p(t,["_url","name"],ss(n,r)),t}function AV(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function RV(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function PV(n,e){const t={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function kV(n,e){const t={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function xV(n){const e={},t=d(n,["config"]);return t!=null&&PV(t,e),e}function bV(n){const e={},t=d(n,["config"]);return t!=null&&kV(t,e),e}function NV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["cachedContents"],o)}return e}function DV(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["cachedContents"],o)}return e}function MV(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const r=d(n,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const o=d(n,["fileData"]);o!=null&&p(e,["fileData"],EV(o));const l=d(n,["functionCall"]);l!=null&&p(e,["functionCall"],TV(l));const c=d(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&p(e,["inlineData"],dV(f));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const y=d(n,["thought"]);y!=null&&p(e,["thought"],y);const v=d(n,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function LV(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const r=d(n,["functionCallingConfig"]);return r!=null&&p(e,["functionCallingConfig"],wV(r)),e}function UV(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const r=d(n,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const s=d(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(n,["functionDeclarations"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const l=d(n,["googleMaps"]);l!=null&&p(e,["googleMaps"],AV(l));const c=d(n,["googleSearch"]);c!=null&&p(e,["googleSearch"],RV(c));const f=d(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function FV(n){const e={},t=d(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const r=d(n,["computerUse"]);if(r!=null&&p(e,["computerUse"],r),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=d(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const o=d(n,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const l=d(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>SV(E))),p(e,["functionDeclarations"],v)}const c=d(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],f);const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const y=d(n,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function VV(n,e){const t={},r=d(n,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=d(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function OV(n,e){const t={},r=d(n,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const s=d(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function GV(n,e){const t={},r=d(e,["name"]);r!=null&&p(t,["_url","name"],ss(n,r));const s=d(e,["config"]);return s!=null&&VV(s,t),t}function BV(n,e){const t={},r=d(e,["name"]);r!=null&&p(t,["_url","name"],ss(n,r));const s=d(e,["config"]);return s!=null&&OV(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qV extends rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(ns.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=mV(this.apiClient,e);return c=ce("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=pV(this.apiClient,e);return c=ce("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=CV(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=IV(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=yV(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=vV(y),E=new UT;return Object.assign(E,v),E})}else{const h=gV(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=_V(y),E=new UT;return Object.assign(E,v),E})}}async update(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=BV(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=GV(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=bV(e);return c=ce("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=DV(y),E=new FT;return Object.assign(E,v),E})}else{const h=xV(e);return c=ce("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=NV(y),E=new FT;return Object.assign(E,v),E})}}}function Cd(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function $T(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Re(n){return this instanceof Re?(this.v=n,this):new Re(n)}function Yn(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(C){return function(M){return Promise.resolve(M).then(C,v)}}function c(C,M){r[C]&&(s[C]=function(U){return new Promise(function(P,$){o.push([C,U,P,$])>1||f(C,U)})},M&&(s[C]=M(s[C])))}function f(C,M){try{h(r[C](M))}catch(U){E(o[0][3],U)}}function h(C){C.value instanceof Re?Promise.resolve(C.value.v).then(y,v):E(o[0][2],C)}function y(C){f("next",C)}function v(C){f("throw",C)}function E(C,M){C(M),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Qn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof $T=="function"?$T(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(l){return new Promise(function(c,f){l=n[o](l),s(c,f,l.done,l.value)})}}function s(o,l,c,f){Promise.resolve(f).then(function(h){o({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HV(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:GI(t)}function GI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $V(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const s=[];let o=!0;for(;r<t&&n[r].role==="model";)s.push(n[r]),o&&!GI(n[r])&&(o=!1),r++;o?e.push(...s):e.pop()}return e}class zV{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new WV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class WV{constructor(e,t,r,s={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),$V(o)}async sendMessage(e){var t;await this.sendPromise;const r=Yt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,l,c;const f=await s,h=(l=(o=f.candidates)===null||o===void 0?void 0:o[0])===null||l===void 0?void 0:l.content,y=f.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let E=[];y!=null&&(E=(c=y.slice(v))!==null&&c!==void 0?c:[]);const C=h?[h]:[];this.recordHistory(r,C,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const r=Yt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,r)}getHistory(e=!1){const t=e?zT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Yn(this,arguments,function*(){var s,o,l,c,f,h;const y=[];try{for(var v=!0,E=Qn(e),C;C=yield Re(E.next()),s=C.done,!s;v=!0){c=C.value,v=!1;const M=c;if(HV(M)){const U=(h=(f=M.candidates)===null||f===void 0?void 0:f[0])===null||h===void 0?void 0:h.content;U!==void 0&&y.push(U)}yield yield Re(M)}}catch(M){o={error:M}}finally{try{!v&&!s&&(l=E.return)&&(yield Re(l.call(E)))}finally{if(o)throw o.error}}this.recordHistory(t,y)})}recordHistory(e,t,r){let s=[];t.length>0&&t.every(o=>o.role!==void 0)?s=t:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...zT(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Qd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KV(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function JV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function YV(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],DI(t)),e}function QV(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function XV(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],DI(t)),e}function jV(n,e){const t={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function ZV(n){const e={},t=d(n,["config"]);return t!=null&&jV(t,e),e}function eO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tO extends rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(ns.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ZV(e);return o=ce("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=eO(f),y=new iF;return Object.assign(y,h),y})}}async createInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KV(e);return o=ce("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=JV(f),y=new oF;return Object.assign(y,h),y})}}async get(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XV(e);return o=ce("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=YV(e);return o=ce("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=QV(f),y=new aF;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qc(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function nO(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>_O(o))),p(e,["parts"],s)}const r=d(n,["role"]);return r!=null&&p(e,["role"],r),e}function rO(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function sO(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const r=d(n,["args"]);r!=null&&p(e,["args"],r);const s=d(n,["name"]);if(s!=null&&p(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iO(n){const e={},t=d(n,["description"]);t!=null&&p(e,["description"],t);const r=d(n,["name"]);r!=null&&p(e,["name"],r);const s=d(n,["parameters"]);s!=null&&p(e,["parameters"],s);const o=d(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const l=d(n,["response"]);l!=null&&p(e,["response"],l);const c=d(n,["responseJsonSchema"]);if(c!=null&&p(e,["responseJsonSchema"],c),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function oO(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const r=d(n,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=d(n,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const o=d(n,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const l=d(n,["enableAffectiveDialog"]);l!=null&&p(e,["enableAffectiveDialog"],l);const c=d(n,["frequencyPenalty"]);c!=null&&p(e,["frequencyPenalty"],c);const f=d(n,["logprobs"]);f!=null&&p(e,["logprobs"],f);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const y=d(n,["mediaResolution"]);y!=null&&p(e,["mediaResolution"],y);const v=d(n,["presencePenalty"]);v!=null&&p(e,["presencePenalty"],v);const E=d(n,["responseLogprobs"]);E!=null&&p(e,["responseLogprobs"],E);const C=d(n,["responseMimeType"]);C!=null&&p(e,["responseMimeType"],C);const M=d(n,["responseModalities"]);M!=null&&p(e,["responseModalities"],M);const U=d(n,["responseSchema"]);U!=null&&p(e,["responseSchema"],U);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const $=d(n,["seed"]);$!=null&&p(e,["seed"],$);const Q=d(n,["speechConfig"]);Q!=null&&p(e,["speechConfig"],Q);const Y=d(n,["stopSequences"]);Y!=null&&p(e,["stopSequences"],Y);const ee=d(n,["temperature"]);ee!=null&&p(e,["temperature"],ee);const X=d(n,["thinkingConfig"]);X!=null&&p(e,["thinkingConfig"],X);const ie=d(n,["topK"]);ie!=null&&p(e,["topK"],ie);const N=d(n,["topP"]);if(N!=null&&p(e,["topP"],N),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function aO(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function lO(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function uO(n,e){const t={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=d(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const o=d(n,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const l=d(n,["topP"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topP"],l);const c=d(n,["topK"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topK"],c);const f=d(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const y=d(n,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const v=d(n,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],ig(v));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","thinkingConfig"],E);const C=d(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=d(n,["systemInstruction"]);e!==void 0&&M!=null&&p(e,["setup","systemInstruction"],nO(Yt(M)));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let ie=Ra(U);Array.isArray(ie)&&(ie=ie.map(N=>EO(Aa(N)))),p(e,["setup","tools"],ie)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],vO(P));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const Q=d(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","outputAudioTranscription"],Q);const Y=d(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&p(e,["setup","realtimeInputConfig"],Y);const ee=d(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&p(e,["setup","contextWindowCompression"],ee);const X=d(n,["proactivity"]);if(e!==void 0&&X!=null&&p(e,["setup","proactivity"],X),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function cO(n,e){const t={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],oO(r));const s=d(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const o=d(n,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const l=d(n,["topP"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topP"],l);const c=d(n,["topK"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topK"],c);const f=d(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const y=d(n,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const v=d(n,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],ig(v));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","thinkingConfig"],E);const C=d(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=d(n,["systemInstruction"]);e!==void 0&&M!=null&&p(e,["setup","systemInstruction"],Yt(M));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let N=Ra(U);Array.isArray(N)&&(N=N.map(x=>TO(Aa(x)))),p(e,["setup","tools"],N)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],P);const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const Q=d(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","outputAudioTranscription"],Q);const Y=d(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&p(e,["setup","realtimeInputConfig"],Y);const ee=d(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&p(e,["setup","contextWindowCompression"],ee);const X=d(n,["proactivity"]);e!==void 0&&X!=null&&p(e,["setup","proactivity"],X);const ie=d(n,["explicitVadSignal"]);return e!==void 0&&ie!=null&&p(e,["setup","explicitVadSignal"],ie),t}function dO(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["setup","model"],$e(n,r));const s=d(e,["config"]);return s!=null&&p(t,["config"],uO(s,t)),t}function fO(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["setup","model"],$e(n,r));const s=d(e,["config"]);return s!=null&&p(t,["config"],cO(s,t)),t}function hO(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function pO(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["weightedPrompts"],r)}return e}function mO(n){const e={},t=d(n,["media"]);if(t!=null){let h=PI(t);Array.isArray(h)&&(h=h.map(y=>Qc(y))),p(e,["mediaChunks"],h)}const r=d(n,["audio"]);r!=null&&p(e,["audio"],Qc(xI(r)));const s=d(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const o=d(n,["video"]);o!=null&&p(e,["video"],Qc(kI(o)));const l=d(n,["text"]);l!=null&&p(e,["text"],l);const c=d(n,["activityStart"]);c!=null&&p(e,["activityStart"],c);const f=d(n,["activityEnd"]);return f!=null&&p(e,["activityEnd"],f),e}function gO(n){const e={},t=d(n,["media"]);if(t!=null){let h=PI(t);Array.isArray(h)&&(h=h.map(y=>y)),p(e,["mediaChunks"],h)}const r=d(n,["audio"]);r!=null&&p(e,["audio"],xI(r));const s=d(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const o=d(n,["video"]);o!=null&&p(e,["video"],kI(o));const l=d(n,["text"]);l!=null&&p(e,["text"],l);const c=d(n,["activityStart"]);c!=null&&p(e,["activityStart"],c);const f=d(n,["activityEnd"]);return f!=null&&p(e,["activityEnd"],f),e}function yO(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const r=d(n,["serverContent"]);r!=null&&p(e,["serverContent"],r);const s=d(n,["toolCall"]);s!=null&&p(e,["toolCall"],s);const o=d(n,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],o);const l=d(n,["usageMetadata"]);l!=null&&p(e,["usageMetadata"],wO(l));const c=d(n,["goAway"]);c!=null&&p(e,["goAway"],c);const f=d(n,["sessionResumptionUpdate"]);f!=null&&p(e,["sessionResumptionUpdate"],f);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function _O(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const r=d(n,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const o=d(n,["fileData"]);o!=null&&p(e,["fileData"],rO(o));const l=d(n,["functionCall"]);l!=null&&p(e,["functionCall"],sO(l));const c=d(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&p(e,["inlineData"],Qc(f));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const y=d(n,["thought"]);y!=null&&p(e,["thought"],y);const v=d(n,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function vO(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function EO(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const r=d(n,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const s=d(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(n,["functionDeclarations"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const l=d(n,["googleMaps"]);l!=null&&p(e,["googleMaps"],aO(l));const c=d(n,["googleSearch"]);c!=null&&p(e,["googleSearch"],lO(c));const f=d(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function TO(n){const e={},t=d(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const r=d(n,["computerUse"]);if(r!=null&&p(e,["computerUse"],r),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=d(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const o=d(n,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const l=d(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>iO(E))),p(e,["functionDeclarations"],v)}const c=d(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],f);const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const y=d(n,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function wO(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const r=d(n,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const s=d(n,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const o=d(n,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const l=d(n,["thoughtsTokenCount"]);l!=null&&p(e,["thoughtsTokenCount"],l);const c=d(n,["totalTokenCount"]);c!=null&&p(e,["totalTokenCount"],c);const f=d(n,["promptTokensDetails"]);if(f!=null){let C=f;Array.isArray(C)&&(C=C.map(M=>M)),p(e,["promptTokensDetails"],C)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(M=>M)),p(e,["cacheTokensDetails"],C)}const y=d(n,["candidatesTokensDetails"]);if(y!=null){let C=y;Array.isArray(C)&&(C=C.map(M=>M)),p(e,["responseTokensDetails"],C)}const v=d(n,["toolUsePromptTokensDetails"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(M=>M)),p(e,["toolUsePromptTokensDetails"],C)}const E=d(n,["trafficType"]);return E!=null&&p(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SO(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function IO(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const r=d(n,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],CO(r));const s=d(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const o=d(n,["finishReason"]);o!=null&&p(e,["finishReason"],o);const l=d(n,["avgLogprobs"]);l!=null&&p(e,["avgLogprobs"],l);const c=d(n,["groundingMetadata"]);c!=null&&p(e,["groundingMetadata"],c);const f=d(n,["index"]);f!=null&&p(e,["index"],f);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const y=d(n,["safetyRatings"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(C=>C)),p(e,["safetyRatings"],E)}const v=d(n,["urlContextMetadata"]);return v!=null&&p(e,["urlContextMetadata"],v),e}function CO(n){const e={},t=d(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>s)),p(e,["citations"],r)}return e}function AO(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["contents"]);if(s!=null){let o=Dn(s);Array.isArray(o)&&(o=o.map(l=>l)),p(t,["contents"],o)}return t}function RO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["tokensInfo"],s)}return e}function PO(n){const e={},t=d(n,["values"]);t!=null&&p(e,["values"],t);const r=d(n,["statistics"]);return r!=null&&p(e,["statistics"],kO(r)),e}function kO(n){const e={},t=d(n,["truncated"]);t!=null&&p(e,["truncated"],t);const r=d(n,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function Xd(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>V2(o))),p(e,["parts"],s)}const r=d(n,["role"]);return r!=null&&p(e,["role"],r),e}function xO(n){const e={},t=d(n,["controlType"]);t!=null&&p(e,["controlType"],t);const r=d(n,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function bO(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function NO(n,e){const t={},r=d(n,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],Yt(r));const s=d(n,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>$I(c))),p(e,["tools"],l)}const o=d(n,["generationConfig"]);return e!==void 0&&o!=null&&p(e,["generationConfig"],S2(o)),t}function DO(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["contents"]);if(s!=null){let l=Dn(s);Array.isArray(l)&&(l=l.map(c=>Xd(c))),p(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&bO(o),t}function MO(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["contents"]);if(s!=null){let l=Dn(s);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&NO(o,t),t}function LO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const s=d(n,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function UO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function FO(n,e){const t={},r=d(e,["model"]);return r!=null&&p(t,["_url","name"],$e(n,r)),t}function VO(n,e){const t={},r=d(e,["model"]);return r!=null&&p(t,["_url","name"],$e(n,r)),t}function OO(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function GO(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function BO(n,e){const t={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=d(n,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const o=d(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=d(n,["guidanceScale"]);e!==void 0&&c!=null&&p(e,["parameters","guidanceScale"],c);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const y=d(n,["personGeneration"]);e!==void 0&&y!=null&&p(e,["parameters","personGeneration"],y);const v=d(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&p(e,["parameters","includeSafetyAttributes"],v);const E=d(n,["includeRaiReason"]);e!==void 0&&E!=null&&p(e,["parameters","includeRaiReason"],E);const C=d(n,["language"]);e!==void 0&&C!=null&&p(e,["parameters","language"],C);const M=d(n,["outputMimeType"]);e!==void 0&&M!=null&&p(e,["parameters","outputOptions","mimeType"],M);const U=d(n,["outputCompressionQuality"]);e!==void 0&&U!=null&&p(e,["parameters","outputOptions","compressionQuality"],U);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&p(e,["parameters","addWatermark"],P);const $=d(n,["labels"]);e!==void 0&&$!=null&&p(e,["labels"],$);const Q=d(n,["editMode"]);e!==void 0&&Q!=null&&p(e,["parameters","editMode"],Q);const Y=d(n,["baseSteps"]);return e!==void 0&&Y!=null&&p(e,["parameters","editConfig","baseSteps"],Y),t}function qO(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const o=d(e,["referenceImages"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>$2(f))),p(t,["instances[0]","referenceImages"],c)}const l=d(e,["config"]);return l!=null&&BO(l,t),t}function HO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>jd(o))),p(e,["generatedImages"],s)}return e}function $O(n,e){const t={},r=d(n,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const s=d(n,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const o=d(n,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function zO(n,e){const t={},r=d(n,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const s=d(n,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const o=d(n,["outputDimensionality"]);e!==void 0&&o!=null&&p(e,["parameters","outputDimensionality"],o);const l=d(n,["mimeType"]);e!==void 0&&l!=null&&p(e,["instances[]","mimeType"],l);const c=d(n,["autoTruncate"]);return e!==void 0&&c!=null&&p(e,["parameters","autoTruncate"],c),t}function WO(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["contents"]);if(s!=null){let c=ng(n,s);Array.isArray(c)&&(c=c.map(f=>f)),p(t,["requests[]","content"],c)}const o=d(e,["config"]);o!=null&&$O(o,t);const l=d(e,["model"]);return l!==void 0&&p(t,["requests[]","model"],$e(n,l)),t}function KO(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["contents"]);if(s!=null){let l=ng(n,s);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["instances[]","content"],l)}const o=d(e,["config"]);return o!=null&&zO(o,t),t}function JO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["embeddings"],o)}const s=d(n,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function YO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>PO(l))),p(e,["embeddings"],o)}const s=d(n,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function QO(n){const e={},t=d(n,["endpoint"]);t!=null&&p(e,["name"],t);const r=d(n,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function XO(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function jO(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const r=d(n,["args"]);r!=null&&p(e,["args"],r);const s=d(n,["name"]);if(s!=null&&p(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ZO(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const r=d(n,["mode"]);if(r!=null&&p(e,["mode"],r),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function e2(n){const e={},t=d(n,["description"]);t!=null&&p(e,["description"],t);const r=d(n,["name"]);r!=null&&p(e,["name"],r);const s=d(n,["parameters"]);s!=null&&p(e,["parameters"],s);const o=d(n,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const l=d(n,["response"]);l!=null&&p(e,["response"],l);const c=d(n,["responseJsonSchema"]);if(c!=null&&p(e,["responseJsonSchema"],c),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function t2(n,e,t){const r={},s=d(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],Xd(Yt(s)));const o=d(e,["temperature"]);o!=null&&p(r,["temperature"],o);const l=d(e,["topP"]);l!=null&&p(r,["topP"],l);const c=d(e,["topK"]);c!=null&&p(r,["topK"],c);const f=d(e,["candidateCount"]);f!=null&&p(r,["candidateCount"],f);const h=d(e,["maxOutputTokens"]);h!=null&&p(r,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&p(r,["stopSequences"],y);const v=d(e,["responseLogprobs"]);v!=null&&p(r,["responseLogprobs"],v);const E=d(e,["logprobs"]);E!=null&&p(r,["logprobs"],E);const C=d(e,["presencePenalty"]);C!=null&&p(r,["presencePenalty"],C);const M=d(e,["frequencyPenalty"]);M!=null&&p(r,["frequencyPenalty"],M);const U=d(e,["seed"]);U!=null&&p(r,["seed"],U);const P=d(e,["responseMimeType"]);P!=null&&p(r,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(r,["responseSchema"],rg($));const Q=d(e,["responseJsonSchema"]);if(Q!=null&&p(r,["responseJsonSchema"],Q),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Y=d(e,["safetySettings"]);if(t!==void 0&&Y!=null){let b=Y;Array.isArray(b)&&(b=b.map(De=>z2(De))),p(t,["safetySettings"],b)}const ee=d(e,["tools"]);if(t!==void 0&&ee!=null){let b=Ra(ee);Array.isArray(b)&&(b=b.map(De=>j2(Aa(De)))),p(t,["tools"],b)}const X=d(e,["toolConfig"]);if(t!==void 0&&X!=null&&p(t,["toolConfig"],X2(X)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=d(e,["cachedContent"]);t!==void 0&&ie!=null&&p(t,["cachedContent"],ss(n,ie));const N=d(e,["responseModalities"]);N!=null&&p(r,["responseModalities"],N);const x=d(e,["mediaResolution"]);x!=null&&p(r,["mediaResolution"],x);const k=d(e,["speechConfig"]);if(k!=null&&p(r,["speechConfig"],sg(k)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(r,["thinkingConfig"],L);const F=d(e,["imageConfig"]);F!=null&&p(r,["imageConfig"],P2(F));const B=d(e,["enableEnhancedCivicAnswers"]);return B!=null&&p(r,["enableEnhancedCivicAnswers"],B),r}function n2(n,e,t){const r={},s=d(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],Yt(s));const o=d(e,["temperature"]);o!=null&&p(r,["temperature"],o);const l=d(e,["topP"]);l!=null&&p(r,["topP"],l);const c=d(e,["topK"]);c!=null&&p(r,["topK"],c);const f=d(e,["candidateCount"]);f!=null&&p(r,["candidateCount"],f);const h=d(e,["maxOutputTokens"]);h!=null&&p(r,["maxOutputTokens"],h);const y=d(e,["stopSequences"]);y!=null&&p(r,["stopSequences"],y);const v=d(e,["responseLogprobs"]);v!=null&&p(r,["responseLogprobs"],v);const E=d(e,["logprobs"]);E!=null&&p(r,["logprobs"],E);const C=d(e,["presencePenalty"]);C!=null&&p(r,["presencePenalty"],C);const M=d(e,["frequencyPenalty"]);M!=null&&p(r,["frequencyPenalty"],M);const U=d(e,["seed"]);U!=null&&p(r,["seed"],U);const P=d(e,["responseMimeType"]);P!=null&&p(r,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(r,["responseSchema"],rg($));const Q=d(e,["responseJsonSchema"]);Q!=null&&p(r,["responseJsonSchema"],Q);const Y=d(e,["routingConfig"]);Y!=null&&p(r,["routingConfig"],Y);const ee=d(e,["modelSelectionConfig"]);ee!=null&&p(r,["modelConfig"],ee);const X=d(e,["safetySettings"]);if(t!==void 0&&X!=null){let Qe=X;Array.isArray(Qe)&&(Qe=Qe.map(Ke=>Ke)),p(t,["safetySettings"],Qe)}const ie=d(e,["tools"]);if(t!==void 0&&ie!=null){let Qe=Ra(ie);Array.isArray(Qe)&&(Qe=Qe.map(Ke=>$I(Aa(Ke)))),p(t,["tools"],Qe)}const N=d(e,["toolConfig"]);t!==void 0&&N!=null&&p(t,["toolConfig"],N);const x=d(e,["labels"]);t!==void 0&&x!=null&&p(t,["labels"],x);const k=d(e,["cachedContent"]);t!==void 0&&k!=null&&p(t,["cachedContent"],ss(n,k));const L=d(e,["responseModalities"]);L!=null&&p(r,["responseModalities"],L);const F=d(e,["mediaResolution"]);F!=null&&p(r,["mediaResolution"],F);const B=d(e,["speechConfig"]);B!=null&&p(r,["speechConfig"],sg(B));const b=d(e,["audioTimestamp"]);b!=null&&p(r,["audioTimestamp"],b);const De=d(e,["thinkingConfig"]);De!=null&&p(r,["thinkingConfig"],De);const it=d(e,["imageConfig"]);if(it!=null&&p(r,["imageConfig"],k2(it)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function WT(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["contents"]);if(s!=null){let l=Dn(s);Array.isArray(l)&&(l=l.map(c=>Xd(c))),p(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&p(t,["generationConfig"],t2(n,o,t)),t}function KT(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["contents"]);if(s!=null){let l=Dn(s);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["contents"],l)}const o=d(e,["config"]);return o!=null&&p(t,["generationConfig"],n2(n,o,t)),t}function JT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>IO(h))),p(e,["candidates"],f)}const s=d(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const o=d(n,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const l=d(n,["responseId"]);l!=null&&p(e,["responseId"],l);const c=d(n,["usageMetadata"]);return c!=null&&p(e,["usageMetadata"],c),e}function YT(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(y=>y)),p(e,["candidates"],h)}const s=d(n,["createTime"]);s!=null&&p(e,["createTime"],s);const o=d(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const c=d(n,["responseId"]);c!=null&&p(e,["responseId"],c);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function r2(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=d(n,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=d(n,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const o=d(n,["guidanceScale"]);if(e!==void 0&&o!=null&&p(e,["parameters","guidanceScale"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&p(e,["parameters","safetySetting"],l);const c=d(n,["personGeneration"]);e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c);const f=d(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&p(e,["parameters","includeSafetyAttributes"],f);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const y=d(n,["language"]);e!==void 0&&y!=null&&p(e,["parameters","language"],y);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const E=d(n,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&p(e,["parameters","outputOptions","compressionQuality"],E),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=d(n,["imageSize"]);if(e!==void 0&&C!=null&&p(e,["parameters","sampleImageSize"],C),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function s2(n,e){const t={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=d(n,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const o=d(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=d(n,["guidanceScale"]);e!==void 0&&c!=null&&p(e,["parameters","guidanceScale"],c);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const y=d(n,["personGeneration"]);e!==void 0&&y!=null&&p(e,["parameters","personGeneration"],y);const v=d(n,["includeSafetyAttributes"]);e!==void 0&&v!=null&&p(e,["parameters","includeSafetyAttributes"],v);const E=d(n,["includeRaiReason"]);e!==void 0&&E!=null&&p(e,["parameters","includeRaiReason"],E);const C=d(n,["language"]);e!==void 0&&C!=null&&p(e,["parameters","language"],C);const M=d(n,["outputMimeType"]);e!==void 0&&M!=null&&p(e,["parameters","outputOptions","mimeType"],M);const U=d(n,["outputCompressionQuality"]);e!==void 0&&U!=null&&p(e,["parameters","outputOptions","compressionQuality"],U);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&p(e,["parameters","addWatermark"],P);const $=d(n,["labels"]);e!==void 0&&$!=null&&p(e,["labels"],$);const Q=d(n,["imageSize"]);e!==void 0&&Q!=null&&p(e,["parameters","sampleImageSize"],Q);const Y=d(n,["enhancePrompt"]);return e!==void 0&&Y!=null&&p(e,["parameters","enhancePrompt"],Y),t}function i2(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const o=d(e,["config"]);return o!=null&&r2(o,t),t}function o2(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const o=d(e,["config"]);return o!=null&&s2(o,t),t}function a2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>v2(l))),p(e,["generatedImages"],o)}const s=d(n,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],qI(s)),e}function l2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>jd(l))),p(e,["generatedImages"],o)}const s=d(n,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],HI(s)),e}function u2(n,e){const t={},r=d(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=d(n,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const l=d(n,["resolution"]);e!==void 0&&l!=null&&p(e,["parameters","resolution"],l);const c=d(n,["personGeneration"]);if(e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=d(n,["negativePrompt"]);e!==void 0&&f!=null&&p(e,["parameters","negativePrompt"],f);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=d(n,["lastFrame"]);e!==void 0&&y!=null&&p(e,["instances[0]","lastFrame"],Zd(y));const v=d(n,["referenceImages"]);if(e!==void 0&&v!=null){let E=v;Array.isArray(E)&&(E=E.map(C=>dG(C))),p(e,["instances[0]","referenceImages"],E)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function c2(n,e){const t={},r=d(n,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const o=d(n,["fps"]);e!==void 0&&o!=null&&p(e,["parameters","fps"],o);const l=d(n,["durationSeconds"]);e!==void 0&&l!=null&&p(e,["parameters","durationSeconds"],l);const c=d(n,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&p(e,["parameters","aspectRatio"],f);const h=d(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const y=d(n,["personGeneration"]);e!==void 0&&y!=null&&p(e,["parameters","personGeneration"],y);const v=d(n,["pubsubTopic"]);e!==void 0&&v!=null&&p(e,["parameters","pubsubTopic"],v);const E=d(n,["negativePrompt"]);e!==void 0&&E!=null&&p(e,["parameters","negativePrompt"],E);const C=d(n,["enhancePrompt"]);e!==void 0&&C!=null&&p(e,["parameters","enhancePrompt"],C);const M=d(n,["generateAudio"]);e!==void 0&&M!=null&&p(e,["parameters","generateAudio"],M);const U=d(n,["lastFrame"]);e!==void 0&&U!=null&&p(e,["instances[0]","lastFrame"],Zn(U));const P=d(n,["referenceImages"]);if(e!==void 0&&P!=null){let Y=P;Array.isArray(Y)&&(Y=Y.map(ee=>fG(ee))),p(e,["instances[0]","referenceImages"],Y)}const $=d(n,["mask"]);e!==void 0&&$!=null&&p(e,["instances[0]","mask"],cG($));const Q=d(n,["compressionQuality"]);return e!==void 0&&Q!=null&&p(e,["parameters","compressionQuality"],Q),t}function d2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);o!=null&&p(e,["error"],o);const l=d(n,["response","generateVideoResponse"]);return l!=null&&p(e,["response"],m2(l)),e}function f2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);o!=null&&p(e,["error"],o);const l=d(n,["response"]);return l!=null&&p(e,["response"],g2(l)),e}function h2(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const o=d(e,["image"]);o!=null&&p(t,["instances[0]","image"],Zd(o));const l=d(e,["video"]);l!=null&&p(t,["instances[0]","video"],zI(l));const c=d(e,["source"]);c!=null&&y2(c,t);const f=d(e,["config"]);return f!=null&&u2(f,t),t}function p2(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const o=d(e,["image"]);o!=null&&p(t,["instances[0]","image"],Zn(o));const l=d(e,["video"]);l!=null&&p(t,["instances[0]","video"],WI(l));const c=d(e,["source"]);c!=null&&_2(c,t);const f=d(e,["config"]);return f!=null&&c2(f,t),t}function m2(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>T2(l))),p(e,["generatedVideos"],o)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=d(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function g2(n){const e={},t=d(n,["videos"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(l=>w2(l))),p(e,["generatedVideos"],o)}const r=d(n,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const s=d(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function y2(n,e){const t={},r=d(n,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=d(n,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Zd(s));const o=d(n,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],zI(o)),t}function _2(n,e){const t={},r=d(n,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=d(n,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Zn(s));const o=d(n,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],WI(o)),t}function v2(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],x2(t));const r=d(n,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=d(n,["_self"]);return s!=null&&p(e,["safetyAttributes"],qI(s)),e}function jd(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],BI(t));const r=d(n,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const s=d(n,["_self"]);s!=null&&p(e,["safetyAttributes"],HI(s));const o=d(n,["prompt"]);return o!=null&&p(e,["enhancedPrompt"],o),e}function E2(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["mask"],BI(t));const r=d(n,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),p(e,["labels"],s)}return e}function T2(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],lG(t)),e}function w2(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],uG(t)),e}function S2(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const r=d(n,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const s=d(n,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const o=d(n,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const l=d(n,["enableAffectiveDialog"]);l!=null&&p(e,["enableAffectiveDialog"],l);const c=d(n,["frequencyPenalty"]);c!=null&&p(e,["frequencyPenalty"],c);const f=d(n,["logprobs"]);f!=null&&p(e,["logprobs"],f);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const y=d(n,["mediaResolution"]);y!=null&&p(e,["mediaResolution"],y);const v=d(n,["presencePenalty"]);v!=null&&p(e,["presencePenalty"],v);const E=d(n,["responseLogprobs"]);E!=null&&p(e,["responseLogprobs"],E);const C=d(n,["responseMimeType"]);C!=null&&p(e,["responseMimeType"],C);const M=d(n,["responseModalities"]);M!=null&&p(e,["responseModalities"],M);const U=d(n,["responseSchema"]);U!=null&&p(e,["responseSchema"],U);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const $=d(n,["seed"]);$!=null&&p(e,["seed"],$);const Q=d(n,["speechConfig"]);Q!=null&&p(e,["speechConfig"],Q);const Y=d(n,["stopSequences"]);Y!=null&&p(e,["stopSequences"],Y);const ee=d(n,["temperature"]);ee!=null&&p(e,["temperature"],ee);const X=d(n,["thinkingConfig"]);X!=null&&p(e,["thinkingConfig"],X);const ie=d(n,["topK"]);ie!=null&&p(e,["topK"],ie);const N=d(n,["topP"]);if(N!=null&&p(e,["topP"],N),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function I2(n,e){const t={},r=d(e,["model"]);return r!=null&&p(t,["_url","name"],$e(n,r)),t}function C2(n,e){const t={},r=d(e,["model"]);return r!=null&&p(t,["_url","name"],$e(n,r)),t}function A2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function R2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function P2(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const r=d(n,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),d(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function k2(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const r=d(n,["imageSize"]);r!=null&&p(e,["imageSize"],r);const s=d(n,["personGeneration"]);s!=null&&p(e,["personGeneration"],s);const o=d(n,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const l=d(n,["outputCompressionQuality"]);return l!=null&&p(e,["imageOutputOptions","compressionQuality"],l),e}function x2(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],si(t));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function BI(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const r=d(n,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],si(r));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Zd(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],si(t));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Zn(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const r=d(n,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],si(r));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function b2(n,e,t){const r={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&p(t,["_query","pageSize"],s);const o=d(e,["pageToken"]);t!==void 0&&o!=null&&p(t,["_query","pageToken"],o);const l=d(e,["filter"]);t!==void 0&&l!=null&&p(t,["_query","filter"],l);const c=d(e,["queryBase"]);return t!==void 0&&c!=null&&p(t,["_url","models_url"],MI(n,c)),r}function N2(n,e,t){const r={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&p(t,["_query","pageSize"],s);const o=d(e,["pageToken"]);t!==void 0&&o!=null&&p(t,["_query","pageToken"],o);const l=d(e,["filter"]);t!==void 0&&l!=null&&p(t,["_query","filter"],l);const c=d(e,["queryBase"]);return t!==void 0&&c!=null&&p(t,["_url","models_url"],MI(n,c)),r}function D2(n,e){const t={},r=d(e,["config"]);return r!=null&&b2(n,r,t),t}function M2(n,e){const t={},r=d(e,["config"]);return r!=null&&N2(n,r,t),t}function L2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["_self"]);if(s!=null){let o=LI(s);Array.isArray(o)&&(o=o.map(l=>Gp(l))),p(e,["models"],o)}return e}function U2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["_self"]);if(s!=null){let o=LI(s);Array.isArray(o)&&(o=o.map(l=>Bp(l))),p(e,["models"],o)}return e}function F2(n){const e={},t=d(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const r=d(n,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const s=d(n,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function Gp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=d(n,["description"]);s!=null&&p(e,["description"],s);const o=d(n,["version"]);o!=null&&p(e,["version"],o);const l=d(n,["_self"]);l!=null&&p(e,["tunedModelInfo"],Z2(l));const c=d(n,["inputTokenLimit"]);c!=null&&p(e,["inputTokenLimit"],c);const f=d(n,["outputTokenLimit"]);f!=null&&p(e,["outputTokenLimit"],f);const h=d(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const y=d(n,["temperature"]);y!=null&&p(e,["temperature"],y);const v=d(n,["maxTemperature"]);v!=null&&p(e,["maxTemperature"],v);const E=d(n,["topP"]);E!=null&&p(e,["topP"],E);const C=d(n,["topK"]);C!=null&&p(e,["topK"],C);const M=d(n,["thinking"]);return M!=null&&p(e,["thinking"],M),e}function Bp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["displayName"]);r!=null&&p(e,["displayName"],r);const s=d(n,["description"]);s!=null&&p(e,["description"],s);const o=d(n,["versionId"]);o!=null&&p(e,["version"],o);const l=d(n,["deployedModels"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>QO(E))),p(e,["endpoints"],v)}const c=d(n,["labels"]);c!=null&&p(e,["labels"],c);const f=d(n,["_self"]);f!=null&&p(e,["tunedModelInfo"],eG(f));const h=d(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const y=d(n,["checkpoints"]);if(y!=null){let v=y;Array.isArray(v)&&(v=v.map(E=>E)),p(e,["checkpoints"],v)}return e}function V2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const r=d(n,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const o=d(n,["fileData"]);o!=null&&p(e,["fileData"],XO(o));const l=d(n,["functionCall"]);l!=null&&p(e,["functionCall"],jO(l));const c=d(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&p(e,["inlineData"],SO(f));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const y=d(n,["thought"]);y!=null&&p(e,["thought"],y);const v=d(n,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function O2(n){const e={},t=d(n,["productImage"]);return t!=null&&p(e,["image"],Zn(t)),e}function G2(n,e){const t={},r=d(n,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const s=d(n,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const l=d(n,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=d(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const y=d(n,["outputMimeType"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","mimeType"],y);const v=d(n,["outputCompressionQuality"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","compressionQuality"],v);const E=d(n,["enhancePrompt"]);e!==void 0&&E!=null&&p(e,["parameters","enhancePrompt"],E);const C=d(n,["labels"]);return e!==void 0&&C!=null&&p(e,["labels"],C),t}function B2(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["source"]);s!=null&&H2(s,t);const o=d(e,["config"]);return o!=null&&G2(o,t),t}function q2(n){const e={},t=d(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>jd(s))),p(e,["generatedImages"],r)}return e}function H2(n,e){const t={},r=d(n,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=d(n,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],Zn(s));const o=d(n,["productImages"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>O2(c))),p(e,["instances[0]","productImages"],l)}return t}function $2(n){const e={},t=d(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],Zn(t));const r=d(n,["referenceId"]);r!=null&&p(e,["referenceId"],r);const s=d(n,["referenceType"]);s!=null&&p(e,["referenceType"],s);const o=d(n,["maskImageConfig"]);o!=null&&p(e,["maskImageConfig"],F2(o));const l=d(n,["controlImageConfig"]);l!=null&&p(e,["controlImageConfig"],xO(l));const c=d(n,["styleImageConfig"]);c!=null&&p(e,["styleImageConfig"],c);const f=d(n,["subjectImageConfig"]);return f!=null&&p(e,["subjectImageConfig"],f),e}function qI(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const r=d(n,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=d(n,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function HI(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const r=d(n,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const s=d(n,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function z2(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=d(n,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function W2(n){const e={},t=d(n,["image"]);return t!=null&&p(e,["image"],Zn(t)),e}function K2(n,e){const t={},r=d(n,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const s=d(n,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const o=d(n,["confidenceThreshold"]);e!==void 0&&o!=null&&p(e,["parameters","confidenceThreshold"],o);const l=d(n,["maskDilation"]);e!==void 0&&l!=null&&p(e,["parameters","maskDilation"],l);const c=d(n,["binaryColorThreshold"]);e!==void 0&&c!=null&&p(e,["parameters","binaryColorThreshold"],c);const f=d(n,["labels"]);return e!==void 0&&f!=null&&p(e,["labels"],f),t}function J2(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["source"]);s!=null&&Q2(s,t);const o=d(e,["config"]);return o!=null&&K2(o,t),t}function Y2(n){const e={},t=d(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(s=>E2(s))),p(e,["generatedMasks"],r)}return e}function Q2(n,e){const t={},r=d(n,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const s=d(n,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],Zn(s));const o=d(n,["scribbleImage"]);return e!==void 0&&o!=null&&p(e,["instances[0]","scribble"],W2(o)),t}function X2(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const r=d(n,["functionCallingConfig"]);return r!=null&&p(e,["functionCallingConfig"],ZO(r)),e}function j2(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const r=d(n,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const s=d(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(n,["functionDeclarations"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const l=d(n,["googleMaps"]);l!=null&&p(e,["googleMaps"],A2(l));const c=d(n,["googleSearch"]);c!=null&&p(e,["googleSearch"],R2(c));const f=d(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function $I(n){const e={},t=d(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const r=d(n,["computerUse"]);if(r!=null&&p(e,["computerUse"],r),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=d(n,["codeExecution"]);s!=null&&p(e,["codeExecution"],s);const o=d(n,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const l=d(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>e2(E))),p(e,["functionDeclarations"],v)}const c=d(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],c);const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],f);const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const y=d(n,["urlContext"]);return y!=null&&p(e,["urlContext"],y),e}function Z2(n){const e={},t=d(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const r=d(n,["createTime"]);r!=null&&p(e,["createTime"],r);const s=d(n,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function eG(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const r=d(n,["createTime"]);r!=null&&p(e,["createTime"],r);const s=d(n,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function tG(n,e){const t={},r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=d(n,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const o=d(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),t}function nG(n,e){const t={},r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const s=d(n,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const o=d(n,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),t}function rG(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","name"],$e(n,r));const s=d(e,["config"]);return s!=null&&tG(s,t),t}function sG(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["config"]);return s!=null&&nG(s,t),t}function iG(n,e){const t={},r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const s=d(n,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const o=d(n,["personGeneration"]);e!==void 0&&o!=null&&p(e,["parameters","personGeneration"],o);const l=d(n,["includeRaiReason"]);e!==void 0&&l!=null&&p(e,["parameters","includeRaiReason"],l);const c=d(n,["outputMimeType"]);e!==void 0&&c!=null&&p(e,["parameters","outputOptions","mimeType"],c);const f=d(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","compressionQuality"],f);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=d(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const v=d(n,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=d(n,["numberOfImages"]);e!==void 0&&E!=null&&p(e,["parameters","sampleCount"],E);const C=d(n,["mode"]);return e!==void 0&&C!=null&&p(e,["parameters","mode"],C),t}function oG(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["_url","model"],$e(n,r));const s=d(e,["image"]);s!=null&&p(t,["instances[0]","image"],Zn(s));const o=d(e,["upscaleFactor"]);o!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],o);const l=d(e,["config"]);return l!=null&&iG(l,t),t}function aG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>jd(o))),p(e,["generatedImages"],s)}return e}function lG(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const r=d(n,["encodedVideo"]);r!=null&&p(e,["videoBytes"],si(r));const s=d(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function uG(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const r=d(n,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],si(r));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function cG(n){const e={},t=d(n,["image"]);t!=null&&p(e,["_self"],Zn(t));const r=d(n,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function dG(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],Zd(t));const r=d(n,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function fG(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],Zn(t));const r=d(n,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function zI(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const r=d(n,["videoBytes"]);r!=null&&p(e,["encodedVideo"],si(r));const s=d(n,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function WI(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const r=d(n,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],si(r));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hG(n,e){const t={},r=d(n,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),t}function pG(n){const e={},t=d(n,["config"]);return t!=null&&hG(t,e),e}function mG(n,e){const t={},r=d(n,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),t}function gG(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const r=d(n,["config"]);return r!=null&&mG(r,e),e}function yG(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function _G(n,e){const t={},r=d(n,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["customMetadata"],o)}const s=d(n,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),t}function vG(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const r=d(n,["metadata"]);r!=null&&p(e,["metadata"],r);const s=d(n,["done"]);s!=null&&p(e,["done"],s);const o=d(n,["error"]);o!=null&&p(e,["error"],o);const l=d(n,["response"]);return l!=null&&p(e,["response"],TG(l)),e}function EG(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const r=d(n,["fileName"]);r!=null&&p(e,["fileName"],r);const s=d(n,["config"]);return s!=null&&_G(s,e),e}function TG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["parent"]);r!=null&&p(e,["parent"],r);const s=d(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function wG(n,e){const t={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function SG(n){const e={},t=d(n,["config"]);return t!=null&&wG(t,e),e}function IG(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["fileSearchStores"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["fileSearchStores"],o)}return e}function KI(n,e){const t={},r=d(n,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const s=d(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const o=d(n,["customMetadata"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f)),p(e,["customMetadata"],c)}const l=d(n,["chunkingConfig"]);return e!==void 0&&l!=null&&p(e,["chunkingConfig"],l),t}function CG(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const r=d(n,["config"]);return r!=null&&KI(r,e),e}function AG(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RG="Content-Type",PG="X-Server-Timeout",kG="User-Agent",qp="x-goog-api-client",xG="1.35.0",bG=`google-genai-sdk/${xG}`,NG="v1beta1",DG="v1beta";class MG{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:NG,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:DG,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const s=[this.getRequestUrlInternal(t)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,s.toString(),e.abortSignal),this.unaryApiCall(s,o,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[s,o]of Object.entries(t))typeof o=="object"?r[s]=Object.assign(Object.assign({},r[s]),o):o!==void 0&&(r[s]=o);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,s.toString(),e.abortSignal),this.streamApiCall(s,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,s){if(t&&t.timeout||s){const o=new AbortController,l=o.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>o.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=l}return t&&t.extraBody!==null&&LG(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async s=>(await QT(s),new Fp(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async s=>(await QT(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Yn(this,arguments,function*(){var r;const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";const c="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:y}=yield Re(s.read());if(h){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=o.decode(y,{stream:!0});try{const M=JSON.parse(v);if("error"in M){const U=JSON.parse(JSON.stringify(M.error)),P=U.status,$=U.code,Q=`got status: ${P}. ${JSON.stringify(M)}`;if($>=400&&$<600)throw new Qd({message:Q,status:$})}}catch(M){if(M.name==="ApiError")throw M}l+=v;let E=-1,C=0;for(;;){E=-1,C=0;for(const P of f){const $=l.indexOf(P);$!==-1&&(E===-1||$<E)&&(E=$,C=P.length)}if(E===-1)break;const M=l.substring(0,E);l=l.substring(E+C);const U=M.trim();if(U.startsWith(c)){const P=U.substring(c.length).trim();try{const $=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Re(new Fp($))}catch($){throw new Error(`exception parsing stream chunk ${P}. ${$}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=bG+" "+this.clientOptions.userAgentExtra;return e[kG]=t,e[qp]=t,e[RG]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))r.append(s,o);e.timeout&&e.timeout>0&&r.append(PG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,l=await o.stat(e);s.sizeBytes=String(l.size);const c=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const f={file:s},h=this.getFileName(e),y=ce("upload/v1beta/files",f._url),v=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,f,t==null?void 0:t.httpOptions);return o.upload(e,v,this)}async uploadFileToFileSearchStore(e,t,r){var s;const o=this.clientOptions.uploader,l=await o.stat(t),c=String(l.size),f=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),v={};r!=null&&KI(r,v);const E=await this.fetchUploadUrl(h,c,f,y,v,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(t,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,s,o,l){var c;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:f});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function QT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(r);throw t>=400&&t<600?new Qd({message:s,status:t}):new Error(s)}}function LG(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))t=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,l){const c=Object.assign({},o);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const h=l[f],y=c[f];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?c[f]=r(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),c[f]=h)}return c}const s=r(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UG="mcp_used/unknown";let FG=!1;function JI(n){for(const e of n)if(VG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return FG}function YI(n){var e;const t=(e=n[qp])!==null&&e!==void 0?e:"";n[qp]=(t+` ${UG}`).trimStart()}function VG(n){return n!==null&&typeof n=="object"&&n instanceof og}function OG(n){return Yn(this,arguments,function*(t,r=100){let s,o=0;for(;o<r;){const l=yield Re(t.listTools({cursor:s}));for(const c of l.tools)yield yield Re(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class og{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new og(e,t)}async initialize(){var e,t,r,s;if(this.mcpTools.length>0)return;const o={},l=[];for(const y of this.mcpClients)try{for(var c=!0,f=(t=void 0,Qn(OG(y))),h;h=await f.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const v=s;l.push(v);const E=v.name;if(o[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);o[E]=y}}catch(v){t={error:v}}finally{try{!c&&!e&&(r=f.return)&&await r.call(f)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),yF(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const l=await s.callTool({name:r.name,arguments:r.args},void 0,o);t.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function GG(n,e,t){const r=new uF;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(r,s),e(r)}class BG{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),l=$G(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const y=new Promise(Y=>{h=Y}),v=e.callbacks,E=function(){h({})},C=this.apiClient,M={onopen:E,onmessage:Y=>{GG(C,v.onmessage,Y)},onerror:(t=v==null?void 0:v.onerror)!==null&&t!==void 0?t:function(Y){},onclose:(r=v==null?void 0:v.onclose)!==null&&r!==void 0?r:function(Y){}},U=this.webSocketFactory.create(f,HG(l),M);U.connect(),await y;const Q={setup:{model:$e(this.apiClient,e.model)}};return U.send(JSON.stringify(Q)),new qG(U,this.apiClient)}}class qG{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=pO(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=hO(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ta.PLAY)}pause(){this.sendPlaybackControl(ta.PAUSE)}stop(){this.sendPlaybackControl(ta.STOP)}resetContext(){this.sendPlaybackControl(ta.RESET_CONTEXT)}close(){this.conn.close()}}function HG(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function $G(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function WG(n,e,t){const r=new lF;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const o=JSON.parse(s);if(n.isVertexAI()){const l=yO(o);Object.assign(r,l)}else Object.assign(r,o);e(r)}class KG{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new BG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,s,o,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&JI(e.config.tools)&&YI(v);const E=XG(v);if(this.apiClient.isVertexAI())y=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,y);else{const k=this.apiClient.getApiKey();let L="BidiGenerateContent",F="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",F="access_token"),y=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${F}=${k}`}let C=()=>{};const M=new Promise(k=>{C=k}),U=e.callbacks,P=function(){var k;(k=U==null?void 0:U.onopen)===null||k===void 0||k.call(U),C({})},$=this.apiClient,Q={onopen:P,onmessage:k=>{WG($,U.onmessage,k)},onerror:(t=U==null?void 0:U.onerror)!==null&&t!==void 0?t:function(k){},onclose:(r=U==null?void 0:U.onclose)!==null&&r!==void 0?r:function(k){}},Y=this.webSocketFactory.create(y,QG(E),Q);Y.connect(),await M;let ee=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const k=this.apiClient.getProject(),L=this.apiClient.getLocation();ee=`projects/${k}/locations/${L}/`+ee}let X={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[wd.AUDIO]}:e.config.responseModalities=[wd.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ie=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],N=[];for(const k of ie)if(this.isCallableTool(k)){const L=k;N.push(await L.tool())}else N.push(k);N.length>0&&(e.config.tools=N);const x={model:ee,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=fO(this.apiClient,x):X=dO(this.apiClient,x),delete X.config,Y.send(JSON.stringify(X)),new YG(Y,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const JG={turnComplete:!0};class YG{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=Dn(t.turns),e.isVertexAI()||(r=r.map(s=>Xd(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(zG)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},JG),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:gO(e)}:t={realtimeInput:mO(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function QG(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function XG(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XT=10;function jT(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(da(l)){s=!0;break}if(!s)return!0;const o=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function da(n){return"callTool"in n&&typeof n.callTool=="function"}function jG(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>da(s)))!==null&&r!==void 0?r:!1}function ZT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,s)=>{if(da(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&t.push(s)}),t}function ew(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZG extends rs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,s,o,l,c;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!jG(t)||jT(t.config))return await this.generateContentInternal(f);const h=ZT(t);if(h.length>0){const U=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let y,v;const E=Dn(f.contents),C=(o=(s=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:XT;let M=0;for(;M<C&&(y=await this.generateContentInternal(f),!(!y.functionCalls||y.functionCalls.length===0));){const U=y.candidates[0].content,P=[];for(const $ of(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(da($)){const Y=await $.callTool(y.functionCalls);P.push(...Y)}M++,v={role:"user",parts:P},f.contents=Dn(f.contents),f.contents.push(U),f.contents.push(v),ew(f.config)&&(E.push(U),E.push(v))}return ew(f.config)&&(y.automaticFunctionCallingHistory=E),y},this.generateContentStream=async t=>{var r,s,o,l,c;if(this.maybeMoveToResponseJsonSchem(t),jT(t.config)){const v=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(v)}const f=ZT(t);if(f.length>0){const v=f.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(o=(s=(r=t==null?void 0:t.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,y=(c=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var s;let o;const l=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((s=f==null?void 0:f.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:l.push(f);let c;return o?c={generatedImages:l,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async t=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new so(ns.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var r,s,o,l,c,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(o=t.source)===null||o===void 0?void 0:o.video)===null||l===void 0)&&l.uri&&(!((f=(c=t.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,s;const o=(t=e.config)===null||t===void 0?void 0:t.tools;if(!o)return e;const l=await Promise.all(o.map(async f=>da(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&JI(e.config.tools)){const f=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),YI(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var t,r,s;const o=new Map;for(const l of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(da(l)){const c=l,f=await c.tool();for(const h of(s=f.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(o.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);o.set(h.name,c)}}return o}async processAfcStream(e){var t,r,s;const o=(s=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:XT;let l=!1,c=0;const f=await this.initAfcToolsMap(e);return(function(h,y,v){return Yn(this,arguments,function*(){for(var E,C,M,U,P,$;c<o;){l&&(c++,l=!1);const X=yield Re(h.processParamsMaybeAddMcpUsage(v)),ie=yield Re(h.generateContentStreamInternal(X)),N=[],x=[];try{for(var Q=!0,Y=(C=void 0,Qn(ie)),ee;ee=yield Re(Y.next()),E=ee.done,!E;Q=!0){U=ee.value,Q=!1;const k=U;if(yield yield Re(k),k.candidates&&(!((P=k.candidates[0])===null||P===void 0)&&P.content)){x.push(k.candidates[0].content);for(const L of($=k.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(c<o&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(L.functionCall.name)){const F=yield Re(y.get(L.functionCall.name).callTool([L.functionCall]));N.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(k){C={error:k}}finally{try{!Q&&!E&&(M=Y.return)&&(yield Re(M.call(Y)))}finally{if(C)throw C.error}}if(N.length>0){l=!0;const k=new Cl;k.candidates=[{content:{role:"user",parts:N}}],yield yield Re(k);const L=[];L.push(...x),L.push({role:"user",parts:N});const F=Dn(v.contents).concat(L);v.contents=F}else break}})})(this,f,e)}async generateContentInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=KT(this.apiClient,e);return c=ce("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=YT(y),E=new Cl;return Object.assign(E,v),E})}else{const h=WT(this.apiClient,e);return c=ce("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=JT(y),E=new Cl;return Object.assign(E,v),E})}}async generateContentStreamInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=KT(this.apiClient,e);return c=ce("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(v){return Yn(this,arguments,function*(){var E,C,M,U;try{for(var P=!0,$=Qn(v),Q;Q=yield Re($.next()),E=Q.done,!E;P=!0){U=Q.value,P=!1;const Y=U,ee=YT(yield Re(Y.json()));ee.sdkHttpResponse={headers:Y.headers};const X=new Cl;Object.assign(X,ee),yield yield Re(X)}}catch(Y){C={error:Y}}finally{try{!P&&!E&&(M=$.return)&&(yield Re(M.call($)))}finally{if(C)throw C.error}}})})}else{const h=WT(this.apiClient,e);return c=ce("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),l.then(function(v){return Yn(this,arguments,function*(){var E,C,M,U;try{for(var P=!0,$=Qn(v),Q;Q=yield Re($.next()),E=Q.done,!E;P=!0){U=Q.value,P=!1;const Y=U,ee=JT(yield Re(Y.json()));ee.sdkHttpResponse={headers:Y.headers};const X=new Cl;Object.assign(X,ee),yield yield Re(X)}}catch(Y){C={error:Y}}finally{try{!P&&!E&&(M=$.return)&&(yield Re(M.call($)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=KO(this.apiClient,e);return c=ce("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=YO(y),E=new kT;return Object.assign(E,v),E})}else{const h=WO(this.apiClient,e);return c=ce("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=JO(y),E=new kT;return Object.assign(E,v),E})}}async generateImagesInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=o2(this.apiClient,e);return c=ce("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=l2(y),E=new xT;return Object.assign(E,v),E})}else{const h=i2(this.apiClient,e);return c=ce("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=a2(y),E=new xT;return Object.assign(E,v),E})}}async editImageInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=qO(this.apiClient,e);return o=ce("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=HO(f),y=new XU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=oG(this.apiClient,e);return o=ce("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=aG(f),y=new jU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=B2(this.apiClient,e);return o=ce("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=q2(f),y=new ZU;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=J2(this.apiClient,e);return o=ce("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Y2(f),y=new eF;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=C2(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Bp(y))}else{const h=I2(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Gp(y))}}async listInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=M2(this.apiClient,e);return c=ce("{models_url}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=U2(y),E=new bT;return Object.assign(E,v),E})}else{const h=D2(this.apiClient,e);return c=ce("{models_url}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=L2(y),E=new bT;return Object.assign(E,v),E})}}async update(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=sG(this.apiClient,e);return c=ce("{model}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>Bp(y))}else{const h=rG(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>Gp(y))}}async delete(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=VO(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=GO(y),E=new NT;return Object.assign(E,v),E})}else{const h=FO(this.apiClient,e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=OO(y),E=new NT;return Object.assign(E,v),E})}}async countTokens(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=MO(this.apiClient,e);return c=ce("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=UO(y),E=new DT;return Object.assign(E,v),E})}else{const h=DO(this.apiClient,e);return c=ce("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=LO(y),E=new DT;return Object.assign(E,v),E})}}async computeTokens(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=AO(this.apiClient,e);return o=ce("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=RO(f),y=new tF;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=p2(this.apiClient,e);return c=ce("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l.then(y=>{const v=f2(y),E=new Sd;return Object.assign(E,v),E})}else{const h=h2(this.apiClient,e);return c=ce("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l.then(y=>{const v=d2(y),E=new Sd;return Object.assign(E,v),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e4 extends rs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:o}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=zU(e);return c=ce("{operationName}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),l}else{const h=$U(e);return c=ce("{operationName}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=FU(e);return o=ce("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t4(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function n4(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(o=>d4(o))),p(e,["parts"],s)}const r=d(n,["role"]);return r!=null&&p(e,["role"],r),e}function r4(n,e,t){const r={},s=d(e,["expireTime"]);t!==void 0&&s!=null&&p(t,["expireTime"],s);const o=d(e,["newSessionExpireTime"]);t!==void 0&&o!=null&&p(t,["newSessionExpireTime"],o);const l=d(e,["uses"]);t!==void 0&&l!=null&&p(t,["uses"],l);const c=d(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&p(t,["bidiGenerateContentSetup"],c4(n,c));const f=d(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&p(t,["fieldMask"],f),r}function s4(n,e){const t={},r=d(e,["config"]);return r!=null&&p(t,["config"],r4(n,r,t)),t}function i4(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function o4(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const r=d(n,["args"]);r!=null&&p(e,["args"],r);const s=d(n,["name"]);if(s!=null&&p(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function a4(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function l4(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function u4(n,e){const t={},r=d(n,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const s=d(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const o=d(n,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const l=d(n,["topP"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topP"],l);const c=d(n,["topK"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topK"],c);const f=d(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const y=d(n,["seed"]);e!==void 0&&y!=null&&p(e,["setup","generationConfig","seed"],y);const v=d(n,["speechConfig"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","speechConfig"],ig(v));const E=d(n,["thinkingConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","thinkingConfig"],E);const C=d(n,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const M=d(n,["systemInstruction"]);e!==void 0&&M!=null&&p(e,["setup","systemInstruction"],n4(Yt(M)));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let ie=Ra(U);Array.isArray(ie)&&(ie=ie.map(N=>h4(Aa(N)))),p(e,["setup","tools"],ie)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],f4(P));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const Q=d(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","outputAudioTranscription"],Q);const Y=d(n,["realtimeInputConfig"]);e!==void 0&&Y!=null&&p(e,["setup","realtimeInputConfig"],Y);const ee=d(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&p(e,["setup","contextWindowCompression"],ee);const X=d(n,["proactivity"]);if(e!==void 0&&X!=null&&p(e,["setup","proactivity"],X),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function c4(n,e){const t={},r=d(e,["model"]);r!=null&&p(t,["setup","model"],$e(n,r));const s=d(e,["config"]);return s!=null&&p(t,["config"],u4(s,t)),t}function d4(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const r=d(n,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const s=d(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const o=d(n,["fileData"]);o!=null&&p(e,["fileData"],i4(o));const l=d(n,["functionCall"]);l!=null&&p(e,["functionCall"],o4(l));const c=d(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=d(n,["inlineData"]);f!=null&&p(e,["inlineData"],t4(f));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const y=d(n,["thought"]);y!=null&&p(e,["thought"],y);const v=d(n,["thoughtSignature"]);v!=null&&p(e,["thoughtSignature"],v);const E=d(n,["videoMetadata"]);return E!=null&&p(e,["videoMetadata"],E),e}function f4(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function h4(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const r=d(n,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const s=d(n,["codeExecution"]);if(s!=null&&p(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=d(n,["functionDeclarations"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(v=>v)),p(e,["functionDeclarations"],y)}const l=d(n,["googleMaps"]);l!=null&&p(e,["googleMaps"],a4(l));const c=d(n,["googleSearch"]);c!=null&&p(e,["googleSearch"],l4(c));const f=d(n,["googleSearchRetrieval"]);f!=null&&p(e,["googleSearchRetrieval"],f);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(o=>`${t}.${o}`);e.push(...s)}else e.push(t)}return e.join(",")}function m4(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,t=o):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const o=p4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const f=[];o&&f.push(o),c.length>0&&f.push(...c),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class g4 extends rs{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=s4(this.apiClient,e);o=ce("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const f=m4(c,e.config);return s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y4(n,e){const t={},r=d(n,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),t}function _4(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const r=d(n,["config"]);return r!=null&&y4(r,e),e}function v4(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function E4(n,e){const t={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function T4(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const r=d(n,["config"]);return r!=null&&E4(r,e),e}function w4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const r=d(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const s=d(n,["documents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),p(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S4 extends rs{constructor(e){super(),this.apiClient=e,this.list=async t=>new so(ns.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=v4(e);return o=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_4(e);s=ce("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=T4(e);return o=ce("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=w4(f),y=new nF;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I4 extends rs{constructor(e,t=new S4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new so(ns.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pG(e);return o=ce("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yG(e);return o=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gG(e);s=ce("{name}",l._url),o=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=SG(e);return o=ce("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=IG(f),y=new rF;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=CG(e);return o=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=AG(f),y=new sF;return Object.assign(y,h),y})}}async importFile(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=EG(e);return o=ce("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=vG(f),y=new eg;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return QI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};const C4=()=>QI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const $p=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ln extends Error{}class tn extends Ln{constructor(e,t,r,s){super(`${tn.makeMessage(e,t,r)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,r){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,r,s){if(!e||!s)return new ef({message:r,cause:$p(t)});const o=t;return e===400?new jI(e,o,r,s):e===401?new ZI(e,o,r,s):e===403?new eC(e,o,r,s):e===404?new tC(e,o,r,s):e===409?new nC(e,o,r,s):e===422?new rC(e,o,r,s):e===429?new sC(e,o,r,s):e>=500?new iC(e,o,r,s):new tn(e,o,r,s)}}class zp extends tn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ef extends tn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class XI extends ef{constructor({message:e}={}){super({message:e??"Request timed out."})}}class jI extends tn{}class ZI extends tn{}class eC extends tn{}class tC extends tn{}class nC extends tn{}class rC extends tn{}class sC extends tn{}class iC extends tn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A4=/^[a-z][a-z0-9+.-]*:/i,R4=n=>A4.test(n);let Wp=n=>(Wp=Array.isArray,Wp(n));const P4=Wp;let k4=P4;const tw=k4;function x4(n){if(!n)return!0;for(const e in n)return!1;return!0}function b4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const N4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ln(`${n} must be an integer`);if(e<0)throw new Ln(`${n} must be a positive integer`);return e},D4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const U4=()=>{var n,e,t,r,s;const o=L4();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":rw(Deno.build.os),"X-Stainless-Arch":nw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":rw((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":nw((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const l=F4();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function F4(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const s=r[1]||0,o=r[2]||0,l=r[3]||0;return{browser:e,version:`${s}.${o}.${l}`}}}return null}const nw=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",rw=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Mc;const V4=()=>Mc??(Mc=U4());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function oC(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function G4(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return oC({start(){},async pull(t){const{done:r,value:s}=await e.next();r?t.close():t.enqueue(s)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function aC(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function B4(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const r=n.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q4=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lC=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ep(n,e,t){return lC(),new File(n,e??"unknown_file",t)}function H4(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const $4=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uC=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",z4=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&uC(n),W4=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function K4(n,e,t){if(lC(),n=await n,z4(n))return n instanceof File?n:ep([await n.arrayBuffer()],n.name);if(W4(n)){const s=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),ep(await Kp(s),e,t)}const r=await Kp(n);if(e||(e=H4(n)),!(t!=null&&t.type)){const s=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof s=="string"&&(t=Object.assign(Object.assign({},t),{type:s}))}return ep(r,e,t)}async function Kp(n){var e,t,r,s,o;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(uC(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if($4(n))try{for(var c=!0,f=Qn(n),h;h=await f.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const y=s;l.push(...await Kp(y))}}catch(y){t={error:y}}finally{try{!c&&!e&&(r=f.return)&&await r.call(f)}finally{if(t)throw t.error}}else{const y=(o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof n}${y?`; constructor: ${y}`:""}${J4(n)}`)}return l}function J4(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cC{constructor(e){this._client=e}}cC._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dC(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const sw=Object.freeze(Object.create(null)),Y4=(n=dC)=>(function(t,...r){if(t.length===1)return t[0];let s=!1;const o=[],l=t.reduce((y,v,E)=>{var C,M,U;/[?#]/.test(v)&&(s=!0);const P=r[E];let $=(s?encodeURIComponent:n)(""+P);return E!==r.length&&(P==null||typeof P=="object"&&P.toString===((U=Object.getPrototypeOf((M=Object.getPrototypeOf((C=P.hasOwnProperty)!==null&&C!==void 0?C:sw))!==null&&M!==void 0?M:sw))===null||U===void 0?void 0:U.toString))&&($=P+"",o.push({start:y.length+v.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),y+v+(E===r.length?"":$)},""),c=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(c))!==null;)o.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(o.sort((y,v)=>y.start-v.start),o.length>0){let y=0;const v=o.reduce((E,C)=>{const M=" ".repeat(C.start-y),U="^".repeat(C.length);return y=C.start+C.length,E+M+U},"");throw new Ln(`Path parameters result in path with invalid segments:
${o.map(E=>E.error).join(`
`)}
${l}
${v}`)}return l}),Lc=Y4(dC);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fC extends cC{create(e,t){var r;const{api_version:s=this._client.apiVersion}=e,o=Cd(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Ln("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Ln("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Lc`/${s}/interactions`,Object.assign(Object.assign({body:o},t),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,t={},r){const{api_version:s=this._client.apiVersion}=t??{};return this._client.delete(Lc`/${s}/interactions/${e}`,r)}cancel(e,t={},r){const{api_version:s=this._client.apiVersion}=t??{};return this._client.post(Lc`/${s}/interactions/${e}/cancel`,r)}get(e,t={},r){var s;const o=t??{},{api_version:l=this._client.apiVersion}=o,c=Cd(o,["api_version"]);return this._client.get(Lc`/${l}/interactions/${e}`,Object.assign(Object.assign({query:c},r),{stream:(s=t==null?void 0:t.stream)!==null&&s!==void 0?s:!1}))}}fC._key=Object.freeze(["interactions"]);class hC extends fC{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q4(n){let e=0;for(const s of n)e+=s.length;const t=new Uint8Array(e);let r=0;for(const s of n)t.set(s,r),r+=s.length;return t}let Uc;function ag(n){let e;return(Uc??(e=new globalThis.TextEncoder,Uc=e.encode.bind(e)))(n)}let Fc;function iw(n){let e;return(Fc??(e=new globalThis.TextDecoder,Fc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ag(e):e;this.buffer=Q4([this.buffer,t]);const r=[];let s;for(;(s=X4(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(iw(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,l=iw(this.buffer.subarray(0,o));r.push(l),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}tf.NEWLINE_CHARS=new Set([`
`,"\r"]);tf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function X4(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function j4(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ad={off:0,error:200,warn:300,info:400,debug:500},ow=(n,e,t)=>{if(n){if(b4(Ad,n))return n;Zt(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Ad))}`)}};function Dl(){}function Vc(n,e,t){return!e||Ad[n]>Ad[t]?Dl:e[n].bind(e)}const Z4={error:Dl,warn:Dl,info:Dl,debug:Dl};let aw=new WeakMap;function Zt(n){var e;const t=n.logger,r=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return Z4;const s=aw.get(t);if(s&&s[0]===r)return s[1];const o={error:Vc("error",t,r),warn:Vc("warn",t,r),info:Vc("info",t,r),debug:Vc("debug",t,r)};return aw.set(t,[r,o]),o}const Mi=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class na{constructor(e,t,r){this.iterator=e,this.controller=t,this.client=r}static fromSSEResponse(e,t,r){let s=!1;const o=r?Zt(r):console;function l(){return Yn(this,arguments,function*(){var f,h,y,v;if(s)throw new Ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let E=!1;try{try{for(var C=!0,M=Qn(eB(e,t)),U;U=yield Re(M.next()),f=U.done,!f;C=!0){v=U.value,C=!1;const P=v;if(!E)if(P.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield Re(JSON.parse(P.data))}catch($){throw o.error("Could not parse message into JSON:",P.data),o.error("From chunk:",P.raw),$}}}catch(P){h={error:P}}finally{try{!C&&!f&&(y=M.return)&&(yield Re(y.call(M)))}finally{if(h)throw h.error}}E=!0}catch(P){if(Hp(P))return yield Re(void 0);throw P}finally{E||t.abort()}})}return new na(l,t,r)}static fromReadableStream(e,t,r){let s=!1;function o(){return Yn(this,arguments,function*(){var f,h,y,v;const E=new tf,C=aC(e);try{for(var M=!0,U=Qn(C),P;P=yield Re(U.next()),f=P.done,!f;M=!0){v=P.value,M=!1;const $=v;for(const Q of E.decode($))yield yield Re(Q)}}catch($){h={error:$}}finally{try{!M&&!f&&(y=U.return)&&(yield Re(y.call(U)))}finally{if(h)throw h.error}}for(const $ of E.flush())yield yield Re($)})}function l(){return Yn(this,arguments,function*(){var f,h,y,v;if(s)throw new Ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let E=!1;try{try{for(var C=!0,M=Qn(o()),U;U=yield Re(M.next()),f=U.done,!f;C=!0){v=U.value,C=!1;const P=v;E||P&&(yield yield Re(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!C&&!f&&(y=M.return)&&(yield Re(y.call(M)))}finally{if(h)throw h.error}}E=!0}catch(P){if(Hp(P))return yield Re(void 0);throw P}finally{E||t.abort()}})}return new na(l,t,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),s=o=>({next:()=>{if(o.length===0){const l=r.next();e.push(l),t.push(l)}return o.shift()}});return[new na(()=>s(e),this.controller,this.client),new na(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return oC({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:o}=await t.next();if(o)return r.close();const l=ag(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){var r;await((r=t.return)===null||r===void 0?void 0:r.call(t))}})}}function eB(n,e){return Yn(this,arguments,function*(){var r,s,o,l;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Ln("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Ln("Attempted to iterate over a response with no body");const c=new nB,f=new tf,h=aC(n.body);try{for(var y=!0,v=Qn(tB(h)),E;E=yield Re(v.next()),r=E.done,!r;y=!0){l=E.value,y=!1;const C=l;for(const M of f.decode(C)){const U=c.decode(M);U&&(yield yield Re(U))}}}catch(C){s={error:C}}finally{try{!y&&!r&&(o=v.return)&&(yield Re(o.call(v)))}finally{if(s)throw s.error}}for(const C of f.flush()){const M=c.decode(C);M&&(yield yield Re(M))}})}function tB(n){return Yn(this,arguments,function*(){var t,r,s,o;let l=new Uint8Array;try{for(var c=!0,f=Qn(n),h;h=yield Re(f.next()),t=h.done,!t;c=!0){o=h.value,c=!1;const y=o;if(y==null)continue;const v=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?ag(y):y;let E=new Uint8Array(l.length+v.length);E.set(l),E.set(v,l.length),l=E;let C;for(;(C=j4(l))!==-1;)yield yield Re(l.slice(0,C)),l=l.slice(C)}}catch(y){r={error:y}}finally{try{!c&&!t&&(s=f.return)&&(yield Re(s.call(f)))}finally{if(r)throw r.error}}l.length>0&&(yield yield Re(l))})}class nB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,s]=rB(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function rB(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sB(n,e){const{response:t,requestLogID:r,retryOfRequestLogID:s,startTime:o}=e,l=await(async()=>{var c;if(e.options.stream)return Zt(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):na.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const f=t.headers.get("content-type"),h=(c=f==null?void 0:f.split(";")[0])===null||c===void 0?void 0:c.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return Zt(n).debug(`[${r}] response parsed`,Mi({retryOfRequestLogID:s,url:t.url,status:t.status,body:l,durationMs:Date.now()-o})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lg extends Promise{constructor(e,t,r=sB){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new lg(this.client,this.responsePromise,async(t,r)=>e(await this.parseResponse(t,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pC=Symbol("brand.privateNullableHeaders");function*iB(n){if(!n)return;if(pC in n){const{values:r,nulls:s}=n;yield*r.entries();for(const o of s)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():tw(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const o=tw(r[1])?r[1]:[r[1]];let l=!1;for(const c of o)c!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,c])}}const Al=n=>{const e=new Headers,t=new Set;for(const r of n){const s=new Set;for(const[o,l]of iB(r)){const c=o.toLowerCase();s.has(c)||(e.delete(o),s.add(c)),l===null?(e.delete(o),t.add(c)):(e.append(o,l),t.delete(c))}}return{[pC]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tp=n=>{var e,t,r,s,o,l;if(typeof globalThis.process<"u")return(r=(t=(e=bU)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(l=(o=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||o===void 0?void 0:o.call(s,n))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mC;class nf{constructor(e){var t,r,s,o,l,c,f,{baseURL:h=tp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(t=tp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:v="v1beta"}=e,E=Cd(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:y,apiVersion:v},E),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(r=C.timeout)!==null&&r!==void 0?r:nf.DEFAULT_TIMEOUT,this.logger=(s=C.logger)!==null&&s!==void 0?s:console;const M="warn";this.logLevel=M,this.logLevel=(l=(o=ow(C.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:ow(tp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:M,this.fetchOptions=C.fetchOptions,this.maxRetries=(c=C.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(f=C.fetch)!==null&&f!==void 0?f:O4(),this.encoder=q4,this._options=C,this.apiKey=y,this.apiVersion=v,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Al([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Al([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Al([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new Ln(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Zo}`}defaultIdempotencyKey(){return`stainless-node-retry-${C4()}`}makeStatusError(e,t,r,s){return tn.generate(e,t,r,s)}buildURL(e,t,r){const s=!this.baseURLOverridden()&&r||this.baseURL,o=R4(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return x4(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new lg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){var s,o,l;const c=await e,f=(s=c.maxRetries)!==null&&s!==void 0?s:this.maxRetries;t==null&&(t=f),await this.prepareOptions(c);const{req:h,url:y,timeout:v}=await this.buildRequest(c,{retryCount:f-t});await this.prepareRequest(h,{url:y,options:c});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=r===void 0?"":`, retryOf: ${r}`,M=Date.now();if(Zt(this).debug(`[${E}] sending request`,Mi({retryOfRequestLogID:r,method:c.method,url:y,options:c,headers:h.headers})),!((o=c.signal)===null||o===void 0)&&o.aborted)throw new zp;const U=new AbortController,P=await this.fetchWithTimeout(y,h,v,U).catch($p),$=Date.now();if(P instanceof globalThis.Error){const Y=`retrying, ${t} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new zp;const ee=Hp(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return Zt(this).info(`[${E}] connection ${ee?"timed out":"failed"} - ${Y}`),Zt(this).debug(`[${E}] connection ${ee?"timed out":"failed"} (${Y})`,Mi({retryOfRequestLogID:r,url:y,durationMs:$-M,message:P.message})),this.retryRequest(c,t,r??E);throw Zt(this).info(`[${E}] connection ${ee?"timed out":"failed"} - error; no more retries left`),Zt(this).debug(`[${E}] connection ${ee?"timed out":"failed"} (error; no more retries left)`,Mi({retryOfRequestLogID:r,url:y,durationMs:$-M,message:P.message})),ee?new XI:new ef({cause:P})}const Q=`[${E}${C}] ${h.method} ${y} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${$-M}ms`;if(!P.ok){const Y=await this.shouldRetry(P);if(t&&Y){const k=`retrying, ${t} attempts remaining`;return await B4(P.body),Zt(this).info(`${Q} - ${k}`),Zt(this).debug(`[${E}] response error (${k})`,Mi({retryOfRequestLogID:r,url:P.url,status:P.status,headers:P.headers,durationMs:$-M})),this.retryRequest(c,t,r??E,P.headers)}const ee=Y?"error; no more retries left":"error; not retryable";Zt(this).info(`${Q} - ${ee}`);const X=await P.text().catch(k=>$p(k).message),ie=D4(X),N=ie?void 0:X;throw Zt(this).debug(`[${E}] response error (${ee})`,Mi({retryOfRequestLogID:r,url:P.url,status:P.status,headers:P.headers,message:N,durationMs:Date.now()-M})),this.makeStatusError(P.status,ie,N,P.headers)}return Zt(this).info(Q),Zt(this).debug(`[${E}] response start`,Mi({retryOfRequestLogID:r,url:P.url,status:P.status,headers:P.headers,durationMs:$-M})),{response:P,options:c,controller:U,requestLogID:E,retryOfRequestLogID:r,startTime:M}}async fetchWithTimeout(e,t,r,s){const o=t||{},{signal:l,method:c}=o,f=Cd(o,["signal","method"]);l&&l.addEventListener("abort",()=>s.abort());const h=setTimeout(()=>s.abort(),r),y=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,v=Object.assign(Object.assign(Object.assign({signal:s.signal},y?{duplex:"half"}:{}),{method:"GET"}),f);c&&(v.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,s){var o;let l;const c=s==null?void 0:s.get("retry-after-ms");if(c){const h=parseFloat(c);Number.isNaN(h)||(l=h)}const f=s==null?void 0:s.get("retry-after");if(f&&!l){const h=parseFloat(f);Number.isNaN(h)?l=Date.parse(f)-Date.now():l=h*1e3}if(!(l&&0<=l&&l<60*1e3)){const h=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,h)}return await M4(l),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,l=Math.min(.5*Math.pow(2,o),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:t=0}={}){var r,s,o;const l=Object.assign({},e),{method:c,path:f,query:h,defaultBaseURL:y}=l,v=this.buildURL(f,h,y);"timeout"in l&&N4("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:E,body:C}=this.buildBody({options:l}),M=await this.buildHeaders({options:e,method:c,bodyHeaders:E,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:M},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(o=l.fetchOptions)!==null&&o!==void 0?o:{}),url:v,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:s}){let o={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let c=Al([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),V4()),this._options.defaultHeaders,r,e.headers,l]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Al([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:G4(e)}:this.encoder({body:e,headers:r})}}nf.DEFAULT_TIMEOUT=6e4;class Nt extends nf{constructor(){super(...arguments),this.interactions=new hC(this)}}mC=Nt;Nt.GeminiNextGenAPIClient=mC;Nt.GeminiNextGenAPIClientError=Ln;Nt.APIError=tn;Nt.APIConnectionError=ef;Nt.APIConnectionTimeoutError=XI;Nt.APIUserAbortError=zp;Nt.NotFoundError=tC;Nt.ConflictError=nC;Nt.RateLimitError=sC;Nt.BadRequestError=jI;Nt.AuthenticationError=ZI;Nt.InternalServerError=iC;Nt.PermissionDeniedError=eC;Nt.UnprocessableEntityError=rC;Nt.toFile=K4;Nt.Interactions=hC;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oB(n,e){const t={},r=d(n,["name"]);return r!=null&&p(t,["_url","name"],r),t}function aB(n,e){const t={},r=d(n,["name"]);return r!=null&&p(t,["_url","name"],r),t}function lB(n,e){const t={},r=d(n,["sdkHttpResponse"]);return r!=null&&p(t,["sdkHttpResponse"],r),t}function uB(n,e){const t={},r=d(n,["sdkHttpResponse"]);return r!=null&&p(t,["sdkHttpResponse"],r),t}function cB(n,e,t){const r={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=d(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=d(n,["epochCount"]);e!==void 0&&o!=null&&p(e,["tuningTask","hyperparameters","epochCount"],o);const l=d(n,["learningRateMultiplier"]);if(l!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=d(n,["batchSize"]);e!==void 0&&c!=null&&p(e,["tuningTask","hyperparameters","batchSize"],c);const f=d(n,["learningRate"]);if(e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","learningRate"],f),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function dB(n,e,t){const r={};let s=d(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const C=d(n,["validationDataset"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec"],lw(C))}else if(s==="PREFERENCE_TUNING"){const C=d(n,["validationDataset"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec"],lw(C))}const o=d(n,["tunedModelDisplayName"]);e!==void 0&&o!=null&&p(e,["tunedModelDisplayName"],o);const l=d(n,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);let c=d(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const C=d(n,["epochCount"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(c==="PREFERENCE_TUNING"){const C=d(n,["epochCount"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const C=d(n,["learningRateMultiplier"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(f==="PREFERENCE_TUNING"){const C=d(n,["learningRateMultiplier"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=d(n,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=d(n,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let y=d(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const C=d(n,["adapterSize"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(y==="PREFERENCE_TUNING"){const C=d(n,["adapterSize"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=d(n,["labels"]);e!==void 0&&v!=null&&p(e,["labels"],v);const E=d(n,["beta"]);return e!==void 0&&E!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),r}function fB(n,e){const t={},r=d(n,["baseModel"]);r!=null&&p(t,["baseModel"],r);const s=d(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const o=d(n,["trainingDataset"]);o!=null&&SB(o);const l=d(n,["config"]);return l!=null&&cB(l,t),t}function hB(n,e){const t={},r=d(n,["baseModel"]);r!=null&&p(t,["baseModel"],r);const s=d(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const o=d(n,["trainingDataset"]);o!=null&&IB(o,t,e);const l=d(n,["config"]);return l!=null&&dB(l,t,e),t}function pB(n,e){const t={},r=d(n,["name"]);return r!=null&&p(t,["_url","name"],r),t}function mB(n,e){const t={},r=d(n,["name"]);return r!=null&&p(t,["_url","name"],r),t}function gB(n,e,t){const r={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),r}function yB(n,e,t){const r={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const l=d(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),r}function _B(n,e){const t={},r=d(n,["config"]);return r!=null&&gB(r,t),t}function vB(n,e){const t={},r=d(n,["config"]);return r!=null&&yB(r,t),t}function EB(n,e){const t={},r=d(n,["sdkHttpResponse"]);r!=null&&p(t,["sdkHttpResponse"],r);const s=d(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const o=d(n,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>gC(c))),p(t,["tuningJobs"],l)}return t}function TB(n,e){const t={},r=d(n,["sdkHttpResponse"]);r!=null&&p(t,["sdkHttpResponse"],r);const s=d(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const o=d(n,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Jp(c))),p(t,["tuningJobs"],l)}return t}function wB(n,e){const t={},r=d(n,["name"]);r!=null&&p(t,["model"],r);const s=d(n,["name"]);return s!=null&&p(t,["endpoint"],s),t}function SB(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=d(n,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),p(t,["examples","examples"],s)}return t}function IB(n,e,t){const r={};let s=d(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=d(n,["gcsUri"]);e!==void 0&&l!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=d(n,["gcsUri"]);e!==void 0&&l!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=d(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=d(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function gC(n,e){const t={},r=d(n,["sdkHttpResponse"]);r!=null&&p(t,["sdkHttpResponse"],r);const s=d(n,["name"]);s!=null&&p(t,["name"],s);const o=d(n,["state"]);o!=null&&p(t,["state"],NI(o));const l=d(n,["createTime"]);l!=null&&p(t,["createTime"],l);const c=d(n,["tuningTask","startTime"]);c!=null&&p(t,["startTime"],c);const f=d(n,["tuningTask","completeTime"]);f!=null&&p(t,["endTime"],f);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const y=d(n,["description"]);y!=null&&p(t,["description"],y);const v=d(n,["baseModel"]);v!=null&&p(t,["baseModel"],v);const E=d(n,["_self"]);return E!=null&&p(t,["tunedModel"],wB(E)),t}function Jp(n,e){const t={},r=d(n,["sdkHttpResponse"]);r!=null&&p(t,["sdkHttpResponse"],r);const s=d(n,["name"]);s!=null&&p(t,["name"],s);const o=d(n,["state"]);o!=null&&p(t,["state"],NI(o));const l=d(n,["createTime"]);l!=null&&p(t,["createTime"],l);const c=d(n,["startTime"]);c!=null&&p(t,["startTime"],c);const f=d(n,["endTime"]);f!=null&&p(t,["endTime"],f);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const y=d(n,["error"]);y!=null&&p(t,["error"],y);const v=d(n,["description"]);v!=null&&p(t,["description"],v);const E=d(n,["baseModel"]);E!=null&&p(t,["baseModel"],E);const C=d(n,["tunedModel"]);C!=null&&p(t,["tunedModel"],C);const M=d(n,["preTunedModel"]);M!=null&&p(t,["preTunedModel"],M);const U=d(n,["supervisedTuningSpec"]);U!=null&&p(t,["supervisedTuningSpec"],U);const P=d(n,["preferenceOptimizationSpec"]);P!=null&&p(t,["preferenceOptimizationSpec"],P);const $=d(n,["tuningDataStats"]);$!=null&&p(t,["tuningDataStats"],$);const Q=d(n,["encryptionSpec"]);Q!=null&&p(t,["encryptionSpec"],Q);const Y=d(n,["partnerModelTuningSpec"]);Y!=null&&p(t,["partnerModelTuningSpec"],Y);const ee=d(n,["customBaseModel"]);ee!=null&&p(t,["customBaseModel"],ee);const X=d(n,["experiment"]);X!=null&&p(t,["experiment"],X);const ie=d(n,["labels"]);ie!=null&&p(t,["labels"],ie);const N=d(n,["outputUri"]);N!=null&&p(t,["outputUri"],N);const x=d(n,["pipelineJob"]);x!=null&&p(t,["pipelineJob"],x);const k=d(n,["serviceAccount"]);k!=null&&p(t,["serviceAccount"],k);const L=d(n,["tunedModelDisplayName"]);L!=null&&p(t,["tunedModelDisplayName"],L);const F=d(n,["veoTuningSpec"]);return F!=null&&p(t,["veoTuningSpec"],F),t}function CB(n,e){const t={},r=d(n,["sdkHttpResponse"]);r!=null&&p(t,["sdkHttpResponse"],r);const s=d(n,["name"]);s!=null&&p(t,["name"],s);const o=d(n,["metadata"]);o!=null&&p(t,["metadata"],o);const l=d(n,["done"]);l!=null&&p(t,["done"],l);const c=d(n,["error"]);return c!=null&&p(t,["error"],c),t}function lw(n,e){const t={},r=d(n,["gcsUri"]);r!=null&&p(t,["validationDatasetUri"],r);const s=d(n,["vertexDatasetResource"]);return s!=null&&p(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AB extends rs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new so(ns.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},t),{preTunedModel:s});return o.baseModel=void 0,await this.tuneInternal(o)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),o=await this.tuneMldevInternal(s);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:Up.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=mB(e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>Jp(y))}else{const h=pB(e);return c=ce("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>gC(y))}}async listInternal(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=vB(e);return c=ce("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=TB(y),E=new MT;return Object.assign(E,v),E})}else{const h=_B(e);return c=ce("tunedModels",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=EB(y),E=new MT;return Object.assign(E,v),E})}}async cancel(e){var t,r,s,o;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=aB(e);return c=ce("{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=uB(y),E=new LT;return Object.assign(E,v),E})}else{const h=oB(e);return c=ce("{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(v=>{const E=v;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const v=lB(y),E=new LT;return Object.assign(E,v),E})}}async tuneInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI()){const c=hB(e,e);return o=ce("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>Jp(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let s,o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fB(e);return o=ce("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>CB(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RB{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const PB=1024*1024*8,kB=3,xB=1e3,bB=2,Rd="x-goog-upload-status";async function NB(n,e,t){var r;const s=await yC(n,e,t),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Rd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function DB(n,e,t){var r;const s=await yC(n,e,t),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Rd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=AI(o),c=new tg;return Object.assign(c,l),c}async function yC(n,e,t){var r,s;let o=0,l=0,c=new Fp(new Response),f="upload";for(o=n.size;l<o;){const h=Math.min(PB,o-l),y=n.slice(l,l+h);l+h>=o&&(f+=", finalize");let v=0,E=xB;for(;v<kB&&(c=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[Rd]));)v++,await LB(E),E=E*bB;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[Rd])!=="active")break;if(o<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function MB(n){return{size:n.size,type:n.type}}function LB(n){return new Promise(e=>setTimeout(e,n))}class UB{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NB(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DB(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FB{create(e,t,r){return new VB(e,t,r)}}class VB{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uw="x-goog-api-key";class OB{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(uw)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(uw,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GB="gl-node/";class BB{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Nt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=LU(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new OB(this.apiKey);this.apiClient=new MG({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:GB+"web",uploader:new UB,downloader:new RB}),this.models=new ZG(this.apiClient),this.live=new KG(this.apiClient,s,new FB),this.batches=new cV(this.apiClient),this.chats=new zV(this.models,this.apiClient),this.caches=new qV(this.apiClient),this.files=new tO(this.apiClient),this.operations=new e4(this.apiClient),this.authTokens=new g4(this.apiClient),this.tunings=new AB(this.apiClient),this.fileSearchStores=new I4(this.apiClient)}}const Jo={},cw=(Jo==null?void 0:Jo.VITE_GEMINI_API_KEY)||(Jo==null?void 0:Jo.VITE_GENAI_API_KEY)||void 0,dw=cw?new BB({apiKey:cw}):null,qB={analyzeIssue:async(n,e)=>{if(!dw)return"AI analysis disabled (no Gemini API key configured). Add VITE_GEMINI_API_KEY to .env.local to enable.";try{return(await dw.models.generateContent({model:"gemini-3-flash-preview",contents:`You are a QA Lead. Analyze this bug report and provide 3 concise bullet points: 1) Potential root cause, 2) Key verification step, 3) Severity assessment.

Bug: ${n}
Details: ${e}`,config:{temperature:.2}})).text||"No analysis available."}catch(t){return console.error("AI Analysis failed",t),"Unable to analyze issue at this time. Please check your network or API key."}}},HB=({repos:n})=>{const[e,t]=ne.useState([]),[r,s]=ne.useState(!0);return ne.useEffect(()=>{const o=async()=>{s(!0);const l=[];for(const c of n)if(c.githubToken)try{kt.initialize(c.githubToken);const f=await kt.getOpenIssueCount(c.owner,c.name);l.push({repo:c,issueCount:f})}catch(f){console.error(`Failed to fetch issue count for ${c.owner}/${c.name}`,f)}l.sort((c,f)=>f.issueCount-c.issueCount),t(l),s(!1)};n.length>0?o():s(!1)},[n]),r?R.jsxs("div",{className:"p-4",children:[R.jsx("h2",{className:"text-lg font-bold mb-2",children:"Todos"}),R.jsx("div",{className:"text-center py-4",children:R.jsx("div",{className:"inline-block size-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})})]}):e.length===0?null:R.jsxs("div",{className:"p-4",children:[R.jsx("h2",{className:"text-lg font-bold mb-2",children:"Todos"}),R.jsx("div",{className:"space-y-2",children:e.map(({repo:o,issueCount:l})=>R.jsxs("div",{className:"p-3 bg-surface-dark rounded-lg flex justify-between items-center",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"font-bold",children:o.displayName||o.name}),R.jsxs("p",{className:"text-xs text-gray-400",children:[l," open issues"]})]}),R.jsx("a",{href:`#/dashboard?repo=${o.id}`,className:"text-primary",children:R.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})})]},o.id))})]})},$B=()=>{const[n,e]=ne.useState(!1),[t,r]=ne.useState("");ne.useEffect(()=>{const o=localStorage.getItem("global-notes");o&&r(o)},[]);const s=o=>{r(o.target.value),localStorage.setItem("global-notes",o.target.value)};return n?R.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center",children:R.jsxs("div",{className:"bg-surface-dark rounded-lg shadow-2xl w-full max-w-md mx-4",children:[R.jsxs("div",{className:"p-4 flex justify-between items-center border-b border-white/10",children:[R.jsx("h2",{className:"text-lg font-bold",children:"Notes"}),R.jsx("button",{onClick:()=>e(!1),"aria-label":"Close Notes",children:R.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),R.jsx("textarea",{value:t,onChange:s,className:"w-full h-64 bg-input-dark p-4 text-white resize-none",placeholder:"Jot down your notes here..."})]})}):R.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-24 right-4 z-40 flex h-14 w-14 items-center justify-center rounded-full bg-surface-dark text-white shadow-lg active:scale-90 transition-transform hover:scale-105","aria-label":"Open Notes",children:R.jsx("span",{className:"material-symbols-outlined text-3xl",children:"description"})})},_C=()=>R.jsx("nav",{className:"fixed bottom-0 left-0 w-full bg-background-light/80 dark:bg-background-dark/90 backdrop-blur-lg border-t border-gray-200 dark:border-white/10 z-50 pb-safe",children:R.jsxs("div",{className:"flex items-center justify-around h-16 max-w-md mx-auto",children:[R.jsxs(fa,{to:"/",className:"flex flex-col items-center justify-center w-16 h-full gap-1 text-primary group",children:[R.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"grid_view"}),R.jsx("span",{className:"text-[10px] font-bold",children:"Projects"})]}),R.jsxs(fa,{to:"/config",className:"flex flex-col items-center justify-center w-16 h-full gap-1 text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[R.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"settings"}),R.jsx("span",{className:"text-[10px] font-medium",children:"Config"})]})]})}),zB=()=>{const[n,e]=ne.useState(!0),[t,r]=ne.useState(""),[s,o]=ne.useState(""),[l,c]=ne.useState(""),[f,h]=ne.useState(!1),y=async E=>{E.preventDefault(),c(""),h(!0);try{n?await Cb(jl,t,s):await Ib(jl,t,s)}catch(C){c(C.message.replace("Firebase: ",""))}finally{h(!1)}},v=async()=>{try{await Td.signInWithGoogle()}catch(E){c(E.message)}};return R.jsx("div",{className:"min-h-screen bg-background-dark flex items-center justify-center p-6",children:R.jsxs("div",{className:"w-full max-w-sm space-y-8 animate-fade-in",children:[R.jsxs("div",{className:"text-center space-y-2",children:[R.jsx("div",{className:"inline-flex items-center justify-center size-16 rounded-2xl bg-primary/20 text-primary mb-4",children:R.jsx("span",{className:"material-symbols-outlined text-4xl",children:"bug_report"})}),R.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"QA Verify & Track"}),R.jsx("p",{className:"text-gray-400",children:"Sync your testing workflow across all devices."})]}),R.jsxs("div",{className:"bg-surface-dark p-6 rounded-2xl border border-white/5 space-y-6",children:[l&&R.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 text-red-400 text-sm rounded-lg",children:l}),R.jsxs("form",{onSubmit:y,className:"space-y-4",children:[R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{htmlFor:"email",className:"text-xs uppercase font-bold text-gray-500",children:"Email"}),R.jsx("input",{id:"email",value:t,onChange:E=>r(E.target.value),type:"email",required:!0,className:"w-full bg-input-dark border-transparent rounded-lg p-3 text-white focus:ring-primary focus:border-primary",placeholder:"qa@acme.inc"})]}),R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{htmlFor:"password",className:"text-xs uppercase font-bold text-gray-500",children:"Password"}),R.jsx("input",{id:"password",value:s,onChange:E=>o(E.target.value),type:"password",required:!0,className:"w-full bg-input-dark border-transparent rounded-lg p-3 text-white focus:ring-primary focus:border-primary",placeholder:""})]}),R.jsx("button",{disabled:f,className:"w-full bg-primary text-black font-bold h-12 rounded-lg hover:bg-primary-hover transition-colors disabled:opacity-50",children:f?"Processing...":n?"Sign In":"Create Account"})]}),R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute inset-0 flex items-center",children:R.jsx("div",{className:"w-full border-t border-white/10"})}),R.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:R.jsx("span",{className:"bg-surface-dark px-2 text-gray-500",children:"Or continue with"})})]}),R.jsxs("button",{onClick:v,className:"w-full bg-white text-black font-bold h-12 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-center gap-2",children:[R.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"Google"}),"Google"]}),R.jsx("div",{className:"text-center",children:R.jsx("button",{onClick:()=>e(!n),className:"text-primary text-sm hover:underline",children:n?"Need an account? Sign up":"Already have an account? Sign in"})})]})]})})},WB=({repos:n,user:e})=>R.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col overflow-hidden pb-20",children:[R.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md p-4 pb-2 border-b border-gray-200 dark:border-white/5",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>kb(jl),children:[R.jsx("img",{src:e.photoURL||`https://ui-avatars.com/api/?name=${e.email}`,className:"size-10 rounded-full border-2 border-transparent hover:border-primary transition-colors bg-surface-dark",alt:"Profile"}),R.jsx("div",{className:"absolute bottom-0 right-0 size-3 bg-primary rounded-full border-2 border-background-light dark:border-background-dark"})]}),R.jsxs("div",{children:[R.jsx("h2",{className:"text-xl font-bold leading-tight tracking-tight",children:"My Projects"}),R.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium truncate max-w-[150px]",children:e.email})]})]}),R.jsx(fa,{to:"/config","aria-label":"Add new repository",className:"flex items-center justify-center size-10 rounded-full bg-white/5 hover:bg-white/10 text-primary border border-primary/20 transition-all",children:R.jsx("span",{className:"material-symbols-outlined font-bold",children:"add_link"})})]}),R.jsxs("main",{className:"flex-1 flex flex-col gap-6 p-4",children:[R.jsx(HB,{repos:n}),n.length===0?R.jsxs("div",{className:"text-center py-20 opacity-60",children:[R.jsx("span",{className:"material-symbols-outlined text-6xl mb-4",children:"move_to_inbox"}),R.jsx("p",{className:"text-lg font-bold",children:"No Projects Found"}),R.jsx("p",{className:"text-sm",children:"Go to Config to add your first repo."})]}):n.map(t=>{var r,s;return R.jsx("div",{className:"group flex flex-col gap-0 rounded-xl bg-white dark:bg-[#1a2e1c] shadow-md hover:shadow-lg transition-shadow overflow-hidden border border-gray-100 dark:border-white/5",children:R.jsxs("div",{className:"p-4 flex items-start justify-between",children:[R.jsxs("div",{className:"flex flex-col gap-1",children:[R.jsxs("div",{className:"flex items-center gap-2 text-gray-400 mb-1",children:[R.jsx("span",{className:"material-symbols-outlined text-sm",children:"folder_open"}),R.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:((r=t.apps[0])==null?void 0:r.platform)||"Generic"})]}),R.jsxs("h3",{className:"text-lg font-bold leading-tight group-hover:text-primary transition-colors",children:[t.displayName||t.name,R.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-2",children:["(",t.owner,"/",t.name,")"]})]}),R.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[R.jsx("span",{className:"relative flex h-2 w-2",children:R.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-primary"})}),R.jsxs("p",{className:"text-primary text-xs font-bold",children:["Build #",(s=t.apps[0])==null?void 0:s.buildNumber]})]})]}),R.jsx(fa,{to:`/dashboard?repo=${t.id}`,"aria-label":"View repository dashboard",className:"flex items-center justify-center size-10 rounded-full bg-gray-100 dark:bg-[#253827] text-primary",children:R.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})})]})},t.id)})]}),R.jsx(_C,{})]}),KB=({repos:n,setRepos:e,user:t})=>{var ee;const r=Xi(),[s,o]=ne.useState("list"),[l,c]=ne.useState(null),[f,h]=ne.useState(!1),[y,v]=ne.useState(""),[E,C]=ne.useState({name:"",owner:"",displayName:"",githubToken:"",apps:[]}),M=X=>{X?(c(X.id),C(X)):(c(null),C({id:Date.now().toString(),name:"",owner:"",displayName:"",githubToken:"",apps:[{id:Date.now().toString(),name:"New App",platform:"android",buildNumber:"1"}],projects:[],templates:[]})),o("edit")},U=()=>{const X={id:Date.now().toString(),name:"",platform:"android",buildNumber:"1"};C(ie=>({...ie,apps:[...ie.apps||[],X]}))},P=(X,ie,N)=>{const x=[...E.apps||[]];x[X]={...x[X],[ie]:N},C(k=>({...k,apps:x}))},$=X=>{const ie=[...E.apps||[]];ie.splice(X,1),C(N=>({...N,apps:ie}))},Q=async()=>{if(!E.name||!E.owner){v("Owner and repo name are required.");return}v(""),h(!0);try{let X;l?X=n.map(ie=>ie.id===l?{...ie,...E}:ie):X=[...n,{...E,isConnected:!0}],e(X),await Td.saveUserRepos(t.uid,X),o("list")}catch(X){console.error("Failed to save repository",X),v((X==null?void 0:X.message)||"Failed to save. Check your network or Firebase rules.")}finally{h(!1)}},Y=async()=>{if(l){v(""),h(!0);try{const X=n.filter(ie=>ie.id!==l);e(X),await Td.saveUserRepos(t.uid,X),o("list")}catch(X){console.error("Failed to delete repository",X),v((X==null?void 0:X.message)||"Failed to delete. Check your network or Firebase rules.")}finally{h(!1)}}};return s==="list"?R.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-safe",children:[R.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between p-4 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-white/5",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("button",{onClick:()=>r(-1),"aria-label":"Go back",className:"p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10",children:R.jsx("span",{className:"material-symbols-outlined text-slate-900 dark:text-white",children:"arrow_back"})}),R.jsx("h1",{className:"text-lg font-bold",children:"Configuration"})]}),R.jsxs("button",{onClick:()=>M(),className:"flex items-center gap-1 bg-primary text-black px-3 py-1.5 rounded-lg text-sm font-bold",children:[R.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})," New"]})]}),R.jsxs("main",{className:"p-4 space-y-4",children:[R.jsx("h2",{className:"text-xs uppercase text-gray-500 font-bold tracking-wider",children:"Repositories"}),n.map(X=>R.jsxs("div",{onClick:()=>M(X),className:"p-4 bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-white/5 flex justify-between items-center cursor-pointer active:scale-[0.99] transition-transform",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:X.displayName||X.name}),R.jsxs("p",{className:"text-xs text-gray-500",children:[X.owner,"/",X.name]})]}),R.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"edit"})]},X.id))]})]}):R.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-safe",children:[R.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between p-4 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-white/5",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("button",{onClick:()=>o("list"),"aria-label":"Close configuration",className:"p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10",children:R.jsx("span",{className:"material-symbols-outlined text-slate-900 dark:text-white",children:"close"})}),R.jsx("h1",{className:"text-lg font-bold",children:l?"Edit Repository":"Add Repository"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[l&&R.jsxs("button",{onClick:Y,disabled:f,className:"text-red-500 font-bold text-sm disabled:opacity-50 disabled:pointer-events-none flex items-center gap-1 border border-red-500/40 rounded-md px-2 py-1",children:[R.jsx("span",{className:"material-symbols-outlined text-base",children:"delete"}),"Delete"]}),R.jsxs("button",{onClick:Q,disabled:f,className:"text-primary font-bold text-sm disabled:opacity-50 disabled:pointer-events-none flex items-center gap-2",children:[f&&R.jsx("span",{className:"size-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),f?"Saving...":"Save"]})]})]}),y&&R.jsx("div",{className:"mx-4 mt-3 p-3 bg-red-500/10 border border-red-500/30 text-red-400 text-sm rounded-lg",children:y}),R.jsxs("main",{className:"p-4 space-y-6",children:[R.jsxs("section",{className:"space-y-4",children:[R.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-primary",children:"GitHub Details"}),R.jsxs("div",{className:"space-y-3",children:[R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{className:"text-xs text-gray-500",children:"Display Name"}),R.jsx("input",{value:E.displayName,onChange:X=>C({...E,displayName:X.target.value}),type:"text",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{className:"text-xs text-gray-500",children:"Owner"}),R.jsx("input",{value:E.owner,onChange:X=>C({...E,owner:X.target.value}),type:"text",placeholder:"org",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"})]}),R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{className:"text-xs text-gray-500",children:"Repo Name"}),R.jsx("input",{value:E.name,onChange:X=>C({...E,name:X.target.value}),type:"text",placeholder:"repo",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"})]})]}),R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{className:"text-xs text-gray-500",children:"GitHub Personal Access Token (PAT)"}),R.jsx("input",{value:E.githubToken||"",onChange:X=>C({...E,githubToken:X.target.value}),type:"password",placeholder:"ghp_...",className:"w-full bg-white dark:bg-input-dark border-gray-200 dark:border-white/10 rounded-lg px-4 py-3 text-sm focus:ring-primary focus:border-primary text-slate-900 dark:text-white"}),R.jsx("p",{className:"text-[10px] text-gray-500",children:"Required for reading/writing to this private/public repo."})]})]})]}),R.jsx("div",{className:"h-px bg-gray-200 dark:bg-white/5"}),R.jsxs("section",{className:"space-y-4",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("h2",{className:"text-sm font-bold uppercase tracking-wider text-primary",children:"Apps & Builds"}),R.jsxs("button",{onClick:U,className:"text-xs flex items-center gap-1 bg-black/5 dark:bg-white/5 px-2 py-1 rounded text-slate-900 dark:text-white hover:bg-black/10 dark:hover:bg-white/10",children:[R.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})," Add App"]})]}),(ee=E.apps)==null?void 0:ee.map((X,ie)=>R.jsxs("div",{className:"p-4 bg-white dark:bg-surface-dark rounded-xl border border-gray-200 dark:border-white/5 space-y-3 relative group",children:[R.jsx("button",{onClick:()=>$(ie),"aria-label":"Delete app",className:"absolute top-2 right-2 p-1 rounded hover:bg-red-500/10 text-gray-400 hover:text-red-500",children:R.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})}),R.jsxs("div",{className:"grid grid-cols-2 gap-3 pr-6",children:[R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{className:"text-[10px] uppercase text-gray-500",children:"App Name"}),R.jsx("input",{value:X.name,onChange:N=>P(ie,"name",N.target.value),type:"text",className:"w-full bg-background-light dark:bg-background-dark border-transparent rounded px-2 py-1.5 text-sm text-slate-900 dark:text-white"})]}),R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{className:"text-[10px] uppercase text-gray-500",children:"Platform"}),R.jsxs("select",{value:X.platform,onChange:N=>P(ie,"platform",N.target.value),className:"w-full bg-background-light dark:bg-background-dark border-transparent rounded px-2 py-1.5 text-sm text-slate-900 dark:text-white",children:[R.jsx("option",{value:"android",children:"Android"}),R.jsx("option",{value:"ios",children:"iOS"}),R.jsx("option",{value:"web",children:"Web"})]})]})]}),R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{className:"text-[10px] uppercase text-gray-500",children:"Test URL (Play Store/TestFlight)"}),R.jsx("input",{value:X.playStoreUrl||"",onChange:N=>P(ie,"playStoreUrl",N.target.value),type:"text",placeholder:"https://...",className:"w-full bg-background-light dark:bg-background-dark border-transparent rounded px-2 py-1.5 text-sm text-slate-900 dark:text-white"})]}),R.jsxs("div",{className:"space-y-1",children:[R.jsx("label",{className:"text-[10px] uppercase text-gray-500",children:"Current Build #"}),R.jsx("input",{value:X.buildNumber,onChange:N=>P(ie,"buildNumber",N.target.value),type:"text",className:"w-24 bg-background-light dark:bg-background-dark border-transparent rounded px-2 py-1.5 text-sm font-mono font-bold text-slate-900 dark:text-white"})]})]},ie))]})]})]})},JB=({repos:n})=>{var Z;const e=Xi(),[t]=Cw(),r=t.get("repo"),s=n.find(J=>J.id===r)||n[0],[o,l]=ne.useState("issues"),[c,f]=ne.useState(((Z=s==null?void 0:s.apps[0])==null?void 0:Z.buildNumber)||"0");ne.useEffect(()=>{s!=null&&s.githubToken&&kt.initialize(s.githubToken)},[s==null?void 0:s.githubToken]);const[h,y]=ne.useState([]),[v,E]=ne.useState([]),[C,M]=ne.useState(!1),[U,P]=ne.useState(null),[$,Q]=ne.useState(null),[Y,ee]=ne.useState(new Set),[X,ie]=ne.useState(new Set),[N,x]=ne.useState({}),[k,L]=ne.useState(""),[F,B]=ne.useState("");ne.useEffect(()=>{s&&s.githubToken&&b(!1)},[s]);const b=async(J=!1)=>{var he,me;if(M(!0),L(""),J&&((he=s==null?void 0:s.apps[0])!=null&&he.playStoreUrl)){const be=(me=s.apps[0])==null?void 0:me.buildNumber;be&&f(be.toString())}try{const[be,Ne]=await Promise.all([kt.getIssues(s.owner,s.name),kt.getPullRequests(s.owner,s.name)]),Ge=/\b(open|closed|blocked)\s*v?\s*(\d+)\b/gi,Le=await Promise.all(be.map(async rt=>{try{const ii=rt.commentsCount>0?await kt.getIssueComments(s.owner,s.name,rt.number,rt.updatedAt):[],is=parseInt((c||"0").trim(),10);let os=!1,Tn=-1;for(const as of ii){const io=as.body||"";let Pr;for(Ge.lastIndex=0;(Pr=Ge.exec(io))!==null;){os=!0;const er=parseInt(Pr[2],10);isNaN(er)||(Tn=Math.max(Tn,er))}}return os&&Tn>=is?null:rt}catch(ii){return console.error("Failed to load comments for issue",rt.number,ii),rt}}));y(Le.filter(Boolean)),E(Ne)}catch(be){console.error("Sync failed",be),L("Failed to sync GitHub data. Check your token and network.")}finally{M(!1)}},De=async(J,he)=>{y(h.filter(me=>me.id!==J)),await kt.addComment(s.owner,s.name,he,`verified fixed ${c}`),await kt.updateIssueStatus(s.owner,s.name,he,"closed")},it=async(J,he)=>{y(h.filter(me=>me.id!==J)),await kt.addComment(s.owner,s.name,he,`open ${c}`)},Qe=async J=>{if(!X.has(J.id)){ie(he=>new Set(he).add(J.id));try{const he=await qB.analyzeIssue(J.title,J.description);x(me=>({...me,[J.id]:he}))}finally{ie(he=>{const me=new Set(he);return me.delete(J.id),me})}}},Ke=async J=>{P(J.id),B("");try{J.isDraft&&await kt.updatePR(s.owner,s.name,J.number,{isDraft:!1}),await kt.approvePR(s.owner,s.name,J.number),await kt.mergePR(s.owner,s.name,J.number),E(he=>he.filter(me=>me.id!==J.id))}catch(he){console.error("Merge sequence failed",he),B("Merge failed. Confirm repo access and PR state.")}finally{P(null)}},ue=async J=>{P(J.id),B("");try{if((await kt.getPullRequest(s.owner,s.name,J.number)).mergeable===!0){E(be=>be.map(Ne=>Ne.id===J.id?{...Ne,hasConflicts:!1}:Ne)),P(null);return}await kt.updateBranch(s.owner,s.name,J.number)?E(be=>be.filter(Ne=>Ne.id!==J.id)):(ee(be=>new Set(be).add(J.id)),B("Auto-resolve failed. Open the conflict view in GitHub."))}catch(he){console.error("Resolve failed",he),ee(me=>new Set(me).add(J.id)),B("Resolve failed. Check permissions or try manually in GitHub.")}finally{P(null)}},ve=async J=>{E(he=>he.filter(me=>me.id!==J.id)),Q({id:J.id,pr:J}),await kt.denyPR(s.owner,s.name,J.number),setTimeout(()=>Q(null),5e3)},V=async()=>{$&&(E(J=>[...J,$.pr]),Q(null),await kt.updateIssueStatus(s.owner,s.name,$.pr.number,"open"))};return s?s.githubToken?R.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col overflow-x-hidden pb-24",children:[R.jsxs("header",{className:"sticky top-0 z-20 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-md border-b border-gray-200 dark:border-white/5 px-4 py-3 flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("button",{onClick:()=>e("/"),"aria-label":"Go back to home",className:"p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors",children:R.jsx("span",{className:"material-symbols-outlined text-slate-900 dark:text-white",children:"arrow_back"})}),R.jsxs("div",{children:[R.jsx("h1",{className:"text-lg font-bold leading-none tracking-tight",children:"QA Dashboard"}),R.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:(s==null?void 0:s.displayName)||(s==null?void 0:s.name)})]})]}),R.jsxs("div",{className:"flex items-center bg-gray-200 dark:bg-surface-dark-lighter rounded-lg p-0.5 border border-transparent dark:border-white/10",children:[R.jsx("button",{onClick:()=>l("issues"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${o==="issues"?"bg-primary text-black shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white"}`,children:"Issues"}),R.jsx("button",{onClick:()=>l("prs"),className:`px-3 py-1.5 rounded-md text-xs font-bold transition-all ${o==="prs"?"bg-primary text-black shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-slate-900 dark:hover:text-white"}`,children:"PRs"})]})]}),R.jsx("section",{className:"px-4 py-5 space-y-3",children:R.jsxs("div",{className:"flex items-end gap-3",children:[R.jsxs("div",{className:"flex-1 space-y-1.5",children:[R.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-[#9db99f] uppercase tracking-wider",children:"Target Build"}),R.jsxs("div",{className:"relative flex items-center gap-2",children:[R.jsx("span",{className:"absolute left-3 material-symbols-outlined text-gray-400 text-[20px]",children:"tag"}),R.jsx("input",{className:"w-full bg-white dark:bg-[#1c2e1f] border-gray-200 dark:border-white/5 rounded-lg py-3 pl-10 pr-3 font-mono font-bold text-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-slate-900 dark:text-white",type:"text",value:c,onChange:J=>f(J.target.value)}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("button",{onClick:()=>b(!1),"aria-label":"Sync with GitHub",className:"bg-white dark:bg-[#253827] border border-gray-200 dark:border-white/5 rounded-lg px-3 py-3 hover:text-primary transition-colors flex items-center gap-1",children:[R.jsx("span",{className:"material-symbols-outlined",children:"sync"}),R.jsx("span",{className:"text-xs font-bold hidden sm:inline",children:"Sync"})]}),R.jsxs("button",{onClick:()=>b(!0),"aria-label":"Sync with Store",className:"bg-white dark:bg-[#253827] border border-gray-200 dark:border-white/5 rounded-lg px-3 py-3 hover:text-primary transition-colors flex items-center gap-1",children:[R.jsx("span",{className:"material-symbols-outlined",children:"system_update_alt"}),R.jsx("span",{className:"text-xs font-bold hidden sm:inline",children:"Store"})]})]})]})]}),R.jsxs("div",{className:"flex-1 space-y-1.5",children:[R.jsx("label",{className:"text-xs font-semibold text-gray-500 dark:text-[#9db99f] uppercase tracking-wider",children:"App Variant"}),R.jsx("select",{className:"w-full bg-white dark:bg-[#1c2e1f] border-gray-200 dark:border-white/5 rounded-lg h-[54px] px-3 font-medium text-sm text-slate-900 dark:text-white focus:ring-primary focus:border-primary",children:s==null?void 0:s.apps.map(J=>R.jsxs("option",{value:J.id,children:[J.name," (",J.platform,")"]},J.id))})]})]})}),R.jsx("div",{className:"h-px w-full bg-gray-200 dark:bg-white/5 mb-4"}),R.jsxs("main",{className:"flex-1 px-4 space-y-4",children:[$&&R.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-3 rounded-lg animate-slide-in-right shadow-xl",children:[R.jsxs("span",{className:"text-sm",children:["PR #",$.pr.number," closed."]}),R.jsx("button",{onClick:V,className:"text-primary font-bold text-sm uppercase tracking-wider",children:"Undo"})]}),C&&R.jsx("div",{className:"text-center py-10",children:R.jsx("div",{className:"inline-block size-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}),!C&&o==="issues"&&R.jsxs(R.Fragment,{children:[k&&R.jsx("div",{className:"mb-2 rounded-lg border border-red-500/30 bg-red-500/10 text-red-200 text-xs px-3 py-2",children:k}),R.jsxs("div",{className:"flex justify-between items-center pb-1",children:[R.jsx("h2",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Pending Verification"}),R.jsxs("span",{className:"text-[11px] text-gray-400",children:[h.length," remaining"]})]}),h.length===0?R.jsxs("div",{className:"text-center py-10 opacity-50",children:[R.jsx("span",{className:"material-symbols-outlined text-6xl text-gray-600",children:"check_circle"}),R.jsxs("p",{className:"mt-4 text-gray-400",children:["All cleared for build ",c,"!"]})]}):h.map(J=>R.jsxs("article",{className:"relative flex flex-col gap-2 rounded-lg bg-white dark:bg-surface-dark-lighter/80 p-3 shadow-sm border border-gray-100 dark:border-white/10 animate-fade-in",children:[R.jsx("div",{className:"flex items-start justify-between gap-2.5",children:R.jsxs("div",{className:"flex flex-col gap-1",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("span",{className:`font-bold text-xs tracking-tight flex items-center gap-1 uppercase ${J.priority==="critical"?"text-red-500":J.priority==="high"?"text-orange-500":"text-blue-400"}`,children:[R.jsx("span",{className:"material-symbols-outlined text-[14px] fill-1",children:J.priority==="critical"?"error":"flag"}),J.priority]}),R.jsxs("span",{className:"text-gray-500 dark:text-gray-500 text-[11px] font-medium",children:["#",J.number]})]}),R.jsx("a",{href:`https://github.com/${s.owner}/${s.name}/issues/${J.number}`,target:"_blank",rel:"noopener noreferrer",className:"text-base font-semibold text-slate-900 dark:text-white leading-snug hover:text-primary",children:J.title})]})}),R.jsx("div",{className:"bg-gray-50 dark:bg-black/30 rounded-lg p-2",children:R.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-200 line-clamp-3 font-mono leading-snug",children:J.description})}),N[J.id]&&R.jsxs("div",{className:"bg-primary/10 border border-primary/25 rounded-lg p-2.5 animate-fade-in",children:[R.jsxs("div",{className:"flex items-center gap-1 mb-1 text-primary",children:[R.jsx("span",{className:"material-symbols-outlined text-[15px]",children:"smart_toy"}),R.jsx("span",{className:"text-[11px] font-bold uppercase",children:"Gemini Analysis"})]}),R.jsx("p",{className:"text-[11px] text-slate-800 dark:text-gray-100 whitespace-pre-wrap leading-relaxed",children:N[J.id]})]}),R.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-1",children:[R.jsxs("button",{onClick:()=>De(J.id,J.number),className:"col-span-1 flex flex-col items-center justify-center gap-1 h-11 rounded-lg bg-primary text-black font-semibold text-[11px] shadow-[0_2px_8px_rgba(19,236,37,0.25)] active:scale-95 transition-transform",children:[R.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"check_circle"}),"Fixed"]}),R.jsxs("button",{onClick:()=>it(J.id,J.number),className:"col-span-1 flex flex-col items-center justify-center gap-1 h-11 rounded-lg bg-orange-500 text-white font-semibold text-[11px] shadow-[0_2px_8px_rgba(249,115,22,0.25)] active:scale-95 transition-transform",children:[R.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"warning"}),"Open"]}),R.jsxs(fa,{to:`/block/${J.id}`,className:"col-span-1 flex flex-col items-center justify-center gap-1 h-11 rounded-lg bg-red-600 text-white font-semibold text-[11px] shadow-[0_2px_8px_rgba(220,38,38,0.25)] active:scale-95 transition-transform",children:[R.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"block"}),"Blocked"]}),R.jsxs("button",{onClick:()=>Qe(J),disabled:X.has(J.id),className:"col-span-1 flex flex-col items-center justify-center gap-1 h-11 rounded-lg bg-blue-600/10 dark:bg-blue-500/10 text-blue-600 dark:text-blue-300 border border-blue-600/20 dark:border-blue-500/25 font-semibold text-[11px] active:scale-95 transition-transform disabled:opacity-50",children:[X.has(J.id)?R.jsx("span",{className:"size-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):R.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"analytics"}),"Analyze"]})]})]},J.id))]}),!C&&o==="prs"&&R.jsxs("div",{className:"space-y-4",children:[F&&R.jsx("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 text-red-200 text-xs px-3 py-2",children:F}),v.map(J=>{const he=U===J.id,me=Y.has(J.id);return R.jsxs("div",{className:"group relative bg-white dark:bg-[#1A1616] rounded-xl p-4 border border-gray-200 dark:border-white/10 shadow-sm transition-all animate-fade-in",children:[R.jsx("div",{className:"flex justify-between items-start mb-2",children:R.jsxs("div",{className:"pr-2",children:[R.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[J.isDraft&&R.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 uppercase tracking-wide",children:"Draft"}),J.hasConflicts&&R.jsxs("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-red-500/10 text-red-500 uppercase tracking-wide flex items-center gap-1",children:[R.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"warning"}),"Conflict"]})]}),R.jsx("h3",{className:"text-slate-900 dark:text-white font-bold text-sm leading-tight",children:J.title}),R.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["#",J.number,"  ",J.author.name]})]})}),R.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4 font-mono bg-gray-50 dark:bg-white/5 p-2 rounded-lg border border-gray-200 dark:border-white/5",children:[R.jsx("span",{className:"text-slate-700 dark:text-gray-300",children:J.branch}),R.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"arrow_forward"}),R.jsx("span",{className:"text-slate-700 dark:text-gray-300",children:J.targetBranch})]}),R.jsxs("div",{className:"flex gap-2",children:[J.hasConflicts?me?R.jsxs("a",{href:`https://github.com/${s.owner}/${s.name}/pull/${J.number}/conflicts`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-amber-600/20 text-amber-700 dark:text-amber-500 border border-amber-600/30 font-semibold text-xs py-2.5 rounded-lg flex items-center justify-center gap-1.5 active:scale-[0.98] hover:bg-amber-600/30",children:[R.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"open_in_new"}),"Open in GitHub"]}):R.jsx("button",{disabled:he,onClick:()=>ue(J),className:"flex-1 bg-amber-600/20 text-amber-700 dark:text-amber-500 border border-amber-600/30 font-semibold text-xs py-2.5 rounded-lg flex items-center justify-center gap-1.5 active:scale-[0.98] disabled:opacity-50",children:he?"Resolving...":R.jsxs(R.Fragment,{children:[R.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"build"}),"Resolve Conflicts"]})}):R.jsx("button",{disabled:he,onClick:()=>Ke(J),className:`flex-1 font-bold text-xs py-2.5 rounded-lg flex items-center justify-center gap-1.5 active:scale-[0.98] disabled:opacity-50 transition-colors ${J.isDraft?"bg-blue-600 text-white hover:bg-blue-700":"bg-primary text-black hover:bg-primary-hover"}`,children:he?"Processing...":R.jsxs(R.Fragment,{children:[R.jsx("span",{className:"material-symbols-outlined text-[18px]",children:J.isDraft?"rocket_launch":"merge"}),J.isDraft?"Ready & Merge":"Merge"]})}),R.jsx("button",{disabled:he,onClick:()=>ve(J),"aria-label":"Close pull request",className:"px-4 bg-red-500/10 text-red-600 dark:text-red-500 border border-red-500/20 rounded-lg flex items-center justify-center active:scale-[0.98] hover:bg-red-500/20",children:R.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]})]},J.id)})]})]}),R.jsx(fa,{to:`/quick-issue?repo=${s==null?void 0:s.id}`,"aria-label":"Create new issue",className:"fixed bottom-24 right-4 z-30 flex h-14 w-14 items-center justify-center rounded-full bg-primary text-black shadow-[0_4px_16px_rgba(19,236,37,0.4)] active:scale-90 transition-transform hover:scale-105",children:R.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})}),R.jsx(_C,{})]}):R.jsx("div",{className:"p-10 text-center",children:"Missing GitHub Token for this repo. Please configure it."}):R.jsx("div",{className:"p-10 text-center",children:"Please select a repository."})},YB=({repos:n})=>{const e=Xi(),[t]=Cw(),r=t.get("repo"),s=n.find(E=>E.id===r)||n[0],[o,l]=ne.useState(""),[c,f]=ne.useState(""),[h,y]=ne.useState(!1),v=async()=>{if(!(s!=null&&s.githubToken)){alert("No GitHub token configured for this repository.");return}y(!0);try{kt.initialize(s.githubToken),await kt.createIssue(s.id,{title:o,description:c,labels:[]},s.owner,s.name),l(""),f(""),alert("Issue created successfully!")}catch{alert("Failed to create issue.")}finally{y(!1)}};return R.jsxs("div",{className:"bg-transparent h-screen w-full relative",children:[R.jsx("div",{onClick:()=>e(-1),className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-10"}),R.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-20 flex flex-col h-[90vh] bg-surface-dark rounded-t-[32px] shadow-2xl border-t border-white/10 animate-slide-up",children:[R.jsx("div",{className:"w-full flex justify-center pt-4 pb-2",children:R.jsx("div",{className:"w-14 h-1.5 bg-gray-600/40 rounded-full"})}),R.jsxs("div",{className:"px-6 py-2 flex justify-between",children:[R.jsx("h2",{className:"text-white text-2xl font-bold",children:"New Issue"}),R.jsx("button",{onClick:()=>e(-1),"aria-label":"Close",className:"size-10 rounded-full bg-white/5 flex items-center justify-center text-white",children:R.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),R.jsxs("div",{className:"p-6 space-y-4",children:[R.jsx("input",{value:o,onChange:E=>l(E.target.value),className:"w-full bg-input-dark rounded-xl px-4 py-4 text-white text-lg",placeholder:"Title"}),R.jsx("textarea",{value:c,onChange:E=>f(E.target.value),className:"w-full bg-input-dark rounded-xl p-4 text-white min-h-[200px]",placeholder:"Description"}),R.jsx("button",{onClick:v,disabled:!o||h,className:"w-full bg-primary h-14 rounded-xl font-bold text-black",children:h?"Submitting...":"Submit"})]})]})]})},QB=()=>{const n=Xi();return R.jsx("div",{onClick:()=>n(-1),className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center",children:R.jsxs("div",{className:"bg-surface-dark p-6 rounded-xl border border-white/10 text-white",children:["Issue Blocked. ",R.jsx("br",{}),R.jsx("span",{className:"text-sm text-gray-400",children:"(Tap to dismiss)"})]})})},XB=()=>{const n=Xi();return R.jsxs("div",{className:"h-screen bg-background-dark text-white p-6",children:[R.jsx("button",{onClick:()=>n(-1),className:"mb-4 text-primary",children:"Back"}),R.jsx("h1",{children:"Conflicts"}),R.jsx("p",{children:"Manual resolution required."})]})},jB=()=>{const[n,e]=ne.useState(null),[t,r]=ne.useState(!0),[s,o]=ne.useState([]);return ne.useEffect(()=>{const l=Pb(jl,c=>{e(c),r(!1)});return()=>l()},[]),ne.useEffect(()=>{if(n){const l=Td.subscribeToRepos(n.uid,c=>{o(c)});return()=>l()}},[n]),t?R.jsx("div",{className:"min-h-screen bg-background-dark flex items-center justify-center",children:R.jsx("div",{className:"size-10 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):n?R.jsxs(DR,{children:[R.jsxs(CR,{children:[R.jsx(Ni,{path:"/",element:R.jsx(WB,{repos:s,user:n})}),R.jsx(Ni,{path:"/dashboard",element:R.jsx(JB,{repos:s})}),R.jsx(Ni,{path:"/config",element:R.jsx(KB,{repos:s,setRepos:o,user:n})}),R.jsx(Ni,{path:"/quick-issue",element:R.jsx(YB,{repos:s})}),R.jsx(Ni,{path:"/block/:id",element:R.jsx(QB,{})}),R.jsx(Ni,{path:"/conflicts",element:R.jsx(XB,{})})]}),R.jsx($B,{})]}):R.jsx(zB,{})},vC=document.getElementById("root");if(!vC)throw new Error("Could not find root element to mount to");const ZB=UA.createRoot(vC);ZB.render(R.jsx(fw.StrictMode,{children:R.jsx(jB,{})}));
